(()=>{"use strict";var t,e,i={606:(t,e,i)=>{var n=i(3174),s=i(6571),o=i.n(s),r=i(7871),a=i(4493),l=i(7007);class c{constructor(t){this._app=t}}class h extends c{constructor(t){super(t)}getCollisions(t){return[...this.getCollidingSpritesFromChildren(t,this._app.app.stage.children),...this.getCollidingSpritesFromChildren(t,this._app.viewport.children)]}isCollidingWith(t,e){const i=t.getBounds(),n=e.getBounds();return i.x<n.x+n.width&&i.x+i.width>n.x&&i.y<n.y+n.height&&i.y+n.height>n.y}getCollidingSpritesFromChildren(t,e){return e.filter((e=>e instanceof n.mcf&&e!==t&&this.isCollidingWith(t,e)))}}const u={isCollidable:!0,isTickable:!0,isResizable:!0};class d extends n.mcf{get isInitialized(){return this._isInitialized}get configuration(){return this._configuration}get isCollidable(){return this._isCollidable}isChild(){return null!==this.parent}constructor(t,e){super(),this._isDestroyed=!1,this._isInitialized=!1,this._isCollidable=!0,this._configuration=Object.assign(Object.assign({},u),e),this._app=t,this.configuration.isTickable&&this._app.app.ticker.add(this.onTickInternal.bind(this)),this.configuration.isResizable&&this._app.addListener(v.EVENT_RESIZE,this.onResizeInternal.bind(this))}requireIsInitialized(){if(!this.isInitialized)throw new Error("requireIsInitialized.")}initializeAsync(){return t=this,e=void 0,n=function*(){this._isInitialized||(this._isInitialized=!0)},new((i=void 0)||(i=Promise))((function(s,o){function r(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((n=n.apply(t,e||[])).next())}));var t,e,i,n}destroy(t){this.requireIsInitialized(),this._isDestroyed||(this.configuration.isTickable&&this._app.app.ticker.remove(this.onTickInternal.bind(this)),this.configuration.isResizable&&this._app.removeListener(v.EVENT_RESIZE,this.onResizeInternal.bind(this)),this._isDestroyed=!0,super.destroy(t))}onAdded(){}onRemoved(){}onResize(t){}onTick(t){}onCollision(t){}onTickInternal(t){this._isDestroyed||this.onTick(t)}onResizeInternal(t){this._isDestroyed||this.onResize(t)}}class p extends c{constructor(t){super(t),this._keyStateDictionary=new Map,window.addEventListener("keydown",this.onKeyDown.bind(this)),window.addEventListener("keyup",this.onKeyUp.bind(this))}isKeyDown(t){return this.getKeyStateByKey(t).isDown}isKeyDownThisFrame(t){let e=this.getKeyStateByKey(t),i=e.isDownThisFrame;return e.isDownThisFrame=!1,i}onKeyDown(t){let e=this.getKeyStateByKey(t.key);e.isDown?e.isDownThisFrame=!1:(e.isDown=!0,e.isDownThisFrame=!0)}onKeyUp(t){let e=this.getKeyStateByKey(t.key);e.isDown=!1,e.isDownThisFrame=!1}getKeyStateByKey(t){let e=this._keyStateDictionary.get(t);if(null==e){let e=new y;return this._keyStateDictionary.set(t,e),e}return e}update(){this._keyStateDictionary.forEach((t=>{t.isDownThisFrame=!1}))}}class y{constructor(){this.isDown=!1,this.isDownThisFrame=!1}}var f=i(2287);class m extends c{constructor(t){super(t),this._audioContextResumed=!1,this.setupAudioContextResume()}setupAudioContextResume(){const t=()=>{if(!this._audioContextResumed){const t=f.s3.context.audioContext;"suspended"===t.state?t.resume().then((()=>{this._audioContextResumed=!0,console.log("Audio context resumed")})).catch((t=>{console.error("Failed to resume audio context:",t)})):this._audioContextResumed=!0}};window.addEventListener("click",t,{once:!0}),window.addEventListener("touchstart",t,{once:!0}),window.addEventListener("keydown",t,{once:!0})}PlayAsync(t){return e=this,i=void 0,s=function*(){if(!this._audioContextResumed)return void console.warn("Audio context not resumed yet. Cannot play sound.");let e=f.AB.from({url:t,preload:!0,autoPlay:!1});for(;!e.isLoaded;)yield new Promise((t=>setTimeout(t,100)));e.speed=1,e.volume=1,e.play()},new((n=void 0)||(n=Promise))((function(t,o){function r(t){try{l(s.next(t))}catch(t){o(t)}}function a(t){try{l(s.throw(t))}catch(t){o(t)}}function l(e){var i;e.done?t(e.value):(i=e.value,i instanceof n?i:new n((function(t){t(i)}))).then(r,a)}l((s=s.apply(e,i||[])).next())}));var e,i,n,s}}const g={widthInitial:1920,heightInitial:1080,minFPS:1,maxFPS:240,backgroundColor:1087931,data:{}};class w{constructor(t){this.collisionSystem=new h(t),this.inputSystem=new p(t),this.audioSystem=new m(t)}}class v extends l.EventEmitter{get isInitialized(){return this._isInitialized}get isFullscreen(){return this._isFullscreen}set isFullscreen(t){this._isFullscreen=t;var e=document.getElementById(this.app.canvas.id);this._isFullscreen?(null==e?void 0:e.requestFullscreen)&&(null==e||e.requestFullscreen()):document.fullscreenEnabled&&document.exitFullscreen()}get systems(){return this._systems}get configuration(){return this._configuration}constructor(t="pixi-application-canvas",e){super(),this._isInitialized=!1,this._isFullscreen=!1,this._canvasId=t,this.app=new n.lgM,this._configuration=Object.assign(Object.assign({},g),e),this._systems=new w(this),this.setMaxListeners(100)}initializeAsync(){return t=this,e=void 0,s=function*(){if(!this._isInitialized)try{yield this.app.init({width:this.configuration.widthInitial,height:this.configuration.heightInitial,backgroundColor:this.configuration.backgroundColor,resizeTo:window,canvas:document.getElementById(this._canvasId)}),this.app.ticker.minFPS=this.configuration.minFPS,this.app.ticker.maxFPS=this.configuration.maxFPS,console.log(`PIXI.Application.init() success! PixiJS v${n.xvI} with ${this.GetRendererTypeAsString(this.app.renderer.type)} `),this.viewport=new a.LM({screenWidth:this.app.screen.width,screenHeight:this.app.screen.height,worldWidth:3e3,worldHeight:3e3,events:this.app.renderer.events}),this.viewport.center=this.getScreenCenterpoint(),this.app.ticker.add((t=>{this.viewport.update(t.deltaMS)})),this.emit(v.EVENT_INITIALIZE_COMPLETE,this),this.setupResizeHandling(),this._isInitialized=!0,this.addToStage(this.viewport),this.viewport.label="Viewport"}catch(t){console.log(`PIXI.Application.init() failed! PixiJS v${n.xvI} with ${this.GetRendererTypeAsString(this.app.renderer.type)} `),this.emit(v.EVENT_INITIALIZE_ERROR,t)}},new((i=void 0)||(i=Promise))((function(n,o){function r(t){try{l(s.next(t))}catch(t){o(t)}}function a(t){try{l(s.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((s=s.apply(t,e||[])).next())}));var t,e,i,s}requireIsInitialized(){if(!this.isInitialized)throw new Error("requireIsInitialized.")}GetRendererTypeAsString(t){let e="Unknown";return this.app.renderer.type===n.W3c.WEBGL?e="WebGL":this.app.renderer.type===n.W3c.WEBGPU&&(e="WebGPU"),e}addToViewport(t){this.requireIsInitialized(),this.viewport.addChild(t),(t instanceof d||t instanceof T)&&t.onAdded(),this.setupResizeHandling()}removeFromViewport(t){this.requireIsInitialized(),this.viewport.removeChild(t),(t instanceof d||t instanceof T)&&t.onRemoved(),this.setupResizeHandling()}addToStage(t,e){this.requireIsInitialized(),null==e?this.app.stage.addChild(t):e.addChild(t),(t instanceof d||t instanceof T)&&t.onAdded(),this.setupResizeHandling()}removeFromStage(t,e){this.requireIsInitialized(),null==e?this.app.stage.removeChild(t):e.removeChild(t),(t instanceof d||t instanceof T)&&t.onRemoved(),this.setupResizeHandling()}setupResizeHandling(){this.emit(v.EVENT_RESIZE,this);const t=()=>{setTimeout((()=>this.emit(v.EVENT_RESIZE,this)),100)};window.addEventListener("resize",t),window.addEventListener("orientationchange",t),this.setupResizeHandling()}getScreenScaleCurrent(){return new n.bRX(this.app.screen.width/this.configuration.widthInitial,this.app.screen.height/this.configuration.heightInitial)}getScreenCenterpoint(){return new n.bRX(this.app.screen.width/2,this.app.screen.height/2)}}v.EVENT_INITIALIZE_COMPLETE="initializeComplete",v.EVENT_INITIALIZE_ERROR="initializeError",v.EVENT_RESIZE="resize";class T extends n.EYj{constructor(t,e,i=8,s="left"){super({text:e,style:new n.xJt({fontFamily:"Arial",fontSize:i,fill:"#ffffff",align:s}),resolution:2}),this.label=T.name,this._app=t,t.app.ticker.add(this.onTick.bind(this)),this._app.addListener(v.EVENT_RESIZE,this.onResize.bind(this)),this.onResize(this._app)}isChild(){return null!==parent}onAdded(){}onRemoved(){}onResize(t){}onTick(t){}}class x extends T{onResize(t){this.x=t.configuration.data.ScreenUIMarginX,this.y=t.configuration.data.ScreenUIMarginY,this.style.fontSize=15+7/t.app.renderer.resolution;let e=Math.round(100*t.app.renderer.resolution)/100,i=Math.round(100*this.resolution)/100;this.text=`Arrows / WASD To Move\nEnter / Spacebar For Attack\nF For Fullscreen\n\n[Resolution: ${e}, ${i}]`}}class _ extends T{onResize(t){this.x=t.app.screen.width-this.width-t.configuration.data.ScreenUIMarginX,this.y=t.configuration.data.ScreenUIMarginY,this.style.fontSize=15+7/t.app.renderer.resolution}}class b{static textureIsNullOrEmpty(t){return null===t||t===n.gPd.EMPTY}static stringIsNullOrEmpty(t){return null===t||""===t}}const I={textureUrl:"",texture:n.gPd.EMPTY,isCollidable:!0,isTickable:!0,isResizable:!0};class E extends d{get configuration(){return this._configuration}constructor(t,e){var i,n;if(super(t,Object.assign(Object.assign({},I),e)),!b.textureIsNullOrEmpty(null===(i=this.configuration)||void 0===i?void 0:i.texture)&&!b.stringIsNullOrEmpty(null===(n=this.configuration)||void 0===n?void 0:n.textureUrl))throw new Error("You cannot set both texture and textureUrl in the configuration");this.label=E.name,this.initializeAsync()}initializeAsync(){const t=Object.create(null,{initializeAsync:{get:()=>super.initializeAsync}});return e=this,i=void 0,o=function*(){var e,i,s;if(yield t.initializeAsync.call(this),b.textureIsNullOrEmpty(null===(e=this.configuration)||void 0===e?void 0:e.texture)){if(!b.stringIsNullOrEmpty(null===(s=this.configuration)||void 0===s?void 0:s.textureUrl)){yield n.sP.load([this.configuration.textureUrl]);const t=n.gPd.from(this.configuration.textureUrl);this._sprite=new n.kxk(t)}}else this._sprite=new n.kxk(null===(i=this.configuration)||void 0===i?void 0:i.texture);this.addChild(this._sprite),this._sprite.anchor.set(.5,.5)},new((s=void 0)||(s=Promise))((function(t,n){function r(t){try{l(o.next(t))}catch(t){n(t)}}function a(t){try{l(o.throw(t))}catch(t){n(t)}}function l(e){var i;e.done?t(e.value):(i=e.value,i instanceof s?i:new s((function(t){t(i)}))).then(r,a)}l((o=o.apply(e,i||[])).next())}));var e,i,s,o}onTick(t){super.onTick(t)}}var z=i(1559);const S={textureUrl:"",texture:n.gPd.EMPTY,isCollidable:!0,isTickable:!0,isResizable:!0};class C extends E{constructor(t,e,i){super(t,Object.assign(Object.assign({},S),i)),this._Tilemap=e,this.label=C.name}initializeAsync(){const t=Object.create(null,{initializeAsync:{get:()=>super.initializeAsync}});return e=this,i=void 0,s=function*(){yield t.initializeAsync.call(this),this._sprite.filters=[new z.GD({blur:1,alpha:.5,quality:3,resolution:2})],this._sprite.anchor.set(0,0)},new((n=void 0)||(n=Promise))((function(t,o){function r(t){try{l(s.next(t))}catch(t){o(t)}}function a(t){try{l(s.throw(t))}catch(t){o(t)}}function l(e){var i;e.done?t(e.value):(i=e.value,i instanceof n?i:new n((function(t){t(i)}))).then(r,a)}l((s=s.apply(e,i||[])).next())}));var e,i,n,s}isCollisionWithTilemap(){let t=Math.round(this.position.x),e=Math.round(this.position.y),i=this._Tilemap.isCollision(t,e,32,32);return i&&console.log(`isCollisionWithTilemap (x=${t}, y=${e}) = ${i}`),i}onTick(t){super.onTick(t);let e=new n.bRX(0,0);this._app.systems.inputSystem.isKeyDown("a")&&(this.isCollisionWithTilemap(),e.x+=-1),this._app.systems.inputSystem.isKeyDown("d")&&(this.isCollisionWithTilemap(),e.x+=1),this._app.systems.inputSystem.isKeyDown("w")&&(this.isCollisionWithTilemap(),e.y+=-1),this._app.systems.inputSystem.isKeyDown("s")&&(this.isCollisionWithTilemap(),e.y+=1),(this._app.systems.inputSystem.isKeyDownThisFrame("Enter")||this._app.systems.inputSystem.isKeyDownThisFrame("Spacebar"))&&this._app.systems.audioSystem.PlayAsync("./assets/audio/Click01.wav"),this._app.systems.inputSystem.isKeyDownThisFrame("f")&&(this._app.isFullscreen=!this._app.isFullscreen),this.position.x+=e.x*t.deltaTime*3,this.position.y+=e.y*t.deltaTime*3}}class A{constructor(t,e){this._app=t,this._Tilemap=e}initializeAsync(){return t=this,e=void 0,n=function*(){this.collisionMap=this.createCollisionMap(this._Tilemap.tilemapData)},new((i=void 0)||(i=Promise))((function(s,o){function r(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((n=n.apply(t,e||[])).next())}));var t,e,i,n}createCollisionMap(t){if(!t.layers||!t.tilesets)throw new Error("Invalid tilemapData: layers or tilesets are missing");const e=t.layers,i=t.tilesets,n=Array.from({length:t.height},(()=>Array(t.width).fill(!1))),s={};return i.forEach((t=>{t.tiles&&t.tiles.forEach((e=>{e.properties&&e.properties.forEach((i=>{"IsCollision"===i.name&&(s[t.firstgid+e.id]=i.value)}))}))})),e.forEach((t=>{if("tilelayer"===t.type&&t.data)for(let e=0;e<t.height;e++)for(let i=0;i<t.width;i++){const o=t.data[e*t.width+i];s[o]&&(n[e][i]=!0)}})),n}isCollision(t,e,i,s){const o=new n.bRX(t,e),r=new n.bRX;this._app.app.stage.toGlobal(o,r);const a=this._Tilemap.tilemapData.tilewidth,l=this._Tilemap.tilemapData.tileheight,c=Math.floor((r.x-this._Tilemap.x)/a),h=Math.ceil((r.x-this._Tilemap.x+i)/a),u=Math.floor((r.y-this._Tilemap.y)/l),d=Math.ceil((r.y-this._Tilemap.y+s)/l),p=(Math.floor(o.x/a),Math.floor(o.y/l),Math.floor((r.x-this._Tilemap.x)/a),Math.floor((r.y-this._Tilemap.y)/l),new n.bRX);this._Tilemap.toGlobal(new n.bRX(0,0),p);for(let t=u;t<d;t++)for(let e=c;e<h;e++)if(t>=0&&t<this.collisionMap.length&&e>=0&&e<this.collisionMap[0].length&&this.collisionMap[t][e])return!0;return!1}}var R,k=function(t,e,i,n){return new(i||(i=Promise))((function(s,o){function r(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((n=n.apply(t,e||[])).next())}))};!function(t){t.TileLayer="tilelayer",t.ObjectGroup="objectgroup"}(R||(R={}));class P extends d{get tilemapData(){return this._tilemapData}constructor(t,e,i){super(t),this._tilemapDataUrl=e,this._TilemapItemFactory=i,this._TilemapCollisionSystem=new A(this._app,this),this.isRenderGroup=!0,this.label=P.name,this.position.set(0,0),this.scale.set(1),this.isRenderGroup=!0}get isInitialized(){return this._isInitialized}initializeAsync(){const t=Object.create(null,{initializeAsync:{get:()=>super.initializeAsync}});return k(this,void 0,void 0,(function*(){if(this.isInitialized)return;if(yield t.initializeAsync.call(this),this._isInitialized=!0,b.stringIsNullOrEmpty(this._tilemapDataUrl))throw new Error(`Tilemap.initializeAsync() file missing error. tilemapDataUrl = "${this._tilemapDataUrl}"`);if(!this._tilemapDataUrl.endsWith(".tmj"))throw new Error(`Tilemap.initializeAsync() file extension error. tilemapDataUrl = "${this._tilemapDataUrl}"`);let e;try{e=yield fetch(this._tilemapDataUrl)}catch(t){throw new Error(`Tilemap.initializeAsync() fetch error. tilemapDataUrl = "${this._tilemapDataUrl}"`)}try{this._tilemapData=yield e.json()}catch(t){throw new Error(`Tilemap.initializeAsync() json error. tilemapDataUrl = "${this._tilemapDataUrl}"`)}const i=this._tilemapData.tilesets.map((t=>{const e=t.image.replace("../","assets/");return n.sP.load(e).then((()=>Object.assign(Object.assign({},t),{texture:n.gPd.from(e)})))})),s=yield Promise.all(i);for(const t of this._tilemapData.layers)t.type===R.TileLayer?yield this.processTileLayer(t,s):t.type===R.ObjectGroup&&t.objects&&(yield this.processObjectLayer(t,s));this._TilemapCollisionSystem.initializeAsync()}))}requireIsInitialized(){throw new Error("Method not implemented.")}processTileLayer(t,e){return k(this,void 0,void 0,(function*(){for(let i=0;i<t.height;i++)for(let s=0;s<t.width;s++){const o=t.data?t.data[i*t.width+s]:0;if(o>0){const t=this.getTilesetForTile(o,e);if(t){const e=o-t.firstgid,r=e%t.columns*t.tilewidth,a=Math.floor(e/t.columns)*t.tileheight,l=new n.M_G(r,a,t.tilewidth,t.tileheight),c=new n.gPd({source:t.texture.source,frame:l}),h={x:s*t.tilewidth,y:i*t.tileheight,row:i,column:s,texture:c,layerType:R.TileLayer,type:this.getTileType(t,e)||""},u=yield this._TilemapItemFactory.createTilemapItem(h);u.label=`Tile (${i.toString().padStart(2,"0")},${s.toString().padStart(2,"0")})`,u.x=h.x,u.y=h.y,this.addChild(u)}}}}))}processObjectLayer(t,e){return k(this,void 0,void 0,(function*(){var i;for(const s of t.objects){const t=this.getTilesetForTile(s.gid,e);if(t){const e=s.gid-t.firstgid,o=e%t.columns*t.tilewidth,r=Math.floor(e/t.columns)*t.tileheight,a=new n.M_G(o,r,t.tilewidth,t.tileheight),l=new n.gPd({source:t.texture.source,frame:a});let c="",h=s.type,u=null===(i=this.getTileType(t,e))||void 0===i?void 0:i.toString();b.stringIsNullOrEmpty(h)?null==u||b.stringIsNullOrEmpty(u)||(c=u):c=h;const d=-1,p={x:s.x,y:s.y-t.tileheight,row:d,column:d,texture:l,layerType:R.ObjectGroup,type:c},y=yield this._TilemapItemFactory.createTilemapItem(p);y.label=`Object (${s.id})`,y.x=p.x,y.y=p.y,this.addChild(y)}}}))}isCollision(t,e,i,n){return this._TilemapCollisionSystem.isCollision(t,e,i,n)}onAdded(){return k(this,void 0,void 0,(function*(){yield this.initializeAsync()}))}getTilesetForTile(t,e){for(let i=e.length-1;i>=0;i--)if(t>=e[i].firstgid)return e[i];return null}onRemoved(){for(;this.children.length>0;){const t=this.removeChildAt(0);t instanceof n.kxk&&t.destroy({children:!0,texture:!0})}}onResize(t){}onTick(t){}getTileType(t,e){if(!t.tiles)return;const i=t.tiles.find((t=>t.id===e));return null==i?void 0:i.type}}const D={textureUrl:"",texture:n.gPd.EMPTY,isCollidable:!0,isTickable:!0,isResizable:!0};class O extends E{constructor(t,e){super(t,Object.assign(Object.assign({},D),e)),this.label=O.name}initializeAsync(){const t=Object.create(null,{initializeAsync:{get:()=>super.initializeAsync}});return e=this,i=void 0,s=function*(){yield t.initializeAsync.call(this)},new((n=void 0)||(n=Promise))((function(t,o){function r(t){try{l(s.next(t))}catch(t){o(t)}}function a(t){try{l(s.throw(t))}catch(t){o(t)}}function l(e){var i;e.done?t(e.value):(i=e.value,i instanceof n?i:new n((function(t){t(i)}))).then(r,a)}l((s=s.apply(e,i||[])).next())}));var e,i,n,s}}var j=function(t,e,i,n){return new(i||(i=Promise))((function(s,o){function r(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((n=n.apply(t,e||[])).next())}))};class F{constructor(t,e){this._textureImageURL=t,this._spriteSheetURL=e,this._animationNameToAnimatedSprite=new Map}initializeAndReparent(t,e){return j(this,void 0,void 0,(function*(){const t=yield fetch(this._spriteSheetURL),i=yield t.json();yield n.sP.load(this._textureImageURL);const s=n.gPd.from(this._textureImageURL),o=new n.zo6(s,i);yield o.parse();const r=new n.bRX(i.meta.size.w,i.meta.size.h);for(const[t,e]of Object.entries(o.animations))this._animationNameToAnimatedSprite.set(t,new n.Dl5(e));this._animationNameToAnimatedSprite.forEach(((t,i)=>{t.setSize(r.x,r.y),t.label=F.name,t.anchor.set(.5,.5),e.addChild(t)}))}))}play(t,e){const i=this._animationNameToAnimatedSprite.get(t);if(null==i)throw new Error("Trying to play unknown animation with animationName="+t);i.animationSpeed=e,i.play()}}const M={isCollidable:!0,isTickable:!0,isResizable:!0};class U extends d{get configuration(){return this._configuration}constructor(t,e){super(t,Object.assign(Object.assign({},M),e)),this.label=U.name,this.initializeAsync()}initializeAsync(){const t=Object.create(null,{initializeAsync:{get:()=>super.initializeAsync}});return j(this,void 0,void 0,(function*(){yield t.initializeAsync.call(this),this._multiAnimatedSprite=new F("assets/images/AnimatedCoin/animated_coin.png","assets/images/AnimatedCoin/animated_coin.json"),yield this._multiAnimatedSprite.initializeAndReparent(this._app,this),this._multiAnimatedSprite.play("Gold",.3)}))}onTick(t){super.onTick(t)}}const L={ActorContainer:d,Tilemap:P,TilemapCollisionSystem:A,TilemapItemFactoryDefault:class{constructor(t){this._app=t}createTilemapItem(t){return e=this,i=void 0,o=function*(){switch(t.layerType){case R.TileLayer:case R.ObjectGroup:return new n.kxk(t.texture);default:throw new Error("Invalid layer type")}},new((s=void 0)||(s=Promise))((function(t,n){function r(t){try{l(o.next(t))}catch(t){n(t)}}function a(t){try{l(o.throw(t))}catch(t){n(t)}}function l(e){var i;e.done?t(e.value):(i=e.value,i instanceof s?i:new s((function(t){t(i)}))).then(r,a)}l((o=o.apply(e,i||[])).next())}));var e,i,s,o}},TilemapObject:O,ActorStatic:E,ActorAnimated:U,GixiApplication:v,GixiUtility:b};class N extends O{constructor(t,e){super(t,e),this.label=N.name}initializeAsync(){const t=Object.create(null,{initializeAsync:{get:()=>super.initializeAsync}});return e=this,i=void 0,s=function*(){yield t.initializeAsync.call(this),this.filters=[new z.GD({blur:1,alpha:.5,quality:3,resolution:2})]},new((n=void 0)||(n=Promise))((function(t,o){function r(t){try{l(s.next(t))}catch(t){o(t)}}function a(t){try{l(s.throw(t))}catch(t){o(t)}}function l(e){var i;e.done?t(e.value):(i=e.value,i instanceof n?i:new n((function(t){t(i)}))).then(r,a)}l((s=s.apply(e,i||[])).next())}));var e,i,n,s}onTick(t){super.onTick(t),this.rotation+=.01*t.deltaTime}onCollision(t){this._isCollidable&&(console.log("ChestTilemapObject.onCollision()"),t.forEach((t=>{t instanceof C&&(this._isCollidable=!1,this.destroy())})))}}class G extends U{constructor(t,e){super(t,e),this.label=G.name}initializeAsync(){const t=Object.create(null,{initializeAsync:{get:()=>super.initializeAsync}});return e=this,i=void 0,s=function*(){yield t.initializeAsync.call(this),this.filters=[new z.GD({blur:1,alpha:.5,quality:3,resolution:2})]},new((n=void 0)||(n=Promise))((function(t,o){function r(t){try{l(s.next(t))}catch(t){o(t)}}function a(t){try{l(s.throw(t))}catch(t){o(t)}}function l(e){var i;e.done?t(e.value):(i=e.value,i instanceof n?i:new n((function(t){t(i)}))).then(r,a)}l((s=s.apply(e,i||[])).next())}));var e,i,n,s}FloatUp(){r.En.sequence(r.En.delay(0),r.En.runFunc((()=>{})),r.En.parallel(r.En.moveTo(this,this.x,this.y-32,20,r.Uq.smooth2),r.En.scaleTo(this,2,2,20,r.Uq.smooth2)),r.En.runFunc((()=>{this.destroy()}))).play()}onCollision(t){this._isCollidable&&t.forEach((t=>{t instanceof C&&(console.log(`${this.label} is colliding with ${t.label}`),this._isCollidable=!1,this.FloatUp())}))}}class ${constructor(t){this._app=t}createTilemapItem(t){return e=this,i=void 0,o=function*(){switch(t.layerType){case R.TileLayer:return new n.kxk(t.texture);case R.ObjectGroup:return t.type==N.name?new N(this._app,{texture:t.texture}):t.type==G.name?new G(this._app):new n.kxk(t.texture);default:throw new Error("Invalid layer type")}},new((s=void 0)||(s=Promise))((function(t,n){function r(t){try{l(o.next(t))}catch(t){n(t)}}function a(t){try{l(o.throw(t))}catch(t){n(t)}}function l(e){var i;e.done?t(e.value):(i=e.value,i instanceof s?i:new s((function(t){t(i)}))).then(r,a)}l((o=o.apply(e,i||[])).next())}));var e,i,s,o}}var K=function(t,e,i,n){return new(i||(i=Promise))((function(s,o){function r(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((n=n.apply(t,e||[])).next())}))};n.kpn.defaultOptions.roundPixels=!0,n.kpn.defaultOptions.resolution=window.devicePixelRatio||1;const q={LogoImageUrl:"assets/images/pixijs-logo-32x32.png",TilemapDataUrl:"assets/tilemaps/TreasureHunter2D.tmj",PlayerTextureUrl:"assets/images/player-default-sprite.png",CoinsCollected:0,CoinsMax:5,ScreenUIMarginX:10,ScreenUIMarginY:10};let V,W;const X=new v("pixi-application-canvas",{widthInitial:1920,heightInitial:1080,minFPS:1,maxFPS:240,backgroundColor:8881786,data:q}),B=new(o());B.showPanel(0),B.dom.className="stats-panel",document.body.appendChild(B.dom),globalThis.__PIXI_APP__=X.app,X.addListener(v.EVENT_INITIALIZE_COMPLETE,(function(t){return K(this,void 0,void 0,(function*(){var e,i;const s=new L.Tilemap(t,q.TilemapDataUrl,new $(t));yield s.initializeAsync(),t.addToViewport(s),s.x=t.getScreenCenterpoint().x-s.width/2,s.y=t.getScreenCenterpoint().y-s.height/2,W=(new n.A1g).rect(0,0,32,32).fill({color:16777215,alpha:.5}),t.addToViewport(W),W.x=t.getScreenCenterpoint().x,W.y=t.getScreenCenterpoint().y,V=new C(t,s,{textureUrl:q.PlayerTextureUrl}),t.addToViewport(V),V.x=t.getScreenCenterpoint().x,V.y=t.getScreenCenterpoint().y,t.viewport.follow(V,{speed:1,acceleration:1,radius:20});const o=new x(t,"SEE INSIDE CLASS",30,"left");t.addToStage(o);const a=new _(t,`Coins ${null===(e=t.configuration.data)||void 0===e?void 0:e.CoinsCollected}/${null===(i=t.configuration.data)||void 0===i?void 0:i.CoinsMax}`,30,"right");t.addToStage(a),t.app.ticker.add((t=>{B.begin(),r.En.tick(t.deltaTime),B.end()}))}))})),X.addListener(v.EVENT_INITIALIZE_ERROR,(function(t){console.error(`PIXI.Application.init() failed. error = ${t}`)})),K(void 0,void 0,void 0,(function*(){yield X.initializeAsync()}))}},n={};function s(t){var e=n[t];if(void 0!==e)return e.exports;var o=n[t]={exports:{}};return i[t].call(o.exports,o,o.exports,s),o.exports}s.m=i,t=[],s.O=(e,i,n,o)=>{if(!i){var r=1/0;for(h=0;h<t.length;h++){for(var[i,n,o]=t[h],a=!0,l=0;l<i.length;l++)(!1&o||r>=o)&&Object.keys(s.O).every((t=>s.O[t](i[l])))?i.splice(l--,1):(a=!1,o<r&&(r=o));if(a){t.splice(h--,1);var c=n();void 0!==c&&(e=c)}}return e}o=o||0;for(var h=t.length;h>0&&t[h-1][2]>o;h--)t[h]=t[h-1];t[h]=[i,n,o]},s.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e},s.d=(t,e)=>{for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},s.f={},s.e=t=>Promise.all(Object.keys(s.f).reduce(((e,i)=>(s.f[i](t,e),e)),[])),s.u=t=>t+"."+{142:"6f46ecf1ff524851e045",151:"061e9e13269897ecbd38",162:"1046d09f72d0e3563e18",421:"796907ff150e4ce2813a",440:"d6ee605c48ad4a368abe",751:"1c7e18eea6655a094d79",852:"15740e5671b245293199"}[t]+".bundle.js",s.miniCssF=t=>{},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),e={},s.l=(t,i,n,o)=>{if(e[t])e[t].push(i);else{var r,a;if(void 0!==n)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var h=l[c];if(h.getAttribute("src")==t){r=h;break}}r||(a=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,s.nc&&r.setAttribute("nonce",s.nc),r.src=t),e[t]=[i];var u=(i,n)=>{r.onerror=r.onload=null,clearTimeout(d);var s=e[t];if(delete e[t],r.parentNode&&r.parentNode.removeChild(r),s&&s.forEach((t=>t(n))),i)return i(n)},d=setTimeout(u.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=u.bind(null,r.onerror),r.onload=u.bind(null,r.onload),a&&document.head.appendChild(r)}},s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;s.g.importScripts&&(t=s.g.location+"");var e=s.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");if(i.length)for(var n=i.length-1;n>-1&&(!t||!/^http(s?):/.test(t));)t=i[n--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=t})(),(()=>{var t={792:0};s.f.j=(e,i)=>{var n=s.o(t,e)?t[e]:void 0;if(0!==n)if(n)i.push(n[2]);else{var o=new Promise(((i,s)=>n=t[e]=[i,s]));i.push(n[2]=o);var r=s.p+s.u(e),a=new Error;s.l(r,(i=>{if(s.o(t,e)&&(0!==(n=t[e])&&(t[e]=void 0),n)){var o=i&&("load"===i.type?"missing":i.type),r=i&&i.target&&i.target.src;a.message="Loading chunk "+e+" failed.\n("+o+": "+r+")",a.name="ChunkLoadError",a.type=o,a.request=r,n[1](a)}}),"chunk-"+e,e)}},s.O.j=e=>0===t[e];var e=(e,i)=>{var n,o,[r,a,l]=i,c=0;if(r.some((e=>0!==t[e]))){for(n in a)s.o(a,n)&&(s.m[n]=a[n]);if(l)var h=l(s)}for(e&&e(i);c<r.length;c++)o=r[c],s.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return s.O(h)},i=self.webpackChunk=self.webpackChunk||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})();var o=s.O(void 0,[75],(()=>s(606)));o=s.O(o)})();
//# sourceMappingURL=main.9fdf0f89b7cac4bf9817.bundle.js.map