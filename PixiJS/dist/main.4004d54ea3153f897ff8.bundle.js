(()=>{"use strict";var t,i,e={606:(t,i,e)=>{var n=e(3174),s=e(6571),o=e.n(s),r=e(7871),a=e(4493),l=e(7007);class c{constructor(t){this._app=t}}class h extends c{constructor(t){super(t)}getCollisions(t){return[...this.getCollidingSpritesFromChildren(t,this._app.app.stage.children),...this.getCollidingSpritesFromChildren(t,this._app.viewport.children)]}isCollidingWith(t,i){const e=t.getBounds(),n=i.getBounds();return e.x<n.x+n.width&&e.x+e.width>n.x&&e.y<n.y+n.height&&e.y+n.height>n.y}getCollidingSpritesFromChildren(t,i){return i.filter((i=>i instanceof n.mcf&&i!==t&&this.isCollidingWith(t,i)))}}const u={isCollidable:!0,isTickable:!0,isResizable:!0};class d extends n.mcf{get isInitialized(){return this._isInitialized}get configuration(){return this._configuration}get isCollidable(){return this._isCollidable}isChild(){return null!==this.parent}constructor(t,i){super(),this._isDestroyed=!1,this._isInitialized=!1,this._isCollidable=!0,this._configuration=Object.assign(Object.assign({},u),i),this._app=t,this.configuration.isTickable&&this._app.app.ticker.add(this.onTickInternal.bind(this)),this.configuration.isResizable&&this._app.addListener(T.EVENT_RESIZE,this.onResizeInternal.bind(this))}requireIsInitialized(){if(!this.isInitialized)throw new Error("requireIsInitialized.")}initializeAsync(){return t=this,i=void 0,n=function*(){this._isInitialized||(this._isInitialized=!0)},new((e=void 0)||(e=Promise))((function(s,o){function r(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var i;t.done?s(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(r,a)}l((n=n.apply(t,i||[])).next())}));var t,i,e,n}destroy(t){this.requireIsInitialized(),this._isDestroyed||(this.configuration.isTickable&&this._app.app.ticker.remove(this.onTickInternal.bind(this)),this.configuration.isResizable&&this._app.removeListener(T.EVENT_RESIZE,this.onResizeInternal.bind(this)),this._isDestroyed=!0,super.destroy(t))}onAdded(){}onRemoved(){}onResize(t){}onTick(t){const i=this._app.systems.collisionSystem.getCollisions(this);i.length&&this.onCollision(i)}onCollision(t){}onTickInternal(t){this._isDestroyed||this.onTick(t)}onResizeInternal(t){this._isDestroyed||this.onResize(t)}}class p extends c{constructor(t){super(t),this._keyStateDictionary=new Map,window.addEventListener("keydown",this.onKeyDown.bind(this)),window.addEventListener("keyup",this.onKeyUp.bind(this))}isKeyDown(t){return this.getKeyStateByKey(t).isDown}isKeyDownThisFrame(t){let i=this.getKeyStateByKey(t),e=i.isDownThisFrame;return i.isDownThisFrame=!1,e}onKeyDown(t){let i=this.getKeyStateByKey(t.key);i.isDown?i.isDownThisFrame=!1:(i.isDown=!0,i.isDownThisFrame=!0)}onKeyUp(t){let i=this.getKeyStateByKey(t.key);i.isDown=!1,i.isDownThisFrame=!1}getKeyStateByKey(t){let i=this._keyStateDictionary.get(t);if(null==i){let i=new y;return this._keyStateDictionary.set(t,i),i}return i}update(){this._keyStateDictionary.forEach((t=>{t.isDownThisFrame=!1}))}}class y{constructor(){this.isDown=!1,this.isDownThisFrame=!1}}var f=e(2287),m=function(t,i,e,n){return new(e||(e=Promise))((function(s,o){function r(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var i;t.done?s(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(r,a)}l((n=n.apply(t,i||[])).next())}))};class g extends c{constructor(t){super(t),this._audioContextResumed=!1,this.setupAudioContextResume()}setupAudioContextResume(){const t=()=>{if(!this._audioContextResumed){const t=f.s3.context.audioContext;"suspended"===t.state?t.resume().then((()=>{this._audioContextResumed=!0,console.log("Audio context resumed")})).catch((t=>{console.error("Failed to resume audio context:",t)})):this._audioContextResumed=!0}};window.addEventListener("click",t,{once:!0}),window.addEventListener("touchstart",t,{once:!0}),window.addEventListener("keydown",t,{once:!0})}Play(t){return m(this,void 0,void 0,(function*(){this.PlayAsync(t)}))}PlayAsync(t){return m(this,void 0,void 0,(function*(){if(!this._audioContextResumed)return void console.warn("Audio context not resumed yet. Cannot play sound.");let i=f.AB.from({url:t,preload:!0,autoPlay:!1});for(;!i.isLoaded;)yield new Promise((t=>setTimeout(t,100)));i.speed=1,i.volume=1,i.play()}))}}const w={widthInitial:1920,heightInitial:1080,minFPS:1,maxFPS:240,backgroundColor:1087931,data:{}};class v{constructor(t){this.collisionSystem=new h(t),this.inputSystem=new p(t),this.audioSystem=new g(t)}}class T extends l.EventEmitter{get isInitialized(){return this._isInitialized}get isFullscreen(){return this._isFullscreen}set isFullscreen(t){this._isFullscreen=t;var i=document.getElementById(this.app.canvas.id);console.log(this.app.canvas.id),this._isFullscreen?(null==i?void 0:i.requestFullscreen)&&(null==i||i.requestFullscreen()):document.fullscreenEnabled&&document.exitFullscreen()}get systems(){return this._systems}get configuration(){return this._configuration}constructor(t="pixi-application-canvas",i){super(),this._isInitialized=!1,this._isFullscreen=!1,this.resize=()=>{this.emit(T.EVENT_RESIZE,this)},this._canvasId=t,this.app=new n.lgM,this._configuration=Object.assign(Object.assign({},w),i),this._systems=new v(this),this.setMaxListeners(100)}initializeAsync(){return t=this,i=void 0,s=function*(){if(!this._isInitialized){this._isInitialized=!0,console.log("initializeAsync()"+this._isInitialized);try{yield this.app.init({width:this.configuration.widthInitial,height:this.configuration.heightInitial,backgroundColor:this.configuration.backgroundColor,resizeTo:window,canvas:document.getElementById(this._canvasId)}),this.app.ticker.minFPS=this.configuration.minFPS,this.app.ticker.maxFPS=this.configuration.maxFPS,console.log(`PIXI.Application.init() success! PixiJS v${n.xvI} with ${this.GetRendererTypeAsString(this.app.renderer.type)} `),this.viewport=new a.LM({screenWidth:this.app.screen.width,screenHeight:this.app.screen.height,worldWidth:3e3,worldHeight:3e3,events:this.app.renderer.events}),this.viewport.center=this.getScreenCenterpoint(),this.app.ticker.add((t=>{this.viewport.update(t.deltaMS)})),this.emit(T.EVENT_INITIALIZE_COMPLETE,this),this.setupResizeHandling(),this.addToStage(this.viewport),this.viewport.label="Viewport"}catch(t){console.log(`PIXI.Application.init() failed! PixiJS v${n.xvI} with ${this.GetRendererTypeAsString(this.app.renderer.type)} `),this.emit(T.EVENT_INITIALIZE_ERROR,t)}}},new((e=void 0)||(e=Promise))((function(n,o){function r(t){try{l(s.next(t))}catch(t){o(t)}}function a(t){try{l(s.throw(t))}catch(t){o(t)}}function l(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(r,a)}l((s=s.apply(t,i||[])).next())}));var t,i,e,s}requireIsInitialized(){if(!this.isInitialized)throw new Error("requireIsInitialized.")}GetRendererTypeAsString(t){let i="Unknown";return this.app.renderer.type===n.W3c.WEBGL?i="WebGL":this.app.renderer.type===n.W3c.WEBGPU&&(i="WebGPU"),i}addToViewport(t){console.log("addToViewport()"+this._isInitialized),this.requireIsInitialized(),this.viewport.addChild(t),(t instanceof d||t instanceof x)&&t.onAdded(),this.resize()}removeFromViewport(t){this.requireIsInitialized(),this.viewport.removeChild(t),(t instanceof d||t instanceof x)&&t.onRemoved(),this.resize()}addToStage(t,i){this.requireIsInitialized(),null==i?this.app.stage.addChild(t):i.addChild(t),(t instanceof d||t instanceof x)&&t.onAdded(),this.resize()}removeFromStage(t,i){this.requireIsInitialized(),null==i?this.app.stage.removeChild(t):i.removeChild(t),(t instanceof d||t instanceof x)&&t.onRemoved(),this.resize()}setupResizeHandling(){const t=()=>{setTimeout(this.resize,100)};window.addEventListener("resize",this.resize),window.addEventListener("resize",t),window.addEventListener("orientationchange",this.resize),window.addEventListener("orientationchange",t),this.resize()}getScreenScaleCurrent(){return new n.bRX(this.app.screen.width/this.configuration.widthInitial,this.app.screen.height/this.configuration.heightInitial)}getScreenCenterpoint(){return new n.bRX(this.app.screen.width/2,this.app.screen.height/2)}}T.EVENT_INITIALIZE_COMPLETE="initializeComplete",T.EVENT_INITIALIZE_ERROR="initializeError",T.EVENT_RESIZE="resize";class x extends n.EYj{constructor(t,i,e=8,s="left"){super({text:i,style:new n.xJt({fontFamily:"Arial",fontSize:e,fill:"#ffffff",align:s}),resolution:2}),this.label=x.name,this._app=t,t.app.ticker.add(this.onTick.bind(this)),this._app.addListener(T.EVENT_RESIZE,this.onResize.bind(this)),this.onResize(this._app)}isChild(){return null!==parent}onAdded(){}onRemoved(){}onResize(t){}onTick(t){}}class _ extends x{onResize(t){this.x=t.configuration.data.ScreenUIMarginX,this.y=t.configuration.data.ScreenUIMarginY,this.style.fontSize=15+7/t.app.renderer.resolution;let i=Math.round(100*t.app.renderer.resolution)/100,e=Math.round(100*this.resolution)/100;this.text=`Arrows / WASD To Move\nEnter / Spacebar For Attack\nF For Fullscreen\n\n[Resolution: ${i}, ${e}]`}}class b extends x{onResize(t){this.x=t.app.screen.width-this.width-t.configuration.data.ScreenUIMarginX,this.y=t.configuration.data.ScreenUIMarginY,this.style.fontSize=15+7/t.app.renderer.resolution}}class I{static textureIsNullOrEmpty(t){return null===t||t===n.gPd.EMPTY}static stringIsNullOrEmpty(t){return null===t||""===t}}const E={textureUrl:"",texture:n.gPd.EMPTY,isCollidable:!0,isTickable:!0,isResizable:!0};class z extends d{get configuration(){return this._configuration}constructor(t,i){var e,n;if(super(t,Object.assign(Object.assign({},E),i)),!I.textureIsNullOrEmpty(null===(e=this.configuration)||void 0===e?void 0:e.texture)&&!I.stringIsNullOrEmpty(null===(n=this.configuration)||void 0===n?void 0:n.textureUrl))throw new Error("You cannot set both texture and textureUrl in the configuration");this.label=z.name,this.initializeAsync()}initializeAsync(){const t=Object.create(null,{initializeAsync:{get:()=>super.initializeAsync}});return i=this,e=void 0,o=function*(){var i,e,s;if(yield t.initializeAsync.call(this),I.textureIsNullOrEmpty(null===(i=this.configuration)||void 0===i?void 0:i.texture)){if(!I.stringIsNullOrEmpty(null===(s=this.configuration)||void 0===s?void 0:s.textureUrl)){yield n.sP.load([this.configuration.textureUrl]);const t=n.gPd.from(this.configuration.textureUrl);this._sprite=new n.kxk(t)}}else this._sprite=new n.kxk(null===(e=this.configuration)||void 0===e?void 0:e.texture);this.addChild(this._sprite),this._sprite.anchor.set(.5,.5)},new((s=void 0)||(s=Promise))((function(t,n){function r(t){try{l(o.next(t))}catch(t){n(t)}}function a(t){try{l(o.throw(t))}catch(t){n(t)}}function l(i){var e;i.done?t(i.value):(e=i.value,e instanceof s?e:new s((function(t){t(e)}))).then(r,a)}l((o=o.apply(i,e||[])).next())}));var i,e,s,o}onTick(t){super.onTick(t)}}var S=e(1559);const A={textureUrl:"",texture:n.gPd.EMPTY,isCollidable:!0,isTickable:!0,isResizable:!0};class C extends z{constructor(t,i,e){super(t,Object.assign(Object.assign({},A),e)),this._Tilemap=i,this.label=C.name}initializeAsync(){const t=Object.create(null,{initializeAsync:{get:()=>super.initializeAsync}});return i=this,e=void 0,s=function*(){yield t.initializeAsync.call(this),this._sprite.filters=[new S.GD({blur:1,alpha:.5,quality:3,resolution:2})],this._sprite.anchor.set(0,0)},new((n=void 0)||(n=Promise))((function(t,o){function r(t){try{l(s.next(t))}catch(t){o(t)}}function a(t){try{l(s.throw(t))}catch(t){o(t)}}function l(i){var e;i.done?t(i.value):(e=i.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}l((s=s.apply(i,e||[])).next())}));var i,e,n,s}isCollisionWithTilemap(){let t=Math.round(this.position.x),i=Math.round(this.position.y),e=this._Tilemap.isCollision(t,i,32,32);return e&&console.log(`isCollisionWithTilemap (x=${t}, y=${i}) = ${e}`),e}onTick(t){super.onTick(t);let i=new n.bRX(0,0);this._app.systems.inputSystem.isKeyDown("a")&&(this.isCollisionWithTilemap(),i.x+=-1),this._app.systems.inputSystem.isKeyDown("d")&&(this.isCollisionWithTilemap(),i.x+=1),this._app.systems.inputSystem.isKeyDown("w")&&(this.isCollisionWithTilemap(),i.y+=-1),this._app.systems.inputSystem.isKeyDown("s")&&(this.isCollisionWithTilemap(),i.y+=1),(this._app.systems.inputSystem.isKeyDownThisFrame("Enter")||this._app.systems.inputSystem.isKeyDownThisFrame("Spacebar"))&&this._app.systems.audioSystem.Play("./assets/audio/Click01.wav"),this._app.systems.inputSystem.isKeyDownThisFrame("f")&&(this._app.isFullscreen=!this._app.isFullscreen),this.position.x+=i.x*t.deltaTime*3,this.position.y+=i.y*t.deltaTime*3}}class k{constructor(t,i){this._app=t,this._Tilemap=i}initializeAsync(){return t=this,i=void 0,n=function*(){this.collisionMap=this.createCollisionMap(this._Tilemap.tilemapData)},new((e=void 0)||(e=Promise))((function(s,o){function r(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var i;t.done?s(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(r,a)}l((n=n.apply(t,i||[])).next())}));var t,i,e,n}createCollisionMap(t){if(!t.layers||!t.tilesets)throw new Error("Invalid tilemapData: layers or tilesets are missing");const i=t.layers,e=t.tilesets,n=Array.from({length:t.height},(()=>Array(t.width).fill(!1))),s={};return e.forEach((t=>{t.tiles&&t.tiles.forEach((i=>{i.properties&&i.properties.forEach((e=>{"IsCollision"===e.name&&(s[t.firstgid+i.id]=e.value)}))}))})),i.forEach((t=>{if("tilelayer"===t.type&&t.data)for(let i=0;i<t.height;i++)for(let e=0;e<t.width;e++){const o=t.data[i*t.width+e];s[o]&&(n[i][e]=!0)}})),n}isCollision(t,i,e,s){const o=new n.bRX(t,i),r=new n.bRX;this._app.app.stage.toGlobal(o,r);const a=this._Tilemap.tilemapData.tilewidth,l=this._Tilemap.tilemapData.tileheight,c=Math.floor((r.x-this._Tilemap.x)/a),h=Math.ceil((r.x-this._Tilemap.x+e)/a),u=Math.floor((r.y-this._Tilemap.y)/l),d=Math.ceil((r.y-this._Tilemap.y+s)/l),p=(Math.floor(o.x/a),Math.floor(o.y/l),Math.floor((r.x-this._Tilemap.x)/a),Math.floor((r.y-this._Tilemap.y)/l),new n.bRX);this._Tilemap.toGlobal(new n.bRX(0,0),p);for(let t=u;t<d;t++)for(let i=c;i<h;i++)if(t>=0&&t<this.collisionMap.length&&i>=0&&i<this.collisionMap[0].length&&this.collisionMap[t][i])return!0;return!1}}var P,R=function(t,i,e,n){return new(e||(e=Promise))((function(s,o){function r(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var i;t.done?s(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(r,a)}l((n=n.apply(t,i||[])).next())}))};!function(t){t.TileLayer="tilelayer",t.ObjectGroup="objectgroup"}(P||(P={}));class D extends d{get tilemapData(){return this._tilemapData}constructor(t,i,e){super(t),this._tilemapDataUrl=i,this._TilemapItemFactory=e,this._TilemapCollisionSystem=new k(this._app,this),this.isRenderGroup=!0,this.label=D.name,this.position.set(0,0),this.scale.set(1),this.isRenderGroup=!0}get isInitialized(){return this._isInitialized}initializeAsync(){const t=Object.create(null,{initializeAsync:{get:()=>super.initializeAsync}});return R(this,void 0,void 0,(function*(){if(this.isInitialized)return;if(yield t.initializeAsync.call(this),this._isInitialized=!0,I.stringIsNullOrEmpty(this._tilemapDataUrl))throw new Error(`Tilemap.initializeAsync() file missing error. tilemapDataUrl = "${this._tilemapDataUrl}"`);if(!this._tilemapDataUrl.endsWith(".tmj"))throw new Error(`Tilemap.initializeAsync() file extension error. tilemapDataUrl = "${this._tilemapDataUrl}"`);let i;try{i=yield fetch(this._tilemapDataUrl)}catch(t){throw new Error(`Tilemap.initializeAsync() fetch error. tilemapDataUrl = "${this._tilemapDataUrl}"`)}try{this._tilemapData=yield i.json()}catch(t){throw new Error(`Tilemap.initializeAsync() json error. tilemapDataUrl = "${this._tilemapDataUrl}"`)}const e=this._tilemapData.tilesets.map((t=>{const i=t.image.replace("../","assets/");return n.sP.load(i).then((()=>Object.assign(Object.assign({},t),{texture:n.gPd.from(i)})))})),s=yield Promise.all(e);for(const t of this._tilemapData.layers)t.type===P.TileLayer?yield this.processTileLayer(t,s):t.type===P.ObjectGroup&&t.objects&&(yield this.processObjectLayer(t,s));this._TilemapCollisionSystem.initializeAsync()}))}requireIsInitialized(){throw new Error("Method not implemented.")}processTileLayer(t,i){return R(this,void 0,void 0,(function*(){for(let e=0;e<t.height;e++)for(let s=0;s<t.width;s++){const o=t.data?t.data[e*t.width+s]:0;if(o>0){const t=this.getTilesetForTile(o,i);if(t){const i=o-t.firstgid,r=i%t.columns*t.tilewidth,a=Math.floor(i/t.columns)*t.tileheight,l=new n.M_G(r,a,t.tilewidth,t.tileheight),c=new n.gPd({source:t.texture.source,frame:l}),h={x:s*t.tilewidth,y:e*t.tileheight,row:e,column:s,texture:c,layerType:P.TileLayer,type:this.getTileType(t,i)||""},u=yield this._TilemapItemFactory.createTilemapItem(h);u.label=`Tile (${e.toString().padStart(2,"0")},${s.toString().padStart(2,"0")})`,u.x=h.x,u.y=h.y,this.addChild(u)}}}}))}processObjectLayer(t,i){return R(this,void 0,void 0,(function*(){var e;for(const s of t.objects){const t=this.getTilesetForTile(s.gid,i);if(t){const i=s.gid-t.firstgid,o=i%t.columns*t.tilewidth,r=Math.floor(i/t.columns)*t.tileheight,a=new n.M_G(o,r,t.tilewidth,t.tileheight),l=new n.gPd({source:t.texture.source,frame:a});let c="",h=s.type,u=null===(e=this.getTileType(t,i))||void 0===e?void 0:e.toString();I.stringIsNullOrEmpty(h)?null==u||I.stringIsNullOrEmpty(u)||(c=u):c=h;const d=-1,p={x:s.x,y:s.y-t.tileheight,row:d,column:d,texture:l,layerType:P.ObjectGroup,type:c},y=yield this._TilemapItemFactory.createTilemapItem(p);y.label=`Object (${s.id})`,y.x=p.x,y.y=p.y,this.addChild(y)}}}))}isCollision(t,i,e,n){return this._TilemapCollisionSystem.isCollision(t,i,e,n)}onAdded(){return R(this,void 0,void 0,(function*(){yield this.initializeAsync()}))}getTilesetForTile(t,i){for(let e=i.length-1;e>=0;e--)if(t>=i[e].firstgid)return i[e];return null}onRemoved(){for(;this.children.length>0;){const t=this.removeChildAt(0);t instanceof n.kxk&&t.destroy({children:!0,texture:!0})}}onResize(t){}onTick(t){}getTileType(t,i){if(!t.tiles)return;const e=t.tiles.find((t=>t.id===i));return null==e?void 0:e.type}}const O={textureUrl:"",texture:n.gPd.EMPTY,isCollidable:!0,isTickable:!0,isResizable:!0};class F extends z{constructor(t,i){super(t,Object.assign(Object.assign({},O),i)),this.label=F.name}initializeAsync(){const t=Object.create(null,{initializeAsync:{get:()=>super.initializeAsync}});return i=this,e=void 0,s=function*(){yield t.initializeAsync.call(this)},new((n=void 0)||(n=Promise))((function(t,o){function r(t){try{l(s.next(t))}catch(t){o(t)}}function a(t){try{l(s.throw(t))}catch(t){o(t)}}function l(i){var e;i.done?t(i.value):(e=i.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}l((s=s.apply(i,e||[])).next())}));var i,e,n,s}}var j=function(t,i,e,n){return new(e||(e=Promise))((function(s,o){function r(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var i;t.done?s(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(r,a)}l((n=n.apply(t,i||[])).next())}))};class M{constructor(t,i){this._textureImageURL=t,this._spriteSheetURL=i,this._animationNameToAnimatedSprite=new Map}initializeAndReparent(t,i){return j(this,void 0,void 0,(function*(){const t=yield fetch(this._spriteSheetURL),e=yield t.json();yield n.sP.load(this._textureImageURL);const s=n.gPd.from(this._textureImageURL),o=new n.zo6(s,e);yield o.parse();const r=new n.bRX(e.meta.size.w,e.meta.size.h);for(const[t,i]of Object.entries(o.animations))this._animationNameToAnimatedSprite.set(t,new n.Dl5(i));this._animationNameToAnimatedSprite.forEach(((t,e)=>{t.setSize(r.x,r.y),t.label=M.name,t.anchor.set(.5,.5),i.addChild(t)}))}))}play(t,i){const e=this._animationNameToAnimatedSprite.get(t);if(null==e)throw new Error("Trying to play unknown animation with animationName="+t);e.animationSpeed=i,e.play()}}const U={isCollidable:!0,isTickable:!0,isResizable:!0};class L extends d{get configuration(){return this._configuration}constructor(t,i){super(t,Object.assign(Object.assign({},U),i)),this.label=L.name,this.initializeAsync()}initializeAsync(){const t=Object.create(null,{initializeAsync:{get:()=>super.initializeAsync}});return j(this,void 0,void 0,(function*(){yield t.initializeAsync.call(this),this._multiAnimatedSprite=new M("assets/images/AnimatedCoin/animated_coin.png","assets/images/AnimatedCoin/animated_coin.json"),yield this._multiAnimatedSprite.initializeAndReparent(this._app,this),this._multiAnimatedSprite.play("Gold",.3)}))}onTick(t){super.onTick(t)}}const N={ActorContainer:d,Tilemap:D,TilemapCollisionSystem:k,TilemapItemFactoryDefault:class{constructor(t){this._app=t}createTilemapItem(t){return i=this,e=void 0,o=function*(){switch(t.layerType){case P.TileLayer:case P.ObjectGroup:return new n.kxk(t.texture);default:throw new Error("Invalid layer type")}},new((s=void 0)||(s=Promise))((function(t,n){function r(t){try{l(o.next(t))}catch(t){n(t)}}function a(t){try{l(o.throw(t))}catch(t){n(t)}}function l(i){var e;i.done?t(i.value):(e=i.value,e instanceof s?e:new s((function(t){t(e)}))).then(r,a)}l((o=o.apply(i,e||[])).next())}));var i,e,s,o}},TilemapObject:F,ActorStatic:z,ActorAnimated:L,GixiApplication:T,GixiUtility:I};class G extends F{constructor(t,i){super(t,i),this.label=G.name}initializeAsync(){const t=Object.create(null,{initializeAsync:{get:()=>super.initializeAsync}});return i=this,e=void 0,s=function*(){yield t.initializeAsync.call(this),this.filters=[new S.GD({blur:1,alpha:.5,quality:3,resolution:2})]},new((n=void 0)||(n=Promise))((function(t,o){function r(t){try{l(s.next(t))}catch(t){o(t)}}function a(t){try{l(s.throw(t))}catch(t){o(t)}}function l(i){var e;i.done?t(i.value):(e=i.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}l((s=s.apply(i,e||[])).next())}));var i,e,n,s}onTick(t){super.onTick(t),this.rotation+=.01*t.deltaTime}destroyAfterAnimation(){r.En.sequence(r.En.delay(0),r.En.runFunc((()=>{this._app.systems.audioSystem.Play("./assets/audio/Chime02.mp3")})),r.En.parallel(r.En.rotateTo(this,1,20,r.Uq.smooth2),r.En.scaleTo(this,0,0,20,r.Uq.smooth2)),r.En.runFunc((()=>{this.destroy()}))).play()}onCollision(t){this._isCollidable&&t.forEach((t=>{t instanceof C&&(this._isCollidable=!1,this.destroyAfterAnimation())}))}}class K extends L{constructor(t,i){super(t,i),this.label=K.name}initializeAsync(){const t=Object.create(null,{initializeAsync:{get:()=>super.initializeAsync}});return i=this,e=void 0,s=function*(){yield t.initializeAsync.call(this),this.filters=[new S.GD({blur:1,alpha:.5,quality:3,resolution:2})]},new((n=void 0)||(n=Promise))((function(t,o){function r(t){try{l(s.next(t))}catch(t){o(t)}}function a(t){try{l(s.throw(t))}catch(t){o(t)}}function l(i){var e;i.done?t(i.value):(e=i.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}l((s=s.apply(i,e||[])).next())}));var i,e,n,s}destroyAfterAnimation(){r.En.sequence(r.En.delay(0),r.En.runFunc((()=>{this._app.systems.audioSystem.Play("./assets/audio/Chime01.mp3")})),r.En.parallel(r.En.moveTo(this,this.x,this.y-32,20,r.Uq.smooth2),r.En.scaleTo(this,2,2,20,r.Uq.smooth2)),r.En.runFunc((()=>{this.destroy()}))).play()}onCollision(t){this._isCollidable&&t.forEach((t=>{t instanceof C&&(this._isCollidable=!1,this.destroyAfterAnimation())}))}}class q{constructor(t){this._app=t}createTilemapItem(t){return i=this,e=void 0,o=function*(){switch(t.layerType){case P.TileLayer:return new n.kxk(t.texture);case P.ObjectGroup:return t.type==G.name?new G(this._app,{texture:t.texture}):t.type==K.name?new K(this._app):new n.kxk(t.texture);default:throw new Error("Invalid layer type")}},new((s=void 0)||(s=Promise))((function(t,n){function r(t){try{l(o.next(t))}catch(t){n(t)}}function a(t){try{l(o.throw(t))}catch(t){n(t)}}function l(i){var e;i.done?t(i.value):(e=i.value,e instanceof s?e:new s((function(t){t(e)}))).then(r,a)}l((o=o.apply(i,e||[])).next())}));var i,e,s,o}}var $=function(t,i,e,n){return new(e||(e=Promise))((function(s,o){function r(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var i;t.done?s(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(r,a)}l((n=n.apply(t,i||[])).next())}))};n.kpn.defaultOptions.roundPixels=!0,n.kpn.defaultOptions.resolution=window.devicePixelRatio||1;const V={LogoImageUrl:"assets/images/pixijs-logo-32x32.png",TilemapDataUrl:"assets/tilemaps/TreasureHunter2D.tmj",PlayerTextureUrl:"assets/images/player-default-sprite.png",CoinsCollected:0,CoinsMax:5,ScreenUIMarginX:10,ScreenUIMarginY:10};let W,X;const B=new T("pixi-application-canvas",{widthInitial:1920,heightInitial:1080,minFPS:1,maxFPS:240,backgroundColor:8881786,data:V}),Z=new(o());Z.showPanel(0),Z.dom.className="stats-panel",document.body.appendChild(Z.dom),globalThis.__PIXI_APP__=B.app,B.addListener(T.EVENT_INITIALIZE_COMPLETE,(function(t){return $(this,void 0,void 0,(function*(){var i,e;const s=new N.Tilemap(t,V.TilemapDataUrl,new q(t));yield s.initializeAsync(),console.log("gixiApp: "+t.isInitialized),t.addToViewport(s),s.x=t.getScreenCenterpoint().x-s.width/2,s.y=t.getScreenCenterpoint().y-s.height/2,X=(new n.A1g).rect(0,0,32,32).fill({color:16777215,alpha:.5}),t.addToViewport(X),X.x=t.getScreenCenterpoint().x,X.y=t.getScreenCenterpoint().y,W=new C(t,s,{textureUrl:V.PlayerTextureUrl}),t.addToViewport(W),W.x=t.getScreenCenterpoint().x,W.y=t.getScreenCenterpoint().y,t.viewport.follow(W,{speed:1,acceleration:1,radius:20});const o=new _(t,"SEE INSIDE CLASS",30,"left");t.addToStage(o);const a=new b(t,`Coins ${null===(i=t.configuration.data)||void 0===i?void 0:i.CoinsCollected}/${null===(e=t.configuration.data)||void 0===e?void 0:e.CoinsMax}`,30,"right");t.addToStage(a),t.app.ticker.add((t=>{Z.begin(),r.En.tick(t.deltaTime),Z.end()}))}))})),B.addListener(T.EVENT_INITIALIZE_ERROR,(function(t){console.error(`PIXI.Application.init() failed. error = ${t}`)})),$(void 0,void 0,void 0,(function*(){yield B.initializeAsync()}))}},n={};function s(t){var i=n[t];if(void 0!==i)return i.exports;var o=n[t]={exports:{}};return e[t].call(o.exports,o,o.exports,s),o.exports}s.m=e,t=[],s.O=(i,e,n,o)=>{if(!e){var r=1/0;for(h=0;h<t.length;h++){for(var[e,n,o]=t[h],a=!0,l=0;l<e.length;l++)(!1&o||r>=o)&&Object.keys(s.O).every((t=>s.O[t](e[l])))?e.splice(l--,1):(a=!1,o<r&&(r=o));if(a){t.splice(h--,1);var c=n();void 0!==c&&(i=c)}}return i}o=o||0;for(var h=t.length;h>0&&t[h-1][2]>o;h--)t[h]=t[h-1];t[h]=[e,n,o]},s.n=t=>{var i=t&&t.__esModule?()=>t.default:()=>t;return s.d(i,{a:i}),i},s.d=(t,i)=>{for(var e in i)s.o(i,e)&&!s.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:i[e]})},s.f={},s.e=t=>Promise.all(Object.keys(s.f).reduce(((i,e)=>(s.f[e](t,i),i)),[])),s.u=t=>t+"."+{142:"6f46ecf1ff524851e045",151:"061e9e13269897ecbd38",162:"1046d09f72d0e3563e18",421:"796907ff150e4ce2813a",440:"d6ee605c48ad4a368abe",751:"1c7e18eea6655a094d79",852:"15740e5671b245293199"}[t]+".bundle.js",s.miniCssF=t=>{},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),s.o=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),i={},s.l=(t,e,n,o)=>{if(i[t])i[t].push(e);else{var r,a;if(void 0!==n)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var h=l[c];if(h.getAttribute("src")==t){r=h;break}}r||(a=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,s.nc&&r.setAttribute("nonce",s.nc),r.src=t),i[t]=[e];var u=(e,n)=>{r.onerror=r.onload=null,clearTimeout(d);var s=i[t];if(delete i[t],r.parentNode&&r.parentNode.removeChild(r),s&&s.forEach((t=>t(n))),e)return e(n)},d=setTimeout(u.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=u.bind(null,r.onerror),r.onload=u.bind(null,r.onload),a&&document.head.appendChild(r)}},s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;s.g.importScripts&&(t=s.g.location+"");var i=s.g.document;if(!t&&i&&(i.currentScript&&(t=i.currentScript.src),!t)){var e=i.getElementsByTagName("script");if(e.length)for(var n=e.length-1;n>-1&&(!t||!/^http(s?):/.test(t));)t=e[n--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=t})(),(()=>{var t={792:0};s.f.j=(i,e)=>{var n=s.o(t,i)?t[i]:void 0;if(0!==n)if(n)e.push(n[2]);else{var o=new Promise(((e,s)=>n=t[i]=[e,s]));e.push(n[2]=o);var r=s.p+s.u(i),a=new Error;s.l(r,(e=>{if(s.o(t,i)&&(0!==(n=t[i])&&(t[i]=void 0),n)){var o=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;a.message="Loading chunk "+i+" failed.\n("+o+": "+r+")",a.name="ChunkLoadError",a.type=o,a.request=r,n[1](a)}}),"chunk-"+i,i)}},s.O.j=i=>0===t[i];var i=(i,e)=>{var n,o,[r,a,l]=e,c=0;if(r.some((i=>0!==t[i]))){for(n in a)s.o(a,n)&&(s.m[n]=a[n]);if(l)var h=l(s)}for(i&&i(e);c<r.length;c++)o=r[c],s.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return s.O(h)},e=self.webpackChunk=self.webpackChunk||[];e.forEach(i.bind(null,0)),e.push=i.bind(null,e.push.bind(e))})();var o=s.O(void 0,[75],(()=>s(606)));o=s.O(o)})();
//# sourceMappingURL=main.4004d54ea3153f897ff8.bundle.js.map