{"version":3,"file":"75.3dbf18c1d07450e40dd5.bundle.js","mappings":"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","sources":["webpack:///./node_modules/earcut/src/earcut.js","webpack:///./node_modules/eventemitter3/index.js","webpack:///./node_modules/events/events.js","webpack:///./node_modules/parse-svg-path/index.js","webpack:///./node_modules/pixi-actions/dist/actions/Action.js","webpack:///./node_modules/pixi-actions/dist/actions/TargetedAction.js","webpack:///./node_modules/pixi-actions/dist/Interpolations.js","webpack:///./node_modules/pixi-actions/dist/actions/MoveTo.js","webpack:///./node_modules/pixi-actions/dist/actions/ScaleTo.js","webpack:///./node_modules/pixi-actions/dist/actions/RotateTo.js","webpack:///./node_modules/pixi-actions/dist/actions/Sequence.js","webpack:///./node_modules/pixi-actions/dist/actions/Parallel.js","webpack:///./node_modules/pixi-actions/dist/actions/Repeat.js","webpack:///./node_modules/pixi-actions/dist/actions/FadeTo.js","webpack:///./node_modules/pixi-actions/dist/actions/Delay.js","webpack:///./node_modules/pixi-actions/dist/actions/RunFunc.js","webpack:///./node_modules/pixi-actions/dist/actions/TintTo.js","webpack:///./node_modules/pixi-actions/dist/Actions.js","webpack:///./node_modules/stats.js/build/stats.min.js","webpack:///./node_modules/@pixi/sound/lib/instance.mjs","webpack:///./node_modules/@pixi/sound/lib/filters/Filter.mjs","webpack:///./node_modules/@pixi/sound/lib/webaudio/WebAudioUtils.mjs","webpack:///./node_modules/@pixi/sound/lib/filters/EqualizerFilter.mjs","webpack:///./node_modules/@pixi/sound/lib/htmlaudio/HTMLAudioContext.mjs","webpack:///./node_modules/@pixi/sound/lib/htmlaudio/HTMLAudioInstance.mjs","webpack:///./node_modules/@pixi/sound/lib/htmlaudio/HTMLAudioMedia.mjs","webpack:///./node_modules/@pixi/sound/lib/SoundSprite.mjs","webpack:///./node_modules/@pixi/sound/lib/utils/supported.mjs","webpack:///./node_modules/@pixi/sound/lib/webaudio/WebAudioInstance.mjs","webpack:///./node_modules/@pixi/sound/lib/Filterable.mjs","webpack:///./node_modules/@pixi/sound/lib/webaudio/WebAudioNodes.mjs","webpack:///./node_modules/@pixi/sound/lib/webaudio/WebAudioMedia.mjs","webpack:///./node_modules/@pixi/sound/lib/Sound.mjs","webpack:///./node_modules/@pixi/sound/lib/webaudio/WebAudioContext.mjs","webpack:///./node_modules/@pixi/sound/lib/soundAsset.mjs","webpack:///./node_modules/@pixi/sound/lib/index.mjs","webpack:///./node_modules/@pixi/sound/lib/SoundLibrary.mjs","webpack:///./node_modules/eventemitter3/index.mjs","webpack:///./node_modules/pixi-filters/lib/defaults/default.mjs","webpack:///./node_modules/pixi-filters/lib/defaults/default2.mjs","webpack:///./node_modules/pixi-filters/lib/adjustment/AdjustmentFilter.mjs","webpack:///./node_modules/pixi-filters/lib/adjustment/adjustment2.mjs","webpack:///./node_modules/pixi-filters/lib/adjustment/adjustment.mjs","webpack:///./node_modules/pixi-filters/lib/kawase-blur/kawase-blur.mjs","webpack:///./node_modules/pixi-filters/lib/kawase-blur/KawaseBlurFilter.mjs","webpack:///./node_modules/pixi-filters/lib/kawase-blur/kawase-blur-clamp2.mjs","webpack:///./node_modules/pixi-filters/lib/kawase-blur/kawase-blur2.mjs","webpack:///./node_modules/pixi-filters/lib/kawase-blur/kawase-blur-clamp.mjs","webpack:///./node_modules/pixi-filters/lib/advanced-bloom/advanced-bloom2.mjs","webpack:///./node_modules/pixi-filters/lib/advanced-bloom/ExtractBrightnessFilter.mjs","webpack:///./node_modules/pixi-filters/lib/advanced-bloom/extract-brightness2.mjs","webpack:///./node_modules/pixi-filters/lib/advanced-bloom/extract-brightness.mjs","webpack:///./node_modules/pixi-filters/lib/advanced-bloom/AdvancedBloomFilter.mjs","webpack:///./node_modules/pixi-filters/lib/advanced-bloom/advanced-bloom.mjs","webpack:///./node_modules/pixi-filters/lib/ascii/ascii.mjs","webpack:///./node_modules/pixi-filters/lib/ascii/AsciiFilter.mjs","webpack:///./node_modules/pixi-filters/lib/ascii/ascii2.mjs","webpack:///./node_modules/pixi-filters/lib/backdrop-blur/BackdropBlurFilter.mjs","webpack:///./node_modules/pixi-filters/lib/bevel/bevel2.mjs","webpack:///./node_modules/pixi-filters/lib/bevel/BevelFilter.mjs","webpack:///./node_modules/pixi-filters/lib/bevel/bevel.mjs","webpack:///./node_modules/pixi-filters/lib/bloom/BloomFilter.mjs","webpack:///./node_modules/pixi-filters/lib/bulge-pinch/bulge-pinch.mjs","webpack:///./node_modules/pixi-filters/lib/bulge-pinch/BulgePinchFilter.mjs","webpack:///./node_modules/pixi-filters/lib/bulge-pinch/bulge-pinch2.mjs","webpack:///./node_modules/pixi-filters/lib/color-gradient/color-gradient.mjs","webpack:///./node_modules/pixi-filters/lib/external/gradient-parser/build/node.mjs","webpack:///./node_modules/pixi-filters/lib/color-gradient/color-gradient2.mjs","webpack:///./node_modules/pixi-filters/lib/color-gradient/CssGradientParser.mjs","webpack:///./node_modules/pixi-filters/lib/color-gradient/ColorGradientFilter.mjs","webpack:///./node_modules/pixi-filters/lib/color-gradient/color-gradient3.mjs","webpack:///./node_modules/pixi-filters/lib/color-map/color-map.mjs","webpack:///./node_modules/pixi-filters/lib/color-map/ColorMapFilter.mjs","webpack:///./node_modules/pixi-filters/lib/color-map/color-map2.mjs","webpack:///./node_modules/pixi-filters/lib/color-overlay/color-overlay2.mjs","webpack:///./node_modules/pixi-filters/lib/color-overlay/ColorOverlayFilter.mjs","webpack:///./node_modules/pixi-filters/lib/color-overlay/color-overlay.mjs","webpack:///./node_modules/pixi-filters/lib/color-replace/color-replace2.mjs","webpack:///./node_modules/pixi-filters/lib/color-replace/ColorReplaceFilter.mjs","webpack:///./node_modules/pixi-filters/lib/color-replace/color-replace.mjs","webpack:///./node_modules/pixi-filters/lib/convolution/convolution.mjs","webpack:///./node_modules/pixi-filters/lib/convolution/ConvolutionFilter.mjs","webpack:///./node_modules/pixi-filters/lib/convolution/convolution2.mjs","webpack:///./node_modules/pixi-filters/lib/cross-hatch/CrossHatchFilter.mjs","webpack:///./node_modules/pixi-filters/lib/crt/crt2.mjs","webpack:///./node_modules/pixi-filters/lib/crt/CRTFilter.mjs","webpack:///./node_modules/pixi-filters/lib/crt/crt.mjs","webpack:///./node_modules/pixi-filters/lib/dot/dot2.mjs","webpack:///./node_modules/pixi-filters/lib/dot/DotFilter.mjs","webpack:///./node_modules/pixi-filters/lib/dot/dot.mjs","webpack:///./node_modules/pixi-filters/lib/drop-shadow/drop-shadow2.mjs","webpack:///./node_modules/pixi-filters/lib/drop-shadow/DropShadowFilter.mjs","webpack:///./node_modules/pixi-filters/lib/drop-shadow/drop-shadow.mjs","webpack:///./node_modules/pixi-filters/lib/emboss/EmbossFilter.mjs","webpack:///./node_modules/pixi-filters/lib/glitch/glitch2.mjs","webpack:///./node_modules/pixi-filters/lib/glitch/GlitchFilter.mjs","webpack:///./node_modules/pixi-filters/lib/glitch/glitch.mjs","webpack:///./node_modules/pixi-filters/lib/glow/glow2.mjs","webpack:///./node_modules/pixi-filters/lib/glow/GlowFilter.mjs","webpack:///./node_modules/pixi-filters/lib/glow/glow.mjs","webpack:///./node_modules/pixi-filters/lib/godray/god-ray.mjs","webpack:///./node_modules/pixi-filters/lib/godray/GodrayFilter.mjs","webpack:///./node_modules/pixi-filters/lib/godray/god-ray2.mjs","webpack:///./node_modules/pixi-filters/lib/godray/perlin.mjs","webpack:///./node_modules/pixi-filters/lib/godray/perlin2.mjs","webpack:///./node_modules/pixi-filters/lib/grayscale/GrayscaleFilter.mjs","webpack:///./node_modules/pixi-filters/lib/hsl-adjustment/hsladjustment2.mjs","webpack:///./node_modules/pixi-filters/lib/hsl-adjustment/HslAdjustmentFilter.mjs","webpack:///./node_modules/pixi-filters/lib/hsl-adjustment/hsladjustment.mjs","webpack:///./node_modules/pixi-filters/lib/motion-blur/motion-blur.mjs","webpack:///./node_modules/pixi-filters/lib/motion-blur/MotionBlurFilter.mjs","webpack:///./node_modules/pixi-filters/lib/motion-blur/motion-blur2.mjs","webpack:///./node_modules/pixi-filters/lib/multi-color-replace/multi-color-replace2.mjs","webpack:///./node_modules/pixi-filters/lib/multi-color-replace/MultiColorReplaceFilter.mjs","webpack:///./node_modules/pixi-filters/lib/multi-color-replace/multi-color-replace.mjs","webpack:///./node_modules/pixi-filters/lib/old-film/old-film.mjs","webpack:///./node_modules/pixi-filters/lib/old-film/OldFilmFilter.mjs","webpack:///./node_modules/pixi-filters/lib/old-film/old-film2.mjs","webpack:///./node_modules/pixi-filters/lib/outline/outline.mjs","webpack:///./node_modules/pixi-filters/lib/outline/OutlineFilter.mjs","webpack:///./node_modules/pixi-filters/lib/outline/outline2.mjs","webpack:///./node_modules/pixi-filters/lib/pixelate/PixelateFilter.mjs","webpack:///./node_modules/pixi-filters/lib/radial-blur/radial-blur.mjs","webpack:///./node_modules/pixi-filters/lib/radial-blur/RadialBlurFilter.mjs","webpack:///./node_modules/pixi-filters/lib/radial-blur/radial-blur2.mjs","webpack:///./node_modules/pixi-filters/lib/reflection/reflection2.mjs","webpack:///./node_modules/pixi-filters/lib/reflection/ReflectionFilter.mjs","webpack:///./node_modules/pixi-filters/lib/reflection/reflection.mjs","webpack:///./node_modules/pixi-filters/lib/rgb-split/rgb-split.mjs","webpack:///./node_modules/pixi-filters/lib/rgb-split/RGBSplitFilter.mjs","webpack:///./node_modules/pixi-filters/lib/rgb-split/rgb-split2.mjs","webpack:///./node_modules/pixi-filters/lib/shockwave/shockwave.mjs","webpack:///./node_modules/pixi-filters/lib/shockwave/ShockwaveFilter.mjs","webpack:///./node_modules/pixi-filters/lib/shockwave/shockwave2.mjs","webpack:///./node_modules/pixi-filters/lib/simple-lightmap/simple-lightmap.mjs","webpack:///./node_modules/pixi-filters/lib/simple-lightmap/SimpleLightmapFilter.mjs","webpack:///./node_modules/pixi-filters/lib/simple-lightmap/simple-lightmap2.mjs","webpack:///./node_modules/pixi-filters/lib/tilt-shift/tilt-shift.mjs","webpack:///./node_modules/pixi-filters/lib/tilt-shift/TiltShiftAxisFilter.mjs","webpack:///./node_modules/pixi-filters/lib/tilt-shift/tilt-shift2.mjs","webpack:///./node_modules/pixi-filters/lib/tilt-shift/TiltShiftFilter.mjs","webpack:///./node_modules/pixi-filters/lib/twist/twist.mjs","webpack:///./node_modules/pixi-filters/lib/twist/TwistFilter.mjs","webpack:///./node_modules/pixi-filters/lib/twist/twist2.mjs","webpack:///./node_modules/pixi-filters/lib/zoom-blur/zoom-blur.mjs","webpack:///./node_modules/pixi-filters/lib/zoom-blur/ZoomBlurFilter.mjs","webpack:///./node_modules/pixi-filters/lib/zoom-blur/zoom-blur2.mjs","webpack:///./node_modules/pixi-viewport/dist/pixi_viewport.js","webpack:///./node_modules/pixi.js/lib/assets/cache/Cache.mjs","webpack:///./node_modules/pixi.js/lib/assets/loader/parsers/LoaderParser.mjs","webpack:///./node_modules/pixi.js/lib/assets/utils/createStringVariations.mjs","webpack:///./node_modules/pixi.js/lib/assets/resolver/Resolver.mjs","webpack:///./node_modules/pixi.js/lib/assets/utils/convertToList.mjs","webpack:///./node_modules/pixi.js/lib/assets/utils/copySearchParams.mjs","webpack:///./node_modules/pixi.js/lib/assets/utils/isSingleItem.mjs","webpack:///./node_modules/@pixi/colord/index.mjs","webpack:///./node_modules/pixi.js/lib/color/Color.mjs","webpack:///./node_modules/@pixi/colord/plugins/names.mjs","webpack:///./node_modules/pixi.js/lib/environment/adapter.mjs","webpack:///./node_modules/pixi.js/lib/environment-browser/BrowserAdapter.mjs","webpack:///./node_modules/pixi.js/lib/extensions/Extensions.mjs","webpack:///./node_modules/pixi.js/lib/filters/Filter.mjs","webpack:///./node_modules/pixi.js/lib/filters/FilterEffect.mjs","webpack:///./node_modules/pixi.js/lib/environment-browser/browserExt.mjs","webpack:///./node_modules/pixi.js/lib/environment-webworker/webworkerExt.mjs","webpack:///./node_modules/pixi.js/lib/utils/browser/isWebGLSupported.mjs","webpack:///./node_modules/pixi.js/lib/utils/browser/isWebGPUSupported.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/autoDetectRenderer.mjs","webpack:///./node_modules/pixi.js/lib/app/Application.mjs","webpack:///./node_modules/pixi.js/lib/scene/text-bitmap/BitmapFont.mjs","webpack:///./node_modules/pixi.js/lib/scene/text-bitmap/asset/bitmapFontTextParser.mjs","webpack:///./node_modules/pixi.js/lib/scene/text-bitmap/asset/bitmapFontXMLParser.mjs","webpack:///./node_modules/pixi.js/lib/scene/text-bitmap/asset/bitmapFontXMLStringParser.mjs","webpack:///./node_modules/pixi.js/lib/scene/text-bitmap/asset/loadBitmapFont.mjs","webpack:///./node_modules/pixi.js/lib/assets/BackgroundLoader.mjs","webpack:///./node_modules/pixi.js/lib/assets/cache/parsers/cacheTextureArray.mjs","webpack:///./node_modules/pixi.js/lib/assets/detections/utils/testImageFormat.mjs","webpack:///./node_modules/pixi.js/lib/assets/detections/parsers/detectAvif.mjs","webpack:///./node_modules/pixi.js/lib/assets/detections/parsers/detectDefaults.mjs","webpack:///./node_modules/pixi.js/lib/assets/detections/utils/testVideoFormat.mjs","webpack:///./node_modules/pixi.js/lib/assets/detections/parsers/detectMp4.mjs","webpack:///./node_modules/pixi.js/lib/assets/detections/parsers/detectOgv.mjs","webpack:///./node_modules/pixi.js/lib/assets/detections/parsers/detectWebm.mjs","webpack:///./node_modules/pixi.js/lib/assets/detections/parsers/detectWebp.mjs","webpack:///./node_modules/pixi.js/lib/assets/loader/Loader.mjs","webpack:///./node_modules/pixi.js/lib/assets/utils/checkDataUrl.mjs","webpack:///./node_modules/pixi.js/lib/assets/utils/checkExtension.mjs","webpack:///./node_modules/pixi.js/lib/assets/loader/parsers/loadJson.mjs","webpack:///./node_modules/pixi.js/lib/assets/loader/parsers/loadTxt.mjs","webpack:///./node_modules/pixi.js/lib/assets/loader/parsers/loadWebFont.mjs","webpack:///./node_modules/pixi.js/lib/utils/network/getResolutionOfUrl.mjs","webpack:///./node_modules/pixi.js/lib/assets/loader/parsers/textures/utils/createTexture.mjs","webpack:///./node_modules/pixi.js/lib/assets/loader/parsers/textures/loadSVG.mjs","webpack:///./node_modules/pixi.js/lib/_virtual/checkImageBitmap.worker.mjs","webpack:///./node_modules/pixi.js/lib/_virtual/loadImageBitmap.worker.mjs","webpack:///./node_modules/pixi.js/lib/assets/loader/workers/WorkerManager.mjs","webpack:///./node_modules/pixi.js/lib/assets/loader/parsers/textures/loadTextures.mjs","webpack:///./node_modules/pixi.js/lib/assets/loader/parsers/textures/loadVideoTextures.mjs","webpack:///./node_modules/pixi.js/lib/assets/resolver/parsers/resolveTextureUrl.mjs","webpack:///./node_modules/pixi.js/lib/assets/resolver/parsers/resolveJsonUrl.mjs","webpack:///./node_modules/pixi.js/lib/assets/Assets.mjs","webpack:///./node_modules/pixi.js/lib/filters/defaults/alpha/alpha.wgsl.mjs","webpack:///./node_modules/pixi.js/lib/filters/defaults/alpha/AlphaFilter.mjs","webpack:///./node_modules/pixi.js/lib/filters/defaults/defaultFilter.vert.mjs","webpack:///./node_modules/pixi.js/lib/filters/defaults/alpha/alpha.frag.mjs","webpack:///./node_modules/pixi.js/lib/filters/defaults/blur/const.mjs","webpack:///./node_modules/pixi.js/lib/filters/defaults/blur/gl/generateBlurFragSource.mjs","webpack:///./node_modules/pixi.js/lib/filters/defaults/blur/gl/generateBlurGlProgram.mjs","webpack:///./node_modules/pixi.js/lib/filters/defaults/blur/gl/generateBlurVertSource.mjs","webpack:///./node_modules/pixi.js/lib/filters/defaults/blur/BlurFilterPass.mjs","webpack:///./node_modules/pixi.js/lib/filters/defaults/blur/gpu/generateBlurProgram.mjs","webpack:///./node_modules/pixi.js/lib/filters/defaults/blur/gpu/blur-template.wgsl.mjs","webpack:///./node_modules/pixi.js/lib/filters/defaults/blur/BlurFilter.mjs","webpack:///./node_modules/pixi.js/lib/scene/sprite-animated/AnimatedSprite.mjs","webpack:///./node_modules/pixi.js/lib/scene/text/AbstractText.mjs","webpack:///./node_modules/pixi.js/lib/scene/text/Text.mjs","webpack:///./node_modules/pixi.js/lib/index.mjs","webpack:///./node_modules/pixi.js/lib/maths/matrix/Matrix.mjs","webpack:///./node_modules/pixi.js/lib/maths/misc/const.mjs","webpack:///./node_modules/pixi.js/lib/maths/misc/pow2.mjs","webpack:///./node_modules/pixi.js/lib/maths/point/ObservablePoint.mjs","webpack:///./node_modules/pixi.js/lib/maths/point/Point.mjs","webpack:///./node_modules/pixi.js/lib/maths/shapes/Rectangle.mjs","webpack:///./node_modules/pixi.js/lib/rendering/batcher/gl/utils/checkMaxIfStatementsInShader.mjs","webpack:///./node_modules/pixi.js/lib/rendering/batcher/gl/utils/maxRecommendedTextures.mjs","webpack:///./node_modules/pixi.js/lib/rendering/batcher/gpu/getTextureBatchBindGroup.mjs","webpack:///./node_modules/pixi.js/lib/rendering/batcher/shared/BatchGeometry.mjs","webpack:///./node_modules/pixi.js/lib/utils/data/ViewableBuffer.mjs","webpack:///./node_modules/pixi.js/lib/rendering/batcher/shared/BatchTextureArray.mjs","webpack:///./node_modules/pixi.js/lib/rendering/batcher/shared/Batcher.mjs","webpack:///./node_modules/pixi.js/lib/rendering/mask/utils/addMaskBounds.mjs","webpack:///./node_modules/pixi.js/lib/rendering/mask/utils/addMaskLocalBounds.mjs","webpack:///./node_modules/pixi.js/lib/rendering/mask/alpha/AlphaMask.mjs","webpack:///./node_modules/pixi.js/lib/rendering/mask/color/ColorMask.mjs","webpack:///./node_modules/pixi.js/lib/rendering/mask/stencil/StencilMask.mjs","webpack:///./node_modules/pixi.js/lib/rendering/init.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/gl/const.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/getMaxFragmentPrecision.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/preprocessors/setProgramName.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/gl/shader/GlProgram.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/preprocessors/stripVersion.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/preprocessors/ensurePrecision.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/preprocessors/addProgramDefines.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/preprocessors/insertVersion.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/getTestContext.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/gpu/shader/BindGroup.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/gpu/shader/utils/extractAttributesFromGpuProgram.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/gpu/shader/utils/extractStructAndGroups.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/shared/shader/const.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/gpu/shader/GpuProgram.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/gpu/shader/utils/removeStructAndGroupDuplicates.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/gpu/shader/utils/generateLayoutHash.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/gpu/shader/utils/generateGpuLayoutGroups.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/shared/buffer/Buffer.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/shared/buffer/const.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/shared/buffer/utils/fastCopy.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/shared/geometry/utils/ensureIsBuffer.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/shared/geometry/Geometry.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/shared/geometry/utils/getGeometryBounds.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/shared/geometry/utils/getAttributeInfoFromFormat.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/shared/instructions/InstructionSet.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/shared/shader/Shader.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/shared/shader/types.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/shared/shader/utils/getDefaultUniformValue.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/shared/shader/UniformGroup.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/shared/state/State.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/shared/state/const.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/shared/state/getAdjustedBlendModeBlend.mjs","webpack:///./node_modules/pixi.js/lib/environment/autoDetectEnvironment.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/shared/system/AbstractRenderer.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/shared/system/SystemRunner.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/shared/texture/CanvasPool.mjs","webpack:///./node_modules/pixi.js/lib/maths/matrix/groupD8.mjs","webpack:///./node_modules/pixi.js/lib/utils/misc/NOOP.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/shared/texture/Texture.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/shared/texture/TextureMatrix.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/shared/texture/TexturePool.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/shared/texture/sources/BufferImageSource.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/shared/texture/sources/CanvasSource.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/shared/texture/sources/ImageSource.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/shared/texture/TextureStyle.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/shared/texture/sources/TextureSource.mjs","webpack:///./node_modules/pixi.js/lib/scene/container/utils/definedProps.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/shared/texture/sources/VideoSource.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/shared/texture/utils/textureFrom.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/shared/utils/createIdFromString.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/types.mjs","webpack:///./node_modules/pixi.js/lib/scene/container/container-mixins/childrenHelperMixin.mjs","webpack:///./node_modules/pixi.js/lib/rendering/mask/MaskEffectManager.mjs","webpack:///./node_modules/pixi.js/lib/scene/container/container-mixins/effectsMixin.mjs","webpack:///./node_modules/pixi.js/lib/scene/container/container-mixins/findMixin.mjs","webpack:///./node_modules/pixi.js/lib/scene/container/utils/checkChildrenDidChange.mjs","webpack:///./node_modules/pixi.js/lib/scene/container/container-mixins/measureMixin.mjs","webpack:///./node_modules/pixi.js/lib/scene/container/container-mixins/onRenderMixin.mjs","webpack:///./node_modules/pixi.js/lib/scene/container/container-mixins/sortMixin.mjs","webpack:///./node_modules/pixi.js/lib/scene/container/container-mixins/toLocalGlobalMixin.mjs","webpack:///./node_modules/pixi.js/lib/scene/container/RenderGroup.mjs","webpack:///./node_modules/pixi.js/lib/scene/container/Container.mjs","webpack:///./node_modules/pixi.js/lib/scene/container/utils/assignWithIgnore.mjs","webpack:///./node_modules/pixi.js/lib/culling/cullingMixin.mjs","webpack:///./node_modules/pixi.js/lib/scene/container/bounds/Bounds.mjs","webpack:///./node_modules/pixi.js/lib/scene/container/bounds/getGlobalBounds.mjs","webpack:///./node_modules/pixi.js/lib/scene/container/bounds/getLocalBounds.mjs","webpack:///./node_modules/pixi.js/lib/scene/container/bounds/utils/matrixAndBoundsPool.mjs","webpack:///./node_modules/pixi.js/lib/scene/graphics/shared/BatchableGraphics.mjs","webpack:///./node_modules/pixi.js/lib/scene/container/utils/multiplyHexColors.mjs","webpack:///./node_modules/pixi.js/lib/scene/graphics/shared/Graphics.mjs","webpack:///./node_modules/pixi.js/lib/maths/shapes/Circle.mjs","webpack:///./node_modules/pixi.js/lib/maths/shapes/Ellipse.mjs","webpack:///./node_modules/pixi.js/lib/maths/misc/squaredDistanceToLineSegment.mjs","webpack:///./node_modules/pixi.js/lib/maths/shapes/Polygon.mjs","webpack:///./node_modules/pixi.js/lib/maths/shapes/RoundedRectangle.mjs","webpack:///./node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildAdaptiveBezier.mjs","webpack:///./node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildAdaptiveQuadratic.mjs","webpack:///./node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildArc.mjs","webpack:///./node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildArcToSvg.mjs","webpack:///./node_modules/pixi.js/lib/scene/graphics/shared/path/ShapePath.mjs","webpack:///./node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildArcTo.mjs","webpack:///./node_modules/pixi.js/lib/scene/graphics/shared/path/roundShape.mjs","webpack:///./node_modules/pixi.js/lib/scene/graphics/shared/path/GraphicsPath.mjs","webpack:///./node_modules/pixi.js/lib/scene/graphics/shared/svg/SVGToGraphicsPath.mjs","webpack:///./node_modules/pixi.js/lib/scene/graphics/shared/svg/SVGParser.mjs","webpack:///./node_modules/pixi.js/lib/scene/graphics/shared/GraphicsContext.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/shared/geometry/utils/transformVertices.mjs","webpack:///./node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildCircle.mjs","webpack:///./node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildLine.mjs","webpack:///./node_modules/pixi.js/lib/scene/graphics/shared/utils/triangulateWithHoles.mjs","webpack:///./node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildPolygon.mjs","webpack:///./node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildRectangle.mjs","webpack:///./node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildTriangle.mjs","webpack:///./node_modules/pixi.js/lib/scene/graphics/shared/utils/buildContextBatches.mjs","webpack:///./node_modules/pixi.js/lib/scene/graphics/shared/const.mjs","webpack:///./node_modules/pixi.js/lib/scene/graphics/shared/utils/getOrientationOfPoints.mjs","webpack:///./node_modules/pixi.js/lib/rendering/renderers/shared/geometry/utils/buildUvs.mjs","webpack:///./node_modules/pixi.js/lib/scene/graphics/shared/GraphicsContextSystem.mjs","webpack:///./node_modules/pixi.js/lib/scene/graphics/shared/fill/FillGradient.mjs","webpack:///./node_modules/pixi.js/lib/scene/graphics/shared/fill/FillPattern.mjs","webpack:///./node_modules/pixi.js/lib/scene/graphics/shared/utils/convertFillInputToFillStyle.mjs","webpack:///./node_modules/pixi.js/lib/scene/sprite/Sprite.mjs","webpack:///./node_modules/pixi.js/lib/scene/text-bitmap/AbstractBitmapFont.mjs","webpack:///./node_modules/pixi.js/lib/scene/text-bitmap/utils/resolveCharacters.mjs","webpack:///./node_modules/pixi.js/lib/scene/text-bitmap/DynamicBitmapFont.mjs","webpack:///./node_modules/pixi.js/lib/scene/text-bitmap/BitmapFontManager.mjs","webpack:///./node_modules/pixi.js/lib/scene/text-bitmap/utils/getBitmapTextLayout.mjs","webpack:///./node_modules/pixi.js/lib/scene/text/TextStyle.mjs","webpack:///./node_modules/pixi.js/lib/scene/text/canvas/CanvasTextMetrics.mjs","webpack:///./node_modules/pixi.js/lib/scene/text/canvas/utils/fontStringFromTextStyle.mjs","webpack:///./node_modules/pixi.js/lib/scene/text/canvas/utils/getCanvasFillStyle.mjs","webpack:///./node_modules/pixi.js/lib/scene/text/utils/generateTextStyleKey.mjs","webpack:///./node_modules/pixi.js/lib/spritesheet/Spritesheet.mjs","webpack:///./node_modules/pixi.js/lib/spritesheet/spritesheetAsset.mjs","webpack:///./node_modules/pixi.js/lib/spritesheet/init.mjs","webpack:///./node_modules/pixi.js/lib/ticker/TickerListener.mjs","webpack:///./node_modules/pixi.js/lib/ticker/Ticker.mjs","webpack:///./node_modules/pixi.js/lib/ticker/const.mjs","webpack:///./node_modules/pixi.js/lib/utils/browser/detectVideoAlphaMode.mjs","webpack:///./node_modules/pixi.js/lib/utils/browser/unsafeEvalSupported.mjs","webpack:///./node_modules/pixi.js/lib/utils/data/removeItems.mjs","webpack:///./node_modules/pixi.js/lib/utils/data/uid.mjs","webpack:///./node_modules/pixi.js/lib/utils/data/updateQuadBounds.mjs","webpack:///./node_modules/pixi.js/lib/utils/global/globalHooks.mjs","webpack:///./node_modules/pixi.js/lib/utils/logging/deprecation.mjs","webpack:///./node_modules/pixi.js/lib/utils/logging/warn.mjs","webpack:///./node_modules/pixi.js/lib/utils/path.mjs","webpack:///./node_modules/pixi.js/lib/utils/pool/Pool.mjs","webpack:///./node_modules/pixi.js/lib/utils/pool/PoolGroup.mjs","webpack:///./node_modules/pixi.js/lib/utils/sayHello.mjs"],"sourcesContent":["'use strict';\n\nmodule.exports = earcut;\nmodule.exports.default = earcut;\n\nfunction earcut(data, holeIndices, dim) {\n\n    dim = dim || 2;\n\n    var hasHoles = holeIndices && holeIndices.length,\n        outerLen = hasHoles ? holeIndices[0] * dim : data.length,\n        outerNode = linkedList(data, 0, outerLen, dim, true),\n        triangles = [];\n\n    if (!outerNode || outerNode.next === outerNode.prev) return triangles;\n\n    var minX, minY, maxX, maxY, x, y, invSize;\n\n    if (hasHoles) outerNode = eliminateHoles(data, holeIndices, outerNode, dim);\n\n    // if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\n    if (data.length > 80 * dim) {\n        minX = maxX = data[0];\n        minY = maxY = data[1];\n\n        for (var i = dim; i < outerLen; i += dim) {\n            x = data[i];\n            y = data[i + 1];\n            if (x < minX) minX = x;\n            if (y < minY) minY = y;\n            if (x > maxX) maxX = x;\n            if (y > maxY) maxY = y;\n        }\n\n        // minX, minY and invSize are later used to transform coords into integers for z-order calculation\n        invSize = Math.max(maxX - minX, maxY - minY);\n        invSize = invSize !== 0 ? 32767 / invSize : 0;\n    }\n\n    earcutLinked(outerNode, triangles, dim, minX, minY, invSize, 0);\n\n    return triangles;\n}\n\n// create a circular doubly linked list from polygon points in the specified winding order\nfunction linkedList(data, start, end, dim, clockwise) {\n    var i, last;\n\n    if (clockwise === (signedArea(data, start, end, dim) > 0)) {\n        for (i = start; i < end; i += dim) last = insertNode(i, data[i], data[i + 1], last);\n    } else {\n        for (i = end - dim; i >= start; i -= dim) last = insertNode(i, data[i], data[i + 1], last);\n    }\n\n    if (last && equals(last, last.next)) {\n        removeNode(last);\n        last = last.next;\n    }\n\n    return last;\n}\n\n// eliminate colinear or duplicate points\nfunction filterPoints(start, end) {\n    if (!start) return start;\n    if (!end) end = start;\n\n    var p = start,\n        again;\n    do {\n        again = false;\n\n        if (!p.steiner && (equals(p, p.next) || area(p.prev, p, p.next) === 0)) {\n            removeNode(p);\n            p = end = p.prev;\n            if (p === p.next) break;\n            again = true;\n\n        } else {\n            p = p.next;\n        }\n    } while (again || p !== end);\n\n    return end;\n}\n\n// main ear slicing loop which triangulates a polygon (given as a linked list)\nfunction earcutLinked(ear, triangles, dim, minX, minY, invSize, pass) {\n    if (!ear) return;\n\n    // interlink polygon nodes in z-order\n    if (!pass && invSize) indexCurve(ear, minX, minY, invSize);\n\n    var stop = ear,\n        prev, next;\n\n    // iterate through ears, slicing them one by one\n    while (ear.prev !== ear.next) {\n        prev = ear.prev;\n        next = ear.next;\n\n        if (invSize ? isEarHashed(ear, minX, minY, invSize) : isEar(ear)) {\n            // cut off the triangle\n            triangles.push(prev.i / dim | 0);\n            triangles.push(ear.i / dim | 0);\n            triangles.push(next.i / dim | 0);\n\n            removeNode(ear);\n\n            // skipping the next vertex leads to less sliver triangles\n            ear = next.next;\n            stop = next.next;\n\n            continue;\n        }\n\n        ear = next;\n\n        // if we looped through the whole remaining polygon and can't find any more ears\n        if (ear === stop) {\n            // try filtering points and slicing again\n            if (!pass) {\n                earcutLinked(filterPoints(ear), triangles, dim, minX, minY, invSize, 1);\n\n            // if this didn't work, try curing all small self-intersections locally\n            } else if (pass === 1) {\n                ear = cureLocalIntersections(filterPoints(ear), triangles, dim);\n                earcutLinked(ear, triangles, dim, minX, minY, invSize, 2);\n\n            // as a last resort, try splitting the remaining polygon into two\n            } else if (pass === 2) {\n                splitEarcut(ear, triangles, dim, minX, minY, invSize);\n            }\n\n            break;\n        }\n    }\n}\n\n// check whether a polygon node forms a valid ear with adjacent nodes\nfunction isEar(ear) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    // now make sure we don't have other points inside the potential ear\n    var ax = a.x, bx = b.x, cx = c.x, ay = a.y, by = b.y, cy = c.y;\n\n    // triangle bbox; min & max are calculated like this for speed\n    var x0 = ax < bx ? (ax < cx ? ax : cx) : (bx < cx ? bx : cx),\n        y0 = ay < by ? (ay < cy ? ay : cy) : (by < cy ? by : cy),\n        x1 = ax > bx ? (ax > cx ? ax : cx) : (bx > cx ? bx : cx),\n        y1 = ay > by ? (ay > cy ? ay : cy) : (by > cy ? by : cy);\n\n    var p = c.next;\n    while (p !== a) {\n        if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.next;\n    }\n\n    return true;\n}\n\nfunction isEarHashed(ear, minX, minY, invSize) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    var ax = a.x, bx = b.x, cx = c.x, ay = a.y, by = b.y, cy = c.y;\n\n    // triangle bbox; min & max are calculated like this for speed\n    var x0 = ax < bx ? (ax < cx ? ax : cx) : (bx < cx ? bx : cx),\n        y0 = ay < by ? (ay < cy ? ay : cy) : (by < cy ? by : cy),\n        x1 = ax > bx ? (ax > cx ? ax : cx) : (bx > cx ? bx : cx),\n        y1 = ay > by ? (ay > cy ? ay : cy) : (by > cy ? by : cy);\n\n    // z-order range for the current triangle bbox;\n    var minZ = zOrder(x0, y0, minX, minY, invSize),\n        maxZ = zOrder(x1, y1, minX, minY, invSize);\n\n    var p = ear.prevZ,\n        n = ear.nextZ;\n\n    // look for points inside the triangle in both directions\n    while (p && p.z >= minZ && n && n.z <= maxZ) {\n        if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && p !== a && p !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) && area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n\n        if (n.x >= x0 && n.x <= x1 && n.y >= y0 && n.y <= y1 && n !== a && n !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, n.x, n.y) && area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    // look for remaining points in decreasing z-order\n    while (p && p.z >= minZ) {\n        if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && p !== a && p !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) && area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n    }\n\n    // look for remaining points in increasing z-order\n    while (n && n.z <= maxZ) {\n        if (n.x >= x0 && n.x <= x1 && n.y >= y0 && n.y <= y1 && n !== a && n !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, n.x, n.y) && area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    return true;\n}\n\n// go through all polygon nodes and cure small local self-intersections\nfunction cureLocalIntersections(start, triangles, dim) {\n    var p = start;\n    do {\n        var a = p.prev,\n            b = p.next.next;\n\n        if (!equals(a, b) && intersects(a, p, p.next, b) && locallyInside(a, b) && locallyInside(b, a)) {\n\n            triangles.push(a.i / dim | 0);\n            triangles.push(p.i / dim | 0);\n            triangles.push(b.i / dim | 0);\n\n            // remove two nodes involved\n            removeNode(p);\n            removeNode(p.next);\n\n            p = start = b;\n        }\n        p = p.next;\n    } while (p !== start);\n\n    return filterPoints(p);\n}\n\n// try splitting polygon into two and triangulate them independently\nfunction splitEarcut(start, triangles, dim, minX, minY, invSize) {\n    // look for a valid diagonal that divides the polygon into two\n    var a = start;\n    do {\n        var b = a.next.next;\n        while (b !== a.prev) {\n            if (a.i !== b.i && isValidDiagonal(a, b)) {\n                // split the polygon in two by the diagonal\n                var c = splitPolygon(a, b);\n\n                // filter colinear points around the cuts\n                a = filterPoints(a, a.next);\n                c = filterPoints(c, c.next);\n\n                // run earcut on each half\n                earcutLinked(a, triangles, dim, minX, minY, invSize, 0);\n                earcutLinked(c, triangles, dim, minX, minY, invSize, 0);\n                return;\n            }\n            b = b.next;\n        }\n        a = a.next;\n    } while (a !== start);\n}\n\n// link every hole into the outer loop, producing a single-ring polygon without holes\nfunction eliminateHoles(data, holeIndices, outerNode, dim) {\n    var queue = [],\n        i, len, start, end, list;\n\n    for (i = 0, len = holeIndices.length; i < len; i++) {\n        start = holeIndices[i] * dim;\n        end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n        list = linkedList(data, start, end, dim, false);\n        if (list === list.next) list.steiner = true;\n        queue.push(getLeftmost(list));\n    }\n\n    queue.sort(compareX);\n\n    // process holes from left to right\n    for (i = 0; i < queue.length; i++) {\n        outerNode = eliminateHole(queue[i], outerNode);\n    }\n\n    return outerNode;\n}\n\nfunction compareX(a, b) {\n    return a.x - b.x;\n}\n\n// find a bridge between vertices that connects hole with an outer ring and and link it\nfunction eliminateHole(hole, outerNode) {\n    var bridge = findHoleBridge(hole, outerNode);\n    if (!bridge) {\n        return outerNode;\n    }\n\n    var bridgeReverse = splitPolygon(bridge, hole);\n\n    // filter collinear points around the cuts\n    filterPoints(bridgeReverse, bridgeReverse.next);\n    return filterPoints(bridge, bridge.next);\n}\n\n// David Eberly's algorithm for finding a bridge between hole and outer polygon\nfunction findHoleBridge(hole, outerNode) {\n    var p = outerNode,\n        hx = hole.x,\n        hy = hole.y,\n        qx = -Infinity,\n        m;\n\n    // find a segment intersected by a ray from the hole's leftmost point to the left;\n    // segment's endpoint with lesser x will be potential connection point\n    do {\n        if (hy <= p.y && hy >= p.next.y && p.next.y !== p.y) {\n            var x = p.x + (hy - p.y) * (p.next.x - p.x) / (p.next.y - p.y);\n            if (x <= hx && x > qx) {\n                qx = x;\n                m = p.x < p.next.x ? p : p.next;\n                if (x === hx) return m; // hole touches outer segment; pick leftmost endpoint\n            }\n        }\n        p = p.next;\n    } while (p !== outerNode);\n\n    if (!m) return null;\n\n    // look for points inside the triangle of hole point, segment intersection and endpoint;\n    // if there are no points found, we have a valid connection;\n    // otherwise choose the point of the minimum angle with the ray as connection point\n\n    var stop = m,\n        mx = m.x,\n        my = m.y,\n        tanMin = Infinity,\n        tan;\n\n    p = m;\n\n    do {\n        if (hx >= p.x && p.x >= mx && hx !== p.x &&\n                pointInTriangle(hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y)) {\n\n            tan = Math.abs(hy - p.y) / (hx - p.x); // tangential\n\n            if (locallyInside(p, hole) &&\n                (tan < tanMin || (tan === tanMin && (p.x > m.x || (p.x === m.x && sectorContainsSector(m, p)))))) {\n                m = p;\n                tanMin = tan;\n            }\n        }\n\n        p = p.next;\n    } while (p !== stop);\n\n    return m;\n}\n\n// whether sector in vertex m contains sector in vertex p in the same coordinates\nfunction sectorContainsSector(m, p) {\n    return area(m.prev, m, p.prev) < 0 && area(p.next, m, m.next) < 0;\n}\n\n// interlink polygon nodes in z-order\nfunction indexCurve(start, minX, minY, invSize) {\n    var p = start;\n    do {\n        if (p.z === 0) p.z = zOrder(p.x, p.y, minX, minY, invSize);\n        p.prevZ = p.prev;\n        p.nextZ = p.next;\n        p = p.next;\n    } while (p !== start);\n\n    p.prevZ.nextZ = null;\n    p.prevZ = null;\n\n    sortLinked(p);\n}\n\n// Simon Tatham's linked list merge sort algorithm\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\nfunction sortLinked(list) {\n    var i, p, q, e, tail, numMerges, pSize, qSize,\n        inSize = 1;\n\n    do {\n        p = list;\n        list = null;\n        tail = null;\n        numMerges = 0;\n\n        while (p) {\n            numMerges++;\n            q = p;\n            pSize = 0;\n            for (i = 0; i < inSize; i++) {\n                pSize++;\n                q = q.nextZ;\n                if (!q) break;\n            }\n            qSize = inSize;\n\n            while (pSize > 0 || (qSize > 0 && q)) {\n\n                if (pSize !== 0 && (qSize === 0 || !q || p.z <= q.z)) {\n                    e = p;\n                    p = p.nextZ;\n                    pSize--;\n                } else {\n                    e = q;\n                    q = q.nextZ;\n                    qSize--;\n                }\n\n                if (tail) tail.nextZ = e;\n                else list = e;\n\n                e.prevZ = tail;\n                tail = e;\n            }\n\n            p = q;\n        }\n\n        tail.nextZ = null;\n        inSize *= 2;\n\n    } while (numMerges > 1);\n\n    return list;\n}\n\n// z-order of a point given coords and inverse of the longer side of data bbox\nfunction zOrder(x, y, minX, minY, invSize) {\n    // coords are transformed into non-negative 15-bit integer range\n    x = (x - minX) * invSize | 0;\n    y = (y - minY) * invSize | 0;\n\n    x = (x | (x << 8)) & 0x00FF00FF;\n    x = (x | (x << 4)) & 0x0F0F0F0F;\n    x = (x | (x << 2)) & 0x33333333;\n    x = (x | (x << 1)) & 0x55555555;\n\n    y = (y | (y << 8)) & 0x00FF00FF;\n    y = (y | (y << 4)) & 0x0F0F0F0F;\n    y = (y | (y << 2)) & 0x33333333;\n    y = (y | (y << 1)) & 0x55555555;\n\n    return x | (y << 1);\n}\n\n// find the leftmost node of a polygon ring\nfunction getLeftmost(start) {\n    var p = start,\n        leftmost = start;\n    do {\n        if (p.x < leftmost.x || (p.x === leftmost.x && p.y < leftmost.y)) leftmost = p;\n        p = p.next;\n    } while (p !== start);\n\n    return leftmost;\n}\n\n// check if a point lies within a convex triangle\nfunction pointInTriangle(ax, ay, bx, by, cx, cy, px, py) {\n    return (cx - px) * (ay - py) >= (ax - px) * (cy - py) &&\n           (ax - px) * (by - py) >= (bx - px) * (ay - py) &&\n           (bx - px) * (cy - py) >= (cx - px) * (by - py);\n}\n\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\nfunction isValidDiagonal(a, b) {\n    return a.next.i !== b.i && a.prev.i !== b.i && !intersectsPolygon(a, b) && // dones't intersect other edges\n           (locallyInside(a, b) && locallyInside(b, a) && middleInside(a, b) && // locally visible\n            (area(a.prev, a, b.prev) || area(a, b.prev, b)) || // does not create opposite-facing sectors\n            equals(a, b) && area(a.prev, a, a.next) > 0 && area(b.prev, b, b.next) > 0); // special zero-length case\n}\n\n// signed area of a triangle\nfunction area(p, q, r) {\n    return (q.y - p.y) * (r.x - q.x) - (q.x - p.x) * (r.y - q.y);\n}\n\n// check if two points are equal\nfunction equals(p1, p2) {\n    return p1.x === p2.x && p1.y === p2.y;\n}\n\n// check if two segments intersect\nfunction intersects(p1, q1, p2, q2) {\n    var o1 = sign(area(p1, q1, p2));\n    var o2 = sign(area(p1, q1, q2));\n    var o3 = sign(area(p2, q2, p1));\n    var o4 = sign(area(p2, q2, q1));\n\n    if (o1 !== o2 && o3 !== o4) return true; // general case\n\n    if (o1 === 0 && onSegment(p1, p2, q1)) return true; // p1, q1 and p2 are collinear and p2 lies on p1q1\n    if (o2 === 0 && onSegment(p1, q2, q1)) return true; // p1, q1 and q2 are collinear and q2 lies on p1q1\n    if (o3 === 0 && onSegment(p2, p1, q2)) return true; // p2, q2 and p1 are collinear and p1 lies on p2q2\n    if (o4 === 0 && onSegment(p2, q1, q2)) return true; // p2, q2 and q1 are collinear and q1 lies on p2q2\n\n    return false;\n}\n\n// for collinear points p, q, r, check if point q lies on segment pr\nfunction onSegment(p, q, r) {\n    return q.x <= Math.max(p.x, r.x) && q.x >= Math.min(p.x, r.x) && q.y <= Math.max(p.y, r.y) && q.y >= Math.min(p.y, r.y);\n}\n\nfunction sign(num) {\n    return num > 0 ? 1 : num < 0 ? -1 : 0;\n}\n\n// check if a polygon diagonal intersects any polygon segments\nfunction intersectsPolygon(a, b) {\n    var p = a;\n    do {\n        if (p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\n                intersects(p, p.next, a, b)) return true;\n        p = p.next;\n    } while (p !== a);\n\n    return false;\n}\n\n// check if a polygon diagonal is locally inside the polygon\nfunction locallyInside(a, b) {\n    return area(a.prev, a, a.next) < 0 ?\n        area(a, b, a.next) >= 0 && area(a, a.prev, b) >= 0 :\n        area(a, b, a.prev) < 0 || area(a, a.next, b) < 0;\n}\n\n// check if the middle point of a polygon diagonal is inside the polygon\nfunction middleInside(a, b) {\n    var p = a,\n        inside = false,\n        px = (a.x + b.x) / 2,\n        py = (a.y + b.y) / 2;\n    do {\n        if (((p.y > py) !== (p.next.y > py)) && p.next.y !== p.y &&\n                (px < (p.next.x - p.x) * (py - p.y) / (p.next.y - p.y) + p.x))\n            inside = !inside;\n        p = p.next;\n    } while (p !== a);\n\n    return inside;\n}\n\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\nfunction splitPolygon(a, b) {\n    var a2 = new Node(a.i, a.x, a.y),\n        b2 = new Node(b.i, b.x, b.y),\n        an = a.next,\n        bp = b.prev;\n\n    a.next = b;\n    b.prev = a;\n\n    a2.next = an;\n    an.prev = a2;\n\n    b2.next = a2;\n    a2.prev = b2;\n\n    bp.next = b2;\n    b2.prev = bp;\n\n    return b2;\n}\n\n// create a node and optionally link it with previous one (in a circular doubly linked list)\nfunction insertNode(i, x, y, last) {\n    var p = new Node(i, x, y);\n\n    if (!last) {\n        p.prev = p;\n        p.next = p;\n\n    } else {\n        p.next = last.next;\n        p.prev = last;\n        last.next.prev = p;\n        last.next = p;\n    }\n    return p;\n}\n\nfunction removeNode(p) {\n    p.next.prev = p.prev;\n    p.prev.next = p.next;\n\n    if (p.prevZ) p.prevZ.nextZ = p.nextZ;\n    if (p.nextZ) p.nextZ.prevZ = p.prevZ;\n}\n\nfunction Node(i, x, y) {\n    // vertex index in coordinates array\n    this.i = i;\n\n    // vertex coordinates\n    this.x = x;\n    this.y = y;\n\n    // previous and next vertex nodes in a polygon ring\n    this.prev = null;\n    this.next = null;\n\n    // z-order curve value\n    this.z = 0;\n\n    // previous and next nodes in z-order\n    this.prevZ = null;\n    this.nextZ = null;\n\n    // indicates whether this is a steiner point\n    this.steiner = false;\n}\n\n// return a percentage difference between the polygon area and its triangulation area;\n// used to verify correctness of triangulation\nearcut.deviation = function (data, holeIndices, dim, triangles) {\n    var hasHoles = holeIndices && holeIndices.length;\n    var outerLen = hasHoles ? holeIndices[0] * dim : data.length;\n\n    var polygonArea = Math.abs(signedArea(data, 0, outerLen, dim));\n    if (hasHoles) {\n        for (var i = 0, len = holeIndices.length; i < len; i++) {\n            var start = holeIndices[i] * dim;\n            var end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n            polygonArea -= Math.abs(signedArea(data, start, end, dim));\n        }\n    }\n\n    var trianglesArea = 0;\n    for (i = 0; i < triangles.length; i += 3) {\n        var a = triangles[i] * dim;\n        var b = triangles[i + 1] * dim;\n        var c = triangles[i + 2] * dim;\n        trianglesArea += Math.abs(\n            (data[a] - data[c]) * (data[b + 1] - data[a + 1]) -\n            (data[a] - data[b]) * (data[c + 1] - data[a + 1]));\n    }\n\n    return polygonArea === 0 && trianglesArea === 0 ? 0 :\n        Math.abs((trianglesArea - polygonArea) / polygonArea);\n};\n\nfunction signedArea(data, start, end, dim) {\n    var sum = 0;\n    for (var i = start, j = end - dim; i < end; i += dim) {\n        sum += (data[j] - data[i]) * (data[i + 1] + data[j + 1]);\n        j = i;\n    }\n    return sum;\n}\n\n// turn a polygon in a multi-dimensional array form (e.g. as in GeoJSON) into a form Earcut accepts\nearcut.flatten = function (data) {\n    var dim = data[0][0].length,\n        result = {vertices: [], holes: [], dimensions: dim},\n        holeIndex = 0;\n\n    for (var i = 0; i < data.length; i++) {\n        for (var j = 0; j < data[i].length; j++) {\n            for (var d = 0; d < dim; d++) result.vertices.push(data[i][j][d]);\n        }\n        if (i > 0) {\n            holeIndex += data[i - 1].length;\n            result.holes.push(holeIndex);\n        }\n    }\n    return result;\n};\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","\nmodule.exports = parse\n\n/**\n * expected argument lengths\n * @type {Object}\n */\n\nvar length = {a: 7, c: 6, h: 1, l: 2, m: 2, q: 4, s: 4, t: 2, v: 1, z: 0}\n\n/**\n * segment pattern\n * @type {RegExp}\n */\n\nvar segment = /([astvzqmhlc])([^astvzqmhlc]*)/ig\n\n/**\n * parse an svg path data string. Generates an Array\n * of commands where each command is an Array of the\n * form `[command, arg1, arg2, ...]`\n *\n * @param {String} path\n * @return {Array}\n */\n\nfunction parse(path) {\n\tvar data = []\n\tpath.replace(segment, function(_, command, args){\n\t\tvar type = command.toLowerCase()\n\t\targs = parseValues(args)\n\n\t\t// overloaded moveTo\n\t\tif (type == 'm' && args.length > 2) {\n\t\t\tdata.push([command].concat(args.splice(0, 2)))\n\t\t\ttype = 'l'\n\t\t\tcommand = command == 'm' ? 'l' : 'L'\n\t\t}\n\n\t\twhile (true) {\n\t\t\tif (args.length == length[type]) {\n\t\t\t\targs.unshift(command)\n\t\t\t\treturn data.push(args)\n\t\t\t}\n\t\t\tif (args.length < length[type]) throw new Error('malformed path data')\n\t\t\tdata.push([command].concat(args.splice(0, length[type])))\n\t\t}\n\t})\n\treturn data\n}\n\nvar number = /-?[0-9]*\\.?[0-9]+(?:e[-+]?\\d+)?/ig\n\nfunction parseValues(args) {\n\tvar numbers = args.match(number)\n\treturn numbers ? numbers.map(Number) : []\n}\n","import Actions from '../Actions';\nexport default class Action {\n    constructor() {\n        this.done = false;\n        this.queued = [];\n    }\n    queue(after) {\n        this.queued.push(after);\n        return this;\n    }\n    play() {\n        Actions.play(this);\n        return this;\n    }\n    pause() {\n        Actions.pause(this);\n        return this;\n    }\n    reset() {\n        this.done = false;\n        return this;\n    }\n    stop() {\n        this.pause().reset();\n        return this;\n    }\n}\n;\n//# sourceMappingURL=Action.js.map","import Action from './Action';\nexport default class TargetedAction extends Action {\n    constructor(target, seconds) {\n        super();\n        this.time = 0;\n        this.seconds = seconds;\n        this.target = target;\n    }\n    get timeDistance() {\n        return Math.min(1, this.time / this.seconds);\n    }\n}\n;\n//# sourceMappingURL=TargetedAction.js.map","class Interpolations {\n}\nInterpolations.linear = (x) => x;\nInterpolations.smooth = (x) => x * x * (3 - 2 * x);\nInterpolations.smooth2 = (x) => Interpolations.smooth(Interpolations.smooth(x));\nInterpolations.smoother = (a) => a * a * a * (a * (a * 6 - 15) + 10);\nInterpolations.fade = Interpolations.smoother;\nInterpolations.pow2out = (x) => Math.pow(x - 1, 2) * (-1) + 1;\nexport default Interpolations;\n;\n//# sourceMappingURL=Interpolations.js.map","import TargetedAction from './TargetedAction';\nimport Interpolations from '../Interpolations';\nexport default class MoveTo extends TargetedAction {\n    constructor(target, x, y, seconds, interpolation = Interpolations.linear) {\n        super(target, seconds);\n        this.interpolation = interpolation;\n        this.x = x;\n        this.y = y;\n    }\n    tick(delta) {\n        if (this.time === 0) {\n            this.startX = this.target.x;\n            this.startY = this.target.y;\n        }\n        this.time += delta;\n        const factor = this.interpolation(this.timeDistance);\n        this.target.position.set(this.startX + (this.x - this.startX) * factor, this.startY + (this.y - this.startY) * factor);\n        return this.timeDistance >= 1;\n    }\n    reset() {\n        super.reset();\n        this.time = 0;\n        return this;\n    }\n}\n;\n//# sourceMappingURL=MoveTo.js.map","import TargetedAction from './TargetedAction';\nimport Interpolations from '../Interpolations';\nexport default class ScaleTo extends TargetedAction {\n    constructor(target, x, y, seconds, interpolation = Interpolations.linear) {\n        super(target, seconds);\n        this.interpolation = interpolation;\n        this.x = x;\n        this.y = y;\n    }\n    tick(delta) {\n        if (this.time === 0) {\n            this.startX = this.target.scale.x;\n            this.startY = this.target.scale.y;\n        }\n        this.time += delta;\n        const factor = this.interpolation(this.timeDistance);\n        this.target.scale.set(this.startX + (this.x - this.startX) * factor, this.startY + (this.y - this.startY) * factor);\n        return this.timeDistance >= 1;\n    }\n    reset() {\n        super.reset();\n        this.time = 0;\n        return this;\n    }\n}\n;\n//# sourceMappingURL=ScaleTo.js.map","import TargetedAction from './TargetedAction';\nimport Interpolations from '../Interpolations';\nexport default class RotateTo extends TargetedAction {\n    constructor(target, rotation, seconds, interpolation = Interpolations.linear) {\n        super(target, seconds);\n        this.time = 0;\n        this.interpolation = interpolation;\n        this.rotation = rotation;\n    }\n    tick(delta) {\n        if (this.time === 0) {\n            this.startRotation = this.target.rotation;\n        }\n        this.time += delta;\n        const factor = this.interpolation(this.timeDistance);\n        this.target.rotation = this.startRotation + (this.rotation - this.startRotation) * factor;\n        return this.timeDistance >= 1;\n    }\n    reset() {\n        super.reset();\n        this.time = 0;\n        return this;\n    }\n}\n;\n//# sourceMappingURL=RotateTo.js.map","import Action from './Action';\nexport default class Sequence extends Action {\n    constructor(...actions) {\n        super();\n        this.index = 0;\n        this.actions = actions;\n    }\n    tick(delta) {\n        // If empty, we are done!\n        if (this.index == this.actions.length)\n            return true;\n        // Otherwise, tick the first element\n        if (this.actions[this.index].tick(delta)) {\n            this.index++;\n        }\n    }\n    reset() {\n        super.reset();\n        this.index = 0;\n        for (const i in this.actions) {\n            this.actions[i].reset();\n        }\n        return this;\n    }\n}\n;\n//# sourceMappingURL=Sequence.js.map","import Action from './Action';\nexport default class Parallel extends Action {\n    constructor(...actions) {\n        super();\n        this.index = 0;\n        this.actions = actions;\n    }\n    tick(delta) {\n        // Tick all elements!\n        let allDone = true;\n        for (let i = 0; i < this.actions.length; i++) {\n            const action = this.actions[i];\n            if (!action.done) {\n                if (action.tick(delta)) {\n                    action.done = true;\n                }\n                else {\n                    allDone = false;\n                }\n            }\n        }\n        return allDone;\n    }\n    reset() {\n        super.reset();\n        this.index = 0;\n        for (const i in this.actions) {\n            this.actions[i].reset();\n        }\n        return this;\n    }\n}\n;\n//# sourceMappingURL=Parallel.js.map","import Action from './Action';\nexport default class Repeat extends Action {\n    constructor(action, times = -1) {\n        super();\n        this.n = 0;\n        this.action = action;\n        this.times = times;\n    }\n    tick(delta) {\n        if (this.action.tick(delta)) {\n            this.n++;\n            if (this.times >= 0 && this.n >= this.times) {\n                return true;\n            }\n            else {\n                // reset delta!\n                this.reset();\n            }\n        }\n        return false;\n    }\n    reset() {\n        super.reset();\n        this.action.reset();\n        return this;\n    }\n}\n;\n//# sourceMappingURL=Repeat.js.map","import TargetedAction from './TargetedAction';\nimport Interpolations from '../Interpolations';\nexport default class FadeTo extends TargetedAction {\n    constructor(target, alpha, seconds, interpolation = Interpolations.linear) {\n        super(target, seconds);\n        this.interpolation = interpolation;\n        this.alpha = alpha;\n    }\n    tick(delta) {\n        if (this.time === 0) {\n            this.startAlpha = this.target.alpha;\n        }\n        this.time += delta;\n        const factor = this.interpolation(this.timeDistance);\n        this.target.alpha = this.startAlpha + (this.alpha - this.startAlpha) * factor;\n        return this.timeDistance >= 1;\n    }\n    reset() {\n        super.reset();\n        this.time = 0;\n        return this;\n    }\n}\n;\n//# sourceMappingURL=FadeTo.js.map","import Action from './Action';\nexport default class Delay extends Action {\n    constructor(seconds) {\n        super();\n        this.time = 0;\n        this.seconds = seconds;\n    }\n    tick(delta) {\n        this.time += delta;\n        return this.time >= this.seconds;\n    }\n    reset() {\n        super.reset();\n        this.time = 0;\n        return this;\n    }\n}\n;\n//# sourceMappingURL=Delay.js.map","import Action from './Action';\nexport default class RunFunc extends Action {\n    constructor(fn) {\n        super();\n        this.fn = fn;\n    }\n    tick(delta) {\n        this.fn.call(this);\n        return true;\n    }\n}\n;\n//# sourceMappingURL=RunFunc.js.map","import * as PIXI from 'pixi.js';\nimport TargetedAction from './TargetedAction';\nimport Interpolations from '../Interpolations';\nexport default class TintTo extends TargetedAction {\n    constructor(target, tint, seconds, interpolation = Interpolations.linear) {\n        super(target, seconds);\n        this.tintableTarget = null;\n        this.currentTint = new PIXI.Color();\n        this.interpolation = interpolation;\n        this.tint = new PIXI.Color(tint);\n        if (this.target instanceof PIXI.Sprite) {\n            this.tintableTarget = this.target;\n        }\n    }\n    tick(delta) {\n        if (!this.tintableTarget) {\n            return true;\n        }\n        if (this.time === 0) {\n            this.startTint = new PIXI.Color(this.tintableTarget.tint);\n        }\n        this.time += delta;\n        const factor = this.interpolation(this.timeDistance);\n        this.currentTint.setValue([\n            this.startTint.red + (this.tint.red - this.startTint.red) * factor,\n            this.startTint.green + (this.tint.green - this.startTint.green) * factor,\n            this.startTint.blue + (this.tint.blue - this.startTint.blue) * factor\n        ]);\n        this.tintableTarget.tint = this.currentTint;\n        return this.timeDistance >= 1;\n    }\n    reset() {\n        super.reset();\n        this.time = 0;\n        return this;\n    }\n}\n;\n//# sourceMappingURL=TintTo.js.map","import TargetedAction from './actions/TargetedAction';\nimport Interpolations from './Interpolations';\nimport MoveTo from './actions/MoveTo';\nimport ScaleTo from './actions/ScaleTo';\nimport RotateTo from './actions/RotateTo';\nimport Sequence from './actions/Sequence';\nimport Parallel from './actions/Parallel';\nimport Repeat from './actions/Repeat';\nimport FadeTo from './actions/FadeTo';\nimport Delay from './actions/Delay';\nimport RunFunc from './actions/RunFunc';\nimport TintTo from './actions/TintTo';\nclass Actions {\n    static moveTo(target, x, y, seconds, interpolation = Interpolations.pow2out) {\n        return new MoveTo(target, x, y, seconds, interpolation);\n    }\n    static fadeTo(target, alpha, seconds, interpolation = Interpolations.pow2out) {\n        return new FadeTo(target, alpha, seconds, interpolation);\n    }\n    static fadeOut(target, seconds, interpolation = Interpolations.pow2out) {\n        return Actions.fadeTo(target, 0, seconds, interpolation);\n    }\n    static fadeOutAndRemove(target, seconds, interpolation = Interpolations.pow2out) {\n        return Actions.sequence(Actions.fadeOut(target, seconds, interpolation), Actions.remove(target));\n    }\n    static fadeIn(target, seconds, interpolation = Interpolations.pow2out) {\n        return Actions.fadeTo(target, 1, seconds, interpolation);\n    }\n    static remove(target) {\n        return Actions.runFunc(() => {\n            if (target.parent != null)\n                target.parent.removeChild(target);\n        });\n    }\n    static delay(seconds) {\n        return new Delay(seconds);\n    }\n    static runFunc(fn) {\n        return new RunFunc(fn);\n    }\n    static scaleTo(target, x, y, seconds, interpolation = Interpolations.pow2out) {\n        return new ScaleTo(target, x, y, seconds, interpolation);\n    }\n    static rotateTo(target, rotation, seconds, interpolation = Interpolations.pow2out) {\n        return new RotateTo(target, rotation, seconds, interpolation);\n    }\n    static tintTo(target, tint, seconds, interpolation = Interpolations.pow2out) {\n        return new TintTo(target, tint, seconds, interpolation);\n    }\n    static sequence(...actions) {\n        return new Sequence(...actions);\n    }\n    static parallel(...actions) {\n        return new Parallel(...actions);\n    }\n    static repeat(action, times = -1) {\n        return new Repeat(action, times);\n    }\n    static play(action) {\n        this.actions.push(action);\n    }\n    static pause(action) {\n        const index = this.actions.indexOf(action);\n        if (index >= 0) {\n            this.actions.splice(index, 1);\n        }\n    }\n    static clear(target = null) {\n        for (let i = this.actions.length - 1; i >= 0; i--) {\n            const action = this.actions[i];\n            if (target == null ||\n                (action instanceof TargetedAction && action.target == target)) {\n                this.actions.splice(i, 1);\n            }\n        }\n    }\n    static tick(delta) {\n        for (let i = this.actions.length - 1; i >= 0; i--) {\n            const action = this.actions[i];\n            if (action instanceof TargetedAction) {\n                // If the action is targeted, but has no target, we remove the action\n                // We also remove the action if the target has no parent to allow DisplayObjects outside the tree to be gc'd.\n                if (action.target == null || !action.target.parent) {\n                    this.actions.splice(i, 1);\n                    continue;\n                }\n            }\n            // Otherwise, we tick the action\n            const done = action.tick(delta);\n            if (done) {\n                action.done = true;\n                this.actions.splice(i, 1);\n                // Are there any queued events?\n                for (let j = 0; j < action.queued.length; j++) {\n                    Actions.play(action.queued[j]);\n                }\n                action.queued = [];\n            }\n        }\n    }\n}\nActions.actions = [];\nexport default Actions;\n;\n//# sourceMappingURL=Actions.js.map","// stats.js - http://github.com/mrdoob/stats.js\n(function(f,e){\"object\"===typeof exports&&\"undefined\"!==typeof module?module.exports=e():\"function\"===typeof define&&define.amd?define(e):f.Stats=e()})(this,function(){var f=function(){function e(a){c.appendChild(a.dom);return a}function u(a){for(var d=0;d<c.children.length;d++)c.children[d].style.display=d===a?\"block\":\"none\";l=a}var l=0,c=document.createElement(\"div\");c.style.cssText=\"position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000\";c.addEventListener(\"click\",function(a){a.preventDefault();\nu(++l%c.children.length)},!1);var k=(performance||Date).now(),g=k,a=0,r=e(new f.Panel(\"FPS\",\"#0ff\",\"#002\")),h=e(new f.Panel(\"MS\",\"#0f0\",\"#020\"));if(self.performance&&self.performance.memory)var t=e(new f.Panel(\"MB\",\"#f08\",\"#201\"));u(0);return{REVISION:16,dom:c,addPanel:e,showPanel:u,begin:function(){k=(performance||Date).now()},end:function(){a++;var c=(performance||Date).now();h.update(c-k,200);if(c>g+1E3&&(r.update(1E3*a/(c-g),100),g=c,a=0,t)){var d=performance.memory;t.update(d.usedJSHeapSize/\n1048576,d.jsHeapSizeLimit/1048576)}return c},update:function(){k=this.end()},domElement:c,setMode:u}};f.Panel=function(e,f,l){var c=Infinity,k=0,g=Math.round,a=g(window.devicePixelRatio||1),r=80*a,h=48*a,t=3*a,v=2*a,d=3*a,m=15*a,n=74*a,p=30*a,q=document.createElement(\"canvas\");q.width=r;q.height=h;q.style.cssText=\"width:80px;height:48px\";var b=q.getContext(\"2d\");b.font=\"bold \"+9*a+\"px Helvetica,Arial,sans-serif\";b.textBaseline=\"top\";b.fillStyle=l;b.fillRect(0,0,r,h);b.fillStyle=f;b.fillText(e,t,v);\nb.fillRect(d,m,n,p);b.fillStyle=l;b.globalAlpha=.9;b.fillRect(d,m,n,p);return{dom:q,update:function(h,w){c=Math.min(c,h);k=Math.max(k,h);b.fillStyle=l;b.globalAlpha=1;b.fillRect(0,0,r,m);b.fillStyle=f;b.fillText(g(h)+\" \"+e+\" (\"+g(c)+\"-\"+g(k)+\")\",t,v);b.drawImage(q,d+a,m,n-a,p,d,m,n-a,p);b.fillRect(d+n-a,m,a,p);b.fillStyle=l;b.globalAlpha=.9;b.fillRect(d+n-a,m,a,g((1-h/w)*p))}}};return f});\n","let instance;\nfunction setInstance(sound) {\n  instance = sound;\n  return sound;\n}\nfunction getInstance() {\n  return instance;\n}\n\nexport { getInstance, instance, setInstance };\n//# sourceMappingURL=instance.mjs.map\n","class Filter {\n  /**\n   * @param {AudioNode} destination - The audio node to use as the destination for the input AudioNode\n   * @param {AudioNode} [source] - Optional output node, defaults to destination node. This is useful\n   *        when creating filters which contains multiple AudioNode elements chained together.\n   */\n  constructor(destination, source) {\n    this.init(destination, source);\n  }\n  /** Reinitialize */\n  init(destination, source) {\n    this.destination = destination;\n    this.source = source || destination;\n  }\n  /**\n   * Connect to the destination.\n   * @param {AudioNode} destination - The destination node to connect the output to\n   */\n  connect(destination) {\n    this.source?.connect(destination);\n  }\n  /** Completely disconnect filter from destination and source nodes. */\n  disconnect() {\n    this.source?.disconnect();\n  }\n  /** Destroy the filter and don't use after this. */\n  destroy() {\n    this.disconnect();\n    this.destination = null;\n    this.source = null;\n  }\n}\n\nexport { Filter };\n//# sourceMappingURL=Filter.mjs.map\n","import { getInstance } from '../instance.mjs';\n\nclass WebAudioUtils {\n  /**\n   * Dezippering is removed in the future Web Audio API, instead\n   * we use the `setValueAtTime` method, however, this is not available\n   * in all environments (e.g., Android webview), so we fallback to the `value` setter.\n   * @param param - AudioNode parameter object\n   * @param value - Value to set\n   * @return The value set\n   */\n  static setParamValue(param, value) {\n    if (param.setValueAtTime) {\n      const context = getInstance().context;\n      param.setValueAtTime(value, context.audioContext.currentTime);\n    } else {\n      param.value = value;\n    }\n    return value;\n  }\n}\n\nexport { WebAudioUtils };\n//# sourceMappingURL=WebAudioUtils.mjs.map\n","import { getInstance } from '../instance.mjs';\nimport { WebAudioUtils } from '../webaudio/WebAudioUtils.mjs';\nimport { Filter } from './Filter.mjs';\n\nconst _EqualizerFilter = class extends Filter {\n  /**\n   * @param f32 - Default gain for 32 Hz\n   * @param f64 - Default gain for 64 Hz\n   * @param f125 - Default gain for 125 Hz\n   * @param f250 - Default gain for 250 Hz\n   * @param f500 - Default gain for 500 Hz\n   * @param f1k - Default gain for 1000 Hz\n   * @param f2k - Default gain for 2000 Hz\n   * @param f4k - Default gain for 4000 Hz\n   * @param f8k - Default gain for 8000 Hz\n   * @param f16k - Default gain for 16000 Hz\n   */\n  constructor(f32 = 0, f64 = 0, f125 = 0, f250 = 0, f500 = 0, f1k = 0, f2k = 0, f4k = 0, f8k = 0, f16k = 0) {\n    let bands = [];\n    const equalizerBands = [\n      {\n        f: _EqualizerFilter.F32,\n        type: \"lowshelf\",\n        gain: f32\n      },\n      {\n        f: _EqualizerFilter.F64,\n        type: \"peaking\",\n        gain: f64\n      },\n      {\n        f: _EqualizerFilter.F125,\n        type: \"peaking\",\n        gain: f125\n      },\n      {\n        f: _EqualizerFilter.F250,\n        type: \"peaking\",\n        gain: f250\n      },\n      {\n        f: _EqualizerFilter.F500,\n        type: \"peaking\",\n        gain: f500\n      },\n      {\n        f: _EqualizerFilter.F1K,\n        type: \"peaking\",\n        gain: f1k\n      },\n      {\n        f: _EqualizerFilter.F2K,\n        type: \"peaking\",\n        gain: f2k\n      },\n      {\n        f: _EqualizerFilter.F4K,\n        type: \"peaking\",\n        gain: f4k\n      },\n      {\n        f: _EqualizerFilter.F8K,\n        type: \"peaking\",\n        gain: f8k\n      },\n      {\n        f: _EqualizerFilter.F16K,\n        type: \"highshelf\",\n        gain: f16k\n      }\n    ];\n    if (!getInstance().useLegacy) {\n      bands = equalizerBands.map((band) => {\n        const node = getInstance().context.audioContext.createBiquadFilter();\n        node.type = band.type;\n        WebAudioUtils.setParamValue(node.Q, 1);\n        node.frequency.value = band.f;\n        WebAudioUtils.setParamValue(node.gain, band.gain);\n        return node;\n      });\n    }\n    super(bands[0], bands[bands.length - 1]);\n    this.bands = bands;\n    this.bandsMap = {};\n    for (let i = 0; i < this.bands.length; i++) {\n      const node = this.bands[i];\n      if (i > 0) {\n        this.bands[i - 1].connect(node);\n      }\n      this.bandsMap[node.frequency.value] = node;\n    }\n  }\n  /**\n   * Set gain on a specific frequency.\n   * @param frequency - The frequency, see EqualizerFilter.F* for bands\n   * @param gain - Recommended -40 to 40.\n   */\n  setGain(frequency, gain = 0) {\n    if (!this.bandsMap[frequency]) {\n      throw new Error(`No band found for frequency ${frequency}`);\n    }\n    WebAudioUtils.setParamValue(this.bandsMap[frequency].gain, gain);\n  }\n  /**\n   * Get gain amount on a specific frequency.\n   * @return The amount of gain set.\n   */\n  getGain(frequency) {\n    if (!this.bandsMap[frequency]) {\n      throw new Error(`No band found for frequency ${frequency}`);\n    }\n    return this.bandsMap[frequency].gain.value;\n  }\n  /**\n   * Gain at 32 Hz frequencey.\n   * @default 0\n   */\n  set f32(value) {\n    this.setGain(_EqualizerFilter.F32, value);\n  }\n  get f32() {\n    return this.getGain(_EqualizerFilter.F32);\n  }\n  /**\n   * Gain at 64 Hz frequencey.\n   * @default 0\n   */\n  set f64(value) {\n    this.setGain(_EqualizerFilter.F64, value);\n  }\n  get f64() {\n    return this.getGain(_EqualizerFilter.F64);\n  }\n  /**\n   * Gain at 125 Hz frequencey.\n   * @default 0\n   */\n  set f125(value) {\n    this.setGain(_EqualizerFilter.F125, value);\n  }\n  get f125() {\n    return this.getGain(_EqualizerFilter.F125);\n  }\n  /**\n   * Gain at 250 Hz frequencey.\n   * @default 0\n   */\n  set f250(value) {\n    this.setGain(_EqualizerFilter.F250, value);\n  }\n  get f250() {\n    return this.getGain(_EqualizerFilter.F250);\n  }\n  /**\n   * Gain at 500 Hz frequencey.\n   * @default 0\n   */\n  set f500(value) {\n    this.setGain(_EqualizerFilter.F500, value);\n  }\n  get f500() {\n    return this.getGain(_EqualizerFilter.F500);\n  }\n  /**\n   * Gain at 1 KHz frequencey.\n   * @default 0\n   */\n  set f1k(value) {\n    this.setGain(_EqualizerFilter.F1K, value);\n  }\n  get f1k() {\n    return this.getGain(_EqualizerFilter.F1K);\n  }\n  /**\n   * Gain at 2 KHz frequencey.\n   * @default 0\n   */\n  set f2k(value) {\n    this.setGain(_EqualizerFilter.F2K, value);\n  }\n  get f2k() {\n    return this.getGain(_EqualizerFilter.F2K);\n  }\n  /**\n   * Gain at 4 KHz frequencey.\n   * @default 0\n   */\n  set f4k(value) {\n    this.setGain(_EqualizerFilter.F4K, value);\n  }\n  get f4k() {\n    return this.getGain(_EqualizerFilter.F4K);\n  }\n  /**\n   * Gain at 8 KHz frequencey.\n   * @default 0\n   */\n  set f8k(value) {\n    this.setGain(_EqualizerFilter.F8K, value);\n  }\n  get f8k() {\n    return this.getGain(_EqualizerFilter.F8K);\n  }\n  /**\n   * Gain at 16 KHz frequencey.\n   * @default 0\n   */\n  set f16k(value) {\n    this.setGain(_EqualizerFilter.F16K, value);\n  }\n  get f16k() {\n    return this.getGain(_EqualizerFilter.F16K);\n  }\n  /** Reset all frequency bands to have gain of 0 */\n  reset() {\n    this.bands.forEach((band) => {\n      WebAudioUtils.setParamValue(band.gain, 0);\n    });\n  }\n  destroy() {\n    this.bands.forEach((band) => {\n      band.disconnect();\n    });\n    this.bands = null;\n    this.bandsMap = null;\n  }\n};\nlet EqualizerFilter = _EqualizerFilter;\n/**\n * Band at 32 Hz\n * @readonly\n */\nEqualizerFilter.F32 = 32;\n/**\n * Band at 64 Hz\n * @readonly\n */\nEqualizerFilter.F64 = 64;\n/**\n * Band at 125 Hz\n * @readonly\n */\nEqualizerFilter.F125 = 125;\n/**\n * Band at 250 Hz\n * @readonly\n */\nEqualizerFilter.F250 = 250;\n/**\n * Band at 500 Hz\n * @readonly\n */\nEqualizerFilter.F500 = 500;\n/**\n * Band at 1000 Hz\n * @readonly\n */\nEqualizerFilter.F1K = 1e3;\n/**\n * Band at 2000 Hz\n * @readonly\n */\nEqualizerFilter.F2K = 2e3;\n/**\n * Band at 4000 Hz\n * @readonly\n */\nEqualizerFilter.F4K = 4e3;\n/**\n * Band at 8000 Hz\n * @readonly\n */\nEqualizerFilter.F8K = 8e3;\n/**\n * Band at 16000 Hz\n * @readonly\n */\nEqualizerFilter.F16K = 16e3;\n\nexport { EqualizerFilter };\n//# sourceMappingURL=EqualizerFilter.mjs.map\n","import { EventEmitter } from 'pixi.js';\n\nclass HTMLAudioContext extends EventEmitter {\n  constructor() {\n    super(...arguments);\n    /** Current global speed from 0 to 1 */\n    this.speed = 1;\n    /** Current muted status of the context */\n    this.muted = false;\n    /** Current volume from 0 to 1  */\n    this.volume = 1;\n    /** Current paused status */\n    this.paused = false;\n  }\n  /** Internal trigger when volume, mute or speed changes */\n  refresh() {\n    this.emit(\"refresh\");\n  }\n  /** Internal trigger paused changes */\n  refreshPaused() {\n    this.emit(\"refreshPaused\");\n  }\n  /**\n   * HTML Audio does not support filters, this is non-functional API.\n   */\n  get filters() {\n    console.warn(\"HTML Audio does not support filters\");\n    return null;\n  }\n  set filters(_filters) {\n    console.warn(\"HTML Audio does not support filters\");\n  }\n  /**\n   * HTML Audio does not support `audioContext`\n   * @readonly\n   * @type {AudioContext}\n   */\n  get audioContext() {\n    console.warn(\"HTML Audio does not support audioContext\");\n    return null;\n  }\n  /**\n   * Toggles the muted state.\n   * @return The current muted state.\n   */\n  toggleMute() {\n    this.muted = !this.muted;\n    this.refresh();\n    return this.muted;\n  }\n  /**\n   * Toggles the paused state.\n   * @return The current paused state.\n   */\n  togglePause() {\n    this.paused = !this.paused;\n    this.refreshPaused();\n    return this.paused;\n  }\n  /** Destroy and don't use after this */\n  destroy() {\n    this.removeAllListeners();\n  }\n}\n\nexport { HTMLAudioContext };\n//# sourceMappingURL=HTMLAudioContext.mjs.map\n","import { EventEmitter, Ticker } from 'pixi.js';\n\nlet id = 0;\nconst _HTMLAudioInstance = class extends EventEmitter {\n  /** @param parent - Parent element */\n  constructor(parent) {\n    super();\n    this.id = id++;\n    this.init(parent);\n  }\n  /**\n   * Set a property by name, this makes it easy to chain values\n   * @param name - Name of the property to set\n   * @param value - Value to set property to\n   */\n  set(name, value) {\n    if (this[name] === void 0) {\n      throw new Error(`Property with name ${name} does not exist.`);\n    } else {\n      switch (name) {\n        case \"speed\":\n          this.speed = value;\n          break;\n        case \"volume\":\n          this.volume = value;\n          break;\n        case \"paused\":\n          this.paused = value;\n          break;\n        case \"loop\":\n          this.loop = value;\n          break;\n        case \"muted\":\n          this.muted = value;\n          break;\n      }\n    }\n    return this;\n  }\n  /** The current playback progress from 0 to 1. */\n  get progress() {\n    const { currentTime } = this._source;\n    return currentTime / this._duration;\n  }\n  /** Pauses the sound. */\n  get paused() {\n    return this._paused;\n  }\n  set paused(paused) {\n    this._paused = paused;\n    this.refreshPaused();\n  }\n  /**\n   * Reference: http://stackoverflow.com/a/40370077\n   * @private\n   */\n  _onPlay() {\n    this._playing = true;\n  }\n  /**\n   * Reference: http://stackoverflow.com/a/40370077\n   * @private\n   */\n  _onPause() {\n    this._playing = false;\n  }\n  /**\n   * Initialize the instance.\n   * @param {htmlaudio.HTMLAudioMedia} media - Same as constructor\n   */\n  init(media) {\n    this._playing = false;\n    this._duration = media.source.duration;\n    const source = this._source = media.source.cloneNode(false);\n    source.src = media.parent.url;\n    source.onplay = this._onPlay.bind(this);\n    source.onpause = this._onPause.bind(this);\n    media.context.on(\"refresh\", this.refresh, this);\n    media.context.on(\"refreshPaused\", this.refreshPaused, this);\n    this._media = media;\n  }\n  /**\n   * Stop the sound playing\n   * @private\n   */\n  _internalStop() {\n    if (this._source && this._playing) {\n      this._source.onended = null;\n      this._source.pause();\n    }\n  }\n  /** Stop the sound playing */\n  stop() {\n    this._internalStop();\n    if (this._source) {\n      this.emit(\"stop\");\n    }\n  }\n  /** Set the instance speed from 0 to 1 */\n  get speed() {\n    return this._speed;\n  }\n  set speed(speed) {\n    this._speed = speed;\n    this.refresh();\n  }\n  /** Get the set the volume for this instance from 0 to 1 */\n  get volume() {\n    return this._volume;\n  }\n  set volume(volume) {\n    this._volume = volume;\n    this.refresh();\n  }\n  /** If the sound instance should loop playback */\n  get loop() {\n    return this._loop;\n  }\n  set loop(loop) {\n    this._loop = loop;\n    this.refresh();\n  }\n  /** `true` if the sound is muted */\n  get muted() {\n    return this._muted;\n  }\n  set muted(muted) {\n    this._muted = muted;\n    this.refresh();\n  }\n  /**\n   * HTML Audio does not support filters, this is non-functional API.\n   */\n  get filters() {\n    console.warn(\"HTML Audio does not support filters\");\n    return null;\n  }\n  set filters(_filters) {\n    console.warn(\"HTML Audio does not support filters\");\n  }\n  /** Call whenever the loop, speed or volume changes */\n  refresh() {\n    const global = this._media.context;\n    const sound = this._media.parent;\n    this._source.loop = this._loop || sound.loop;\n    const globalVolume = global.volume * (global.muted ? 0 : 1);\n    const soundVolume = sound.volume * (sound.muted ? 0 : 1);\n    const instanceVolume = this._volume * (this._muted ? 0 : 1);\n    this._source.volume = instanceVolume * globalVolume * soundVolume;\n    this._source.playbackRate = this._speed * global.speed * sound.speed;\n  }\n  /** Handle changes in paused state, either globally or sound or instance */\n  refreshPaused() {\n    const global = this._media.context;\n    const sound = this._media.parent;\n    const pausedReal = this._paused || sound.paused || global.paused;\n    if (pausedReal !== this._pausedReal) {\n      this._pausedReal = pausedReal;\n      if (pausedReal) {\n        this._internalStop();\n        this.emit(\"paused\");\n      } else {\n        this.emit(\"resumed\");\n        this.play({\n          start: this._source.currentTime,\n          end: this._end,\n          volume: this._volume,\n          speed: this._speed,\n          loop: this._loop\n        });\n      }\n      this.emit(\"pause\", pausedReal);\n    }\n  }\n  /** Start playing the sound/ */\n  play(options) {\n    const { start, end, speed, loop, volume, muted } = options;\n    if (end) {\n      console.assert(end > start, \"End time is before start time\");\n    }\n    this._speed = speed;\n    this._volume = volume;\n    this._loop = !!loop;\n    this._muted = muted;\n    this.refresh();\n    if (this.loop && end !== null) {\n      console.warn('Looping not support when specifying an \"end\" time');\n      this.loop = false;\n    }\n    this._start = start;\n    this._end = end || this._duration;\n    this._start = Math.max(0, this._start - _HTMLAudioInstance.PADDING);\n    this._end = Math.min(this._end + _HTMLAudioInstance.PADDING, this._duration);\n    this._source.onloadedmetadata = () => {\n      if (this._source) {\n        this._source.currentTime = start;\n        this._source.onloadedmetadata = null;\n        this.emit(\"progress\", start, this._duration);\n        Ticker.shared.add(this._onUpdate, this);\n      }\n    };\n    this._source.onended = this._onComplete.bind(this);\n    this._source.play();\n    this.emit(\"start\");\n  }\n  /**\n   * Handle time update on sound.\n   * @private\n   */\n  _onUpdate() {\n    this.emit(\"progress\", this.progress, this._duration);\n    if (this._source.currentTime >= this._end && !this._source.loop) {\n      this._onComplete();\n    }\n  }\n  /**\n   * Callback when completed.\n   * @private\n   */\n  _onComplete() {\n    Ticker.shared.remove(this._onUpdate, this);\n    this._internalStop();\n    this.emit(\"progress\", 1, this._duration);\n    this.emit(\"end\", this);\n  }\n  /** Don't use after this. */\n  destroy() {\n    Ticker.shared.remove(this._onUpdate, this);\n    this.removeAllListeners();\n    const source = this._source;\n    if (source) {\n      source.onended = null;\n      source.onplay = null;\n      source.onpause = null;\n      this._internalStop();\n    }\n    this._source = null;\n    this._speed = 1;\n    this._volume = 1;\n    this._loop = false;\n    this._end = null;\n    this._start = 0;\n    this._duration = 0;\n    this._playing = false;\n    this._pausedReal = false;\n    this._paused = false;\n    this._muted = false;\n    if (this._media) {\n      this._media.context.off(\"refresh\", this.refresh, this);\n      this._media.context.off(\"refreshPaused\", this.refreshPaused, this);\n      this._media = null;\n    }\n  }\n  /**\n   * To string method for instance.\n   * @return The string representation of instance.\n   */\n  toString() {\n    return `[HTMLAudioInstance id=${this.id}]`;\n  }\n};\nlet HTMLAudioInstance = _HTMLAudioInstance;\n/** Extra padding, in seconds, to deal with low-latecy of HTMLAudio. */\nHTMLAudioInstance.PADDING = 0.1;\n\nexport { HTMLAudioInstance };\n//# sourceMappingURL=HTMLAudioInstance.mjs.map\n","import { EventEmitter } from 'pixi.js';\nimport { HTMLAudioInstance } from './HTMLAudioInstance.mjs';\n\nclass HTMLAudioMedia extends EventEmitter {\n  init(parent) {\n    this.parent = parent;\n    this._source = parent.options.source || new Audio();\n    if (parent.url) {\n      this._source.src = parent.url;\n    }\n  }\n  // Implement create\n  create() {\n    return new HTMLAudioInstance(this);\n  }\n  /**\n   * If the audio media is playable (ready).\n   * @readonly\n   */\n  get isPlayable() {\n    return !!this._source && this._source.readyState === 4;\n  }\n  /**\n   * THe duration of the media in seconds.\n   * @readonly\n   */\n  get duration() {\n    return this._source.duration;\n  }\n  /**\n   * Reference to the context.\n   * @readonly\n   */\n  get context() {\n    return this.parent.context;\n  }\n  /** The collection of filters, does not apply to HTML Audio. */\n  get filters() {\n    return null;\n  }\n  set filters(_filters) {\n    console.warn(\"HTML Audio does not support filters\");\n  }\n  // Override the destroy\n  destroy() {\n    this.removeAllListeners();\n    this.parent = null;\n    if (this._source) {\n      this._source.src = \"\";\n      this._source.load();\n      this._source = null;\n    }\n  }\n  /**\n   * Get the audio source element.\n   * @type {HTMLAudioElement}\n   * @readonly\n   */\n  get source() {\n    return this._source;\n  }\n  // Implement the method to being preloading\n  load(callback) {\n    const source = this._source;\n    const sound = this.parent;\n    if (source.readyState === 4) {\n      sound.isLoaded = true;\n      const instance = sound.autoPlayStart();\n      if (callback) {\n        setTimeout(() => {\n          callback(null, sound, instance);\n        }, 0);\n      }\n      return;\n    }\n    if (!sound.url) {\n      callback(new Error(\"sound.url or sound.source must be set\"));\n      return;\n    }\n    source.src = sound.url;\n    const onLoad = () => {\n      removeListeners();\n      sound.isLoaded = true;\n      const instance = sound.autoPlayStart();\n      if (callback) {\n        callback(null, sound, instance);\n      }\n    };\n    const onAbort = () => {\n      removeListeners();\n      if (callback) {\n        callback(new Error(\"Sound loading has been aborted\"));\n      }\n    };\n    const onError = () => {\n      removeListeners();\n      const message = `Failed to load audio element (code: ${source.error.code})`;\n      if (callback) {\n        callback(new Error(message));\n      } else {\n        console.error(message);\n      }\n    };\n    const removeListeners = () => {\n      source.removeEventListener(\"canplaythrough\", onLoad);\n      source.removeEventListener(\"load\", onLoad);\n      source.removeEventListener(\"abort\", onAbort);\n      source.removeEventListener(\"error\", onError);\n    };\n    source.addEventListener(\"canplaythrough\", onLoad, false);\n    source.addEventListener(\"load\", onLoad, false);\n    source.addEventListener(\"abort\", onAbort, false);\n    source.addEventListener(\"error\", onError, false);\n    source.load();\n  }\n}\n\nexport { HTMLAudioMedia };\n//# sourceMappingURL=HTMLAudioMedia.mjs.map\n","class SoundSprite {\n  /**\n   * @param parent - The parent sound\n   * @param options - Data associated with object.\n   */\n  constructor(parent, options) {\n    this.parent = parent;\n    Object.assign(this, options);\n    this.duration = this.end - this.start;\n    console.assert(this.duration > 0, \"End time must be after start time\");\n  }\n  /**\n   * Play the sound sprite.\n   * @param {Function} [complete] - Function call when complete\n   * @return Sound instance being played.\n   */\n  play(complete) {\n    return this.parent.play({\n      complete,\n      speed: this.speed || this.parent.speed,\n      end: this.end,\n      start: this.start,\n      loop: this.loop\n    });\n  }\n  /** Destroy and don't use after this */\n  destroy() {\n    this.parent = null;\n  }\n}\n\nexport { SoundSprite };\n//# sourceMappingURL=SoundSprite.mjs.map\n","const extensions = [\n  \"ogg\",\n  \"oga\",\n  \"opus\",\n  \"m4a\",\n  \"mp3\",\n  \"mpeg\",\n  \"wav\",\n  \"aiff\",\n  \"wma\",\n  \"mid\",\n  \"caf\"\n];\nconst mimes = [\n  \"audio/mpeg\",\n  \"audio/ogg\"\n];\nconst supported = {};\nfunction validateFormats(typeOverrides) {\n  const overrides = {\n    m4a: \"audio/mp4\",\n    oga: \"audio/ogg\",\n    opus: 'audio/ogg; codecs=\"opus\"',\n    caf: 'audio/x-caf; codecs=\"opus\"',\n    ...typeOverrides || {}\n  };\n  const audio = document.createElement(\"audio\");\n  const formats = {};\n  const no = /^no$/;\n  extensions.forEach((ext) => {\n    const canByExt = audio.canPlayType(`audio/${ext}`).replace(no, \"\");\n    const canByType = overrides[ext] ? audio.canPlayType(overrides[ext]).replace(no, \"\") : \"\";\n    formats[ext] = !!canByExt || !!canByType;\n  });\n  Object.assign(supported, formats);\n}\nvalidateFormats();\n\nexport { extensions, mimes, supported, validateFormats };\n//# sourceMappingURL=supported.mjs.map\n","import { EventEmitter, Ticker } from 'pixi.js';\nimport { WebAudioUtils } from './WebAudioUtils.mjs';\n\nlet id = 0;\nclass WebAudioInstance extends EventEmitter {\n  constructor(media) {\n    super();\n    this.id = id++;\n    this._media = null;\n    this._paused = false;\n    this._muted = false;\n    this._elapsed = 0;\n    this.init(media);\n  }\n  /**\n   * Set a property by name, this makes it easy to chain values\n   * @param name - Name of the property to set.\n   * @param value - Value to set property to.\n   */\n  set(name, value) {\n    if (this[name] === void 0) {\n      throw new Error(`Property with name ${name} does not exist.`);\n    } else {\n      switch (name) {\n        case \"speed\":\n          this.speed = value;\n          break;\n        case \"volume\":\n          this.volume = value;\n          break;\n        case \"muted\":\n          this.muted = value;\n          break;\n        case \"loop\":\n          this.loop = value;\n          break;\n        case \"paused\":\n          this.paused = value;\n          break;\n      }\n    }\n    return this;\n  }\n  /** Stops the instance, don't use after this. */\n  stop() {\n    if (this._source) {\n      this._internalStop();\n      this.emit(\"stop\");\n    }\n  }\n  /** Set the instance speed from 0 to 1 */\n  get speed() {\n    return this._speed;\n  }\n  set speed(speed) {\n    this._speed = speed;\n    this.refresh();\n    this._update(true);\n  }\n  /** Get the set the volume for this instance from 0 to 1 */\n  get volume() {\n    return this._volume;\n  }\n  set volume(volume) {\n    this._volume = volume;\n    this.refresh();\n  }\n  /** `true` if the sound is muted */\n  get muted() {\n    return this._muted;\n  }\n  set muted(muted) {\n    this._muted = muted;\n    this.refresh();\n  }\n  /** If the sound instance should loop playback */\n  get loop() {\n    return this._loop;\n  }\n  set loop(loop) {\n    this._loop = loop;\n    this.refresh();\n  }\n  /** The collection of filters. */\n  get filters() {\n    return this._filters;\n  }\n  set filters(filters) {\n    if (this._filters) {\n      this._filters?.filter((filter) => filter).forEach((filter) => filter.disconnect());\n      this._filters = null;\n      this._source.connect(this._gain);\n    }\n    this._filters = filters?.length ? filters.slice(0) : null;\n    this.refresh();\n  }\n  /** Refresh loop, volume and speed based on changes to parent */\n  refresh() {\n    if (!this._source) {\n      return;\n    }\n    const global = this._media.context;\n    const sound = this._media.parent;\n    this._source.loop = this._loop || sound.loop;\n    const globalVolume = global.volume * (global.muted ? 0 : 1);\n    const soundVolume = sound.volume * (sound.muted ? 0 : 1);\n    const instanceVolume = this._volume * (this._muted ? 0 : 1);\n    WebAudioUtils.setParamValue(this._gain.gain, instanceVolume * soundVolume * globalVolume);\n    WebAudioUtils.setParamValue(this._source.playbackRate, this._speed * sound.speed * global.speed);\n    this.applyFilters();\n  }\n  /** Connect filters nodes to audio context */\n  applyFilters() {\n    if (this._filters?.length) {\n      this._source.disconnect();\n      let source = this._source;\n      this._filters.forEach((filter) => {\n        source.connect(filter.destination);\n        source = filter;\n      });\n      source.connect(this._gain);\n    }\n  }\n  /** Handle changes in paused state, either globally or sound or instance */\n  refreshPaused() {\n    const global = this._media.context;\n    const sound = this._media.parent;\n    const pausedReal = this._paused || sound.paused || global.paused;\n    if (pausedReal !== this._pausedReal) {\n      this._pausedReal = pausedReal;\n      if (pausedReal) {\n        this._internalStop();\n        this.emit(\"paused\");\n      } else {\n        this.emit(\"resumed\");\n        this.play({\n          start: this._elapsed % this._duration,\n          end: this._end,\n          speed: this._speed,\n          loop: this._loop,\n          volume: this._volume\n        });\n      }\n      this.emit(\"pause\", pausedReal);\n    }\n  }\n  /**\n   * Plays the sound.\n   * @param options - Play options.\n   */\n  play(options) {\n    const { start, end, speed, loop, volume, muted, filters } = options;\n    if (end) {\n      console.assert(end > start, \"End time is before start time\");\n    }\n    this._paused = false;\n    const { source, gain } = this._media.nodes.cloneBufferSource();\n    this._source = source;\n    this._gain = gain;\n    this._speed = speed;\n    this._volume = volume;\n    this._loop = !!loop;\n    this._muted = muted;\n    this._filters = filters;\n    this.refresh();\n    const duration = this._source.buffer.duration;\n    this._duration = duration;\n    this._end = end;\n    this._lastUpdate = this._now();\n    this._elapsed = start;\n    this._source.onended = this._onComplete.bind(this);\n    if (this._loop) {\n      this._source.loopEnd = end;\n      this._source.loopStart = start;\n      this._source.start(0, start);\n    } else if (end) {\n      this._source.start(0, start, end - start);\n    } else {\n      this._source.start(0, start);\n    }\n    this.emit(\"start\");\n    this._update(true);\n    this.enableTicker(true);\n  }\n  /** Start the update progress. */\n  enableTicker(enabled) {\n    Ticker.shared.remove(this._updateListener, this);\n    if (enabled) {\n      Ticker.shared.add(this._updateListener, this);\n    }\n  }\n  /** The current playback progress from 0 to 1. */\n  get progress() {\n    return this._progress;\n  }\n  /** Pauses the sound. */\n  get paused() {\n    return this._paused;\n  }\n  set paused(paused) {\n    this._paused = paused;\n    this.refreshPaused();\n  }\n  /** Don't use after this. */\n  destroy() {\n    this.removeAllListeners();\n    this._internalStop();\n    if (this._gain) {\n      this._gain.disconnect();\n      this._gain = null;\n    }\n    if (this._media) {\n      this._media.context.events.off(\"refresh\", this.refresh, this);\n      this._media.context.events.off(\"refreshPaused\", this.refreshPaused, this);\n      this._media = null;\n    }\n    this._filters?.forEach((filter) => filter.disconnect());\n    this._filters = null;\n    this._end = null;\n    this._speed = 1;\n    this._volume = 1;\n    this._loop = false;\n    this._elapsed = 0;\n    this._duration = 0;\n    this._paused = false;\n    this._muted = false;\n    this._pausedReal = false;\n  }\n  /**\n   * To string method for instance.\n   * @return The string representation of instance.\n   */\n  toString() {\n    return `[WebAudioInstance id=${this.id}]`;\n  }\n  /**\n   * Get the current time in seconds.\n   * @return Seconds since start of context\n   */\n  _now() {\n    return this._media.context.audioContext.currentTime;\n  }\n  /** Callback for update listener */\n  _updateListener() {\n    this._update();\n  }\n  /** Internal update the progress. */\n  _update(force = false) {\n    if (this._source) {\n      const now = this._now();\n      const delta = now - this._lastUpdate;\n      if (delta > 0 || force) {\n        const speed = this._source.playbackRate.value;\n        this._elapsed += delta * speed;\n        this._lastUpdate = now;\n        const duration = this._duration;\n        let progress;\n        if (this._source.loopStart) {\n          const soundLength = this._source.loopEnd - this._source.loopStart;\n          progress = (this._source.loopStart + this._elapsed % soundLength) / duration;\n        } else {\n          progress = this._elapsed % duration / duration;\n        }\n        this._progress = progress;\n        this.emit(\"progress\", this._progress, duration);\n      }\n    }\n  }\n  /** Initializes the instance. */\n  init(media) {\n    this._media = media;\n    media.context.events.on(\"refresh\", this.refresh, this);\n    media.context.events.on(\"refreshPaused\", this.refreshPaused, this);\n  }\n  /** Stops the instance. */\n  _internalStop() {\n    if (this._source) {\n      this.enableTicker(false);\n      this._source.onended = null;\n      this._source.stop(0);\n      this._source.disconnect();\n      try {\n        this._source.buffer = null;\n      } catch (err) {\n        console.warn(\"Failed to set AudioBufferSourceNode.buffer to null:\", err);\n      }\n      this._source = null;\n    }\n  }\n  /** Callback when completed. */\n  _onComplete() {\n    if (this._source) {\n      this.enableTicker(false);\n      this._source.onended = null;\n      this._source.disconnect();\n      try {\n        this._source.buffer = null;\n      } catch (err) {\n        console.warn(\"Failed to set AudioBufferSourceNode.buffer to null:\", err);\n      }\n    }\n    this._source = null;\n    this._progress = 1;\n    this.emit(\"progress\", 1, this._duration);\n    this.emit(\"end\", this);\n  }\n}\n\nexport { WebAudioInstance };\n//# sourceMappingURL=WebAudioInstance.mjs.map\n","class Filterable {\n  /**\n   * @param input - The source audio node\n   * @param output - The output audio node\n   */\n  constructor(input, output) {\n    this._output = output;\n    this._input = input;\n  }\n  /** The destination output audio node */\n  get destination() {\n    return this._input;\n  }\n  /** The collection of filters. */\n  get filters() {\n    return this._filters;\n  }\n  set filters(filters) {\n    if (this._filters) {\n      this._filters.forEach((filter) => {\n        if (filter) {\n          filter.disconnect();\n        }\n      });\n      this._filters = null;\n      this._input.connect(this._output);\n    }\n    if (filters && filters.length) {\n      this._filters = filters.slice(0);\n      this._input.disconnect();\n      let prevFilter = null;\n      filters.forEach((filter) => {\n        if (prevFilter === null) {\n          this._input.connect(filter.destination);\n        } else {\n          prevFilter.connect(filter.destination);\n        }\n        prevFilter = filter;\n      });\n      prevFilter.connect(this._output);\n    }\n  }\n  /** Cleans up. */\n  destroy() {\n    this.filters = null;\n    this._input = null;\n    this._output = null;\n  }\n}\n\nexport { Filterable };\n//# sourceMappingURL=Filterable.mjs.map\n","import { Filterable } from '../Filterable.mjs';\nimport { WebAudioUtils } from './WebAudioUtils.mjs';\n\nconst _WebAudioNodes = class extends Filterable {\n  /**\n   * @param context - The audio context.\n   */\n  constructor(context) {\n    const audioContext = context.audioContext;\n    const bufferSource = audioContext.createBufferSource();\n    const gain = audioContext.createGain();\n    const analyser = audioContext.createAnalyser();\n    bufferSource.connect(analyser);\n    analyser.connect(gain);\n    gain.connect(context.destination);\n    super(analyser, gain);\n    this.context = context;\n    this.bufferSource = bufferSource;\n    this.gain = gain;\n    this.analyser = analyser;\n  }\n  /**\n   * Get the script processor node.\n   * @readonly\n   */\n  get script() {\n    if (!this._script) {\n      this._script = this.context.audioContext.createScriptProcessor(_WebAudioNodes.BUFFER_SIZE);\n      this._script.connect(this.context.destination);\n    }\n    return this._script;\n  }\n  /** Cleans up. */\n  destroy() {\n    super.destroy();\n    this.bufferSource.disconnect();\n    if (this._script) {\n      this._script.disconnect();\n    }\n    this.gain.disconnect();\n    this.analyser.disconnect();\n    this.bufferSource = null;\n    this._script = null;\n    this.gain = null;\n    this.analyser = null;\n    this.context = null;\n  }\n  /**\n   * Clones the bufferSource. Used just before playing a sound.\n   * @returns {SourceClone} The clone AudioBufferSourceNode.\n   */\n  cloneBufferSource() {\n    const orig = this.bufferSource;\n    const source = this.context.audioContext.createBufferSource();\n    source.buffer = orig.buffer;\n    WebAudioUtils.setParamValue(source.playbackRate, orig.playbackRate.value);\n    source.loop = orig.loop;\n    const gain = this.context.audioContext.createGain();\n    source.connect(gain);\n    gain.connect(this.destination);\n    return { source, gain };\n  }\n  /**\n   * Get buffer size of `ScriptProcessorNode`.\n   * @readonly\n   */\n  get bufferSize() {\n    return this.script.bufferSize;\n  }\n};\nlet WebAudioNodes = _WebAudioNodes;\n/**\n * The buffer size for script processor, default is `0` which auto-detects. If you plan to use\n * script node on iOS, you'll need to provide a non-zero amount.\n * @default 0\n */\nWebAudioNodes.BUFFER_SIZE = 0;\n\nexport { WebAudioNodes };\n//# sourceMappingURL=WebAudioNodes.mjs.map\n","import { DOMAdapter } from 'pixi.js';\nimport { WebAudioInstance } from './WebAudioInstance.mjs';\nimport { WebAudioNodes } from './WebAudioNodes.mjs';\n\nclass WebAudioMedia {\n  /**\n   * Re-initialize without constructing.\n   * @param parent - - Instance of parent Sound container\n   */\n  init(parent) {\n    this.parent = parent;\n    this._nodes = new WebAudioNodes(this.context);\n    this._source = this._nodes.bufferSource;\n    this.source = parent.options.source;\n  }\n  /** Destructor, safer to use `SoundLibrary.remove(alias)` to remove this sound. */\n  destroy() {\n    this.parent = null;\n    this._nodes.destroy();\n    this._nodes = null;\n    try {\n      this._source.buffer = null;\n    } catch (err) {\n      console.warn(\"Failed to set AudioBufferSourceNode.buffer to null:\", err);\n    }\n    this._source = null;\n    this.source = null;\n  }\n  // Implement create\n  create() {\n    return new WebAudioInstance(this);\n  }\n  // Implement context\n  get context() {\n    return this.parent.context;\n  }\n  // Implement isPlayable\n  get isPlayable() {\n    return !!this._source && !!this._source.buffer;\n  }\n  // Implement filters\n  get filters() {\n    return this._nodes.filters;\n  }\n  set filters(filters) {\n    this._nodes.filters = filters;\n  }\n  // Implements duration\n  get duration() {\n    console.assert(this.isPlayable, \"Sound not yet playable, no duration\");\n    return this._source.buffer.duration;\n  }\n  /** Gets and sets the buffer. */\n  get buffer() {\n    return this._source.buffer;\n  }\n  set buffer(buffer) {\n    this._source.buffer = buffer;\n  }\n  /** Get the current chained nodes object */\n  get nodes() {\n    return this._nodes;\n  }\n  // Implements load\n  load(callback) {\n    if (this.source) {\n      this._decode(this.source, callback);\n    } else if (this.parent.url) {\n      this._loadUrl(callback);\n    } else if (callback) {\n      callback(new Error(\"sound.url or sound.source must be set\"));\n    } else {\n      console.error(\"sound.url or sound.source must be set\");\n    }\n  }\n  /** Loads a sound using XHMLHttpRequest object. */\n  async _loadUrl(callback) {\n    const url = this.parent.url;\n    const response = await DOMAdapter.get().fetch(url);\n    this._decode(await response.arrayBuffer(), callback);\n  }\n  /**\n   * Decodes the array buffer.\n   * @param arrayBuffer - From load.\n   * @param {Function} callback - Callback optional\n   */\n  _decode(arrayBuffer, callback) {\n    const audioBufferReadyFn = (err, buffer) => {\n      if (err) {\n        if (callback) {\n          callback(err);\n        }\n      } else {\n        this.parent.isLoaded = true;\n        this.buffer = buffer;\n        const instance = this.parent.autoPlayStart();\n        if (callback) {\n          callback(null, this.parent, instance);\n        }\n      }\n    };\n    if (arrayBuffer instanceof AudioBuffer) {\n      audioBufferReadyFn(null, arrayBuffer);\n    } else {\n      const context = this.parent.context;\n      context.decode(arrayBuffer, audioBufferReadyFn);\n    }\n  }\n}\n\nexport { WebAudioMedia };\n//# sourceMappingURL=WebAudioMedia.mjs.map\n","import { path } from 'pixi.js';\nimport { HTMLAudioMedia } from './htmlaudio/HTMLAudioMedia.mjs';\nimport { getInstance } from './instance.mjs';\nimport { SoundSprite } from './SoundSprite.mjs';\nimport { supported, extensions } from './utils/supported.mjs';\nimport { WebAudioMedia } from './webaudio/WebAudioMedia.mjs';\n\nconst _Sound = class {\n  /**\n   * Create a new sound instance from source.\n   * @param source - Either the path or url to the source file.\n   *        or the object of options to use.\n   * @return Created sound instance.\n   */\n  static from(source) {\n    let options = {};\n    if (typeof source === \"string\") {\n      options.url = source;\n    } else if (source instanceof ArrayBuffer || source instanceof AudioBuffer || source instanceof HTMLAudioElement) {\n      options.source = source;\n    } else if (Array.isArray(source)) {\n      options.url = source;\n    } else {\n      options = source;\n    }\n    options = {\n      autoPlay: false,\n      singleInstance: false,\n      url: null,\n      source: null,\n      preload: false,\n      volume: 1,\n      speed: 1,\n      complete: null,\n      loaded: null,\n      loop: false,\n      ...options\n    };\n    Object.freeze(options);\n    const media = getInstance().useLegacy ? new HTMLAudioMedia() : new WebAudioMedia();\n    return new _Sound(media, options);\n  }\n  /**\n   * Use `Sound.from`\n   * @ignore\n   */\n  constructor(media, options) {\n    this.media = media;\n    this.options = options;\n    this._instances = [];\n    this._sprites = {};\n    this.media.init(this);\n    const complete = options.complete;\n    this._autoPlayOptions = complete ? { complete } : null;\n    this.isLoaded = false;\n    this._preloadQueue = null;\n    this.isPlaying = false;\n    this.autoPlay = options.autoPlay;\n    this.singleInstance = options.singleInstance;\n    this.preload = options.preload || this.autoPlay;\n    this.url = Array.isArray(options.url) ? this.preferUrl(options.url) : options.url;\n    this.speed = options.speed;\n    this.volume = options.volume;\n    this.loop = options.loop;\n    if (options.sprites) {\n      this.addSprites(options.sprites);\n    }\n    if (this.preload) {\n      this._preload(options.loaded);\n    }\n  }\n  /**\n   * Internal help for resolving which file to use if there are multiple provide\n   * this is especially helpful for working with bundlers (non Assets loading).\n   */\n  preferUrl(urls) {\n    const [file] = urls.map((url) => ({ url, ext: path.extname(url).slice(1) })).filter(({ ext }) => supported[ext]).sort((a, b) => extensions.indexOf(a.ext) - extensions.indexOf(b.ext));\n    if (!file) {\n      throw new Error(\"No supported file type found\");\n    }\n    return file.url;\n  }\n  /** Instance of the media context. */\n  get context() {\n    return getInstance().context;\n  }\n  /** Stops all the instances of this sound from playing. */\n  pause() {\n    this.isPlaying = false;\n    this.paused = true;\n    return this;\n  }\n  /** Resuming all the instances of this sound from playing */\n  resume() {\n    this.isPlaying = this._instances.length > 0;\n    this.paused = false;\n    return this;\n  }\n  /** Stops all the instances of this sound from playing. */\n  get paused() {\n    return this._paused;\n  }\n  set paused(paused) {\n    this._paused = paused;\n    this.refreshPaused();\n  }\n  /** The playback rate. */\n  get speed() {\n    return this._speed;\n  }\n  set speed(speed) {\n    this._speed = speed;\n    this.refresh();\n  }\n  /** Set the filters. Only supported with WebAudio. */\n  get filters() {\n    return this.media.filters;\n  }\n  set filters(filters) {\n    this.media.filters = filters;\n  }\n  /**\n   * @ignore\n   */\n  addSprites(source, data) {\n    if (typeof source === \"object\") {\n      const results = {};\n      for (const alias in source) {\n        results[alias] = this.addSprites(alias, source[alias]);\n      }\n      return results;\n    }\n    console.assert(!this._sprites[source], `Alias ${source} is already taken`);\n    const sprite = new SoundSprite(this, data);\n    this._sprites[source] = sprite;\n    return sprite;\n  }\n  /** Destructor, safer to use `SoundLibrary.remove(alias)` to remove this sound. */\n  destroy() {\n    this._removeInstances();\n    this.removeSprites();\n    this.media.destroy();\n    this.media = null;\n    this._sprites = null;\n    this._instances = null;\n  }\n  /**\n   * Remove a sound sprite.\n   * @param alias - The unique name of the sound sprite, if alias is omitted, removes all sprites.\n   */\n  removeSprites(alias) {\n    if (!alias) {\n      for (const name in this._sprites) {\n        this.removeSprites(name);\n      }\n    } else {\n      const sprite = this._sprites[alias];\n      if (sprite !== void 0) {\n        sprite.destroy();\n        delete this._sprites[alias];\n      }\n    }\n    return this;\n  }\n  /** If the current sound is playable (loaded). */\n  get isPlayable() {\n    return this.isLoaded && this.media && this.media.isPlayable;\n  }\n  /** Stops all the instances of this sound from playing. */\n  stop() {\n    if (!this.isPlayable) {\n      this.autoPlay = false;\n      this._autoPlayOptions = null;\n      return this;\n    }\n    this.isPlaying = false;\n    for (let i = this._instances.length - 1; i >= 0; i--) {\n      this._instances[i].stop();\n    }\n    return this;\n  }\n  // Overloaded function\n  play(source, complete) {\n    let options;\n    if (typeof source === \"string\") {\n      const sprite = source;\n      options = { sprite, loop: this.loop, complete };\n    } else if (typeof source === \"function\") {\n      options = {};\n      options.complete = source;\n    } else {\n      options = source;\n    }\n    options = {\n      complete: null,\n      loaded: null,\n      sprite: null,\n      end: null,\n      start: 0,\n      volume: 1,\n      speed: 1,\n      muted: false,\n      loop: false,\n      ...options || {}\n    };\n    if (options.sprite) {\n      const alias = options.sprite;\n      console.assert(!!this._sprites[alias], `Alias ${alias} is not available`);\n      const sprite = this._sprites[alias];\n      options.start = sprite.start + (options.start || 0);\n      options.end = sprite.end;\n      options.speed = sprite.speed || 1;\n      options.loop = sprite.loop || options.loop;\n      delete options.sprite;\n    }\n    if (options.offset) {\n      options.start = options.offset;\n    }\n    if (!this.isLoaded) {\n      if (this._preloadQueue) {\n        return new Promise((resolve) => {\n          this._preloadQueue.push(() => {\n            resolve(this.play(options));\n          });\n        });\n      }\n      this._preloadQueue = [];\n      this.autoPlay = true;\n      this._autoPlayOptions = options;\n      return new Promise((resolve, reject) => {\n        this._preload((err, sound, media) => {\n          this._preloadQueue.forEach((resolve2) => resolve2());\n          this._preloadQueue = null;\n          if (err) {\n            reject(err);\n          } else {\n            if (options.loaded) {\n              options.loaded(err, sound, media);\n            }\n            resolve(media);\n          }\n        });\n      });\n    }\n    if (this.singleInstance || options.singleInstance) {\n      this._removeInstances();\n    }\n    const instance = this._createInstance();\n    this._instances.push(instance);\n    this.isPlaying = true;\n    instance.once(\"end\", () => {\n      if (options.complete) {\n        options.complete(this);\n      }\n      this._onComplete(instance);\n    });\n    instance.once(\"stop\", () => {\n      this._onComplete(instance);\n    });\n    instance.play(options);\n    return instance;\n  }\n  /** Internal only, speed, loop, volume change occured. */\n  refresh() {\n    const len = this._instances.length;\n    for (let i = 0; i < len; i++) {\n      this._instances[i].refresh();\n    }\n  }\n  /** Handle changes in paused state. Internal only. */\n  refreshPaused() {\n    const len = this._instances.length;\n    for (let i = 0; i < len; i++) {\n      this._instances[i].refreshPaused();\n    }\n  }\n  /** Gets and sets the volume. */\n  get volume() {\n    return this._volume;\n  }\n  set volume(volume) {\n    this._volume = volume;\n    this.refresh();\n  }\n  /** Gets and sets the muted flag. */\n  get muted() {\n    return this._muted;\n  }\n  set muted(muted) {\n    this._muted = muted;\n    this.refresh();\n  }\n  /** Gets and sets the looping. */\n  get loop() {\n    return this._loop;\n  }\n  set loop(loop) {\n    this._loop = loop;\n    this.refresh();\n  }\n  /** Starts the preloading of sound. */\n  _preload(callback) {\n    this.media.load(callback);\n  }\n  /** Gets the list of instances that are currently being played of this sound. */\n  get instances() {\n    return this._instances;\n  }\n  /** Get the map of sprites. */\n  get sprites() {\n    return this._sprites;\n  }\n  /** Get the duration of the audio in seconds. */\n  get duration() {\n    return this.media.duration;\n  }\n  /** Auto play the first instance. */\n  autoPlayStart() {\n    let instance;\n    if (this.autoPlay) {\n      instance = this.play(this._autoPlayOptions);\n    }\n    return instance;\n  }\n  /** Removes all instances. */\n  _removeInstances() {\n    for (let i = this._instances.length - 1; i >= 0; i--) {\n      this._poolInstance(this._instances[i]);\n    }\n    this._instances.length = 0;\n  }\n  /**\n   * Sound instance completed.\n   * @param instance\n   */\n  _onComplete(instance) {\n    if (this._instances) {\n      const index = this._instances.indexOf(instance);\n      if (index > -1) {\n        this._instances.splice(index, 1);\n      }\n      this.isPlaying = this._instances.length > 0;\n    }\n    this._poolInstance(instance);\n  }\n  /** Create a new instance. */\n  _createInstance() {\n    if (_Sound._pool.length > 0) {\n      const instance = _Sound._pool.pop();\n      instance.init(this.media);\n      return instance;\n    }\n    return this.media.create();\n  }\n  /**\n   * Destroy/recycling the instance object.\n   * @param instance - Instance to recycle\n   */\n  _poolInstance(instance) {\n    instance.destroy();\n    if (_Sound._pool.indexOf(instance) < 0) {\n      _Sound._pool.push(instance);\n    }\n  }\n};\nlet Sound = _Sound;\n/** Pool of instances */\nSound._pool = [];\n\nexport { Sound };\n//# sourceMappingURL=Sound.mjs.map\n","import { EventEmitter } from 'pixi.js';\nimport { Filterable } from '../Filterable.mjs';\n\nclass WebAudioContext extends Filterable {\n  constructor() {\n    const win = window;\n    const ctx = new WebAudioContext.AudioContext();\n    const compressor = ctx.createDynamicsCompressor();\n    const analyser = ctx.createAnalyser();\n    analyser.connect(compressor);\n    compressor.connect(ctx.destination);\n    super(analyser, compressor);\n    /** Set to false ignore suspending when window is blurred */\n    this.autoPause = true;\n    this._ctx = ctx;\n    this._offlineCtx = new WebAudioContext.OfflineAudioContext(\n      1,\n      2,\n      win.OfflineAudioContext ? Math.max(8e3, Math.min(96e3, ctx.sampleRate)) : 44100\n    );\n    this.compressor = compressor;\n    this.analyser = analyser;\n    this.events = new EventEmitter();\n    this.volume = 1;\n    this.speed = 1;\n    this.muted = false;\n    this.paused = false;\n    this._locked = ctx.state === \"suspended\" && (\"ontouchstart\" in globalThis || \"onclick\" in globalThis);\n    if (this._locked) {\n      this._unlock();\n      this._unlock = this._unlock.bind(this);\n      document.addEventListener(\"mousedown\", this._unlock, true);\n      document.addEventListener(\"touchstart\", this._unlock, true);\n      document.addEventListener(\"touchend\", this._unlock, true);\n    }\n    this.onFocus = this.onFocus.bind(this);\n    this.onBlur = this.onBlur.bind(this);\n    globalThis.addEventListener(\"focus\", this.onFocus);\n    globalThis.addEventListener(\"blur\", this.onBlur);\n  }\n  /** Handle mobile WebAudio context resume */\n  onFocus() {\n    if (!this.autoPause) {\n      return;\n    }\n    const state = this._ctx.state;\n    if (state === \"suspended\" || state === \"interrupted\" || !this._locked) {\n      this.paused = this._pausedOnBlur;\n      this.refreshPaused();\n    }\n  }\n  /** Handle mobile WebAudio context suspend */\n  onBlur() {\n    if (!this.autoPause) {\n      return;\n    }\n    if (!this._locked) {\n      this._pausedOnBlur = this._paused;\n      this.paused = true;\n      this.refreshPaused();\n    }\n  }\n  /**\n   * Try to unlock audio on iOS. This is triggered from either WebAudio plugin setup (which will work if inside of\n   * a `mousedown` or `touchend` event stack), or the first document touchend/mousedown event. If it fails (touchend\n   * will fail if the user presses for too long, indicating a scroll event instead of a click event.\n   *\n   * Note that earlier versions of iOS supported `touchstart` for this, but iOS9 removed this functionality. Adding\n   * a `touchstart` event to support older platforms may preclude a `mousedown` even from getting fired on iOS9, so we\n   * stick with `mousedown` and `touchend`.\n   */\n  _unlock() {\n    if (!this._locked) {\n      return;\n    }\n    this.playEmptySound();\n    if (this._ctx.state === \"running\") {\n      document.removeEventListener(\"mousedown\", this._unlock, true);\n      document.removeEventListener(\"touchend\", this._unlock, true);\n      document.removeEventListener(\"touchstart\", this._unlock, true);\n      this._locked = false;\n    }\n  }\n  /**\n   * Plays an empty sound in the web audio context.  This is used to enable web audio on iOS devices, as they\n   * require the first sound to be played inside of a user initiated event (touch/click).\n   */\n  playEmptySound() {\n    const source = this._ctx.createBufferSource();\n    source.buffer = this._ctx.createBuffer(1, 1, 22050);\n    source.connect(this._ctx.destination);\n    source.start(0, 0, 0);\n    if (source.context.state === \"suspended\") {\n      source.context.resume();\n    }\n  }\n  /**\n   * Get AudioContext class, if not supported returns `null`\n   * @type {AudioContext}\n   * @readonly\n   */\n  static get AudioContext() {\n    const win = window;\n    return win.AudioContext || win.webkitAudioContext || null;\n  }\n  /**\n   * Get OfflineAudioContext class, if not supported returns `null`\n   * @type {OfflineAudioContext}\n   * @readonly\n   */\n  static get OfflineAudioContext() {\n    const win = window;\n    return win.OfflineAudioContext || win.webkitOfflineAudioContext || null;\n  }\n  /** Destroy this context. */\n  destroy() {\n    super.destroy();\n    const ctx = this._ctx;\n    if (typeof ctx.close !== \"undefined\") {\n      ctx.close();\n    }\n    globalThis.removeEventListener(\"focus\", this.onFocus);\n    globalThis.removeEventListener(\"blur\", this.onBlur);\n    this.events.removeAllListeners();\n    this.analyser.disconnect();\n    this.compressor.disconnect();\n    this.analyser = null;\n    this.compressor = null;\n    this.events = null;\n    this._offlineCtx = null;\n    this._ctx = null;\n  }\n  /**\n   * The WebAudio API AudioContext object.\n   * @readonly\n   * @type {AudioContext}\n   */\n  get audioContext() {\n    return this._ctx;\n  }\n  /**\n   * The WebAudio API OfflineAudioContext object.\n   * @readonly\n   * @type {OfflineAudioContext}\n   */\n  get offlineContext() {\n    return this._offlineCtx;\n  }\n  /**\n   * Pauses all sounds, even though we handle this at the instance\n   * level, we'll also pause the audioContext so that the\n   * time used to compute progress isn't messed up.\n   * @default false\n   */\n  set paused(paused) {\n    if (paused && this._ctx.state === \"running\") {\n      this._ctx.suspend();\n    } else if (!paused && this._ctx.state === \"suspended\") {\n      this._ctx.resume();\n    }\n    this._paused = paused;\n  }\n  get paused() {\n    return this._paused;\n  }\n  /** Emit event when muted, volume or speed changes */\n  refresh() {\n    this.events.emit(\"refresh\");\n  }\n  /** Emit event when muted, volume or speed changes */\n  refreshPaused() {\n    this.events.emit(\"refreshPaused\");\n  }\n  /**\n   * Toggles the muted state.\n   * @return The current muted state.\n   */\n  toggleMute() {\n    this.muted = !this.muted;\n    this.refresh();\n    return this.muted;\n  }\n  /**\n   * Toggles the paused state.\n   * @return The current muted state.\n   */\n  togglePause() {\n    this.paused = !this.paused;\n    this.refreshPaused();\n    return this._paused;\n  }\n  /**\n   * Decode the audio data\n   * @param arrayBuffer - Buffer from loader\n   * @param callback - When completed, error and audioBuffer are parameters.\n   */\n  decode(arrayBuffer, callback) {\n    const handleError = (err) => {\n      callback(new Error(err?.message || \"Unable to decode file\"));\n    };\n    const result = this._offlineCtx.decodeAudioData(\n      arrayBuffer,\n      (buffer) => {\n        callback(null, buffer);\n      },\n      handleError\n    );\n    if (result) {\n      result.catch(handleError);\n    }\n  }\n}\n\nexport { WebAudioContext };\n//# sourceMappingURL=WebAudioContext.mjs.map\n","import { ExtensionType, LoaderParserPriority, path, extensions as extensions$1 } from 'pixi.js';\nimport { getInstance } from './instance.mjs';\nimport { Sound } from './Sound.mjs';\nimport { extensions, supported, mimes } from './utils/supported.mjs';\n\nconst getAlias = (asset) => {\n  const src = asset.src;\n  let alias = asset?.alias?.[0];\n  if (!alias || asset.src === alias) {\n    alias = path.basename(src, path.extname(src));\n  }\n  return alias;\n};\nconst soundAsset = {\n  extension: ExtensionType.Asset,\n  detection: {\n    test: async () => true,\n    add: async (formats) => [...formats, ...extensions.filter((ext) => supported[ext])],\n    remove: async (formats) => formats.filter((ext) => formats.includes(ext))\n  },\n  loader: {\n    name: \"sound\",\n    extension: {\n      type: [ExtensionType.LoadParser],\n      priority: LoaderParserPriority.High\n    },\n    /** Should we attempt to load this file? */\n    test(url) {\n      const ext = path.extname(url).slice(1);\n      return !!supported[ext] || mimes.some((mime) => url.startsWith(`data:${mime}`));\n    },\n    /** Load the sound file, this is mostly handled by Sound.from() */\n    async load(url, asset) {\n      const sound = await new Promise((resolve, reject) => Sound.from({\n        ...asset.data,\n        url,\n        preload: true,\n        loaded(err, sound2) {\n          if (err) {\n            reject(err);\n          } else {\n            resolve(sound2);\n          }\n          asset.data?.loaded?.(err, sound2);\n        }\n      }));\n      getInstance().add(getAlias(asset), sound);\n      return sound;\n    },\n    /** Remove the sound from the library */\n    async unload(_sound, asset) {\n      getInstance().remove(getAlias(asset));\n    }\n  }\n};\nextensions$1.add(soundAsset);\n\nexport { soundAsset };\n//# sourceMappingURL=soundAsset.mjs.map\n","import * as index from './filters/index.mjs';\nexport { index as filters };\nimport * as index$1 from './htmlaudio/index.mjs';\nexport { index$1 as htmlaudio };\nimport { setInstance } from './instance.mjs';\nimport { SoundLibrary } from './SoundLibrary.mjs';\nimport * as index$2 from './utils/index.mjs';\nexport { index$2 as utils };\nimport * as index$3 from './webaudio/index.mjs';\nexport { index$3 as webaudio };\nexport { Filterable } from './Filterable.mjs';\nexport { Filter } from './filters/Filter.mjs';\nexport { Sound } from './Sound.mjs';\nexport { soundAsset } from './soundAsset.mjs';\nexport { SoundSprite } from './SoundSprite.mjs';\n\nconst sound = setInstance(new SoundLibrary());\n\nexport { SoundLibrary, sound };\n//# sourceMappingURL=index.mjs.map\n","import { HTMLAudioContext } from './htmlaudio/HTMLAudioContext.mjs';\nimport { Sound } from './Sound.mjs';\nimport { WebAudioContext } from './webaudio/WebAudioContext.mjs';\n\nclass SoundLibrary {\n  constructor() {\n    this.init();\n  }\n  /**\n   * Re-initialize the sound library, this will\n   * recreate the AudioContext. If there's a hardware-failure\n   * call `close` and then `init`.\n   * @return Sound instance\n   */\n  init() {\n    if (this.supported) {\n      this._webAudioContext = new WebAudioContext();\n    }\n    this._htmlAudioContext = new HTMLAudioContext();\n    this._sounds = {};\n    this.useLegacy = !this.supported;\n    return this;\n  }\n  /**\n   * The global context to use.\n   * @readonly\n   */\n  get context() {\n    return this._context;\n  }\n  /**\n   * Apply filters to all sounds. Can be useful\n   * for setting global planning or global effects.\n   * **Only supported with WebAudio.**\n   * @example\n   * import { sound, filters } from '@pixi/sound';\n   * // Adds a filter to pan all output left\n   * sound.filtersAll = [\n   *     new filters.StereoFilter(-1)\n   * ];\n   */\n  get filtersAll() {\n    if (!this.useLegacy) {\n      return this._context.filters;\n    }\n    return [];\n  }\n  set filtersAll(filtersAll) {\n    if (!this.useLegacy) {\n      this._context.filters = filtersAll;\n    }\n  }\n  /**\n   * `true` if WebAudio is supported on the current browser.\n   */\n  get supported() {\n    return WebAudioContext.AudioContext !== null;\n  }\n  /**\n   * @ignore\n   */\n  add(source, sourceOptions) {\n    if (typeof source === \"object\") {\n      const results = {};\n      for (const alias in source) {\n        const options2 = this._getOptions(\n          source[alias],\n          sourceOptions\n        );\n        results[alias] = this.add(alias, options2);\n      }\n      return results;\n    }\n    console.assert(!this._sounds[source], `Sound with alias ${source} already exists.`);\n    if (sourceOptions instanceof Sound) {\n      this._sounds[source] = sourceOptions;\n      return sourceOptions;\n    }\n    const options = this._getOptions(sourceOptions);\n    const sound = Sound.from(options);\n    this._sounds[source] = sound;\n    return sound;\n  }\n  /**\n   * Internal methods for getting the options object\n   * @private\n   * @param source - The source options\n   * @param overrides - Override default options\n   * @return The construction options\n   */\n  _getOptions(source, overrides) {\n    let options;\n    if (typeof source === \"string\") {\n      options = { url: source };\n    } else if (Array.isArray(source)) {\n      options = { url: source };\n    } else if (source instanceof ArrayBuffer || source instanceof AudioBuffer || source instanceof HTMLAudioElement) {\n      options = { source };\n    } else {\n      options = source;\n    }\n    options = { ...options, ...overrides || {} };\n    return options;\n  }\n  /**\n   * Do not use WebAudio, force the use of legacy. This **must** be called before loading any files.\n   */\n  get useLegacy() {\n    return this._useLegacy;\n  }\n  set useLegacy(legacy) {\n    this._useLegacy = legacy;\n    this._context = !legacy && this.supported ? this._webAudioContext : this._htmlAudioContext;\n  }\n  /**\n   * This disables auto-pause all playback when the window blurs (WebAudio only).\n   * This is helpful to keep from playing sounds when the user switches tabs.\n   * However, if you're running content within an iframe, this may be undesirable\n   * and you should disable (set to `true`) this behavior.\n   * @default false\n   */\n  get disableAutoPause() {\n    return !this._webAudioContext.autoPause;\n  }\n  set disableAutoPause(autoPause) {\n    this._webAudioContext.autoPause = !autoPause;\n  }\n  /**\n   * Removes a sound by alias.\n   * @param alias - The sound alias reference.\n   * @return Instance for chaining.\n   */\n  remove(alias) {\n    this.exists(alias, true);\n    this._sounds[alias].destroy();\n    delete this._sounds[alias];\n    return this;\n  }\n  /**\n   * Set the global volume for all sounds. To set per-sound volume see {@link SoundLibrary#volume}.\n   */\n  get volumeAll() {\n    return this._context.volume;\n  }\n  set volumeAll(volume) {\n    this._context.volume = volume;\n    this._context.refresh();\n  }\n  /**\n   * Set the global speed for all sounds. To set per-sound speed see {@link SoundLibrary#speed}.\n   */\n  get speedAll() {\n    return this._context.speed;\n  }\n  set speedAll(speed) {\n    this._context.speed = speed;\n    this._context.refresh();\n  }\n  /**\n   * Toggle paused property for all sounds.\n   * @return `true` if all sounds are paused.\n   */\n  togglePauseAll() {\n    return this._context.togglePause();\n  }\n  /**\n   * Pauses any playing sounds.\n   * @return Instance for chaining.\n   */\n  pauseAll() {\n    this._context.paused = true;\n    this._context.refreshPaused();\n    return this;\n  }\n  /**\n   * Resumes any sounds.\n   * @return Instance for chaining.\n   */\n  resumeAll() {\n    this._context.paused = false;\n    this._context.refreshPaused();\n    return this;\n  }\n  /**\n   * Toggle muted property for all sounds.\n   * @return `true` if all sounds are muted.\n   */\n  toggleMuteAll() {\n    return this._context.toggleMute();\n  }\n  /**\n   * Mutes all playing sounds.\n   * @return Instance for chaining.\n   */\n  muteAll() {\n    this._context.muted = true;\n    this._context.refresh();\n    return this;\n  }\n  /**\n   * Unmutes all playing sounds.\n   * @return Instance for chaining.\n   */\n  unmuteAll() {\n    this._context.muted = false;\n    this._context.refresh();\n    return this;\n  }\n  /**\n   * Stops and removes all sounds. They cannot be used after this.\n   * @return Instance for chaining.\n   */\n  removeAll() {\n    for (const alias in this._sounds) {\n      this._sounds[alias].destroy();\n      delete this._sounds[alias];\n    }\n    return this;\n  }\n  /**\n   * Stops all sounds.\n   * @return Instance for chaining.\n   */\n  stopAll() {\n    for (const alias in this._sounds) {\n      this._sounds[alias].stop();\n    }\n    return this;\n  }\n  /**\n   * Checks if a sound by alias exists.\n   * @param alias - Check for alias.\n   * @param assert - Whether enable console.assert.\n   * @return true if the sound exists.\n   */\n  exists(alias, assert = false) {\n    const exists = !!this._sounds[alias];\n    if (assert) {\n      console.assert(exists, `No sound matching alias '${alias}'.`);\n    }\n    return exists;\n  }\n  /**\n   * Convenience function to check to see if any sound is playing.\n   * @returns `true` if any sound is currently playing.\n   */\n  isPlaying() {\n    for (const alias in this._sounds) {\n      if (this._sounds[alias].isPlaying) {\n        return true;\n      }\n    }\n    return false;\n  }\n  /**\n   * Find a sound by alias.\n   * @param alias - The sound alias reference.\n   * @return Sound object.\n   */\n  find(alias) {\n    this.exists(alias, true);\n    return this._sounds[alias];\n  }\n  /**\n   * Plays a sound.\n   * @method play\n   * @instance\n   * @param {string} alias - The sound alias reference.\n   * @param {string} sprite - The alias of the sprite to play.\n   * @return {IMediaInstance|null} The sound instance, this cannot be reused\n   *         after it is done playing. Returns `null` if the sound has not yet loaded.\n   */\n  /**\n   * Plays a sound.\n   * @param alias - The sound alias reference.\n   * @param {PlayOptions|Function} options - The options or callback when done.\n   * @return The sound instance,\n   *        this cannot be reused after it is done playing. Returns a Promise if the sound\n   *        has not yet loaded.\n   */\n  play(alias, options) {\n    return this.find(alias).play(options);\n  }\n  /**\n   * Stops a sound.\n   * @param alias - The sound alias reference.\n   * @return Sound object.\n   */\n  stop(alias) {\n    return this.find(alias).stop();\n  }\n  /**\n   * Pauses a sound.\n   * @param alias - The sound alias reference.\n   * @return Sound object.\n   */\n  pause(alias) {\n    return this.find(alias).pause();\n  }\n  /**\n   * Resumes a sound.\n   * @param alias - The sound alias reference.\n   * @return Instance for chaining.\n   */\n  resume(alias) {\n    return this.find(alias).resume();\n  }\n  /**\n   * Get or set the volume for a sound.\n   * @param alias - The sound alias reference.\n   * @param volume - Optional current volume to set.\n   * @return The current volume.\n   */\n  volume(alias, volume) {\n    const sound = this.find(alias);\n    if (volume !== void 0) {\n      sound.volume = volume;\n    }\n    return sound.volume;\n  }\n  /**\n   * Get or set the speed for a sound.\n   * @param alias - The sound alias reference.\n   * @param speed - Optional current speed to set.\n   * @return The current speed.\n   */\n  speed(alias, speed) {\n    const sound = this.find(alias);\n    if (speed !== void 0) {\n      sound.speed = speed;\n    }\n    return sound.speed;\n  }\n  /**\n   * Get the length of a sound in seconds.\n   * @param alias - The sound alias reference.\n   * @return The current duration in seconds.\n   */\n  duration(alias) {\n    return this.find(alias).duration;\n  }\n  /**\n   * Closes the sound library. This will release/destroy\n   * the AudioContext(s). Can be used safely if you want to\n   * initialize the sound library later. Use `init` method.\n   */\n  close() {\n    this.removeAll();\n    this._sounds = null;\n    if (this._webAudioContext) {\n      this._webAudioContext.destroy();\n      this._webAudioContext = null;\n    }\n    if (this._htmlAudioContext) {\n      this._htmlAudioContext.destroy();\n      this._htmlAudioContext = null;\n    }\n    this._context = null;\n    return this;\n  }\n}\n\nexport { SoundLibrary };\n//# sourceMappingURL=SoundLibrary.mjs.map\n","import EventEmitter from './index.js'\n\nexport { EventEmitter }\nexport default EventEmitter\n","var vertex = \"in vec2 aPosition;\\nout vec2 vTextureCoord;\\n\\nuniform vec4 uInputSize;\\nuniform vec4 uOutputFrame;\\nuniform vec4 uOutputTexture;\\n\\nvec4 filterVertexPosition( void )\\n{\\n    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;\\n    \\n    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;\\n    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;\\n\\n    return vec4(position, 0.0, 1.0);\\n}\\n\\nvec2 filterTextureCoord( void )\\n{\\n    return aPosition * (uOutputFrame.zw * uInputSize.zw);\\n}\\n\\nvoid main(void)\\n{\\n    gl_Position = filterVertexPosition();\\n    vTextureCoord = filterTextureCoord();\\n}\\n\";\n\nexport { vertex as default };\n//# sourceMappingURL=default.mjs.map\n","var wgslVertex = \"struct GlobalFilterUniforms {\\n  uInputSize:vec4<f32>,\\n  uInputPixel:vec4<f32>,\\n  uInputClamp:vec4<f32>,\\n  uOutputFrame:vec4<f32>,\\n  uGlobalFrame:vec4<f32>,\\n  uOutputTexture:vec4<f32>,\\n};\\n\\n@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;\\n\\nstruct VSOutput {\\n    @builtin(position) position: vec4<f32>,\\n    @location(0) uv : vec2<f32>\\n  };\\n\\nfn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>\\n{\\n    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;\\n\\n    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;\\n    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;\\n\\n    return vec4(position, 0.0, 1.0);\\n}\\n\\nfn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\\n{\\n    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);\\n}\\n\\nfn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\\n{\\n  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  \\n}\\n\\nfn getSize() -> vec2<f32>\\n{\\n  return gfu.uGlobalFrame.zw;\\n}\\n  \\n@vertex\\nfn mainVertex(\\n  @location(0) aPosition : vec2<f32>, \\n) -> VSOutput {\\n  return VSOutput(\\n   filterVertexPosition(aPosition),\\n   filterTextureCoord(aPosition)\\n  );\\n}\";\n\nexport { wgslVertex as default };\n//# sourceMappingURL=default2.mjs.map\n","import { Filter, GpuProgram, GlProgram } from 'pixi.js';\nimport vertex from '../defaults/default.mjs';\nimport wgslVertex from '../defaults/default2.mjs';\nimport fragment from './adjustment.mjs';\nimport source from './adjustment2.mjs';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _AdjustmentFilter = class _AdjustmentFilter extends Filter {\n  /**\n   * @param options - The options of the adjustment filter.\n   */\n  constructor(options) {\n    options = { ..._AdjustmentFilter.DEFAULT_OPTIONS, ...options };\n    const gpuProgram = GpuProgram.from({\n      vertex: {\n        source: wgslVertex,\n        entryPoint: \"mainVertex\"\n      },\n      fragment: {\n        source,\n        entryPoint: \"mainFragment\"\n      }\n    });\n    const glProgram = GlProgram.from({\n      vertex,\n      fragment,\n      name: \"adjustment-filter\"\n    });\n    super({\n      gpuProgram,\n      glProgram,\n      resources: {\n        adjustmentUniforms: {\n          uGamma: { value: options.gamma, type: \"f32\" },\n          uContrast: { value: options.contrast, type: \"f32\" },\n          uSaturation: { value: options.saturation, type: \"f32\" },\n          uBrightness: { value: options.brightness, type: \"f32\" },\n          uColor: {\n            value: [\n              options.red,\n              options.green,\n              options.blue,\n              options.alpha\n            ],\n            type: \"vec4<f32>\"\n          }\n        }\n      }\n    });\n    __publicField(this, \"uniforms\");\n    this.uniforms = this.resources.adjustmentUniforms.uniforms;\n  }\n  /**\n   * Amount of luminance\n   * @default 1\n   */\n  get gamma() {\n    return this.uniforms.uGamma;\n  }\n  set gamma(value) {\n    this.uniforms.uGamma = value;\n  }\n  /**\n   * Amount of contrast\n   * @default 1\n   */\n  get contrast() {\n    return this.uniforms.uContrast;\n  }\n  set contrast(value) {\n    this.uniforms.uContrast = value;\n  }\n  /**\n   * Amount of color saturation\n   * @default 1\n   */\n  get saturation() {\n    return this.uniforms.uSaturation;\n  }\n  set saturation(value) {\n    this.uniforms.uSaturation = value;\n  }\n  /**\n   * The overall brightness\n   * @default 1\n   */\n  get brightness() {\n    return this.uniforms.uBrightness;\n  }\n  set brightness(value) {\n    this.uniforms.uBrightness = value;\n  }\n  /**\n   * The multiplied red channel\n   * @default 1\n   */\n  get red() {\n    return this.uniforms.uColor[0];\n  }\n  set red(value) {\n    this.uniforms.uColor[0] = value;\n  }\n  /**\n   * The multiplied blue channel\n   * @default 1\n   */\n  get green() {\n    return this.uniforms.uColor[1];\n  }\n  set green(value) {\n    this.uniforms.uColor[1] = value;\n  }\n  /**\n   * The multiplied green channel\n   * @default 1\n   */\n  get blue() {\n    return this.uniforms.uColor[2];\n  }\n  set blue(value) {\n    this.uniforms.uColor[2] = value;\n  }\n  /**\n   * The overall alpha channel\n   * @default 1\n   */\n  get alpha() {\n    return this.uniforms.uColor[3];\n  }\n  set alpha(value) {\n    this.uniforms.uColor[3] = value;\n  }\n};\n/** Default values for options. */\n__publicField(_AdjustmentFilter, \"DEFAULT_OPTIONS\", {\n  gamma: 1,\n  contrast: 1,\n  saturation: 1,\n  brightness: 1,\n  red: 1,\n  green: 1,\n  blue: 1,\n  alpha: 1\n});\nlet AdjustmentFilter = _AdjustmentFilter;\n\nexport { AdjustmentFilter };\n//# sourceMappingURL=AdjustmentFilter.mjs.map\n","var source = \"struct AdjustmentUniforms {\\n  uGamma: f32,\\n  uContrast: f32,\\n  uSaturation: f32,\\n  uBrightness: f32,\\n  uColor: vec4<f32>,\\n};\\n\\n@group(0) @binding(1) var uTexture: texture_2d<f32>; \\n@group(0) @binding(2) var uSampler: sampler;\\n@group(1) @binding(0) var<uniform> adjustmentUniforms : AdjustmentUniforms;\\n\\n@fragment\\nfn mainFragment(\\n  @location(0) uv: vec2<f32>,\\n  @builtin(position) position: vec4<f32>\\n) -> @location(0) vec4<f32> {\\n  var sample = textureSample(uTexture, uSampler, uv);\\n  let color = adjustmentUniforms.uColor;\\n\\n  if (sample.a > 0.0) \\n  {\\n    sample = vec4<f32>(sample.rgb / sample.a, sample.a);\\n    var rgb: vec3<f32> = pow(sample.rgb, vec3<f32>(1. / adjustmentUniforms.uGamma));\\n    rgb = mix(vec3<f32>(.5), mix(vec3<f32>(dot(vec3<f32>(.2125, .7154, .0721), rgb)), rgb, adjustmentUniforms.uSaturation), adjustmentUniforms.uContrast);\\n    rgb.r *= color.r;\\n    rgb.g *= color.g;\\n    rgb.b *= color.b;\\n    sample = vec4<f32>(rgb.rgb * adjustmentUniforms.uBrightness, sample.a);\\n    sample = vec4<f32>(sample.rgb * sample.a, sample.a);\\n  }\\n\\n  return sample * color.a;\\n}\";\n\nexport { source as default };\n//# sourceMappingURL=adjustment2.mjs.map\n","var fragment = \"in vec2 vTextureCoord;\\nout vec4 finalColor;\\n\\nuniform sampler2D uTexture;\\nuniform float uGamma;\\nuniform float uContrast;\\nuniform float uSaturation;\\nuniform float uBrightness;\\nuniform vec4 uColor;\\n\\nvoid main()\\n{\\n    vec4 c = texture(uTexture, vTextureCoord);\\n\\n    if (c.a > 0.0) {\\n        c.rgb /= c.a;\\n\\n        vec3 rgb = pow(c.rgb, vec3(1. / uGamma));\\n        rgb = mix(vec3(.5), mix(vec3(dot(vec3(.2125, .7154, .0721), rgb)), rgb, uSaturation), uContrast);\\n        rgb.r *= uColor.r;\\n        rgb.g *= uColor.g;\\n        rgb.b *= uColor.b;\\n        c.rgb = rgb * uBrightness;\\n\\n        c.rgb *= c.a;\\n    }\\n\\n    finalColor = c * uColor.a;\\n}\\n\";\n\nexport { fragment as default };\n//# sourceMappingURL=adjustment.mjs.map\n","var fragment = \"\\nin vec2 vTextureCoord;\\nout vec4 finalColor;\\n\\nuniform sampler2D uTexture;\\nuniform vec2 uOffset;\\n\\nvoid main(void)\\n{\\n    vec4 color = vec4(0.0);\\n\\n    // Sample top left pixel\\n    color += texture(uTexture, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y));\\n\\n    // Sample top right pixel\\n    color += texture(uTexture, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y));\\n\\n    // Sample bottom right pixel\\n    color += texture(uTexture, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y));\\n\\n    // Sample bottom left pixel\\n    color += texture(uTexture, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y));\\n\\n    // Average\\n    color *= 0.25;\\n\\n    finalColor = color;\\n}\";\n\nexport { fragment as default };\n//# sourceMappingURL=kawase-blur.mjs.map\n","import { Filter, deprecation, GpuProgram, GlProgram, TexturePool } from 'pixi.js';\nimport vertex from '../defaults/default.mjs';\nimport wgslVertex from '../defaults/default2.mjs';\nimport fragment from './kawase-blur.mjs';\nimport source from './kawase-blur2.mjs';\nimport fragmentClamp from './kawase-blur-clamp.mjs';\nimport sourceClamp from './kawase-blur-clamp2.mjs';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _KawaseBlurFilter = class _KawaseBlurFilter extends Filter {\n  /** @ignore */\n  constructor(...args) {\n    let options = args[0] ?? {};\n    if (typeof options === \"number\" || Array.isArray(options)) {\n      deprecation(\"6.0.0\", \"KawaseBlurFilter constructor params are now options object. See params: { strength, quality, clamp, pixelSize }\");\n      options = { strength: options };\n      if (args[1] !== void 0)\n        options.quality = args[1];\n      if (args[2] !== void 0)\n        options.clamp = args[2];\n    }\n    options = { ..._KawaseBlurFilter.DEFAULT_OPTIONS, ...options };\n    const gpuProgram = GpuProgram.from({\n      vertex: {\n        source: wgslVertex,\n        entryPoint: \"mainVertex\"\n      },\n      fragment: {\n        source: options?.clamp ? sourceClamp : source,\n        entryPoint: \"mainFragment\"\n      }\n    });\n    const glProgram = GlProgram.from({\n      vertex,\n      fragment: options?.clamp ? fragmentClamp : fragment,\n      name: \"kawase-blur-filter\"\n    });\n    super({\n      gpuProgram,\n      glProgram,\n      resources: {\n        kawaseBlurUniforms: {\n          uOffset: { value: new Float32Array(2), type: \"vec2<f32>\" }\n        }\n      }\n    });\n    __publicField(this, \"uniforms\");\n    __publicField(this, \"_pixelSize\", { x: 0, y: 0 });\n    __publicField(this, \"_clamp\");\n    __publicField(this, \"_kernels\", []);\n    __publicField(this, \"_blur\");\n    __publicField(this, \"_quality\");\n    this.uniforms = this.resources.kawaseBlurUniforms.uniforms;\n    this.pixelSize = options.pixelSize ?? { x: 1, y: 1 };\n    if (Array.isArray(options.strength)) {\n      this.kernels = options.strength;\n    } else if (typeof options.strength === \"number\") {\n      this._blur = options.strength;\n      this.quality = options.quality ?? 3;\n    }\n    this._clamp = !!options.clamp;\n  }\n  /**\n   * Override existing apply method in `Filter`\n   * @override\n   * @ignore\n   */\n  apply(filterManager, input, output, clearMode) {\n    const uvX = this.pixelSizeX / input.source.width;\n    const uvY = this.pixelSizeY / input.source.height;\n    let offset;\n    if (this._quality === 1 || this._blur === 0) {\n      offset = this._kernels[0] + 0.5;\n      this.uniforms.uOffset[0] = offset * uvX;\n      this.uniforms.uOffset[1] = offset * uvY;\n      filterManager.applyFilter(this, input, output, clearMode);\n    } else {\n      const renderTarget = TexturePool.getSameSizeTexture(input);\n      let source2 = input;\n      let target = renderTarget;\n      let tmp;\n      const last = this._quality - 1;\n      for (let i = 0; i < last; i++) {\n        offset = this._kernels[i] + 0.5;\n        this.uniforms.uOffset[0] = offset * uvX;\n        this.uniforms.uOffset[1] = offset * uvY;\n        filterManager.applyFilter(this, source2, target, true);\n        tmp = source2;\n        source2 = target;\n        target = tmp;\n      }\n      offset = this._kernels[last] + 0.5;\n      this.uniforms.uOffset[0] = offset * uvX;\n      this.uniforms.uOffset[1] = offset * uvY;\n      filterManager.applyFilter(this, source2, output, clearMode);\n      TexturePool.returnTexture(renderTarget);\n    }\n  }\n  /**\n    * The amount of blur, value greater than `0`.\n    * @default 4\n    */\n  get strength() {\n    return this._blur;\n  }\n  set strength(value) {\n    this._blur = value;\n    this._generateKernels();\n  }\n  /**\n    * The quality of the filter, integer greater than `1`.\n    * @default 3\n    */\n  get quality() {\n    return this._quality;\n  }\n  set quality(value) {\n    this._quality = Math.max(1, Math.round(value));\n    this._generateKernels();\n  }\n  /**\n    * The kernel size of the blur filter, for advanced usage\n    * @default [0]\n    */\n  get kernels() {\n    return this._kernels;\n  }\n  set kernels(value) {\n    if (Array.isArray(value) && value.length > 0) {\n      this._kernels = value;\n      this._quality = value.length;\n      this._blur = Math.max(...value);\n    } else {\n      this._kernels = [0];\n      this._quality = 1;\n    }\n  }\n  /**\n    * The size of the pixels. Large size is blurrier. For advanced usage.\n    * @default {x:1,y:1}\n    */\n  get pixelSize() {\n    return this._pixelSize;\n  }\n  set pixelSize(value) {\n    if (typeof value === \"number\") {\n      this.pixelSizeX = this.pixelSizeY = value;\n      return;\n    }\n    if (Array.isArray(value)) {\n      this.pixelSizeX = value[0];\n      this.pixelSizeY = value[1];\n      return;\n    }\n    this._pixelSize = value;\n  }\n  /**\n    * The size of the pixels on the `x` axis. Large size is blurrier. For advanced usage.\n    * @default 1\n    */\n  get pixelSizeX() {\n    return this.pixelSize.x;\n  }\n  set pixelSizeX(value) {\n    this.pixelSize.x = value;\n  }\n  /**\n    * The size of the pixels on the `y` axis. Large size is blurrier. For advanced usage.\n    * @default 1\n    */\n  get pixelSizeY() {\n    return this.pixelSize.y;\n  }\n  set pixelSizeY(value) {\n    this.pixelSize.y = value;\n  }\n  /**\n    * Get the if the filter is clamped\n    * @default false\n    */\n  get clamp() {\n    return this._clamp;\n  }\n  /** Update padding based on kernel data */\n  _updatePadding() {\n    this.padding = Math.ceil(this._kernels.reduce((acc, v) => acc + v + 0.5, 0));\n  }\n  /** Auto generate kernels by blur & quality */\n  _generateKernels() {\n    const blur = this._blur;\n    const quality = this._quality;\n    const kernels = [blur];\n    if (blur > 0) {\n      let k = blur;\n      const step = blur / quality;\n      for (let i = 1; i < quality; i++) {\n        k -= step;\n        kernels.push(k);\n      }\n    }\n    this._kernels = kernels;\n    this._updatePadding();\n  }\n};\n/** Default values for options. */\n__publicField(_KawaseBlurFilter, \"DEFAULT_OPTIONS\", {\n  strength: 4,\n  quality: 3,\n  clamp: false,\n  pixelSize: { x: 1, y: 1 }\n});\nlet KawaseBlurFilter = _KawaseBlurFilter;\n\nexport { KawaseBlurFilter };\n//# sourceMappingURL=KawaseBlurFilter.mjs.map\n","var sourceClamp = \"struct KawaseBlurUniforms {\\n  uOffset:vec2<f32>,\\n};\\n\\nstruct GlobalFilterUniforms {\\n  uInputSize:vec4<f32>,\\n  uInputPixel:vec4<f32>,\\n  uInputClamp:vec4<f32>,\\n  uOutputFrame:vec4<f32>,\\n  uGlobalFrame:vec4<f32>,\\n  uOutputTexture:vec4<f32>,\\n};\\n\\n@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;\\n\\n@group(0) @binding(1) var uTexture: texture_2d<f32>; \\n@group(0) @binding(2) var uSampler: sampler;\\n@group(1) @binding(0) var<uniform> kawaseBlurUniforms : KawaseBlurUniforms;\\n\\n@fragment\\nfn mainFragment(\\n  @builtin(position) position: vec4<f32>,\\n  @location(0) uv : vec2<f32>\\n) -> @location(0) vec4<f32> {\\n  let uOffset = kawaseBlurUniforms.uOffset;\\n  var color: vec4<f32> = vec4(0.0);\\n\\n  // Sample top left pixel\\n  color += textureSample(uTexture, uSampler, clamp(vec2<f32>(uv.x - uOffset.x, uv.y + uOffset.y), gfu.uInputClamp.xy, gfu.uInputClamp.zw));\\n  // Sample top right pixel\\n  color += textureSample(uTexture, uSampler, clamp(vec2<f32>(uv.x + uOffset.x, uv.y + uOffset.y), gfu.uInputClamp.xy, gfu.uInputClamp.zw));\\n  // Sample bottom right pixel\\n  color += textureSample(uTexture, uSampler, clamp(vec2<f32>(uv.x + uOffset.x, uv.y - uOffset.y), gfu.uInputClamp.xy, gfu.uInputClamp.zw));\\n  // Sample bottom left pixel\\n  color += textureSample(uTexture, uSampler, clamp(vec2<f32>(uv.x - uOffset.x, uv.y - uOffset.y), gfu.uInputClamp.xy, gfu.uInputClamp.zw));\\n  // Average\\n  color *= 0.25;\\n    \\n  return color;\\n}\";\n\nexport { sourceClamp as default };\n//# sourceMappingURL=kawase-blur-clamp2.mjs.map\n","var source = \"struct KawaseBlurUniforms {\\n  uOffset:vec2<f32>,\\n};\\n\\n@group(0) @binding(1) var uTexture: texture_2d<f32>; \\n@group(0) @binding(2) var uSampler: sampler;\\n@group(1) @binding(0) var<uniform> kawaseBlurUniforms : KawaseBlurUniforms;\\n\\n@fragment\\nfn mainFragment(\\n  @builtin(position) position: vec4<f32>,\\n  @location(0) uv : vec2<f32>\\n) -> @location(0) vec4<f32> {\\n  let uOffset = kawaseBlurUniforms.uOffset;\\n  var color: vec4<f32> = vec4<f32>(0.0);\\n\\n  // Sample top left pixel\\n  color += textureSample(uTexture, uSampler, vec2<f32>(uv.x - uOffset.x, uv.y + uOffset.y));\\n  // Sample top right pixel\\n  color += textureSample(uTexture, uSampler, vec2<f32>(uv.x + uOffset.x, uv.y + uOffset.y));\\n  // Sample bottom right pixel\\n  color += textureSample(uTexture, uSampler, vec2<f32>(uv.x + uOffset.x, uv.y - uOffset.y));\\n  // Sample bottom left pixel\\n  color += textureSample(uTexture, uSampler, vec2<f32>(uv.x - uOffset.x, uv.y - uOffset.y));\\n  // Average\\n  color *= 0.25;\\n\\n  return color;\\n}\";\n\nexport { source as default };\n//# sourceMappingURL=kawase-blur2.mjs.map\n","var fragmentClamp = \"\\nprecision highp float;\\nin vec2 vTextureCoord;\\nout vec4 finalColor;\\n\\nuniform sampler2D uTexture;\\nuniform vec2 uOffset;\\n\\nuniform vec4 uInputClamp;\\n\\nvoid main(void)\\n{\\n    vec4 color = vec4(0.0);\\n\\n    // Sample top left pixel\\n    color += texture(uTexture, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y), uInputClamp.xy, uInputClamp.zw));\\n\\n    // Sample top right pixel\\n    color += texture(uTexture, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y), uInputClamp.xy, uInputClamp.zw));\\n\\n    // Sample bottom right pixel\\n    color += texture(uTexture, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y), uInputClamp.xy, uInputClamp.zw));\\n\\n    // Sample bottom left pixel\\n    color += texture(uTexture, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y), uInputClamp.xy, uInputClamp.zw));\\n\\n    // Average\\n    color *= 0.25;\\n\\n    finalColor = color;\\n}\\n\";\n\nexport { fragmentClamp as default };\n//# sourceMappingURL=kawase-blur-clamp.mjs.map\n","var fragment = \"in vec2 vTextureCoord;\\nout vec4 finalColor;\\n\\nuniform sampler2D uTexture;\\nuniform sampler2D uMapTexture;\\nuniform float uBloomScale;\\nuniform float uBrightness;\\n\\nvoid main() {\\n    vec4 color = texture(uTexture, vTextureCoord);\\n    color.rgb *= uBrightness;\\n    vec4 bloomColor = vec4(texture(uMapTexture, vTextureCoord).rgb, 0.0);\\n    bloomColor.rgb *= uBloomScale;\\n    finalColor = color + bloomColor;\\n}\\n\";\n\nexport { fragment as default };\n//# sourceMappingURL=advanced-bloom2.mjs.map\n","import { Filter, GpuProgram, GlProgram } from 'pixi.js';\nimport vertex from '../defaults/default.mjs';\nimport wgslVertex from '../defaults/default2.mjs';\nimport fragment from './extract-brightness.mjs';\nimport source from './extract-brightness2.mjs';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _ExtractBrightnessFilter = class _ExtractBrightnessFilter extends Filter {\n  constructor(options) {\n    options = { ..._ExtractBrightnessFilter.DEFAULT_OPTIONS, ...options };\n    const gpuProgram = GpuProgram.from({\n      vertex: {\n        source: wgslVertex,\n        entryPoint: \"mainVertex\"\n      },\n      fragment: {\n        source,\n        entryPoint: \"mainFragment\"\n      }\n    });\n    const glProgram = GlProgram.from({\n      vertex,\n      fragment,\n      name: \"extract-brightness-filter\"\n    });\n    super({\n      gpuProgram,\n      glProgram,\n      resources: {\n        extractBrightnessUniforms: {\n          uThreshold: { value: options.threshold, type: \"f32\" }\n        }\n      }\n    });\n    __publicField(this, \"uniforms\");\n    this.uniforms = this.resources.extractBrightnessUniforms.uniforms;\n  }\n  /**\n   * Defines how bright a color needs to be extracted.\n   * @default 0.5\n   */\n  get threshold() {\n    return this.uniforms.uThreshold;\n  }\n  set threshold(value) {\n    this.uniforms.uThreshold = value;\n  }\n};\n/** Default values for options. */\n__publicField(_ExtractBrightnessFilter, \"DEFAULT_OPTIONS\", {\n  threshold: 0.5\n});\nlet ExtractBrightnessFilter = _ExtractBrightnessFilter;\n\nexport { ExtractBrightnessFilter };\n//# sourceMappingURL=ExtractBrightnessFilter.mjs.map\n","var source = \"struct ExtractBrightnessUniforms {\\n  uThreshold: f32,\\n};\\n\\n@group(0) @binding(1) var uTexture: texture_2d<f32>; \\n@group(0) @binding(2) var uSampler: sampler;\\n@group(1) @binding(0) var<uniform> extractBrightnessUniforms : ExtractBrightnessUniforms;\\n\\n@fragment\\nfn mainFragment(\\n  @builtin(position) position: vec4<f32>,\\n  @location(0) uv : vec2<f32>\\n) -> @location(0) vec4<f32> {\\n  let color: vec4<f32> = textureSample(uTexture, uSampler, uv);\\n\\n  // A simple & fast algorithm for getting brightness.\\n  // It's inaccurate, but good enough for this feature.\\n  let max: f32 = max(max(color.r, color.g), color.b);\\n  let min: f32 = min(min(color.r, color.g), color.b);\\n  let brightness: f32 = (max + min) * 0.5;\\n\\n  return select(vec4<f32>(0.), color, brightness > extractBrightnessUniforms.uThreshold);\\n}\\n\";\n\nexport { source as default };\n//# sourceMappingURL=extract-brightness2.mjs.map\n","var fragment = \"\\nin vec2 vTextureCoord;\\nout vec4 finalColor;\\n\\nuniform sampler2D uTexture;\\nuniform float uThreshold;\\n\\nvoid main() {\\n    vec4 color = texture(uTexture, vTextureCoord);\\n\\n    // A simple & fast algorithm for getting brightness.\\n    // It's inaccuracy , but good enought for this feature.\\n    float _max = max(max(color.r, color.g), color.b);\\n    float _min = min(min(color.r, color.g), color.b);\\n    float brightness = (_max + _min) * 0.5;\\n\\n    if(brightness > uThreshold) {\\n        finalColor = color;\\n    } else {\\n        finalColor = vec4(0.0, 0.0, 0.0, 0.0);\\n    }\\n}\\n\";\n\nexport { fragment as default };\n//# sourceMappingURL=extract-brightness.mjs.map\n","import { Filter, GpuProgram, GlProgram, Texture, TexturePool } from 'pixi.js';\nimport vertex from '../defaults/default.mjs';\nimport wgslVertex from '../defaults/default2.mjs';\nimport { KawaseBlurFilter } from '../kawase-blur/KawaseBlurFilter.mjs';\nimport fragment from './advanced-bloom2.mjs';\nimport source from './advanced-bloom.mjs';\nimport { ExtractBrightnessFilter } from './ExtractBrightnessFilter.mjs';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _AdvancedBloomFilter = class _AdvancedBloomFilter extends Filter {\n  /**\n   * @param options - Options for the AdvancedBloomFilter constructor.\n   */\n  constructor(options) {\n    options = { ..._AdvancedBloomFilter.DEFAULT_OPTIONS, ...options };\n    const gpuProgram = GpuProgram.from({\n      vertex: {\n        source: wgslVertex,\n        entryPoint: \"mainVertex\"\n      },\n      fragment: {\n        source,\n        entryPoint: \"mainFragment\"\n      }\n    });\n    const glProgram = GlProgram.from({\n      vertex,\n      fragment,\n      name: \"advanced-bloom-filter\"\n    });\n    super({\n      gpuProgram,\n      glProgram,\n      resources: {\n        advancedBloomUniforms: {\n          uBloomScale: { value: options.bloomScale, type: \"f32\" },\n          uBrightness: { value: options.brightness, type: \"f32\" }\n        },\n        uMapTexture: Texture.WHITE\n      }\n    });\n    __publicField(this, \"uniforms\");\n    /** To adjust the strength of the bloom. Higher values is more intense brightness. */\n    __publicField(this, \"bloomScale\", 1);\n    /** The brightness, lower value is more subtle brightness, higher value is blown-out. */\n    __publicField(this, \"brightness\", 1);\n    __publicField(this, \"_extractFilter\");\n    __publicField(this, \"_blurFilter\");\n    this.uniforms = this.resources.advancedBloomUniforms.uniforms;\n    this._extractFilter = new ExtractBrightnessFilter({\n      threshold: options.threshold\n    });\n    this._blurFilter = new KawaseBlurFilter({\n      strength: options.kernels ?? options.blur,\n      quality: options.kernels ? void 0 : options.quality\n    });\n    Object.assign(this, options);\n  }\n  /**\n   * Override existing apply method in `Filter`\n   * @override\n   * @ignore\n   */\n  apply(filterManager, input, output, clearMode) {\n    const brightTarget = TexturePool.getSameSizeTexture(input);\n    this._extractFilter.apply(filterManager, input, brightTarget, true);\n    const bloomTarget = TexturePool.getSameSizeTexture(input);\n    this._blurFilter.apply(filterManager, brightTarget, bloomTarget, true);\n    this.uniforms.uBloomScale = this.bloomScale;\n    this.uniforms.uBrightness = this.brightness;\n    this.resources.uMapTexture = bloomTarget.source;\n    filterManager.applyFilter(this, input, output, clearMode);\n    TexturePool.returnTexture(bloomTarget);\n    TexturePool.returnTexture(brightTarget);\n  }\n  /**\n   * Defines how bright a color needs to be extracted.\n   * @default 0.5\n   */\n  get threshold() {\n    return this._extractFilter.threshold;\n  }\n  set threshold(value) {\n    this._extractFilter.threshold = value;\n  }\n  /** The kernels of the Blur Filter */\n  get kernels() {\n    return this._blurFilter.kernels;\n  }\n  set kernels(value) {\n    this._blurFilter.kernels = value;\n  }\n  /**\n   * The strength of the Blur properties simultaneously\n   * @default 2\n   */\n  get blur() {\n    return this._blurFilter.strength;\n  }\n  set blur(value) {\n    this._blurFilter.strength = value;\n  }\n  /**\n   * The quality of the Blur Filter\n   * @default 4\n   */\n  get quality() {\n    return this._blurFilter.quality;\n  }\n  set quality(value) {\n    this._blurFilter.quality = value;\n  }\n  /**\n   * The pixel size of the Kawase Blur filter\n   * @default {x:1,y:1}\n   */\n  get pixelSize() {\n    return this._blurFilter.pixelSize;\n  }\n  set pixelSize(value) {\n    if (typeof value === \"number\") {\n      value = { x: value, y: value };\n    }\n    if (Array.isArray(value)) {\n      value = { x: value[0], y: value[1] };\n    }\n    this._blurFilter.pixelSize = value;\n  }\n  /**\n   * The horizontal pixelSize of the Kawase Blur filter\n   * @default 1\n   */\n  get pixelSizeX() {\n    return this._blurFilter.pixelSizeX;\n  }\n  set pixelSizeX(value) {\n    this._blurFilter.pixelSizeX = value;\n  }\n  /**\n   * The vertical pixel size of the Kawase Blur filter\n   * @default 1\n   */\n  get pixelSizeY() {\n    return this._blurFilter.pixelSizeY;\n  }\n  set pixelSizeY(value) {\n    this._blurFilter.pixelSizeY = value;\n  }\n};\n/** Default values for options. */\n__publicField(_AdvancedBloomFilter, \"DEFAULT_OPTIONS\", {\n  threshold: 0.5,\n  bloomScale: 1,\n  brightness: 1,\n  blur: 8,\n  quality: 4,\n  pixelSize: { x: 1, y: 1 }\n});\nlet AdvancedBloomFilter = _AdvancedBloomFilter;\n\nexport { AdvancedBloomFilter };\n//# sourceMappingURL=AdvancedBloomFilter.mjs.map\n","var source = \"struct AdvancedBloomUniforms {\\n  uBloomScale: f32,\\n  uBrightness: f32,\\n};\\n\\n@group(0) @binding(1) var uTexture: texture_2d<f32>; \\n@group(0) @binding(2) var uSampler: sampler;\\n@group(1) @binding(0) var<uniform> advancedBloomUniforms : AdvancedBloomUniforms;\\n@group(1) @binding(1) var uMapTexture: texture_2d<f32>;\\n\\n@fragment\\nfn mainFragment(\\n  @builtin(position) position: vec4<f32>,\\n  @location(0) uv : vec2<f32>\\n) -> @location(0) vec4<f32> {\\n  var color = textureSample(uTexture, uSampler, uv);\\n  color = vec4<f32>(color.rgb * advancedBloomUniforms.uBrightness, color.a);\\n\\n  var bloomColor = vec4<f32>(textureSample(uMapTexture, uSampler, uv).rgb, 0.0);\\n  bloomColor = vec4<f32>(bloomColor.rgb * advancedBloomUniforms.uBloomScale, bloomColor.a);\\n  \\n  return color + bloomColor;\\n}\\n\";\n\nexport { source as default };\n//# sourceMappingURL=advanced-bloom.mjs.map\n","var fragment = \"precision highp float;\\nin vec2 vTextureCoord;\\nout vec4 finalColor;\\n\\nuniform sampler2D uTexture;\\nuniform float uSize;\\nuniform vec3 uColor;\\nuniform float uReplaceColor;\\n\\nuniform vec4 uInputSize;\\n\\nvec2 mapCoord( vec2 coord )\\n{\\n    coord *= uInputSize.xy;\\n    coord += uInputSize.zw;\\n\\n    return coord;\\n}\\n\\nvec2 unmapCoord( vec2 coord )\\n{\\n    coord -= uInputSize.zw;\\n    coord /= uInputSize.xy;\\n\\n    return coord;\\n}\\n\\nvec2 pixelate(vec2 coord, vec2 size)\\n{\\n    return floor(coord / size) * size;\\n}\\n\\nvec2 getMod(vec2 coord, vec2 size)\\n{\\n    return mod(coord, size) / size;\\n}\\n\\nfloat character(float n, vec2 p)\\n{\\n    p = floor(p*vec2(4.0, 4.0) + 2.5);\\n\\n    if (clamp(p.x, 0.0, 4.0) == p.x)\\n    {\\n        if (clamp(p.y, 0.0, 4.0) == p.y)\\n        {\\n            if (int(mod(n/exp2(p.x + 5.0*p.y), 2.0)) == 1) return 1.0;\\n        }\\n    }\\n    return 0.0;\\n}\\n\\nvoid main()\\n{\\n    vec2 coord = mapCoord(vTextureCoord);\\n\\n    // get the grid position\\n    vec2 pixCoord = pixelate(coord, vec2(uSize));\\n    pixCoord = unmapCoord(pixCoord);\\n\\n    // sample the color at grid position\\n    vec4 color = texture(uTexture, pixCoord);\\n\\n    // brightness of the color as it's perceived by the human eye\\n    float gray = 0.3 * color.r + 0.59 * color.g + 0.11 * color.b;\\n\\n    // determine the character to use\\n    float n =  65536.0;             // .\\n    if (gray > 0.2) n = 65600.0;    // :\\n    if (gray > 0.3) n = 332772.0;   // *\\n    if (gray > 0.4) n = 15255086.0; // o\\n    if (gray > 0.5) n = 23385164.0; // &\\n    if (gray > 0.6) n = 15252014.0; // 8\\n    if (gray > 0.7) n = 13199452.0; // @\\n    if (gray > 0.8) n = 11512810.0; // #\\n\\n    // get the mod..\\n    vec2 modd = getMod(coord, vec2(uSize));\\n\\n    finalColor = (uReplaceColor > 0.5 ? vec4(uColor, 1.) : color) * character( n, vec2(-1.0) + modd * 2.0);\\n}\\n\";\n\nexport { fragment as default };\n//# sourceMappingURL=ascii.mjs.map\n","import { Filter, deprecation, GpuProgram, GlProgram, Color } from 'pixi.js';\nimport vertex from '../defaults/default.mjs';\nimport wgslVertex from '../defaults/default2.mjs';\nimport fragment from './ascii.mjs';\nimport source from './ascii2.mjs';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _AsciiFilter = class _AsciiFilter extends Filter {\n  /** @ignore */\n  constructor(...args) {\n    let options = args[0] ?? {};\n    if (typeof options === \"number\") {\n      deprecation(\"6.0.0\", \"AsciiFilter constructor params are now options object. See params: { size, color, replaceColor }\");\n      options = { size: options };\n    }\n    const replaceColor = options?.color && options.replaceColor !== false;\n    options = { ..._AsciiFilter.DEFAULT_OPTIONS, ...options };\n    const gpuProgram = GpuProgram.from({\n      vertex: {\n        source: wgslVertex,\n        entryPoint: \"mainVertex\"\n      },\n      fragment: {\n        source,\n        entryPoint: \"mainFragment\"\n      }\n    });\n    const glProgram = GlProgram.from({\n      vertex,\n      fragment,\n      name: \"ascii-filter\"\n    });\n    super({\n      gpuProgram,\n      glProgram,\n      resources: {\n        asciiUniforms: {\n          uSize: { value: options.size, type: \"f32\" },\n          uColor: { value: new Float32Array(3), type: \"vec3<f32>\" },\n          uReplaceColor: { value: Number(replaceColor), type: \"f32\" }\n        }\n      }\n    });\n    __publicField(this, \"uniforms\");\n    __publicField(this, \"_color\");\n    this.uniforms = this.resources.asciiUniforms.uniforms;\n    this._color = new Color();\n    this.color = options.color ?? 16777215;\n  }\n  /**\n   * The pixel size used by the filter.\n   * @default 8\n   */\n  get size() {\n    return this.uniforms.uSize;\n  }\n  set size(value) {\n    this.uniforms.uSize = value;\n  }\n  /**\n   * The resulting color of the ascii characters, as a 3 component RGB or numerical hex\n   * @example [1.0, 1.0, 1.0] = 0xffffff\n   * @default 0xffffff\n   */\n  get color() {\n    return this._color.value;\n  }\n  set color(value) {\n    this._color.setValue(value);\n    const [r, g, b] = this._color.toArray();\n    this.uniforms.uColor[0] = r;\n    this.uniforms.uColor[1] = g;\n    this.uniforms.uColor[2] = b;\n  }\n  /**\n   * Determine whether or not to replace the source colors with the provided.\n   */\n  get replaceColor() {\n    return this.uniforms.uReplaceColor > 0.5;\n  }\n  set replaceColor(value) {\n    this.uniforms.uReplaceColor = value ? 1 : 0;\n  }\n};\n/** Default values for options. */\n__publicField(_AsciiFilter, \"DEFAULT_OPTIONS\", {\n  size: 8,\n  color: 16777215,\n  replaceColor: false\n});\nlet AsciiFilter = _AsciiFilter;\n\nexport { AsciiFilter };\n//# sourceMappingURL=AsciiFilter.mjs.map\n","var source = \"struct AsciiUniforms {\\n    uSize: f32,\\n    uColor: vec3<f32>,\\n    uReplaceColor: f32,\\n};\\n\\nstruct GlobalFilterUniforms {\\n    uInputSize:vec4<f32>,\\n    uInputPixel:vec4<f32>,\\n    uInputClamp:vec4<f32>,\\n    uOutputFrame:vec4<f32>,\\n    uGlobalFrame:vec4<f32>,\\n    uOutputTexture:vec4<f32>,\\n};\\n\\n@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;\\n\\n@group(0) @binding(1) var uTexture: texture_2d<f32>; \\n@group(0) @binding(2) var uSampler: sampler;\\n@group(1) @binding(0) var<uniform> asciiUniforms : AsciiUniforms;\\n\\n@fragment\\nfn mainFragment(\\n    @location(0) uv: vec2<f32>,\\n    @builtin(position) position: vec4<f32>\\n) -> @location(0) vec4<f32> {\\n    let pixelSize: f32 = asciiUniforms.uSize;\\n    let coord: vec2<f32> = mapCoord(uv);\\n\\n    // get the rounded color..\\n    var pixCoord: vec2<f32> = pixelate(coord, vec2<f32>(pixelSize));\\n    pixCoord = unmapCoord(pixCoord);\\n\\n    var color = textureSample(uTexture, uSampler, pixCoord);\\n\\n    // determine the character to use\\n    let gray: f32 = 0.3 * color.r + 0.59 * color.g + 0.11 * color.b;\\n    \\n    var n: f32 = 65536.0; // .\\n    if (gray > 0.2) {\\n        n = 65600.0;    // :\\n    }\\n    if (gray > 0.3) {\\n        n = 332772.0;   // *\\n    }\\n    if (gray > 0.4) {\\n        n = 15255086.0; // o\\n    }\\n    if (gray > 0.5) {\\n        n = 23385164.0; // &\\n    }\\n    if (gray > 0.6) {\\n        n = 15252014.0; // 8\\n    }\\n    if (gray > 0.7) {\\n        n = 13199452.0; // @\\n    }\\n    if (gray > 0.8) {\\n        n = 11512810.0; // #\\n    }\\n\\n    // get the mod..\\n    let modd: vec2<f32> = getMod(coord, vec2<f32>(pixelSize));\\n    return select(color, vec4<f32>(asciiUniforms.uColor, 1.), asciiUniforms.uReplaceColor > 0.5) * character(n, vec2<f32>(-1.0) + modd * 2.0);\\n}\\n\\nfn pixelate(coord: vec2<f32>, size: vec2<f32>) -> vec2<f32>\\n{\\n    return floor( coord / size ) * size;\\n}\\n\\nfn getMod(coord: vec2<f32>, size: vec2<f32>) -> vec2<f32>\\n{\\n    return moduloVec2( coord , size) / size;\\n}\\n\\nfn character(n: f32, p: vec2<f32>) -> f32\\n{\\n    var q: vec2<f32> = floor(p*vec2<f32>(4.0, 4.0) + 2.5);\\n\\n    if (clamp(q.x, 0.0, 4.0) == q.x)\\n    {\\n        if (clamp(q.y, 0.0, 4.0) == q.y)\\n        {\\n        if (i32(modulo(n/exp2(q.x + 5.0*q.y), 2.0)) == 1)\\n        {\\n            return 1.0;\\n        }\\n        }\\n    }\\n\\n    return 0.0;\\n}\\n\\nfn modulo(x: f32, y: f32) -> f32\\n{\\n  return x - y * floor(x/y);\\n}\\n\\nfn moduloVec2(x: vec2<f32>, y: vec2<f32>) -> vec2<f32>\\n{\\n  return x - y * floor(x/y);\\n}\\n\\nfn mapCoord(coord: vec2<f32> ) -> vec2<f32>\\n{\\n    var mappedCoord: vec2<f32> = coord;\\n    mappedCoord *= gfu.uInputSize.xy;\\n    mappedCoord += gfu.uOutputFrame.xy;\\n    return mappedCoord;\\n}\\n\\nfn unmapCoord(coord: vec2<f32> ) -> vec2<f32>\\n{\\n    var mappedCoord: vec2<f32> = coord;\\n    mappedCoord -= gfu.uOutputFrame.xy;\\n    mappedCoord /= gfu.uInputSize.xy;\\n    return mappedCoord;\\n}\";\n\nexport { source as default };\n//# sourceMappingURL=ascii2.mjs.map\n","import { BlurFilter, Filter, GpuProgram, GlProgram, Texture, TexturePool } from 'pixi.js';\nimport vertex from '../defaults/default.mjs';\nimport wgslVertex from '../defaults/default2.mjs';\nimport fragment from './backdrop-blur-blend2.mjs';\nimport wgslFragment from './backdrop-blur-blend.mjs';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass BackdropBlurFilter extends BlurFilter {\n  /**\n   * @param options - The options of the blur filter.\n   */\n  constructor(options) {\n    super(options);\n    __publicField(this, \"_blendPass\");\n    this.blendRequired = true;\n    this.padding = 0;\n    this._blendPass = new Filter({\n      gpuProgram: GpuProgram.from({\n        vertex: {\n          source: wgslVertex,\n          entryPoint: \"mainVertex\"\n        },\n        fragment: {\n          source: wgslFragment,\n          entryPoint: \"mainFragment\"\n        }\n      }),\n      glProgram: GlProgram.from({\n        vertex,\n        fragment,\n        name: \"drop-shadow-filter\"\n      }),\n      resources: {\n        uBackground: Texture.EMPTY\n      }\n    });\n  }\n  /**\n   * Override existing apply method in `Filter`\n   * @override\n   * @ignore\n   */\n  apply(filterManager, input, output, clearMode) {\n    const backTexture = filterManager._activeFilterData.backTexture;\n    const blurredBackground = TexturePool.getSameSizeTexture(input);\n    super.apply(filterManager, backTexture, blurredBackground, true);\n    this._blendPass.resources.uBackground = blurredBackground.source;\n    this._blendPass.apply(filterManager, input, output, clearMode);\n    TexturePool.returnTexture(blurredBackground);\n  }\n  updatePadding() {\n    this.padding = 0;\n  }\n}\n\nexport { BackdropBlurFilter };\n//# sourceMappingURL=BackdropBlurFilter.mjs.map\n","var fragment = \"precision highp float;\\nin vec2 vTextureCoord;\\nout vec4 finalColor;\\n\\nuniform sampler2D uTexture;\\nuniform vec2 uTransform;\\nuniform vec3 uLightColor;\\nuniform float uLightAlpha;\\nuniform vec3 uShadowColor;\\nuniform float uShadowAlpha;\\n\\nuniform vec4 uInputSize;\\n\\nvoid main(void) {\\n    vec2 transform = vec2(1.0 / uInputSize) * vec2(uTransform.x, uTransform.y);\\n    vec4 color = texture(uTexture, vTextureCoord);\\n    float light = texture(uTexture, vTextureCoord - transform).a;\\n    float shadow = texture(uTexture, vTextureCoord + transform).a;\\n\\n    color.rgb = mix(color.rgb, uLightColor, clamp((color.a - light) * uLightAlpha, 0.0, 1.0));\\n    color.rgb = mix(color.rgb, uShadowColor, clamp((color.a - shadow) * uShadowAlpha, 0.0, 1.0));\\n    finalColor = vec4(color.rgb * color.a, color.a);\\n}\\n\";\n\nexport { fragment as default };\n//# sourceMappingURL=bevel2.mjs.map\n","import { Filter, GpuProgram, GlProgram, Color, DEG_TO_RAD } from 'pixi.js';\nimport vertex from '../defaults/default.mjs';\nimport wgslVertex from '../defaults/default2.mjs';\nimport fragment from './bevel2.mjs';\nimport source from './bevel.mjs';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _BevelFilter = class _BevelFilter extends Filter {\n  /**\n   * @param options - Options for the BevelFilter constructor.\n   */\n  constructor(options) {\n    options = { ..._BevelFilter.DEFAULT_OPTIONS, ...options };\n    const gpuProgram = GpuProgram.from({\n      vertex: {\n        source: wgslVertex,\n        entryPoint: \"mainVertex\"\n      },\n      fragment: {\n        source,\n        entryPoint: \"mainFragment\"\n      }\n    });\n    const glProgram = GlProgram.from({\n      vertex,\n      fragment,\n      name: \"bevel-filter\"\n    });\n    super({\n      gpuProgram,\n      glProgram,\n      resources: {\n        bevelUniforms: {\n          uLightColor: { value: new Float32Array(3), type: \"vec3<f32>\" },\n          uLightAlpha: { value: options.lightAlpha, type: \"f32\" },\n          uShadowColor: { value: new Float32Array(3), type: \"vec3<f32>\" },\n          uShadowAlpha: { value: options.shadowAlpha, type: \"f32\" },\n          uTransform: { value: new Float32Array(2), type: \"vec2<f32>\" }\n        }\n      },\n      // Workaround: https://github.com/pixijs/filters/issues/230\n      // applies correctly only if there is at least a single-pixel padding with alpha=0 around an image\n      // To solve this problem, a padding of 1 put on the filter should suffice\n      padding: 1\n    });\n    __publicField(this, \"uniforms\");\n    __publicField(this, \"_thickness\");\n    __publicField(this, \"_rotation\");\n    __publicField(this, \"_lightColor\");\n    __publicField(this, \"_shadowColor\");\n    this.uniforms = this.resources.bevelUniforms.uniforms;\n    this._lightColor = new Color();\n    this._shadowColor = new Color();\n    this.lightColor = options.lightColor ?? 16777215;\n    this.shadowColor = options.shadowColor ?? 0;\n    Object.assign(this, options);\n  }\n  /**\n   * The angle of the light in degrees\n   * @default 45\n   */\n  get rotation() {\n    return this._rotation / DEG_TO_RAD;\n  }\n  set rotation(value) {\n    this._rotation = value * DEG_TO_RAD;\n    this._updateTransform();\n  }\n  /**\n   * The thickness of the bevel\n   * @default 2\n   */\n  get thickness() {\n    return this._thickness;\n  }\n  set thickness(value) {\n    this._thickness = value;\n    this._updateTransform();\n  }\n  /**\n   * The color value of the left & top bevel.\n   * @example [1.0, 1.0, 1.0] = 0xffffff\n   * @default 0xffffff\n   */\n  get lightColor() {\n    return this._lightColor.value;\n  }\n  set lightColor(value) {\n    this._lightColor.setValue(value);\n    const [r, g, b] = this._lightColor.toArray();\n    this.uniforms.uLightColor[0] = r;\n    this.uniforms.uLightColor[1] = g;\n    this.uniforms.uLightColor[2] = b;\n  }\n  /**\n   * The alpha value of the left & top bevel.\n   * @default 0.7\n   */\n  get lightAlpha() {\n    return this.uniforms.uLightAlpha;\n  }\n  set lightAlpha(value) {\n    this.uniforms.uLightAlpha = value;\n  }\n  /**\n   * The color value of the right & bottom bevel.\n   * @default 0xffffff\n   */\n  get shadowColor() {\n    return this._shadowColor.value;\n  }\n  set shadowColor(value) {\n    this._shadowColor.setValue(value);\n    const [r, g, b] = this._shadowColor.toArray();\n    this.uniforms.uShadowColor[0] = r;\n    this.uniforms.uShadowColor[1] = g;\n    this.uniforms.uShadowColor[2] = b;\n  }\n  /**\n   * The alpha value of the right & bottom bevel.\n   * @default 0.7\n   */\n  get shadowAlpha() {\n    return this.uniforms.uShadowAlpha;\n  }\n  set shadowAlpha(value) {\n    this.uniforms.uShadowAlpha = value;\n  }\n  /**\n   * Update the transform matrix of offset angle.\n   * @private\n   */\n  _updateTransform() {\n    this.uniforms.uTransform[0] = this.thickness * Math.cos(this._rotation);\n    this.uniforms.uTransform[1] = this.thickness * Math.sin(this._rotation);\n  }\n};\n/** Default values for options. */\n__publicField(_BevelFilter, \"DEFAULT_OPTIONS\", {\n  rotation: 45,\n  thickness: 2,\n  lightColor: 16777215,\n  lightAlpha: 0.7,\n  shadowColor: 0,\n  shadowAlpha: 0.7\n});\nlet BevelFilter = _BevelFilter;\n\nexport { BevelFilter };\n//# sourceMappingURL=BevelFilter.mjs.map\n","var source = \"struct BevelUniforms {\\n  uLightColor: vec3<f32>,\\n  uLightAlpha: f32,\\n  uShadowColor: vec3<f32>,\\n  uShadowAlpha: f32,\\n  uTransform: vec2<f32>,\\n};\\n\\nstruct GlobalFilterUniforms {\\n  uInputSize:vec4<f32>,\\n  uInputPixel:vec4<f32>,\\n  uInputClamp:vec4<f32>,\\n  uOutputFrame:vec4<f32>,\\n  uGlobalFrame:vec4<f32>,\\n  uOutputTexture:vec4<f32>,\\n};\\n\\n@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;\\n\\n@group(0) @binding(1) var uTexture: texture_2d<f32>; \\n@group(0) @binding(2) var uSampler: sampler;\\n@group(1) @binding(0) var<uniform> bevelUniforms : BevelUniforms;\\n\\n@fragment\\nfn mainFragment(\\n  @builtin(position) position: vec4<f32>,\\n  @location(0) uv : vec2<f32>\\n) -> @location(0) vec4<f32> {\\n  let transform = vec2<f32>(1.0 / gfu.uInputSize.xy) * vec2<f32>(bevelUniforms.uTransform.x, bevelUniforms.uTransform.y);\\n  var color: vec4<f32> = textureSample(uTexture, uSampler, uv);\\n  let lightSample: f32 = textureSample(uTexture, uSampler, uv - transform).a;\\n  let shadowSample: f32 = textureSample(uTexture, uSampler, uv + transform).a;\\n\\n  let light = vec4<f32>(bevelUniforms.uLightColor, bevelUniforms.uLightAlpha);\\n  let shadow = vec4<f32>(bevelUniforms.uShadowColor, bevelUniforms.uShadowAlpha);\\n\\n  color = vec4<f32>(mix(color.rgb, light.rgb, clamp((color.a - lightSample) * light.a, 0.0, 1.0)), color.a);\\n  color = vec4<f32>(mix(color.rgb, shadow.rgb, clamp((color.a - shadowSample) * shadow.a, 0.0, 1.0)), color.a);\\n  \\n  return vec4<f32>(color.rgb * color.a, color.a);\\n}\";\n\nexport { source as default };\n//# sourceMappingURL=bevel.mjs.map\n","import { AlphaFilter, deprecation, BlurFilterPass, TexturePool } from 'pixi.js';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _BloomFilter = class _BloomFilter extends AlphaFilter {\n  /** @ignore */\n  constructor(...args) {\n    let options = args[0] ?? {};\n    if (typeof options === \"number\" || Array.isArray(options) || \"x\" in options && \"y\" in options) {\n      deprecation(\"6.0.0\", \"BloomFilter constructor params are now options object. See params: { strength, quality, resolution, kernelSize }\");\n      let strength = options;\n      if (Array.isArray(strength))\n        strength = { x: strength[0], y: strength[1] };\n      options = { strength };\n      if (args[1] !== void 0)\n        options.quality = args[1];\n      if (args[2] !== void 0)\n        options.resolution = args[2];\n      if (args[3] !== void 0)\n        options.kernelSize = args[3];\n    }\n    options = { ..._BloomFilter.DEFAULT_OPTIONS, ...options };\n    super();\n    __publicField(this, \"_blurXFilter\");\n    __publicField(this, \"_blurYFilter\");\n    __publicField(this, \"_strength\");\n    this._strength = { x: 2, y: 2 };\n    if (options.strength) {\n      if (typeof options.strength === \"number\") {\n        this._strength.x = options.strength;\n        this._strength.y = options.strength;\n      } else {\n        this._strength.x = options.strength.x;\n        this._strength.y = options.strength.y;\n      }\n    }\n    this._blurXFilter = new BlurFilterPass({\n      ...options,\n      horizontal: true,\n      strength: this.strengthX\n    });\n    this._blurYFilter = new BlurFilterPass({\n      ...options,\n      horizontal: false,\n      strength: this.strengthY\n    });\n    this._blurYFilter.blendMode = \"screen\";\n    Object.assign(this, options);\n  }\n  /**\n   * Override existing apply method in `Filter`\n   * @override\n   * @ignore\n   */\n  apply(filterManager, input, output, clear) {\n    const renderTarget = TexturePool.getSameSizeTexture(input);\n    filterManager.applyFilter(this, input, output, clear);\n    this._blurXFilter.apply(filterManager, input, renderTarget, true);\n    this._blurYFilter.apply(filterManager, renderTarget, output, false);\n    TexturePool.returnTexture(renderTarget);\n  }\n  /**\n   * Sets the strength of both the blurX and blurY properties simultaneously\n   * @default 2\n   */\n  get strength() {\n    return this._strength;\n  }\n  set strength(value) {\n    this._strength = typeof value === \"number\" ? { x: value, y: value } : value;\n    this._updateStrength();\n  }\n  /**\n   * Sets the strength of the blur on the `x` axis\n   * @default 2\n   */\n  get strengthX() {\n    return this.strength.x;\n  }\n  set strengthX(value) {\n    this.strength.x = value;\n    this._updateStrength();\n  }\n  /**\n   * Sets the strength of the blur on the `y` axis\n   * @default 2\n   */\n  get strengthY() {\n    return this.strength.y;\n  }\n  set strengthY(value) {\n    this.strength.y = value;\n    this._updateStrength();\n  }\n  _updateStrength() {\n    this._blurXFilter.blur = this.strengthX;\n    this._blurYFilter.blur = this.strengthY;\n  }\n  /**\n   * @deprecated since 6.0.0\n   *\n   * The strength of both the blurX and blurY properties simultaneously\n   * @default 2\n   * @see BloomFilter#strength\n   */\n  get blur() {\n    deprecation(\"6.0.0\", \"BloomFilter.blur is deprecated, please use BloomFilter.strength instead\");\n    return this.strengthX;\n  }\n  set blur(value) {\n    deprecation(\"6.0.0\", \"BloomFilter.blur is deprecated, please use BloomFilter.strength instead\");\n    this.strength = value;\n  }\n  /**\n   * @deprecated since 6.0.0\n   *\n   * The strength of the blurX property\n   * @default 2\n   * @see BloomFilter#strengthX\n   */\n  get blurX() {\n    deprecation(\"6.0.0\", \"BloomFilter.blurX is deprecated, please use BloomFilter.strengthX instead\");\n    return this.strengthX;\n  }\n  set blurX(value) {\n    deprecation(\"6.0.0\", \"BloomFilter.blurX is deprecated, please use BloomFilter.strengthX instead\");\n    this.strengthX = value;\n  }\n  /**\n   * @deprecated since 6.0.0\n   *\n   * The strength of the blurY property\n   * @default 2\n   * @see BloomFilter#strengthY\n   */\n  get blurY() {\n    deprecation(\"6.0.0\", \"BloomFilter.blurY is deprecated, please use BloomFilter.strengthY instead\");\n    return this.strengthY;\n  }\n  set blurY(value) {\n    deprecation(\"6.0.0\", \"BloomFilter.blurY is deprecated, please use BloomFilter.strengthY instead\");\n    this.strengthY = value;\n  }\n};\n/** Default values for options. */\n__publicField(_BloomFilter, \"DEFAULT_OPTIONS\", {\n  strength: { x: 2, y: 2 },\n  quality: 4,\n  resolution: 1,\n  kernelSize: 5\n});\nlet BloomFilter = _BloomFilter;\n\nexport { BloomFilter };\n//# sourceMappingURL=BloomFilter.mjs.map\n","var fragment = \"precision highp float;\\nin vec2 vTextureCoord;\\nout vec4 finalColor;\\n\\nuniform sampler2D uTexture;\\nuniform vec2 uDimensions;\\nuniform vec2 uCenter;\\nuniform float uRadius;\\nuniform float uStrength;\\n\\nuniform vec4 uInputSize;\\nuniform vec4 uInputClamp;\\n\\nvoid main()\\n{\\n    vec2 coord = vTextureCoord * uInputSize.xy;\\n    coord -= uCenter * uDimensions.xy;\\n    float distance = length(coord);\\n\\n    if (distance < uRadius) {\\n        float percent = distance / uRadius;\\n        if (uStrength > 0.0) {\\n            coord *= mix(1.0, smoothstep(0.0, uRadius / distance, percent), uStrength * 0.75);\\n        } else {\\n            coord *= mix(1.0, pow(percent, 1.0 + uStrength * 0.75) * uRadius / distance, 1.0 - percent);\\n        }\\n    }\\n\\n    coord += uCenter * uDimensions.xy;\\n    coord /= uInputSize.xy;\\n    vec2 clampedCoord = clamp(coord, uInputClamp.xy, uInputClamp.zw);\\n    vec4 color = texture(uTexture, clampedCoord);\\n\\n    if (coord != clampedCoord) {\\n        color *= max(0.0, 1.0 - length(coord - clampedCoord));\\n    }\\n\\n    finalColor = color;\\n}\\n\";\n\nexport { fragment as default };\n//# sourceMappingURL=bulge-pinch.mjs.map\n","import { Filter, GpuProgram, GlProgram } from 'pixi.js';\nimport vertex from '../defaults/default.mjs';\nimport wgslVertex from '../defaults/default2.mjs';\nimport fragment from './bulge-pinch.mjs';\nimport source from './bulge-pinch2.mjs';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _BulgePinchFilter = class _BulgePinchFilter extends Filter {\n  /**\n   * @param options - Options for the BulgePinchFilter constructor.\n   */\n  constructor(options) {\n    options = { ..._BulgePinchFilter.DEFAULT_OPTIONS, ...options };\n    const gpuProgram = GpuProgram.from({\n      vertex: {\n        source: wgslVertex,\n        entryPoint: \"mainVertex\"\n      },\n      fragment: {\n        source,\n        entryPoint: \"mainFragment\"\n      }\n    });\n    const glProgram = GlProgram.from({\n      vertex,\n      fragment,\n      name: \"bulge-pinch-filter\"\n    });\n    super({\n      gpuProgram,\n      glProgram,\n      resources: {\n        bulgePinchUniforms: {\n          uDimensions: { value: [0, 0], type: \"vec2<f32>\" },\n          uCenter: { value: options.center, type: \"vec2<f32>\" },\n          uRadius: { value: options.radius, type: \"f32\" },\n          uStrength: { value: options.strength, type: \"f32\" }\n        }\n      }\n    });\n    __publicField(this, \"uniforms\");\n    this.uniforms = this.resources.bulgePinchUniforms.uniforms;\n    Object.assign(this, options);\n  }\n  /**\n   * Override existing apply method in `Filter`\n   * @override\n   * @ignore\n   */\n  apply(filterManager, input, output, clearMode) {\n    this.uniforms.uDimensions[0] = input.frame.width;\n    this.uniforms.uDimensions[1] = input.frame.height;\n    filterManager.applyFilter(this, input, output, clearMode);\n  }\n  /**\n   * Sets the center of the effect in normalized screen coords.\n   * { x: 0, y: 0 } means top-left and { x: 1, y: 1 } mean bottom-right\n   * @default {x:0.5,y:0.5}\n   */\n  get center() {\n    return this.uniforms.uCenter;\n  }\n  set center(value) {\n    if (typeof value === \"number\") {\n      value = { x: value, y: value };\n    }\n    if (Array.isArray(value)) {\n      value = { x: value[0], y: value[1] };\n    }\n    this.uniforms.uCenter = value;\n  }\n  /**\n   * Sets the center of the effect in normalized screen coords on the `x` axis\n   * @default 0\n   */\n  get centerX() {\n    return this.uniforms.uCenter.x;\n  }\n  set centerX(value) {\n    this.uniforms.uCenter.x = value;\n  }\n  /**\n   * Sets the center of the effect in normalized screen coords on the `y` axis\n   * @default 0\n   */\n  get centerY() {\n    return this.uniforms.uCenter.y;\n  }\n  set centerY(value) {\n    this.uniforms.uCenter.y = value;\n  }\n  /**\n   * The radius of the circle of effect\n   * @default 100\n   */\n  get radius() {\n    return this.uniforms.uRadius;\n  }\n  set radius(value) {\n    this.uniforms.uRadius = value;\n  }\n  /**\n   * A value between -1 and 1 (-1 is strong pinch, 0 is no effect, 1 is strong bulge)\n   * @default 1\n   */\n  get strength() {\n    return this.uniforms.uStrength;\n  }\n  set strength(value) {\n    this.uniforms.uStrength = value;\n  }\n};\n/** Default values for options. */\n__publicField(_BulgePinchFilter, \"DEFAULT_OPTIONS\", {\n  center: { x: 0.5, y: 0.5 },\n  radius: 100,\n  strength: 1\n});\nlet BulgePinchFilter = _BulgePinchFilter;\n\nexport { BulgePinchFilter };\n//# sourceMappingURL=BulgePinchFilter.mjs.map\n","var source = \"struct BulgePinchUniforms {\\n  uDimensions: vec2<f32>,\\n  uCenter: vec2<f32>,\\n  uRadius: f32,\\n  uStrength: f32,\\n};\\n\\nstruct GlobalFilterUniforms {\\n  uInputSize:vec4<f32>,\\n  uInputPixel:vec4<f32>,\\n  uInputClamp:vec4<f32>,\\n  uOutputFrame:vec4<f32>,\\n  uGlobalFrame:vec4<f32>,\\n  uOutputTexture:vec4<f32>,\\n};\\n\\n@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;\\n\\n@group(0) @binding(1) var uTexture: texture_2d<f32>; \\n@group(0) @binding(2) var uSampler: sampler;\\n@group(1) @binding(0) var<uniform> bulgePinchUniforms : BulgePinchUniforms;\\n\\n@fragment\\nfn mainFragment(\\n  @builtin(position) position: vec4<f32>,\\n  @location(0) uv : vec2<f32>\\n) -> @location(0) vec4<f32> {\\n  let dimensions: vec2<f32> = bulgePinchUniforms.uDimensions;\\n  let center: vec2<f32> = bulgePinchUniforms.uCenter;\\n  let radius: f32 = bulgePinchUniforms.uRadius;\\n  let strength: f32 = bulgePinchUniforms.uStrength;\\n  var coord: vec2<f32> = (uv * gfu.uInputSize.xy) - center * dimensions.xy;\\n\\n  let distance: f32 = length(coord);\\n\\n  if (distance < radius) {\\n      let percent: f32 = distance / radius;\\n      if (strength > 0.0) {\\n          coord *= mix(1.0, smoothstep(0.0, radius / distance, percent), strength * 0.75);\\n      } else {\\n          coord *= mix(1.0, pow(percent, 1.0 + strength * 0.75) * radius / distance, 1.0 - percent);\\n      }\\n  }\\n    coord += (center * dimensions.xy);\\n    coord /= gfu.uInputSize.xy;\\n\\n    let clampedCoord: vec2<f32> = clamp(coord, gfu.uInputClamp.xy, gfu.uInputClamp.zw);\\n    var color: vec4<f32> = textureSample(uTexture, uSampler, clampedCoord);\\n    if (coord.x != clampedCoord.x && coord.y != clampedCoord.y) {\\n        color *= max(0.0, 1.0 - length(coord - clampedCoord));\\n    }\\n\\n    return color;\\n}\\n\\nfn compareVec2(x: vec2<f32>, y: vec2<f32>) -> bool\\n{\\n  if (x.x == y.x && x.y == y.y)\\n  {\\n    return true;\\n  }\\n\\n  return false;\\n}\";\n\nexport { source as default };\n//# sourceMappingURL=bulge-pinch2.mjs.map\n","var fragment = \"precision highp float;\\nin vec2 vTextureCoord;\\nin vec2 vFilterCoord;\\nout vec4 finalColor;\\n\\nconst int TYPE_LINEAR = 0;\\nconst int TYPE_RADIAL = 1;\\nconst int TYPE_CONIC = 2;\\nconst int MAX_STOPS = 32;\\n\\nuniform sampler2D uTexture;\\nuniform vec4 uOptions;\\nuniform vec2 uCounts;\\nuniform vec3 uColors[MAX_STOPS];\\nuniform vec4 uStops[MAX_STOPS];\\n\\nconst float PI = 3.1415926538;\\nconst float PI_2 = PI*2.;\\n\\nstruct ColorStop {\\n    float offset;\\n    vec3 color;\\n    float alpha;\\n};\\n\\nmat2 rotate2d(float angle){\\n    return mat2(cos(angle), -sin(angle),\\n    sin(angle), cos(angle));\\n}\\n\\nfloat projectLinearPosition(vec2 pos, float angle){\\n    vec2 center = vec2(0.5);\\n    vec2 result = pos - center;\\n    result = rotate2d(angle) * result;\\n    result = result + center;\\n    return clamp(result.x, 0., 1.);\\n}\\n\\nfloat projectRadialPosition(vec2 pos) {\\n    float r = distance(pos, vec2(0.5));\\n    return clamp(2.*r, 0., 1.);\\n}\\n\\nfloat projectAnglePosition(vec2 pos, float angle) {\\n    vec2 center = pos - vec2(0.5);\\n    float polarAngle=atan(-center.y, center.x);\\n    return mod(polarAngle + angle, PI_2) / PI_2;\\n}\\n\\nfloat projectPosition(vec2 pos, int type, float angle) {\\n    if (type == TYPE_LINEAR) {\\n        return projectLinearPosition(pos, angle);\\n    } else if (type == TYPE_RADIAL) {\\n        return projectRadialPosition(pos);\\n    } else if (type == TYPE_CONIC) {\\n        return projectAnglePosition(pos, angle);\\n    }\\n\\n    return pos.y;\\n}\\n\\nvoid main(void) {\\n    int uType = int(uOptions[0]);\\n    float uAngle = uOptions[1];\\n    float uAlpha = uOptions[2];\\n    float uReplace = uOptions[3];\\n\\n    int uNumStops = int(uCounts[0]);\\n    float uMaxColors = uCounts[1];\\n\\n    // current/original color\\n    vec4 currentColor = texture(uTexture, vTextureCoord);\\n\\n    // skip calculations if gradient alpha is 0\\n    if (0.0 == uAlpha) {\\n        finalColor = currentColor;\\n        return;\\n    }\\n\\n    // project position\\n    float y = projectPosition(vFilterCoord, int(uType), radians(uAngle));\\n\\n    // check gradient bounds\\n    float offsetMin = uStops[0][0];\\n    float offsetMax = 0.0;\\n\\n    int numStops = int(uNumStops);\\n\\n    for (int i = 0; i < MAX_STOPS; i++) {\\n        if (i == numStops-1){ // last index\\n            offsetMax = uStops[i][0];\\n        }\\n    }\\n\\n    if (y  < offsetMin || y > offsetMax) {\\n        finalColor = currentColor;\\n        return;\\n    }\\n\\n    // limit colors\\n    if (uMaxColors > 0.) {\\n        float stepSize = 1./uMaxColors;\\n        float stepNumber = float(floor(y/stepSize));\\n        y = stepSize * (stepNumber + 0.5);// offset by 0.5 to use color from middle of segment\\n    }\\n\\n    // find color stops\\n    ColorStop from;\\n    ColorStop to;\\n\\n    for (int i = 0; i < MAX_STOPS; i++) {\\n        if (y >= uStops[i][0]) {\\n            from = ColorStop(uStops[i][0], uColors[i], uStops[i][1]);\\n            to = ColorStop(uStops[i+1][0], uColors[i+1], uStops[i+1][1]);\\n        }\\n\\n        if (i == numStops-1){ // last index\\n            break;\\n        }\\n    }\\n\\n    // mix colors from stops\\n    vec4 colorFrom = vec4(from.color * from.alpha, from.alpha);\\n    vec4 colorTo = vec4(to.color * to.alpha, to.alpha);\\n\\n    float segmentHeight = to.offset - from.offset;\\n    float relativePos = y - from.offset;// position from 0 to [segmentHeight]\\n    float relativePercent = relativePos / segmentHeight;// position in percent between [from.offset] and [to.offset].\\n\\n    float gradientAlpha = uAlpha * currentColor.a;\\n    vec4 gradientColor = mix(colorFrom, colorTo, relativePercent) * gradientAlpha;\\n\\n    if (uReplace < 0.5) {\\n        // mix resulting color with current color\\n        finalColor = gradientColor + currentColor*(1.-gradientColor.a);\\n    } else {\\n        // replace with gradient color\\n        finalColor = gradientColor;\\n    }\\n}\\n\";\n\nexport { fragment as default };\n//# sourceMappingURL=color-gradient.mjs.map\n","// Copyright (c) 2014 Rafael Caricio. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nvar GradientParser = (GradientParser || {});\n\nGradientParser.stringify = (function() {\n\n  var visitor = {\n\n    'visit_linear-gradient': function(node) {\n      return visitor.visit_gradient(node);\n    },\n\n    'visit_repeating-linear-gradient': function(node) {\n      return visitor.visit_gradient(node);\n    },\n\n    'visit_radial-gradient': function(node) {\n      return visitor.visit_gradient(node);\n    },\n\n    'visit_repeating-radial-gradient': function(node) {\n      return visitor.visit_gradient(node);\n    },\n\n    'visit_gradient': function(node) {\n      var orientation = visitor.visit(node.orientation);\n      if (orientation) {\n        orientation += ', ';\n      }\n\n      return node.type + '(' + orientation + visitor.visit(node.colorStops) + ')';\n    },\n\n    'visit_shape': function(node) {\n      var result = node.value,\n          at = visitor.visit(node.at),\n          style = visitor.visit(node.style);\n\n      if (style) {\n        result += ' ' + style;\n      }\n\n      if (at) {\n        result += ' at ' + at;\n      }\n\n      return result;\n    },\n\n    'visit_default-radial': function(node) {\n      var result = '',\n          at = visitor.visit(node.at);\n\n      if (at) {\n        result += at;\n      }\n      return result;\n    },\n\n    'visit_extent-keyword': function(node) {\n      var result = node.value,\n          at = visitor.visit(node.at);\n\n      if (at) {\n        result += ' at ' + at;\n      }\n\n      return result;\n    },\n\n    'visit_position-keyword': function(node) {\n      return node.value;\n    },\n\n    'visit_position': function(node) {\n      return visitor.visit(node.value.x) + ' ' + visitor.visit(node.value.y);\n    },\n\n    'visit_%': function(node) {\n      return node.value + '%';\n    },\n\n    'visit_em': function(node) {\n      return node.value + 'em';\n    },\n\n    'visit_px': function(node) {\n      return node.value + 'px';\n    },\n\n    'visit_literal': function(node) {\n      return visitor.visit_color(node.value, node);\n    },\n\n    'visit_hex': function(node) {\n      return visitor.visit_color('#' + node.value, node);\n    },\n\n    'visit_rgb': function(node) {\n      return visitor.visit_color('rgb(' + node.value.join(', ') + ')', node);\n    },\n\n    'visit_rgba': function(node) {\n      return visitor.visit_color('rgba(' + node.value.join(', ') + ')', node);\n    },\n\n    'visit_color': function(resultColor, node) {\n      var result = resultColor,\n          length = visitor.visit(node.length);\n\n      if (length) {\n        result += ' ' + length;\n      }\n      return result;\n    },\n\n    'visit_angular': function(node) {\n      return node.value + 'deg';\n    },\n\n    'visit_directional': function(node) {\n      return 'to ' + node.value;\n    },\n\n    'visit_array': function(elements) {\n      var result = '',\n          size = elements.length;\n\n      elements.forEach(function(element, i) {\n        result += visitor.visit(element);\n        if (i < size - 1) {\n          result += ', ';\n        }\n      });\n\n      return result;\n    },\n\n    'visit': function(element) {\n      if (!element) {\n        return '';\n      }\n      var result = '';\n\n      if (element instanceof Array) {\n        return visitor.visit_array(element, result);\n      } else if (element.type) {\n        var nodeVisitor = visitor['visit_' + element.type];\n        if (nodeVisitor) {\n          return nodeVisitor(element);\n        } else {\n          throw Error('Missing visitor visit_' + element.type);\n        }\n      } else {\n        throw Error('Invalid node.');\n      }\n    }\n\n  };\n\n  return function(root) {\n    return visitor.visit(root);\n  };\n})();\n\n// Copyright (c) 2014 Rafael Caricio. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nvar GradientParser = (GradientParser || {});\n\nGradientParser.parse = (function() {\n\n  var tokens = {\n    linearGradient: /^(\\-(webkit|o|ms|moz)\\-)?(linear\\-gradient)/i,\n    repeatingLinearGradient: /^(\\-(webkit|o|ms|moz)\\-)?(repeating\\-linear\\-gradient)/i,\n    radialGradient: /^(\\-(webkit|o|ms|moz)\\-)?(radial\\-gradient)/i,\n    repeatingRadialGradient: /^(\\-(webkit|o|ms|moz)\\-)?(repeating\\-radial\\-gradient)/i,\n    sideOrCorner: /^to (left (top|bottom)|right (top|bottom)|left|right|top|bottom)/i,\n    extentKeywords: /^(closest\\-side|closest\\-corner|farthest\\-side|farthest\\-corner|contain|cover)/,\n    positionKeywords: /^(left|center|right|top|bottom)/i,\n    pixelValue: /^(-?(([0-9]*\\.[0-9]+)|([0-9]+\\.?)))px/,\n    percentageValue: /^(-?(([0-9]*\\.[0-9]+)|([0-9]+\\.?)))\\%/,\n    emValue: /^(-?(([0-9]*\\.[0-9]+)|([0-9]+\\.?)))em/,\n    angleValue: /^(-?(([0-9]*\\.[0-9]+)|([0-9]+\\.?)))deg/,\n    startCall: /^\\(/,\n    endCall: /^\\)/,\n    comma: /^,/,\n    hexColor: /^\\#([0-9a-fA-F]+)/,\n    literalColor: /^([a-zA-Z]+)/,\n    rgbColor: /^rgb/i,\n    rgbaColor: /^rgba/i,\n    number: /^(([0-9]*\\.[0-9]+)|([0-9]+\\.?))/\n  };\n\n  var input = '';\n\n  function error(msg) {\n    var err = new Error(input + ': ' + msg);\n    err.source = input;\n    throw err;\n  }\n\n  function getAST() {\n    var ast = matchListDefinitions();\n\n    if (input.length > 0) {\n      error('Invalid input not EOF');\n    }\n\n    return ast;\n  }\n\n  function matchListDefinitions() {\n    return matchListing(matchDefinition);\n  }\n\n  function matchDefinition() {\n    return matchGradient(\n            'linear-gradient',\n            tokens.linearGradient,\n            matchLinearOrientation) ||\n\n          matchGradient(\n            'repeating-linear-gradient',\n            tokens.repeatingLinearGradient,\n            matchLinearOrientation) ||\n\n          matchGradient(\n            'radial-gradient',\n            tokens.radialGradient,\n            matchListRadialOrientations) ||\n\n          matchGradient(\n            'repeating-radial-gradient',\n            tokens.repeatingRadialGradient,\n            matchListRadialOrientations);\n  }\n\n  function matchGradient(gradientType, pattern, orientationMatcher) {\n    return matchCall(pattern, function(captures) {\n\n      var orientation = orientationMatcher();\n      if (orientation) {\n        if (!scan(tokens.comma)) {\n          error('Missing comma before color stops');\n        }\n      }\n\n      return {\n        type: gradientType,\n        orientation: orientation,\n        colorStops: matchListing(matchColorStop)\n      };\n    });\n  }\n\n  function matchCall(pattern, callback) {\n    var captures = scan(pattern);\n\n    if (captures) {\n      if (!scan(tokens.startCall)) {\n        error('Missing (');\n      }\n\n      var result = callback(captures);\n\n      if (!scan(tokens.endCall)) {\n        error('Missing )');\n      }\n\n      return result;\n    }\n  }\n\n  function matchLinearOrientation() {\n    return matchSideOrCorner() ||\n      matchAngle();\n  }\n\n  function matchSideOrCorner() {\n    return match('directional', tokens.sideOrCorner, 1);\n  }\n\n  function matchAngle() {\n    return match('angular', tokens.angleValue, 1);\n  }\n\n  function matchListRadialOrientations() {\n    var radialOrientations,\n        radialOrientation = matchRadialOrientation(),\n        lookaheadCache;\n\n    if (radialOrientation) {\n      radialOrientations = [];\n      radialOrientations.push(radialOrientation);\n\n      lookaheadCache = input;\n      if (scan(tokens.comma)) {\n        radialOrientation = matchRadialOrientation();\n        if (radialOrientation) {\n          radialOrientations.push(radialOrientation);\n        } else {\n          input = lookaheadCache;\n        }\n      }\n    }\n\n    return radialOrientations;\n  }\n\n  function matchRadialOrientation() {\n    var radialType = matchCircle() ||\n      matchEllipse();\n\n    if (radialType) {\n      radialType.at = matchAtPosition();\n    } else {\n      var extent = matchExtentKeyword();\n      if (extent) {\n        radialType = extent;\n        var positionAt = matchAtPosition();\n        if (positionAt) {\n          radialType.at = positionAt;\n        }\n      } else {\n        var defaultPosition = matchPositioning();\n        if (defaultPosition) {\n          radialType = {\n            type: 'default-radial',\n            at: defaultPosition\n          };\n        }\n      }\n    }\n\n    return radialType;\n  }\n\n  function matchCircle() {\n    var circle = match('shape', /^(circle)/i, 0);\n\n    if (circle) {\n      circle.style = matchLength() || matchExtentKeyword();\n    }\n\n    return circle;\n  }\n\n  function matchEllipse() {\n    var ellipse = match('shape', /^(ellipse)/i, 0);\n\n    if (ellipse) {\n      ellipse.style =  matchDistance() || matchExtentKeyword();\n    }\n\n    return ellipse;\n  }\n\n  function matchExtentKeyword() {\n    return match('extent-keyword', tokens.extentKeywords, 1);\n  }\n\n  function matchAtPosition() {\n    if (match('position', /^at/, 0)) {\n      var positioning = matchPositioning();\n\n      if (!positioning) {\n        error('Missing positioning value');\n      }\n\n      return positioning;\n    }\n  }\n\n  function matchPositioning() {\n    var location = matchCoordinates();\n\n    if (location.x || location.y) {\n      return {\n        type: 'position',\n        value: location\n      };\n    }\n  }\n\n  function matchCoordinates() {\n    return {\n      x: matchDistance(),\n      y: matchDistance()\n    };\n  }\n\n  function matchListing(matcher) {\n    var captures = matcher(),\n      result = [];\n\n    if (captures) {\n      result.push(captures);\n      while (scan(tokens.comma)) {\n        captures = matcher();\n        if (captures) {\n          result.push(captures);\n        } else {\n          error('One extra comma');\n        }\n      }\n    }\n\n    return result;\n  }\n\n  function matchColorStop() {\n    var color = matchColor();\n\n    if (!color) {\n      error('Expected color definition');\n    }\n\n    color.length = matchDistance();\n    return color;\n  }\n\n  function matchColor() {\n    return matchHexColor() ||\n      matchRGBAColor() ||\n      matchRGBColor() ||\n      matchLiteralColor();\n  }\n\n  function matchLiteralColor() {\n    return match('literal', tokens.literalColor, 0);\n  }\n\n  function matchHexColor() {\n    return match('hex', tokens.hexColor, 1);\n  }\n\n  function matchRGBColor() {\n    return matchCall(tokens.rgbColor, function() {\n      return  {\n        type: 'rgb',\n        value: matchListing(matchNumber)\n      };\n    });\n  }\n\n  function matchRGBAColor() {\n    return matchCall(tokens.rgbaColor, function() {\n      return  {\n        type: 'rgba',\n        value: matchListing(matchNumber)\n      };\n    });\n  }\n\n  function matchNumber() {\n    return scan(tokens.number)[1];\n  }\n\n  function matchDistance() {\n    return match('%', tokens.percentageValue, 1) ||\n      matchPositionKeyword() ||\n      matchLength();\n  }\n\n  function matchPositionKeyword() {\n    return match('position-keyword', tokens.positionKeywords, 1);\n  }\n\n  function matchLength() {\n    return match('px', tokens.pixelValue, 1) ||\n      match('em', tokens.emValue, 1);\n  }\n\n  function match(type, pattern, captureIndex) {\n    var captures = scan(pattern);\n    if (captures) {\n      return {\n        type: type,\n        value: captures[captureIndex]\n      };\n    }\n  }\n\n  function scan(regexp) {\n    var captures,\n        blankCaptures;\n\n    blankCaptures = /^[\\n\\r\\t\\s]+/.exec(input);\n    if (blankCaptures) {\n        consume(blankCaptures[0].length);\n    }\n\n    captures = regexp.exec(input);\n    if (captures) {\n        consume(captures[0].length);\n    }\n\n    return captures;\n  }\n\n  function consume(size) {\n    input = input.substr(size);\n  }\n\n  return function(code) {\n    input = code.toString();\n    return getAST();\n  };\n})();\n\nvar parse = GradientParser.parse;\nGradientParser.stringify;\n\nexport { parse };\n//# sourceMappingURL=node.mjs.map\n","var source = \"struct BaseUniforms {\\n  uOptions: vec4<f32>,\\n  uCounts: vec2<f32>,\\n};\\n\\nstruct StopsUniforms {\\n  uColors: array<vec3<f32>, MAX_STOPS>,\\n  uStops: array<vec4<f32>, MAX_STOPS>,\\n};\\n\\nstruct GlobalFilterUniforms {\\n  uInputSize:vec4<f32>,\\n  uInputPixel:vec4<f32>,\\n  uInputClamp:vec4<f32>,\\n  uOutputFrame:vec4<f32>,\\n  uGlobalFrame:vec4<f32>,\\n  uOutputTexture:vec4<f32>,\\n};\\n\\n@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;\\n\\n@group(0) @binding(1) var uTexture: texture_2d<f32>; \\n@group(0) @binding(2) var uSampler: sampler;\\n@group(1) @binding(0) var<uniform> baseUniforms : BaseUniforms;\\n@group(1) @binding(1) var<uniform> stopsUniforms : StopsUniforms;\\n\\nstruct VSOutput {\\n  @builtin(position) position: vec4<f32>,\\n  @location(0) uv : vec2<f32>,\\n  @location(1) coord : vec2<f32>\\n};\\n\\nfn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>\\n{\\n    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;\\n\\n    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;\\n    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;\\n\\n    return vec4(position, 0.0, 1.0);\\n}\\n\\nfn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\\n{\\n    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);\\n}\\n\\nfn filterCoord( vTextureCoord:vec2<f32> ) -> vec2<f32>\\n{\\n    return vTextureCoord * gfu.uInputSize.xy / gfu.uOutputFrame.zw;\\n}\\n\\nfn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\\n{\\n  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  \\n}\\n\\nfn getSize() -> vec2<f32>\\n{\\n  return gfu.uGlobalFrame.zw;\\n}\\n  \\n@vertex\\nfn mainVertex(\\n  @location(0) aPosition : vec2<f32>, \\n) -> VSOutput {\\n  let vTextureCoord: vec2<f32> = filterTextureCoord(aPosition);\\n  return VSOutput(\\n   filterVertexPosition(aPosition),\\n   vTextureCoord,\\n   filterCoord(vTextureCoord),\\n  );\\n}\\n\\nstruct ColorStop {\\n  offset: f32,\\n  color: vec3<f32>,\\n  alpha: f32,\\n};\\n\\nfn rotate2d(angle: f32) -> mat2x2<f32>{\\n  return mat2x2(cos(angle), -sin(angle),\\n  sin(angle), cos(angle));\\n}\\n\\nfn projectLinearPosition(pos: vec2<f32>, angle: f32) -> f32 {\\n  var center: vec2<f32> = vec2<f32>(0.5);\\n  var result: vec2<f32> = pos - center;\\n  result = rotate2d(angle) * result;\\n  result = result + center;\\n  return clamp(result.x, 0.0, 1.0);\\n}\\n\\nfn projectRadialPosition(pos: vec2<f32>) -> f32 {\\n  var r: f32 = distance(pos, vec2<f32>(0.5));\\n  return clamp(2.0 * r, 0.0, 1.0);\\n}\\n\\nfn projectAnglePosition(pos: vec2<f32>, angle: f32) -> f32 {\\n  var center: vec2<f32> = pos - vec2<f32>(0.5, 0.5);\\n  var polarAngle: f32 = atan2(-center.y, center.x);\\n  return ((polarAngle + angle) % PI_2) / PI_2;\\n}\\n\\nfn projectPosition(pos: vec2<f32>, gradientType: i32, angle: f32) -> f32 {\\n  if (gradientType == TYPE_LINEAR) {\\n      return projectLinearPosition(pos, angle);\\n  } else if (gradientType == TYPE_RADIAL) {\\n      return projectRadialPosition(pos);\\n  } else if (gradientType == TYPE_CONIC) {\\n      return projectAnglePosition(pos, angle);\\n  }\\n\\n  return pos.y;\\n}\\n\\n@fragment\\nfn mainFragment(\\n  @builtin(position) position: vec4<f32>,\\n  @location(0) uv : vec2<f32>,\\n  @location(1) coord : vec2<f32>\\n) -> @location(0) vec4<f32> {\\n  let uType: i32 = i32(baseUniforms.uOptions[0]);\\n  let uAngle: f32 = baseUniforms.uOptions[1];\\n  let uAlpha: f32 = baseUniforms.uOptions[2];\\n  let uReplace: f32 = baseUniforms.uOptions[3];\\n\\n  let uNumStops: i32 = i32(baseUniforms.uCounts[0]);\\n  let uMaxColors: f32 = baseUniforms.uCounts[1];\\n\\n  // current/original color\\n  var currentColor: vec4<f32> = textureSample(uTexture, uSampler, uv);\\n\\n  // skip calculations if gradient alpha is 0\\n  if (uAlpha == 0.0) { return currentColor; }\\n\\n  // project position\\n  var y: f32 = projectPosition(coord, uType, radians(uAngle));\\n\\n  // check gradient bounds\\n  var offsetMin: f32 = stopsUniforms.uStops[0][0];\\n  var offsetMax: f32 = 0.0;\\n\\n  let numStops: i32 = uNumStops;\\n\\n  for (var i: i32 = 0; i < MAX_STOPS; i = i + 1) {\\n      if (i == numStops - 1) { // last index\\n          offsetMax = stopsUniforms.uStops[i][0];\\n      }\\n  }\\n\\n  if (y  < offsetMin || y > offsetMax) { return currentColor; }\\n\\n  // limit colors\\n  if (uMaxColors > 0.0) {\\n      var stepSize: f32 = 1.0 / uMaxColors;\\n      var stepNumber: f32 = floor(y / stepSize);\\n      y = stepSize * (stepNumber + 0.5); // offset by 0.5 to use color from middle of segment\\n  }\\n\\n  // find color stops\\n  var stopFrom: ColorStop;\\n  var stopTo: ColorStop;\\n\\n  for (var i: i32 = 0; i < MAX_STOPS; i = i + 1) {\\n      if (y >= stopsUniforms.uStops[i][0]) {\\n          stopFrom = ColorStop(stopsUniforms.uStops[i][0], stopsUniforms.uColors[i], stopsUniforms.uStops[i][1]);\\n          stopTo = ColorStop(stopsUniforms.uStops[i + 1][0], stopsUniforms.uColors[i + 1], stopsUniforms.uStops[i + 1][1]);\\n      }\\n\\n      if (i == numStops - 1) { // last index\\n          break;\\n      }\\n  }\\n\\n  // mix colors from stops\\n  var colorFrom: vec4<f32> = vec4<f32>(stopFrom.color * stopFrom.alpha, stopFrom.alpha);\\n  var colorTo: vec4<f32> = vec4<f32>(stopTo.color * stopTo.alpha, stopTo.alpha);\\n\\n  var segmentHeight: f32 = stopTo.offset - stopFrom.offset;\\n  var relativePos: f32 = y - stopFrom.offset; // position from 0 to [segmentHeight]\\n  var relativePercent: f32 = relativePos / segmentHeight; // position in percent between [from.offset] and [to.offset].\\n\\n  var gradientAlpha: f32 = uAlpha * currentColor.a;\\n  var gradientColor: vec4<f32> = mix(colorFrom, colorTo, relativePercent) * gradientAlpha;\\n\\n  if (uReplace < 0.5) {\\n      // mix resulting color with current color\\n      return gradientColor + currentColor * (1.0 - gradientColor.a);\\n  } else {\\n      // replace with gradient color\\n      return gradientColor;\\n  }\\n}\\n\\nconst PI: f32 = 3.14159265358979323846264;\\nconst PI_2: f32 = PI * 2.0;\\n\\nconst TYPE_LINEAR: i32 = 0;\\nconst TYPE_RADIAL: i32 = 1;\\nconst TYPE_CONIC: i32 = 2;\\nconst MAX_STOPS: i32 = 32;\";\n\nexport { source as default };\n//# sourceMappingURL=color-gradient2.mjs.map\n","import { parse } from '../external/gradient-parser/build/node.mjs';\nimport { Color } from 'pixi.js';\n\nfunction parseCssGradient(cssGradient) {\n  const cssGradientNodes = parse(trimCssGradient(cssGradient));\n  if (cssGradientNodes.length === 0) {\n    throw new Error(\"Invalid CSS gradient.\");\n  } else if (cssGradientNodes.length !== 1) {\n    throw new Error(\"Unsupported CSS gradient (multiple gradients is not supported).\");\n  }\n  const cssGradientNode = cssGradientNodes[0];\n  const type = typeFromCssType(cssGradientNode.type);\n  const stops = stopsFromCssStops(cssGradientNode.colorStops);\n  const angle = angleFromCssOrientation(cssGradientNode.orientation);\n  return {\n    type,\n    stops,\n    angle\n  };\n}\nfunction typeFromCssType(type) {\n  const supportedTypes = {\n    \"linear-gradient\": 0,\n    \"radial-gradient\": 1\n  };\n  if (!(type in supportedTypes)) {\n    throw new Error(`Unsupported gradient type \"${type}\"`);\n  }\n  return supportedTypes[type];\n}\nfunction stopsFromCssStops(stops) {\n  const offsets = offsetsFromCssColorStops(stops);\n  const result = [];\n  const color = new Color();\n  for (let i = 0; i < stops.length; i++) {\n    const colorString = colorAsStringFromCssStop(stops[i]);\n    const rgbaColor = color.setValue(colorString).toArray();\n    result.push({\n      offset: offsets[i],\n      color: rgbaColor.slice(0, 3),\n      alpha: rgbaColor[3]\n    });\n  }\n  return result;\n}\nfunction colorAsStringFromCssStop(stop) {\n  switch (stop.type) {\n    case \"hex\":\n      return `#${stop.value}`;\n    case \"literal\":\n      return stop.value;\n    default:\n      return `${stop.type}(${stop.value.join(\",\")})`;\n  }\n}\nfunction offsetsFromCssColorStops(stops) {\n  const offsets = [];\n  const dynamicOffset = -1;\n  for (let i = 0; i < stops.length; i++) {\n    const cssStop = stops[i];\n    let stopOffset = dynamicOffset;\n    if (cssStop.type === \"literal\") {\n      if (cssStop.length && \"type\" in cssStop.length && cssStop.length.type === \"%\" && \"value\" in cssStop.length) {\n        stopOffset = parseFloat(cssStop.length.value) / 100;\n      }\n    }\n    offsets.push(stopOffset);\n  }\n  const findNextFixedStop = (fromIndex) => {\n    for (let k = fromIndex; k < offsets.length; k++) {\n      if (offsets[k] !== dynamicOffset) {\n        return {\n          indexDelta: k - fromIndex,\n          offset: offsets[k]\n        };\n      }\n    }\n    return {\n      indexDelta: offsets.length - 1 - fromIndex,\n      offset: 1\n    };\n  };\n  let prevFixedOffset = 0;\n  for (let i = 0; i < offsets.length; i++) {\n    const offset = offsets[i];\n    if (offset !== dynamicOffset) {\n      prevFixedOffset = offset;\n    } else if (i === 0) {\n      offsets[i] = 0;\n    } else if (i + 1 === offsets.length) {\n      offsets[i] = 1;\n    } else {\n      const nextFixed = findNextFixedStop(i);\n      const offsetDelta = nextFixed.offset - prevFixedOffset;\n      const stepSize = offsetDelta / (1 + nextFixed.indexDelta);\n      for (let s = 0; s <= nextFixed.indexDelta; s++) {\n        offsets[i + s] = prevFixedOffset + (s + 1) * stepSize;\n      }\n      i += nextFixed.indexDelta;\n      prevFixedOffset = offsets[i];\n    }\n  }\n  return offsets.map(fixFloatRounding);\n}\nfunction fixFloatRounding(value) {\n  const maxLength = 6;\n  if (value.toString().length > maxLength) {\n    return parseFloat(value.toString().substring(0, maxLength));\n  }\n  return value;\n}\nfunction angleFromCssOrientation(orientation) {\n  if (typeof orientation === \"undefined\") {\n    return 0;\n  }\n  if (\"type\" in orientation && \"value\" in orientation) {\n    switch (orientation.type) {\n      case \"angular\":\n        return parseFloat(orientation.value);\n      case \"directional\":\n        return angleFromDirectionalValue(orientation.value);\n    }\n  }\n  return 0;\n}\nfunction angleFromDirectionalValue(value) {\n  const supportedValues = {\n    left: 270,\n    top: 0,\n    bottom: 180,\n    right: 90,\n    \"left top\": 315,\n    \"top left\": 315,\n    \"left bottom\": 225,\n    \"bottom left\": 225,\n    \"right top\": 45,\n    \"top right\": 45,\n    \"right bottom\": 135,\n    \"bottom right\": 135\n  };\n  if (!(value in supportedValues)) {\n    throw new Error(`Unsupported directional value \"${value}\"`);\n  }\n  return supportedValues[value];\n}\nfunction trimCssGradient(value) {\n  let value_ = value.replace(/\\s{2,}/gu, \" \");\n  value_ = value_.replace(/;/g, \"\");\n  value_ = value_.replace(/ ,/g, \",\");\n  value_ = value_.replace(/\\( /g, \"(\");\n  value_ = value_.replace(/ \\)/g, \")\");\n  return value_.trim();\n}\n\nexport { angleFromCssOrientation, angleFromDirectionalValue, colorAsStringFromCssStop, offsetsFromCssColorStops, parseCssGradient, stopsFromCssStops, trimCssGradient, typeFromCssType };\n//# sourceMappingURL=CssGradientParser.mjs.map\n","import { Filter, GpuProgram, GlProgram, Color } from 'pixi.js';\nimport fragment from './color-gradient.mjs';\nimport vertex from './color-gradient3.mjs';\nimport source from './color-gradient2.mjs';\nimport { parseCssGradient } from './CssGradientParser.mjs';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst ANGLE_OFFSET = 90;\nfunction sortColorStops(stops) {\n  return [...stops].sort((a, b) => a.offset - b.offset);\n}\nconst _ColorGradientFilter = class _ColorGradientFilter extends Filter {\n  /**\n   * @param options - Options for the ColorGradientFilter constructor.\n   */\n  constructor(options) {\n    if (options && \"css\" in options) {\n      options = {\n        ...parseCssGradient(options.css || \"\"),\n        alpha: options.alpha ?? _ColorGradientFilter.defaults.alpha,\n        maxColors: options.maxColors ?? _ColorGradientFilter.defaults.maxColors\n      };\n    } else {\n      options = { ..._ColorGradientFilter.defaults, ...options };\n    }\n    if (!options.stops || options.stops.length < 2) {\n      throw new Error(\"ColorGradientFilter requires at least 2 color stops.\");\n    }\n    const gpuProgram = GpuProgram.from({\n      vertex: {\n        source,\n        entryPoint: \"mainVertex\"\n      },\n      fragment: {\n        source,\n        entryPoint: \"mainFragment\"\n      }\n    });\n    const glProgram = GlProgram.from({\n      vertex,\n      fragment,\n      name: \"color-gradient-filter\"\n    });\n    const maxStops = 32;\n    super({\n      gpuProgram,\n      glProgram,\n      resources: {\n        baseUniforms: {\n          uOptions: {\n            value: [\n              // Gradient Type\n              options.type,\n              // Gradient Angle\n              options.angle ?? ANGLE_OFFSET,\n              // Master Alpha\n              options.alpha,\n              // Replace Base Color\n              options.replace ? 1 : 0\n            ],\n            type: \"vec4<f32>\"\n          },\n          uCounts: {\n            value: [\n              // Number of Stops\n              options.stops.length,\n              // Max Gradient Colors\n              options.maxColors\n            ],\n            type: \"vec2<f32>\"\n          }\n        },\n        stopsUniforms: {\n          uColors: { value: new Float32Array(maxStops * 3), type: \"vec3<f32>\", size: maxStops },\n          // We only need vec2, but we need to pad to eliminate the WGSL warning, TODO: @Mat ?\n          uStops: { value: new Float32Array(maxStops * 4), type: \"vec4<f32>\", size: maxStops }\n        }\n      }\n    });\n    __publicField(this, \"baseUniforms\");\n    __publicField(this, \"stopsUniforms\");\n    __publicField(this, \"_stops\", []);\n    this.baseUniforms = this.resources.baseUniforms.uniforms;\n    this.stopsUniforms = this.resources.stopsUniforms.uniforms;\n    Object.assign(this, options);\n  }\n  get stops() {\n    return this._stops;\n  }\n  set stops(stops) {\n    const sortedStops = sortColorStops(stops);\n    const color = new Color();\n    let r;\n    let g;\n    let b;\n    for (let i = 0; i < sortedStops.length; i++) {\n      color.setValue(sortedStops[i].color);\n      const indexStart = i * 3;\n      [r, g, b] = color.toArray();\n      this.stopsUniforms.uColors[indexStart] = r;\n      this.stopsUniforms.uColors[indexStart + 1] = g;\n      this.stopsUniforms.uColors[indexStart + 2] = b;\n      this.stopsUniforms.uStops[i * 4] = sortedStops[i].offset;\n      this.stopsUniforms.uStops[i * 4 + 1] = sortedStops[i].alpha;\n    }\n    this.baseUniforms.uCounts[0] = sortedStops.length;\n    this._stops = sortedStops;\n  }\n  /**\n  * The type of gradient\n  * @default ColorGradientFilter.LINEAR\n  */\n  get type() {\n    return this.baseUniforms.uOptions[0];\n  }\n  set type(value) {\n    this.baseUniforms.uOptions[0] = value;\n  }\n  /**\n  * The angle of the gradient in degrees\n  * @default 90\n  */\n  get angle() {\n    return this.baseUniforms.uOptions[1] + ANGLE_OFFSET;\n  }\n  set angle(value) {\n    this.baseUniforms.uOptions[1] = value - ANGLE_OFFSET;\n  }\n  /**\n  * The alpha value of the gradient (0-1)\n  * @default 1\n  */\n  get alpha() {\n    return this.baseUniforms.uOptions[2];\n  }\n  set alpha(value) {\n    this.baseUniforms.uOptions[2] = value;\n  }\n  /**\n  * The maximum number of colors to render (0 = no limit)\n  * @default 0\n  */\n  get maxColors() {\n    return this.baseUniforms.uCounts[1];\n  }\n  set maxColors(value) {\n    this.baseUniforms.uCounts[1] = value;\n  }\n  /**\n   * If true, the gradient will replace the existing color, otherwise it\n   * will be multiplied with it\n   * @default false\n   */\n  get replace() {\n    return this.baseUniforms.uOptions[3] > 0.5;\n  }\n  set replace(value) {\n    this.baseUniforms.uOptions[3] = value ? 1 : 0;\n  }\n};\n/** Gradient types */\n__publicField(_ColorGradientFilter, \"LINEAR\", 0);\n__publicField(_ColorGradientFilter, \"RADIAL\", 1);\n__publicField(_ColorGradientFilter, \"CONIC\", 2);\n/** Default constructor options */\n__publicField(_ColorGradientFilter, \"defaults\", {\n  type: _ColorGradientFilter.LINEAR,\n  stops: [\n    { offset: 0, color: 16711680, alpha: 1 },\n    { offset: 1, color: 255, alpha: 1 }\n  ],\n  alpha: 1,\n  angle: 90,\n  maxColors: 0,\n  replace: false\n});\nlet ColorGradientFilter = _ColorGradientFilter;\n\nexport { ColorGradientFilter };\n//# sourceMappingURL=ColorGradientFilter.mjs.map\n","var vertex = \"in vec2 aPosition;\\nout vec2 vTextureCoord;\\nout vec2 vFilterCoord;\\n\\nuniform vec4 uInputSize;\\nuniform vec4 uOutputFrame;\\nuniform vec4 uOutputTexture;\\n\\nvec4 filterVertexPosition( void )\\n{\\n    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;\\n    \\n    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;\\n    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;\\n\\n    return vec4(position, 0.0, 1.0);\\n}\\n\\nvec2 filterTextureCoord( void )\\n{\\n    return aPosition * (uOutputFrame.zw * uInputSize.zw);\\n}\\n\\nvoid main(void)\\n{\\n    gl_Position = filterVertexPosition();\\n    vTextureCoord = filterTextureCoord();\\n    vFilterCoord = vTextureCoord * uInputSize.xy / uOutputFrame.zw;\\n}\\n\";\n\nexport { vertex as default };\n//# sourceMappingURL=color-gradient3.mjs.map\n","var fragment = \"in vec2 vTextureCoord;\\nout vec4 finalColor;\\n\\nuniform sampler2D uTexture;\\nuniform sampler2D uMapTexture;\\nuniform float uMix;\\nuniform float uSize;\\nuniform float uSliceSize;\\nuniform float uSlicePixelSize;\\nuniform float uSliceInnerSize;\\n\\nvoid main() {\\n    vec4 color = texture(uTexture, vTextureCoord.xy);\\n    vec4 adjusted;\\n\\n    if (color.a > 0.0) {\\n        color.rgb /= color.a;\\n        float innerWidth = uSize - 1.0;\\n        float zSlice0 = min(floor(color.b * innerWidth), innerWidth);\\n        float zSlice1 = min(zSlice0 + 1.0, innerWidth);\\n        float xOffset = uSlicePixelSize * 0.5 + color.r * uSliceInnerSize;\\n        float s0 = xOffset + (zSlice0 * uSliceSize);\\n        float s1 = xOffset + (zSlice1 * uSliceSize);\\n        float yOffset = uSliceSize * 0.5 + color.g * (1.0 - uSliceSize);\\n        vec4 slice0Color = texture(uMapTexture, vec2(s0,yOffset));\\n        vec4 slice1Color = texture(uMapTexture, vec2(s1,yOffset));\\n        float zOffset = fract(color.b * innerWidth);\\n        adjusted = mix(slice0Color, slice1Color, zOffset);\\n\\n        color.rgb *= color.a;\\n    }\\n\\n    finalColor = vec4(mix(color, adjusted, uMix).rgb, color.a);\\n\\n}\";\n\nexport { fragment as default };\n//# sourceMappingURL=color-map.mjs.map\n","import { Texture, Filter, TextureSource, deprecation, GpuProgram, GlProgram } from 'pixi.js';\nimport vertex from '../defaults/default.mjs';\nimport wgslVertex from '../defaults/default2.mjs';\nimport fragment from './color-map.mjs';\nimport source from './color-map2.mjs';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _ColorMapFilter = class _ColorMapFilter extends Filter {\n  /** @ignore */\n  constructor(...args) {\n    let options = args[0] ?? {};\n    if (options instanceof Texture || options instanceof TextureSource) {\n      deprecation(\"6.0.0\", \"ColorMapFilter constructor params are now options object. See params: { colorMap, nearest, mix }\");\n      options = { colorMap: options };\n      if (args[1] !== void 0)\n        options.nearest = args[1];\n      if (args[2] !== void 0)\n        options.mix = args[2];\n    }\n    options = { ..._ColorMapFilter.DEFAULT_OPTIONS, ...options };\n    if (!options.colorMap)\n      throw Error(\"No color map texture source was provided to ColorMapFilter\");\n    const gpuProgram = GpuProgram.from({\n      vertex: {\n        source: wgslVertex,\n        entryPoint: \"mainVertex\"\n      },\n      fragment: {\n        source,\n        entryPoint: \"mainFragment\"\n      }\n    });\n    const glProgram = GlProgram.from({\n      vertex,\n      fragment,\n      name: \"color-map-filter\"\n    });\n    super({\n      gpuProgram,\n      glProgram,\n      resources: {\n        colorMapUniforms: {\n          uMix: { value: options.mix, type: \"f32\" },\n          uSize: { value: 0, type: \"f32\" },\n          uSliceSize: { value: 0, type: \"f32\" },\n          uSlicePixelSize: { value: 0, type: \"f32\" },\n          uSliceInnerSize: { value: 0, type: \"f32\" }\n        },\n        uMapTexture: options.colorMap.source,\n        uMapSampler: options.colorMap.source.style\n      }\n    });\n    __publicField(this, \"uniforms\");\n    __publicField(this, \"_size\", 0);\n    __publicField(this, \"_sliceSize\", 0);\n    __publicField(this, \"_slicePixelSize\", 0);\n    __publicField(this, \"_sliceInnerSize\", 0);\n    __publicField(this, \"_nearest\", false);\n    __publicField(this, \"_scaleMode\", \"linear\");\n    __publicField(this, \"_colorMap\");\n    this.uniforms = this.resources.colorMapUniforms.uniforms;\n    Object.assign(this, options);\n  }\n  /** The mix from 0 to 1, where 0 is the original image and 1 is the color mapped image. */\n  get mix() {\n    return this.uniforms.uMix;\n  }\n  set mix(value) {\n    this.uniforms.uMix = value;\n  }\n  /**\n   * The size of one color slice.\n   * @readonly\n   */\n  get colorSize() {\n    return this._size;\n  }\n  /** The colorMap texture. */\n  get colorMap() {\n    return this._colorMap;\n  }\n  set colorMap(value) {\n    if (!value || value === this.colorMap)\n      return;\n    const source2 = value instanceof Texture ? value.source : value;\n    source2.style.scaleMode = this._scaleMode;\n    source2.autoGenerateMipmaps = false;\n    this._size = source2.height;\n    this._sliceSize = 1 / this._size;\n    this._slicePixelSize = this._sliceSize / this._size;\n    this._sliceInnerSize = this._slicePixelSize * (this._size - 1);\n    this.uniforms.uSize = this._size;\n    this.uniforms.uSliceSize = this._sliceSize;\n    this.uniforms.uSlicePixelSize = this._slicePixelSize;\n    this.uniforms.uSliceInnerSize = this._sliceInnerSize;\n    this.resources.uMapTexture = source2;\n    this._colorMap = value;\n  }\n  /** Whether use NEAREST for colorMap texture. */\n  get nearest() {\n    return this._nearest;\n  }\n  set nearest(nearest) {\n    this._nearest = nearest;\n    this._scaleMode = nearest ? \"nearest\" : \"linear\";\n    const texture = this._colorMap;\n    if (texture && texture.source) {\n      texture.source.scaleMode = this._scaleMode;\n      texture.source.autoGenerateMipmaps = false;\n      texture.source.style.update();\n      texture.source.update();\n    }\n  }\n  /**\n   * If the colorMap is based on canvas,\n   * and the content of canvas has changed, then call `updateColorMap` for update texture.\n   */\n  updateColorMap() {\n    const texture = this._colorMap;\n    if (texture?.source) {\n      texture.source.update();\n      this.colorMap = texture;\n    }\n  }\n  /**\n   * Destroys this filter\n   * @default false\n   */\n  destroy() {\n    this._colorMap?.destroy(\n      /** true | TODO: Should base texture be destroyed? **/\n    );\n    super.destroy();\n  }\n};\n/** Default values for options. */\n__publicField(_ColorMapFilter, \"DEFAULT_OPTIONS\", {\n  colorMap: Texture.WHITE,\n  nearest: false,\n  mix: 1\n});\nlet ColorMapFilter = _ColorMapFilter;\n\nexport { ColorMapFilter };\n//# sourceMappingURL=ColorMapFilter.mjs.map\n","var source = \"struct ColorMapUniforms {\\n  uMix: f32,\\n  uSize: f32,\\n  uSliceSize: f32,\\n  uSlicePixelSize: f32,\\n  uSliceInnerSize: f32,\\n};\\n\\n@group(0) @binding(1) var uTexture: texture_2d<f32>; \\n@group(0) @binding(2) var uSampler: sampler;\\n@group(1) @binding(0) var<uniform> colorMapUniforms : ColorMapUniforms;\\n@group(1) @binding(1) var uMapTexture: texture_2d<f32>;\\n@group(1) @binding(2) var uMapSampler: sampler;\\n\\n@fragment\\nfn mainFragment(\\n  @builtin(position) position: vec4<f32>,\\n  @location(0) uv : vec2<f32>\\n) -> @location(0) vec4<f32> {\\n  var color:vec4<f32> = textureSample(uTexture, uSampler, uv);\\n\\n  var adjusted: vec4<f32>;\\n\\n  var altColor: vec4<f32> = vec4<f32>(color.rgb / color.a, color.a);\\n  let innerWidth: f32 = colorMapUniforms.uSize - 1.0;\\n  let zSlice0: f32 = min(floor(color.b * innerWidth), innerWidth);\\n  let zSlice1: f32 = min(zSlice0 + 1.0, innerWidth);\\n  let xOffset: f32 = colorMapUniforms.uSlicePixelSize * 0.5 + color.r * colorMapUniforms.uSliceInnerSize;\\n  let s0: f32 = xOffset + (zSlice0 * colorMapUniforms.uSliceSize);\\n  let s1: f32 = xOffset + (zSlice1 * colorMapUniforms.uSliceSize);\\n  let yOffset: f32 = colorMapUniforms.uSliceSize * 0.5 + color.g * (1.0 - colorMapUniforms.uSliceSize);\\n  let slice0Color: vec4<f32> = textureSample(uMapTexture, uMapSampler, vec2(s0,yOffset));\\n  let slice1Color: vec4<f32> = textureSample(uMapTexture, uMapSampler, vec2(s1,yOffset));\\n  let zOffset: f32 = fract(color.b * innerWidth);\\n  adjusted = mix(slice0Color, slice1Color, zOffset);\\n  altColor = vec4<f32>(color.rgb * color.a, color.a);\\n\\n  let realColor: vec4<f32> = select(color, altColor, color.a > 0.0);\\n\\n  return vec4<f32>(mix(realColor, adjusted, colorMapUniforms.uMix).rgb, realColor.a);\\n}\";\n\nexport { source as default };\n//# sourceMappingURL=color-map2.mjs.map\n","var fragment = \"in vec2 vTextureCoord;\\nout vec4 finalColor;\\n\\nuniform sampler2D uTexture;\\nuniform vec3 uColor;\\nuniform float uAlpha;\\n\\nvoid main(void) {\\n    vec4 c = texture(uTexture, vTextureCoord);\\n    finalColor = vec4(mix(c.rgb, uColor.rgb, c.a * uAlpha), c.a);\\n}\\n\";\n\nexport { fragment as default };\n//# sourceMappingURL=color-overlay2.mjs.map\n","import { Filter, deprecation, GpuProgram, GlProgram, Color } from 'pixi.js';\nimport vertex from '../defaults/default.mjs';\nimport wgslVertex from '../defaults/default2.mjs';\nimport fragment from './color-overlay2.mjs';\nimport source from './color-overlay.mjs';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _ColorOverlayFilter = class _ColorOverlayFilter extends Filter {\n  /** @ignore */\n  constructor(...args) {\n    let options = args[0] ?? {};\n    if (typeof options === \"number\" || Array.isArray(options) || options instanceof Float32Array) {\n      deprecation(\"6.0.0\", \"ColorOverlayFilter constructor params are now options object. See params: { color, alpha }\");\n      options = { color: options };\n      if (args[1] !== void 0)\n        options.alpha = args[1];\n    }\n    options = { ..._ColorOverlayFilter.DEFAULT_OPTIONS, ...options };\n    const gpuProgram = GpuProgram.from({\n      vertex: {\n        source: wgslVertex,\n        entryPoint: \"mainVertex\"\n      },\n      fragment: {\n        source,\n        entryPoint: \"mainFragment\"\n      }\n    });\n    const glProgram = GlProgram.from({\n      vertex,\n      fragment,\n      name: \"color-overlay-filter\"\n    });\n    super({\n      gpuProgram,\n      glProgram,\n      resources: {\n        colorOverlayUniforms: {\n          uColor: { value: new Float32Array(3), type: \"vec3<f32>\" },\n          uAlpha: { value: options.alpha, type: \"f32\" }\n        }\n      }\n    });\n    __publicField(this, \"uniforms\");\n    __publicField(this, \"_color\");\n    this.uniforms = this.resources.colorOverlayUniforms.uniforms;\n    this._color = new Color();\n    this.color = options.color ?? 0;\n  }\n  /**\n   * The over color source\n   * @member {number|Array<number>|Float32Array}\n   * @default 0x000000\n   */\n  get color() {\n    return this._color.value;\n  }\n  set color(value) {\n    this._color.setValue(value);\n    const [r, g, b] = this._color.toArray();\n    this.uniforms.uColor[0] = r;\n    this.uniforms.uColor[1] = g;\n    this.uniforms.uColor[2] = b;\n  }\n  /**\n   * The alpha value of the color\n   * @default 1\n   */\n  get alpha() {\n    return this.uniforms.uAlpha;\n  }\n  set alpha(value) {\n    this.uniforms.uAlpha = value;\n  }\n};\n/** Default shockwave filter options */\n__publicField(_ColorOverlayFilter, \"DEFAULT_OPTIONS\", {\n  /** The color of the overlay */\n  color: 0,\n  /** The alpha of the overlay */\n  alpha: 1\n});\nlet ColorOverlayFilter = _ColorOverlayFilter;\n\nexport { ColorOverlayFilter };\n//# sourceMappingURL=ColorOverlayFilter.mjs.map\n","var source = \"struct ColorOverlayUniforms {\\n    uColor: vec3<f32>,\\n    uAlpha: f32,\\n};\\n\\n@group(0) @binding(1) var uTexture: texture_2d<f32>; \\n@group(0) @binding(2) var uSampler: sampler;\\n@group(1) @binding(0) var<uniform> colorOverlayUniforms : ColorOverlayUniforms;\\n\\n@fragment\\nfn mainFragment(\\n    @builtin(position) position: vec4<f32>,\\n    @location(0) uv : vec2<f32>\\n) -> @location(0) vec4<f32> {\\n    let c = textureSample(uTexture, uSampler, uv);\\n    return vec4<f32>(mix(c.rgb, colorOverlayUniforms.uColor.rgb, c.a * colorOverlayUniforms.uAlpha), c.a);\\n}\\n\";\n\nexport { source as default };\n//# sourceMappingURL=color-overlay.mjs.map\n","var fragment = \"in vec2 vTextureCoord;\\nout vec4 finalColor;\\n\\nuniform sampler2D uTexture;\\nuniform vec3 uOriginalColor;\\nuniform vec3 uTargetColor;\\nuniform float uTolerance;\\n\\nvoid main(void) {\\n    vec4 c = texture(uTexture, vTextureCoord);\\n    vec3 colorDiff = uOriginalColor - (c.rgb / max(c.a, 0.0000000001));\\n    float colorDistance = length(colorDiff);\\n    float doReplace = step(colorDistance, uTolerance);\\n    finalColor = vec4(mix(c.rgb, (uTargetColor + colorDiff) * c.a, doReplace), c.a);\\n}\\n\";\n\nexport { fragment as default };\n//# sourceMappingURL=color-replace2.mjs.map\n","import { Filter, deprecation, GpuProgram, GlProgram, Color } from 'pixi.js';\nimport vertex from '../defaults/default.mjs';\nimport wgslVertex from '../defaults/default2.mjs';\nimport fragment from './color-replace2.mjs';\nimport source from './color-replace.mjs';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _ColorReplaceFilter = class _ColorReplaceFilter extends Filter {\n  /** @ignore */\n  constructor(...args) {\n    let options = args[0] ?? {};\n    if (typeof options === \"number\" || Array.isArray(options) || options instanceof Float32Array) {\n      deprecation(\"6.0.0\", \"ColorReplaceFilter constructor params are now options object. See params: { originalColor, targetColor, tolerance }\");\n      options = { originalColor: options };\n      if (args[1] !== void 0)\n        options.targetColor = args[1];\n      if (args[2] !== void 0)\n        options.tolerance = args[2];\n    }\n    options = { ..._ColorReplaceFilter.DEFAULT_OPTIONS, ...options };\n    const gpuProgram = GpuProgram.from({\n      vertex: {\n        source: wgslVertex,\n        entryPoint: \"mainVertex\"\n      },\n      fragment: {\n        source,\n        entryPoint: \"mainFragment\"\n      }\n    });\n    const glProgram = GlProgram.from({\n      vertex,\n      fragment,\n      name: \"color-replace-filter\"\n    });\n    super({\n      gpuProgram,\n      glProgram,\n      resources: {\n        colorReplaceUniforms: {\n          uOriginalColor: { value: new Float32Array(3), type: \"vec3<f32>\" },\n          uTargetColor: { value: new Float32Array(3), type: \"vec3<f32>\" },\n          uTolerance: { value: options.tolerance, type: \"f32\" }\n        }\n      }\n    });\n    __publicField(this, \"uniforms\");\n    __publicField(this, \"_originalColor\");\n    __publicField(this, \"_targetColor\");\n    this.uniforms = this.resources.colorReplaceUniforms.uniforms;\n    this._originalColor = new Color();\n    this._targetColor = new Color();\n    this.originalColor = options.originalColor ?? 16711680;\n    this.targetColor = options.targetColor ?? 0;\n    Object.assign(this, options);\n  }\n  /**\n   * The color that will be changed.\n   * @example [1.0, 1.0, 1.0] = 0xffffff\n   * @default 0xff0000\n   */\n  get originalColor() {\n    return this._originalColor.value;\n  }\n  set originalColor(value) {\n    this._originalColor.setValue(value);\n    const [r, g, b] = this._originalColor.toArray();\n    this.uniforms.uOriginalColor[0] = r;\n    this.uniforms.uOriginalColor[1] = g;\n    this.uniforms.uOriginalColor[2] = b;\n  }\n  /**\n    * The resulting color.\n    * @example [1.0, 1.0, 1.0] = 0xffffff\n    * @default 0x000000\n    */\n  get targetColor() {\n    return this._targetColor.value;\n  }\n  set targetColor(value) {\n    this._targetColor.setValue(value);\n    const [r, g, b] = this._targetColor.toArray();\n    this.uniforms.uTargetColor[0] = r;\n    this.uniforms.uTargetColor[1] = g;\n    this.uniforms.uTargetColor[2] = b;\n  }\n  /**\n    * Tolerance/sensitivity of the floating-point comparison between colors (lower = more exact, higher = more inclusive)\n    * @default 0.4\n    */\n  get tolerance() {\n    return this.uniforms.uTolerance;\n  }\n  set tolerance(value) {\n    this.uniforms.uTolerance = value;\n  }\n  /**\n   * @deprecated since 6.0.0\n   *\n   * The resulting color, as a 3 component RGB e.g. [1.0, 0.5, 1.0]\n   * @member {number|Array<number>|Float32Array}\n   * @default 0x000000\n   * @see ColorReplaceFilter#targetColor\n   */\n  set newColor(value) {\n    deprecation(\"6.0.0\", \"ColorReplaceFilter.newColor is deprecated, please use ColorReplaceFilter.targetColor instead\");\n    this.targetColor = value;\n  }\n  get newColor() {\n    deprecation(\"6.0.0\", \"ColorReplaceFilter.newColor is deprecated, please use ColorReplaceFilter.targetColor instead\");\n    return this.targetColor;\n  }\n  /**\n   * @deprecated since 6.0.0\n   *\n   * Tolerance/sensitivity of the floating-point comparison between colors (lower = more exact, higher = more inclusive)\n   * @default 0.4\n   * @see ColorReplaceFilter#tolerance\n   */\n  set epsilon(value) {\n    deprecation(\"6.0.0\", \"ColorReplaceFilter.epsilon is deprecated, please use ColorReplaceFilter.tolerance instead\");\n    this.tolerance = value;\n  }\n  get epsilon() {\n    deprecation(\"6.0.0\", \"ColorReplaceFilter.epsilon is deprecated, please use ColorReplaceFilter.tolerance instead\");\n    return this.tolerance;\n  }\n};\n/** Default values for options. */\n__publicField(_ColorReplaceFilter, \"DEFAULT_OPTIONS\", {\n  originalColor: 16711680,\n  targetColor: 0,\n  tolerance: 0.4\n});\nlet ColorReplaceFilter = _ColorReplaceFilter;\n\nexport { ColorReplaceFilter };\n//# sourceMappingURL=ColorReplaceFilter.mjs.map\n","var source = \"struct ColorReplaceUniforms {\\n  uOriginalColor: vec3<f32>,\\n  uTargetColor: vec3<f32>,\\n  uTolerance: f32,\\n};\\n\\n@group(0) @binding(1) var uTexture: texture_2d<f32>; \\n@group(0) @binding(2) var uSampler: sampler;\\n@group(1) @binding(0) var<uniform> colorReplaceUniforms : ColorReplaceUniforms;\\n\\n@fragment\\nfn mainFragment(\\n   @builtin(position) position: vec4<f32>,\\n    @location(0) uv : vec2<f32>\\n) -> @location(0) vec4<f32> {\\n  let sample: vec4<f32> = textureSample(uTexture, uSampler, uv);\\n\\n  let colorDiff: vec3<f32> = colorReplaceUniforms.uOriginalColor - (sample.rgb / max(sample.a, 0.0000000001));\\n  let colorDistance: f32 = length(colorDiff);\\n  let doReplace: f32 = step(colorDistance, colorReplaceUniforms.uTolerance);\\n\\n  return vec4<f32>(mix(sample.rgb, (colorReplaceUniforms.uTargetColor + colorDiff) * sample.a, doReplace), sample.a);\\n}\";\n\nexport { source as default };\n//# sourceMappingURL=color-replace.mjs.map\n","var fragment = \"in vec2 vTextureCoord;\\nout vec4 finalColor;\\n\\nuniform sampler2D uTexture;\\nuniform vec2 uTexelSize;\\nuniform mat3 uMatrix;\\n\\nvoid main(void)\\n{\\n    vec4 c11 = texture(uTexture, vTextureCoord - uTexelSize); // top left\\n    vec4 c12 = texture(uTexture, vec2(vTextureCoord.x, vTextureCoord.y - uTexelSize.y)); // top center\\n    vec4 c13 = texture(uTexture, vec2(vTextureCoord.x + uTexelSize.x, vTextureCoord.y - uTexelSize.y)); // top right\\n\\n    vec4 c21 = texture(uTexture, vec2(vTextureCoord.x - uTexelSize.x, vTextureCoord.y)); // mid left\\n    vec4 c22 = texture(uTexture, vTextureCoord); // mid center\\n    vec4 c23 = texture(uTexture, vec2(vTextureCoord.x + uTexelSize.x, vTextureCoord.y)); // mid right\\n\\n    vec4 c31 = texture(uTexture, vec2(vTextureCoord.x - uTexelSize.x, vTextureCoord.y + uTexelSize.y)); // bottom left\\n    vec4 c32 = texture(uTexture, vec2(vTextureCoord.x, vTextureCoord.y + uTexelSize.y)); // bottom center\\n    vec4 c33 = texture(uTexture, vTextureCoord + uTexelSize); // bottom right\\n\\n    finalColor =\\n        c11 * uMatrix[0][0] + c12 * uMatrix[0][1] + c13 * uMatrix[0][2] +\\n        c21 * uMatrix[1][0] + c22 * uMatrix[1][1] + c23 * uMatrix[1][2] +\\n        c31 * uMatrix[2][0] + c32 * uMatrix[2][1] + c33 * uMatrix[2][2];\\n\\n    finalColor.a = c22.a;\\n}\";\n\nexport { fragment as default };\n//# sourceMappingURL=convolution.mjs.map\n","import { Filter, deprecation, GpuProgram, GlProgram } from 'pixi.js';\nimport vertex from '../defaults/default.mjs';\nimport wgslVertex from '../defaults/default2.mjs';\nimport fragment from './convolution.mjs';\nimport source from './convolution2.mjs';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _ConvolutionFilter = class _ConvolutionFilter extends Filter {\n  /** @ignore */\n  constructor(...args) {\n    let options = args[0] ?? {};\n    if (Array.isArray(options)) {\n      deprecation(\"6.0.0\", \"ConvolutionFilter constructor params are now options object. See params: { matrix, width, height }\");\n      options = { matrix: options };\n      if (args[1] !== void 0)\n        options.width = args[1];\n      if (args[2] !== void 0)\n        options.height = args[2];\n    }\n    options = { ..._ConvolutionFilter.DEFAULT_OPTIONS, ...options };\n    const width = options.width ?? 200;\n    const height = options.height ?? 200;\n    const gpuProgram = GpuProgram.from({\n      vertex: {\n        source: wgslVertex,\n        entryPoint: \"mainVertex\"\n      },\n      fragment: {\n        source,\n        entryPoint: \"mainFragment\"\n      }\n    });\n    const glProgram = GlProgram.from({\n      vertex,\n      fragment,\n      name: \"convolution-filter\"\n    });\n    super({\n      gpuProgram,\n      glProgram,\n      resources: {\n        convolutionUniforms: {\n          uMatrix: { value: options.matrix, type: \"mat3x3<f32>\" },\n          uTexelSize: { value: { x: 1 / width, y: 1 / height }, type: \"vec2<f32>\" }\n        }\n      }\n    });\n    __publicField(this, \"uniforms\");\n    this.uniforms = this.resources.convolutionUniforms.uniforms;\n    this.width = width;\n    this.height = height;\n  }\n  /**\n   * An array of values used for matrix transformation, specified as a 9 point Array\n   * @example\n   * const matrix = new Float32Array(9); // 9 elements of value 0\n   * const matrix = [0,0.5,0,0.5,1,0.5,0,0.5,0];\n   * @default [0,0,0,0,0,0,0,0,0]\n   */\n  get matrix() {\n    return this.uniforms.uMatrix;\n  }\n  set matrix(matrix) {\n    matrix.forEach((v, i) => {\n      this.uniforms.uMatrix[i] = v;\n    });\n  }\n  /**\n   * Width of the object you are transforming\n   * @default 200\n   */\n  get width() {\n    return 1 / this.uniforms.uTexelSize.x;\n  }\n  set width(value) {\n    this.uniforms.uTexelSize.x = 1 / value;\n  }\n  /**\n   * Height of the object you are transforming\n   * @default 200\n   */\n  get height() {\n    return 1 / this.uniforms.uTexelSize.y;\n  }\n  set height(value) {\n    this.uniforms.uTexelSize.y = 1 / value;\n  }\n};\n/** Default values for options. */\n__publicField(_ConvolutionFilter, \"DEFAULT_OPTIONS\", {\n  matrix: new Float32Array(9),\n  width: 200,\n  height: 200\n});\nlet ConvolutionFilter = _ConvolutionFilter;\n\nexport { ConvolutionFilter };\n//# sourceMappingURL=ConvolutionFilter.mjs.map\n","var source = \"struct ConvolutionUniforms {\\n    uMatrix: mat3x3<f32>,\\n    uTexelSize: vec2<f32>,\\n};\\n\\n@group(0) @binding(1) var uTexture: texture_2d<f32>; \\n@group(0) @binding(2) var uSampler: sampler;\\n@group(1) @binding(0) var<uniform> convolutionUniforms : ConvolutionUniforms;\\n\\n@fragment\\nfn mainFragment(\\n    @location(0) uv: vec2<f32>,\\n    @builtin(position) position: vec4<f32>\\n) -> @location(0) vec4<f32> {\\n    let texelSize = convolutionUniforms.uTexelSize;\\n    let matrix = convolutionUniforms.uMatrix;\\n\\n    let c11: vec4<f32> = textureSample(uTexture, uSampler, uv - texelSize); // top left\\n    let c12: vec4<f32> = textureSample(uTexture, uSampler, vec2<f32>(uv.x, uv.y - texelSize.y)); // top center\\n    let c13: vec4<f32> = textureSample(uTexture, uSampler, vec2<f32>(uv.x + texelSize.x, uv.y - texelSize.y)); // top right\\n\\n    let c21: vec4<f32> = textureSample(uTexture, uSampler, vec2<f32>(uv.x - texelSize.x, uv.y)); // mid left\\n    let c22: vec4<f32> = textureSample(uTexture, uSampler, uv); // mid center\\n    let c23: vec4<f32> = textureSample(uTexture, uSampler, vec2<f32>(uv.x + texelSize.x, uv.y)); // mid right\\n\\n    let c31: vec4<f32> = textureSample(uTexture, uSampler, vec2<f32>(uv.x - texelSize.x, uv.y + texelSize.y)); // bottom left\\n    let c32: vec4<f32> = textureSample(uTexture, uSampler, vec2<f32>(uv.x, uv.y + texelSize.y)); // bottom center\\n    let c33: vec4<f32> = textureSample(uTexture, uSampler, uv + texelSize); // bottom right\\n\\n    var finalColor: vec4<f32> = vec4<f32>(\\n        c11 * matrix[0][0] + c12 * matrix[0][1] + c13 * matrix[0][2] +\\n        c21 * matrix[1][0] + c22 * matrix[1][1] + c23 * matrix[1][2] +\\n        c31 * matrix[2][0] + c32 * matrix[2][1] + c33 * matrix[2][2]\\n    );\\n\\n    finalColor.a = c22.a;\\n\\n    return finalColor;\\n}\";\n\nexport { source as default };\n//# sourceMappingURL=convolution2.mjs.map\n","import { Filter, GpuProgram, GlProgram } from 'pixi.js';\nimport vertex from '../defaults/default.mjs';\nimport wgslVertex from '../defaults/default2.mjs';\nimport fragment from './crosshatch.mjs';\nimport source from './crosshatch2.mjs';\n\nclass CrossHatchFilter extends Filter {\n  constructor() {\n    const gpuProgram = GpuProgram.from({\n      vertex: {\n        source: wgslVertex,\n        entryPoint: \"mainVertex\"\n      },\n      fragment: {\n        source,\n        entryPoint: \"mainFragment\"\n      }\n    });\n    const glProgram = GlProgram.from({\n      vertex,\n      fragment,\n      name: \"cross-hatch-filter\"\n    });\n    super({\n      gpuProgram,\n      glProgram,\n      resources: {}\n    });\n  }\n}\n\nexport { CrossHatchFilter };\n//# sourceMappingURL=CrossHatchFilter.mjs.map\n","var fragment = \"precision highp float;\\nin vec2 vTextureCoord;\\nout vec4 finalColor;\\n\\nuniform sampler2D uTexture;\\nuniform vec4 uLine;\\nuniform vec2 uNoise;\\nuniform vec3 uVignette;\\nuniform float uSeed;\\nuniform float uTime;\\nuniform vec2 uDimensions;\\n\\nuniform vec4 uInputSize;\\n\\nconst float SQRT_2 = 1.414213;\\n\\nfloat rand(vec2 co) {\\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\\n}\\n\\nfloat vignette(vec3 co, vec2 coord)\\n{\\n    float outter = SQRT_2 - uVignette[0] * SQRT_2;\\n    vec2 dir = vec2(0.5) - coord;\\n    dir.y *= uDimensions.y / uDimensions.x;\\n    float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + uVignette[2] * SQRT_2), 0.0, 1.0);\\n    return darker + (1.0 - darker) * (1.0 - uVignette[1]);\\n}\\n\\nfloat noise(vec2 coord)\\n{\\n    vec2 pixelCoord = coord * uInputSize.xy;\\n    pixelCoord.x = floor(pixelCoord.x / uNoise[1]);\\n    pixelCoord.y = floor(pixelCoord.y / uNoise[1]);\\n    return (rand(pixelCoord * uNoise[1] * uSeed) - 0.5) * uNoise[0];\\n}\\n\\nvec3 interlaceLines(vec3 co, vec2 coord)\\n{\\n    vec3 color = co;\\n\\n    float curvature = uLine[0];\\n    float lineWidth = uLine[1];\\n    float lineContrast = uLine[2];\\n    float verticalLine = uLine[3];\\n\\n    vec2 dir = vec2(coord * uInputSize.xy / uDimensions - 0.5);\\n\\n    float _c = curvature > 0. ? curvature : 1.;\\n    float k = curvature > 0. ? (length(dir * dir) * 0.25 * _c * _c + 0.935 * _c) : 1.;\\n    vec2 uv = dir * k;\\n    float v = verticalLine > 0.5 ? uv.x * uDimensions.x : uv.y * uDimensions.y;\\n    v *= min(1.0, 2.0 / lineWidth ) / _c;\\n    float j = 1. + cos(v * 1.2 - uTime) * 0.5 * lineContrast;\\n    color *= j;\\n\\n    float segment = verticalLine > 0.5 ? mod((dir.x + .5) * uDimensions.x, 4.) : mod((dir.y + .5) * uDimensions.y, 4.);\\n    color *= 0.99 + ceil(segment) * 0.015;\\n\\n    return color;\\n}\\n\\nvoid main(void)\\n{\\n    finalColor = texture(uTexture, vTextureCoord);\\n    vec2 coord = vTextureCoord * uInputSize.xy / uDimensions;\\n\\n    if (uNoise[0] > 0.0 && uNoise[1] > 0.0)\\n    {\\n        float n = noise(vTextureCoord);\\n        finalColor += vec4(n, n, n, finalColor.a);\\n    }\\n\\n    if (uVignette[0] > 0.)\\n    {\\n        float v = vignette(finalColor.rgb, coord);\\n        finalColor *= vec4(v, v, v, finalColor.a);\\n    }\\n\\n    if (uLine[1] > 0.0)\\n    {\\n        finalColor = vec4(interlaceLines(finalColor.rgb, vTextureCoord), finalColor.a);  \\n    }\\n}\\n\";\n\nexport { fragment as default };\n//# sourceMappingURL=crt2.mjs.map\n","import { Filter, GpuProgram, GlProgram } from 'pixi.js';\nimport vertex from '../defaults/default.mjs';\nimport wgslVertex from '../defaults/default2.mjs';\nimport fragment from './crt2.mjs';\nimport source from './crt.mjs';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _CRTFilter = class _CRTFilter extends Filter {\n  /**\n   * @param options - Options for the CRTFilter constructor.\n   */\n  constructor(options) {\n    options = { ..._CRTFilter.DEFAULT_OPTIONS, ...options };\n    const gpuProgram = GpuProgram.from({\n      vertex: {\n        source: wgslVertex,\n        entryPoint: \"mainVertex\"\n      },\n      fragment: {\n        source,\n        entryPoint: \"mainFragment\"\n      }\n    });\n    const glProgram = GlProgram.from({\n      vertex,\n      fragment,\n      name: \"crt-filter\"\n    });\n    super({\n      gpuProgram,\n      glProgram,\n      resources: {\n        crtUniforms: {\n          uLine: { value: new Float32Array(4), type: \"vec4<f32>\" },\n          uNoise: { value: new Float32Array(2), type: \"vec2<f32>\" },\n          uVignette: { value: new Float32Array(3), type: \"vec3<f32>\" },\n          uSeed: { value: options.seed, type: \"f32\" },\n          uTime: { value: options.time, type: \"f32\" },\n          uDimensions: { value: new Float32Array(2), type: \"vec2<f32>\" }\n        }\n      }\n    });\n    __publicField(this, \"uniforms\");\n    /**\n     * A seed value to apply to the random noise generation\n     * @default 0\n     */\n    __publicField(this, \"seed\");\n    /**\n     * Opacity/intensity of the noise effect between `0` and `1`\n     * @default 0.3\n     */\n    __publicField(this, \"time\");\n    this.uniforms = this.resources.crtUniforms.uniforms;\n    Object.assign(this, options);\n  }\n  /**\n   * Override existing apply method in `Filter`\n   * @override\n   * @ignore\n   */\n  apply(filterManager, input, output, clearMode) {\n    this.uniforms.uDimensions[0] = input.frame.width;\n    this.uniforms.uDimensions[1] = input.frame.height;\n    this.uniforms.uSeed = this.seed;\n    this.uniforms.uTime = this.time;\n    filterManager.applyFilter(this, input, output, clearMode);\n  }\n  /**\n   * Bend of interlaced lines, higher value means more bend\n   * @default 1\n   */\n  get curvature() {\n    return this.uniforms.uLine[0];\n  }\n  set curvature(value) {\n    this.uniforms.uLine[0] = value;\n  }\n  /**\n   * Width of interlaced lines\n   * @default 1\n   */\n  get lineWidth() {\n    return this.uniforms.uLine[1];\n  }\n  set lineWidth(value) {\n    this.uniforms.uLine[1] = value;\n  }\n  /**\n   * Contrast of interlaced lines\n   * @default 0.25\n   */\n  get lineContrast() {\n    return this.uniforms.uLine[2];\n  }\n  set lineContrast(value) {\n    this.uniforms.uLine[2] = value;\n  }\n  /**\n   * The orientation of the line:\n   *\n   * `true` create vertical lines, `false` creates horizontal lines\n   * @default false\n   */\n  get verticalLine() {\n    return this.uniforms.uLine[3] > 0.5;\n  }\n  set verticalLine(value) {\n    this.uniforms.uLine[3] = value ? 1 : 0;\n  }\n  /**\n   * Opacity/intensity of the noise effect between `0` and `1`\n   * @default 0.3\n   */\n  get noise() {\n    return this.uniforms.uNoise[0];\n  }\n  set noise(value) {\n    this.uniforms.uNoise[0] = value;\n  }\n  /**\n   * The size of the noise particles\n   * @default 0\n   */\n  get noiseSize() {\n    return this.uniforms.uNoise[1];\n  }\n  set noiseSize(value) {\n    this.uniforms.uNoise[1] = value;\n  }\n  /**\n   * The radius of the vignette effect, smaller values produces a smaller vignette\n   * @default 0.3\n   */\n  get vignetting() {\n    return this.uniforms.uVignette[0];\n  }\n  set vignetting(value) {\n    this.uniforms.uVignette[0] = value;\n  }\n  /**\n   * Amount of opacity of vignette\n   * @default 1\n   */\n  get vignettingAlpha() {\n    return this.uniforms.uVignette[1];\n  }\n  set vignettingAlpha(value) {\n    this.uniforms.uVignette[1] = value;\n  }\n  /**\n   * Blur intensity of the vignette\n   * @default 0.3\n   */\n  get vignettingBlur() {\n    return this.uniforms.uVignette[2];\n  }\n  set vignettingBlur(value) {\n    this.uniforms.uVignette[2] = value;\n  }\n};\n/** Default values for options. */\n__publicField(_CRTFilter, \"DEFAULT_OPTIONS\", {\n  curvature: 1,\n  lineWidth: 1,\n  lineContrast: 0.25,\n  verticalLine: false,\n  noise: 0,\n  noiseSize: 1,\n  vignetting: 0.3,\n  vignettingAlpha: 1,\n  vignettingBlur: 0.3,\n  time: 0,\n  seed: 0\n});\nlet CRTFilter = _CRTFilter;\n\nexport { CRTFilter };\n//# sourceMappingURL=CRTFilter.mjs.map\n","var source = \"struct CRTUniforms {\\n    uLine: vec4<f32>,\\n    uNoise: vec2<f32>,\\n    uVignette: vec3<f32>,\\n    uSeed: f32,\\n    uTime: f32,\\n    uDimensions: vec2<f32>,\\n};\\n\\nstruct GlobalFilterUniforms {\\n  uInputSize:vec4<f32>,\\n  uInputPixel:vec4<f32>,\\n  uInputClamp:vec4<f32>,\\n  uOutputFrame:vec4<f32>,\\n  uGlobalFrame:vec4<f32>,\\n  uOutputTexture:vec4<f32>,\\n};\\n\\n@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;\\n\\n@group(0) @binding(1) var uTexture: texture_2d<f32>; \\n@group(0) @binding(2) var uSampler: sampler;\\n@group(1) @binding(0) var<uniform> crtUniforms : CRTUniforms;\\n\\n@fragment\\nfn mainFragment(\\n  @builtin(position) position: vec4<f32>,\\n  @location(0) uv : vec2<f32>\\n) -> @location(0) vec4<f32> {\\n    \\n  var color: vec4<f32> = textureSample(uTexture, uSampler, uv);\\n  let coord: vec2<f32> = uv * gfu.uInputSize.xy / crtUniforms.uDimensions;\\n\\n  let uNoise = crtUniforms.uNoise;\\n\\n  if (uNoise[0] > 0.0 && uNoise[1] > 0.0)\\n  {\\n    color += vec4<f32>(vec3<f32>(noise(uv)), color.a);\\n  }\\n\\n  if (crtUniforms.uVignette[0] > 0.)\\n  {\\n    color *= vec4<f32>(vec3<f32>(vignette(color.rgb, coord)), color.a);\\n  }\\n\\n  if (crtUniforms.uLine[1] > 0.0)\\n  {\\n    color = vec4<f32>(vec3<f32>(interlaceLines(color.rgb, uv)), color.a);  \\n  }\\n\\n  return color;\\n}\\n\\nconst SQRT_2: f32 = 1.414213;\\n\\nfn modulo(x: f32, y: f32) -> f32\\n{\\n  return x - y * floor(x/y);\\n}\\n\\nfn rand(co: vec2<f32>) -> f32\\n{\\n  return fract(sin(dot(co, vec2<f32>(12.9898, 78.233))) * 43758.5453);\\n}\\n\\nfn vignette(co: vec3<f32>, coord: vec2<f32>) -> f32\\n{\\n  let uVignette = crtUniforms.uVignette;\\n  let uDimensions = crtUniforms.uDimensions;\\n  \\n  let outter: f32 = SQRT_2 - uVignette[0] * SQRT_2;\\n  var dir: vec2<f32> = vec2<f32>(0.5) - coord;\\n  dir.y *= uDimensions.y / uDimensions.x;\\n  let darker: f32 = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + uVignette[2] * SQRT_2), 0.0, 1.0);\\n  return darker + (1.0 - darker) * (1.0 - uVignette[1]);\\n}\\n\\nfn noise(coord: vec2<f32>) -> f32\\n{\\n  let uNoise = crtUniforms.uNoise;\\n  let uSeed = crtUniforms.uSeed;\\n\\n  var pixelCoord: vec2<f32> = coord * gfu.uInputSize.xy;\\n  pixelCoord.x = floor(pixelCoord.x / uNoise[1]);\\n  pixelCoord.y = floor(pixelCoord.y / uNoise[1]);\\n  return (rand(pixelCoord * uNoise[1] * uSeed) - 0.5) * uNoise[0];\\n}\\n\\nfn interlaceLines(co: vec3<f32>, coord: vec2<f32>) -> vec3<f32>\\n{\\n  var color = co;\\n\\n  let uDimensions = crtUniforms.uDimensions;\\n\\n  let curvature: f32 = crtUniforms.uLine[0];\\n  let lineWidth: f32 = crtUniforms.uLine[1];\\n  let lineContrast: f32 = crtUniforms.uLine[2];\\n  let verticalLine: f32 = crtUniforms.uLine[3];\\n\\n  let dir: vec2<f32> = vec2<f32>(coord * gfu.uInputSize.xy / uDimensions - 0.5);\\n\\n  let _c: f32 = select(1., curvature, curvature > 0.);\\n  let k: f32 = select(1., (length(dir * dir) * 0.25 * _c * _c + 0.935 * _c), curvature > 0.);\\n  let uv: vec2<f32> = dir * k;\\n  let v: f32 = select(uv.y * uDimensions.y, uv.x * uDimensions.x, verticalLine > 0.5) * min(1.0, 2.0 / lineWidth ) / _c;\\n  let j: f32 = 1. + cos(v * 1.2 - crtUniforms.uTime) * 0.5 * lineContrast;\\n  color *= j;\\n\\n  let segment: f32 = select(modulo((dir.y + .5) * uDimensions.y, 4.), modulo((dir.x + .5) * uDimensions.x, 4.), verticalLine > 0.5);\\n  color *= 0.99 + ceil(segment) * 0.015;\\n\\n  return color;\\n}\";\n\nexport { source as default };\n//# sourceMappingURL=crt.mjs.map\n","var fragment = \"precision highp float;\\nin vec2 vTextureCoord;\\nout vec4 finalColor;\\n\\nuniform sampler2D uTexture;\\nuniform float uAngle;\\nuniform float uScale;\\nuniform bool uGrayScale;\\n\\nuniform vec4 uInputSize;\\n\\nfloat pattern()\\n{\\n    float s = sin(uAngle), c = cos(uAngle);\\n    vec2 tex = vTextureCoord * uInputSize.xy;\\n    vec2 point = vec2(\\n        c * tex.x - s * tex.y,\\n        s * tex.x + c * tex.y\\n    ) * uScale;\\n    return (sin(point.x) * sin(point.y)) * 4.0;\\n    }\\n\\n    void main()\\n    {\\n    vec4 color = texture(uTexture, vTextureCoord);\\n    vec3 colorRGB = vec3(color);\\n\\n    if (uGrayScale)\\n    {\\n        colorRGB = vec3(color.r + color.g + color.b) / 3.0;\\n    }\\n\\n    finalColor = vec4(colorRGB * 10.0 - 5.0 + pattern(), color.a);\\n}\\n\";\n\nexport { fragment as default };\n//# sourceMappingURL=dot2.mjs.map\n","import { Filter, deprecation, GpuProgram, GlProgram } from 'pixi.js';\nimport vertex from '../defaults/default.mjs';\nimport wgslVertex from '../defaults/default2.mjs';\nimport fragment from './dot2.mjs';\nimport source from './dot.mjs';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _DotFilter = class _DotFilter extends Filter {\n  /** @ignore */\n  constructor(...args) {\n    let options = args[0] ?? {};\n    if (typeof options === \"number\") {\n      deprecation(\"6.0.0\", \"DotFilter constructor params are now options object. See params: { scale, angle, grayscale }\");\n      options = { scale: options };\n      if (args[1] !== void 0)\n        options.angle = args[1];\n      if (args[2] !== void 0)\n        options.grayscale = args[2];\n    }\n    options = { ..._DotFilter.DEFAULT_OPTIONS, ...options };\n    const dotUniforms = {\n      uScale: { value: options.scale, type: \"f32\" },\n      uAngle: { value: options.angle, type: \"f32\" },\n      uGrayScale: { value: options.grayscale ? 1 : 0, type: \"f32\" }\n    };\n    const gpuProgram = GpuProgram.from({\n      vertex: {\n        source: wgslVertex,\n        entryPoint: \"mainVertex\"\n      },\n      fragment: {\n        source,\n        entryPoint: \"mainFragment\"\n      }\n    });\n    const glProgram = GlProgram.from({\n      vertex,\n      fragment,\n      name: \"dot-filter\"\n    });\n    super({\n      gpuProgram,\n      glProgram,\n      resources: {\n        dotUniforms\n      }\n    });\n  }\n  /**\n   * The scale of the effect.\n   * @default 1\n   */\n  get scale() {\n    return this.resources.dotUniforms.uniforms.uScale;\n  }\n  set scale(value) {\n    this.resources.dotUniforms.uniforms.uScale = value;\n  }\n  /**\n  * The radius of the effect.\n  * @default 5\n  */\n  get angle() {\n    return this.resources.dotUniforms.uniforms.uAngle;\n  }\n  set angle(value) {\n    this.resources.dotUniforms.uniforms.uAngle = value;\n  }\n  /**\n  * Whether to rendering it in gray scale.\n  * @default true\n  */\n  get grayscale() {\n    return this.resources.dotUniforms.uniforms.uGrayScale === 1;\n  }\n  set grayscale(value) {\n    this.resources.dotUniforms.uniforms.uGrayScale = value ? 1 : 0;\n  }\n};\n/** Default values for options. */\n__publicField(_DotFilter, \"DEFAULT_OPTIONS\", {\n  scale: 1,\n  angle: 5,\n  grayscale: true\n});\nlet DotFilter = _DotFilter;\n\nexport { DotFilter };\n//# sourceMappingURL=DotFilter.mjs.map\n","var source = \"struct DotUniforms {\\n  uScale:f32,\\n  uAngle:f32,\\n  uGrayScale:f32,\\n};\\n\\nstruct GlobalFilterUniforms {\\n  uInputSize:vec4<f32>,\\n  uInputPixel:vec4<f32>,\\n  uInputClamp:vec4<f32>,\\n  uOutputFrame:vec4<f32>,\\n  uGlobalFrame:vec4<f32>,\\n  uOutputTexture:vec4<f32>,\\n};\\n\\n@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;\\n\\n@group(0) @binding(1) var uTexture: texture_2d<f32>; \\n@group(0) @binding(2) var uSampler: sampler;\\n@group(1) @binding(0) var<uniform> dotUniforms : DotUniforms;\\n\\n@fragment\\nfn mainFragment(\\n  @location(0) uv: vec2<f32>,\\n  @builtin(position) position: vec4<f32>\\n) -> @location(0) vec4<f32> {\\n  let color: vec4<f32> = textureSample(uTexture, uSampler, uv);\\n  let gray: vec3<f32> = vec3<f32>(dot(color.rgb, vec3<f32>(0.299, 0.587, 0.114)));\\n  // dotUniforms.uGrayScale == 1 doesn't ever pass so it is converted to a float and compared to 0.5 instead \\n  let finalColor: vec3<f32> = select(color.rgb, gray, f32(dotUniforms.uGrayScale) >= 0.5);\\n\\n  return vec4<f32>(finalColor * 10.0 - 5.0 + pattern(uv), color.a);\\n}\\n\\nfn pattern(uv: vec2<f32>) -> f32\\n{\\n  let s: f32 = sin(dotUniforms.uAngle);\\n  let c: f32 = cos(dotUniforms.uAngle);\\n  \\n  let tex: vec2<f32> = uv * gfu.uInputSize.xy;\\n  \\n  let p: vec2<f32> = vec2<f32>(\\n      c * tex.x - s * tex.y,\\n      s * tex.x + c * tex.y\\n  ) * dotUniforms.uScale;\\n\\n  return (sin(p.x) * sin(p.y)) * 4.0;\\n}\";\n\nexport { source as default };\n//# sourceMappingURL=dot.mjs.map\n","var fragment = \"precision highp float;\\nin vec2 vTextureCoord;\\nout vec4 finalColor;\\n\\nuniform sampler2D uTexture;\\nuniform float uAlpha;\\nuniform vec3 uColor;\\nuniform vec2 uOffset;\\n\\nuniform vec4 uInputSize;\\n\\nvoid main(void){\\n    vec4 sample = texture(uTexture, vTextureCoord - uOffset * uInputSize.zw);\\n\\n    // Premultiply alpha\\n    sample.rgb = uColor.rgb * sample.a;\\n\\n    // alpha user alpha\\n    sample *= uAlpha;\\n\\n    finalColor = sample;\\n}\";\n\nexport { fragment as default };\n//# sourceMappingURL=drop-shadow2.mjs.map\n","import { Filter, GpuProgram, GlProgram, Color, TexturePool } from 'pixi.js';\nimport vertex from '../defaults/default.mjs';\nimport wgslVertex from '../defaults/default2.mjs';\nimport { KawaseBlurFilter } from '../kawase-blur/KawaseBlurFilter.mjs';\nimport fragment from './drop-shadow2.mjs';\nimport source from './drop-shadow.mjs';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _DropShadowFilter = class _DropShadowFilter extends Filter {\n  /**\n   * @param options - Options for the DropShadowFilter constructor.\n   */\n  constructor(options) {\n    options = { ..._DropShadowFilter.DEFAULT_OPTIONS, ...options };\n    const gpuProgram = GpuProgram.from({\n      vertex: {\n        source: wgslVertex,\n        entryPoint: \"mainVertex\"\n      },\n      fragment: {\n        source,\n        entryPoint: \"mainFragment\"\n      }\n    });\n    const glProgram = GlProgram.from({\n      vertex,\n      fragment,\n      name: \"drop-shadow-filter\"\n    });\n    super({\n      gpuProgram,\n      glProgram,\n      resources: {\n        dropShadowUniforms: {\n          uAlpha: { value: options.alpha, type: \"f32\" },\n          uColor: { value: new Float32Array(3), type: \"vec3<f32>\" },\n          uOffset: { value: options.offset, type: \"vec2<f32>\" }\n        }\n      },\n      resolution: options.resolution\n    });\n    __publicField(this, \"uniforms\");\n    /**\n     * Hide the contents, only show the shadow.\n     * @default false\n     */\n    __publicField(this, \"shadowOnly\", false);\n    __publicField(this, \"_color\");\n    __publicField(this, \"_blurFilter\");\n    __publicField(this, \"_basePass\");\n    this.uniforms = this.resources.dropShadowUniforms.uniforms;\n    this._color = new Color();\n    this.color = options.color ?? 0;\n    this._blurFilter = new KawaseBlurFilter({\n      strength: options.kernels ?? options.blur,\n      quality: options.kernels ? void 0 : options.quality\n    });\n    this._basePass = new Filter({\n      gpuProgram: GpuProgram.from({\n        vertex: {\n          source: wgslVertex,\n          entryPoint: \"mainVertex\"\n        },\n        fragment: {\n          source: `\n                    @group(0) @binding(1) var uTexture: texture_2d<f32>; \n                    @group(0) @binding(2) var uSampler: sampler;\n                    @fragment\n                    fn mainFragment(\n                        @builtin(position) position: vec4<f32>,\n                        @location(0) uv : vec2<f32>\n                    ) -> @location(0) vec4<f32> {\n                        return textureSample(uTexture, uSampler, uv);\n                    }\n                    `,\n          entryPoint: \"mainFragment\"\n        }\n      }),\n      glProgram: GlProgram.from({\n        vertex,\n        fragment: `\n                in vec2 vTextureCoord;\n                out vec4 finalColor;\n                uniform sampler2D uTexture;\n\n                void main(void){\n                    finalColor = texture(uTexture, vTextureCoord);\n                }\n                `,\n        name: \"drop-shadow-filter\"\n      }),\n      resources: {}\n    });\n    Object.assign(this, options);\n  }\n  /**\n   * Override existing apply method in `Filter`\n   * @override\n   * @ignore\n   */\n  apply(filterManager, input, output, clearMode) {\n    const renderTarget = TexturePool.getSameSizeTexture(input);\n    filterManager.applyFilter(this, input, renderTarget, true);\n    this._blurFilter.apply(filterManager, renderTarget, output, clearMode);\n    if (!this.shadowOnly) {\n      filterManager.applyFilter(this._basePass, input, output, false);\n    }\n    TexturePool.returnTexture(renderTarget);\n  }\n  /**\n   * Set the offset position of the drop-shadow relative to the original image.\n   * @default [4,4]\n   */\n  get offset() {\n    return this.uniforms.uOffset;\n  }\n  set offset(value) {\n    this.uniforms.uOffset = value;\n    this._updatePadding();\n  }\n  /**\n   * Set the offset position of the drop-shadow relative to the original image on the `x` axis\n   * @default 4\n   */\n  get offsetX() {\n    return this.offset.x;\n  }\n  set offsetX(value) {\n    this.offset.x = value;\n    this._updatePadding();\n  }\n  /**\n   * Set the offset position of the drop-shadow relative to the original image on the `y` axis\n   * @default 4\n   */\n  get offsetY() {\n    return this.offset.y;\n  }\n  set offsetY(value) {\n    this.offset.y = value;\n    this._updatePadding();\n  }\n  /**\n   * The color value of shadow.\n   * @example [0.0, 0.0, 0.0] = 0x000000\n   * @default 0x000000\n   */\n  get color() {\n    return this._color.value;\n  }\n  set color(value) {\n    this._color.setValue(value);\n    const [r, g, b] = this._color.toArray();\n    this.uniforms.uColor[0] = r;\n    this.uniforms.uColor[1] = g;\n    this.uniforms.uColor[2] = b;\n  }\n  /**\n   * Coefficient for alpha multiplication\n   * @default 1\n   */\n  get alpha() {\n    return this.uniforms.uAlpha;\n  }\n  set alpha(value) {\n    this.uniforms.uAlpha = value;\n  }\n  /**\n   * The strength of the shadow's blur.\n   * @default 2\n   */\n  get blur() {\n    return this._blurFilter.strength;\n  }\n  set blur(value) {\n    this._blurFilter.strength = value;\n    this._updatePadding();\n  }\n  /**\n   * Sets the quality of the Blur Filter\n   * @default 4\n   */\n  get quality() {\n    return this._blurFilter.quality;\n  }\n  set quality(value) {\n    this._blurFilter.quality = value;\n    this._updatePadding();\n  }\n  /** Sets the kernels of the Blur Filter */\n  get kernels() {\n    return this._blurFilter.kernels;\n  }\n  set kernels(value) {\n    this._blurFilter.kernels = value;\n  }\n  /**\n   * Sets the pixelSize of the Kawase Blur filter\n   * @default [1,1]\n   */\n  get pixelSize() {\n    return this._blurFilter.pixelSize;\n  }\n  set pixelSize(value) {\n    if (typeof value === \"number\") {\n      value = { x: value, y: value };\n    }\n    if (Array.isArray(value)) {\n      value = { x: value[0], y: value[1] };\n    }\n    this._blurFilter.pixelSize = value;\n  }\n  /**\n   * Sets the pixelSize of the Kawase Blur filter on the `x` axis\n   * @default 1\n   */\n  get pixelSizeX() {\n    return this._blurFilter.pixelSizeX;\n  }\n  set pixelSizeX(value) {\n    this._blurFilter.pixelSizeX = value;\n  }\n  /**\n   * Sets the pixelSize of the Kawase Blur filter on the `y` axis\n   * @default 1\n   */\n  get pixelSizeY() {\n    return this._blurFilter.pixelSizeY;\n  }\n  set pixelSizeY(value) {\n    this._blurFilter.pixelSizeY = value;\n  }\n  /**\n   * Recalculate the proper padding amount.\n   * @private\n   */\n  _updatePadding() {\n    const offsetPadding = Math.max(\n      Math.abs(this.offsetX),\n      Math.abs(this.offsetY)\n    );\n    this.padding = offsetPadding + this.blur * 2 + this.quality * 4;\n  }\n};\n/** Default values for options. */\n__publicField(_DropShadowFilter, \"DEFAULT_OPTIONS\", {\n  offset: { x: 4, y: 4 },\n  color: 0,\n  alpha: 0.5,\n  shadowOnly: false,\n  kernels: void 0,\n  blur: 2,\n  quality: 3,\n  pixelSize: { x: 1, y: 1 },\n  resolution: 1\n});\nlet DropShadowFilter = _DropShadowFilter;\n\nexport { DropShadowFilter };\n//# sourceMappingURL=DropShadowFilter.mjs.map\n","var source = \"struct DropShadowUniforms {\\n  uAlpha: f32,\\n  uColor: vec3<f32>,\\n  uOffset: vec2<f32>,\\n};\\n\\nstruct GlobalFilterUniforms {\\n  uInputSize:vec4<f32>,\\n  uInputPixel:vec4<f32>,\\n  uInputClamp:vec4<f32>,\\n  uOutputFrame:vec4<f32>,\\n  uGlobalFrame:vec4<f32>,\\n  uOutputTexture:vec4<f32>,\\n};\\n\\n@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;\\n\\n@group(0) @binding(1) var uTexture: texture_2d<f32>; \\n@group(0) @binding(2) var uSampler: sampler;\\n@group(1) @binding(0) var<uniform> dropShadowUniforms : DropShadowUniforms;\\n\\n@fragment\\nfn mainFragment(\\n  @builtin(position) position: vec4<f32>,\\n  @location(0) uv : vec2<f32>\\n) -> @location(0) vec4<f32> {\\n  var color: vec4<f32> = textureSample(uTexture, uSampler, uv - dropShadowUniforms.uOffset * gfu.uInputSize.zw);\\n\\n  // Premultiply alpha\\n  color = vec4<f32>(vec3<f32>(dropShadowUniforms.uColor.rgb * color.a), color.a);\\n  // alpha user alpha\\n  color *= dropShadowUniforms.uAlpha;\\n\\n  return color;\\n}\";\n\nexport { source as default };\n//# sourceMappingURL=drop-shadow.mjs.map\n","import { Filter, GpuProgram, GlProgram } from 'pixi.js';\nimport vertex from '../defaults/default.mjs';\nimport wgslVertex from '../defaults/default2.mjs';\nimport fragment from './emboss.mjs';\nimport source from './emboss2.mjs';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass EmbossFilter extends Filter {\n  /**\n   * @param {number} [strength=5] - Strength of the emboss.\n   */\n  constructor(strength = 5) {\n    const gpuProgram = GpuProgram.from({\n      vertex: {\n        source: wgslVertex,\n        entryPoint: \"mainVertex\"\n      },\n      fragment: {\n        source,\n        entryPoint: \"mainFragment\"\n      }\n    });\n    const glProgram = GlProgram.from({\n      vertex,\n      fragment,\n      name: \"emboss-filter\"\n    });\n    super({\n      gpuProgram,\n      glProgram,\n      resources: {\n        embossUniforms: {\n          uStrength: { value: strength, type: \"f32\" }\n        }\n      }\n    });\n    __publicField(this, \"uniforms\");\n    this.uniforms = this.resources.embossUniforms.uniforms;\n  }\n  /**\n   * Strength of the emboss\n   * @default 5\n   */\n  get strength() {\n    return this.uniforms.uStrength;\n  }\n  set strength(value) {\n    this.uniforms.uStrength = value;\n  }\n}\n\nexport { EmbossFilter };\n//# sourceMappingURL=EmbossFilter.mjs.map\n","var fragment = \"precision highp float;\\nin vec2 vTextureCoord;\\nout vec4 finalColor;\\n\\nuniform sampler2D uTexture;\\nuniform sampler2D uDisplacementMap;\\nuniform float uSeed;\\nuniform vec2 uDimensions;\\nuniform float uAspect;\\nuniform float uFillMode;\\nuniform float uOffset;\\nuniform float uDirection;\\nuniform vec2 uRed;\\nuniform vec2 uGreen;\\nuniform vec2 uBlue;\\n\\nuniform vec4 uInputSize;\\nuniform vec4 uInputClamp;\\n\\nconst int TRANSPARENT = 0;\\nconst int ORIGINAL = 1;\\nconst int LOOP = 2;\\nconst int CLAMP = 3;\\nconst int MIRROR = 4;\\n\\nvoid main(void)\\n{\\n    vec2 coord = (vTextureCoord * uInputSize.xy) / uDimensions;\\n\\n    if (coord.x > 1.0 || coord.y > 1.0) {\\n        return;\\n    }\\n\\n    float sinDir = sin(uDirection);\\n    float cosDir = cos(uDirection);\\n\\n    float cx = coord.x - 0.5;\\n    float cy = (coord.y - 0.5) * uAspect;\\n    float ny = (-sinDir * cx + cosDir * cy) / uAspect + 0.5;\\n\\n    // displacementMap: repeat\\n    // ny = ny > 1.0 ? ny - 1.0 : (ny < 0.0 ? 1.0 + ny : ny);\\n\\n    // displacementMap: mirror\\n    ny = ny > 1.0 ? 2.0 - ny : (ny < 0.0 ? -ny : ny);\\n\\n    vec4 dc = texture(uDisplacementMap, vec2(0.5, ny));\\n\\n    float displacement = (dc.r - dc.g) * (uOffset / uInputSize.x);\\n\\n    coord = vTextureCoord + vec2(cosDir * displacement, sinDir * displacement * uAspect);\\n\\n    int fillMode = int(uFillMode);\\n\\n    if (fillMode == CLAMP) {\\n        coord = clamp(coord, uInputClamp.xy, uInputClamp.zw);\\n    } else {\\n        if( coord.x > uInputClamp.z ) {\\n            if (fillMode == TRANSPARENT) {\\n                discard;\\n            } else if (fillMode == LOOP) {\\n                coord.x -= uInputClamp.z;\\n            } else if (fillMode == MIRROR) {\\n                coord.x = uInputClamp.z * 2.0 - coord.x;\\n            }\\n        } else if( coord.x < uInputClamp.x ) {\\n            if (fillMode == TRANSPARENT) {\\n                discard;\\n            } else if (fillMode == LOOP) {\\n                coord.x += uInputClamp.z;\\n            } else if (fillMode == MIRROR) {\\n                coord.x *= -uInputClamp.z;\\n            }\\n        }\\n\\n        if( coord.y > uInputClamp.w ) {\\n            if (fillMode == TRANSPARENT) {\\n                discard;\\n            } else if (fillMode == LOOP) {\\n                coord.y -= uInputClamp.w;\\n            } else if (fillMode == MIRROR) {\\n                coord.y = uInputClamp.w * 2.0 - coord.y;\\n            }\\n        } else if( coord.y < uInputClamp.y ) {\\n            if (fillMode == TRANSPARENT) {\\n                discard;\\n            } else if (fillMode == LOOP) {\\n                coord.y += uInputClamp.w;\\n            } else if (fillMode == MIRROR) {\\n                coord.y *= -uInputClamp.w;\\n            }\\n        }\\n    }\\n\\n    finalColor.r = texture(uTexture, coord + uRed * (1.0 - uSeed * 0.4) / uInputSize.xy).r;\\n    finalColor.g = texture(uTexture, coord + uGreen * (1.0 - uSeed * 0.3) / uInputSize.xy).g;\\n    finalColor.b = texture(uTexture, coord + uBlue * (1.0 - uSeed * 0.2) / uInputSize.xy).b;\\n    finalColor.a = texture(uTexture, coord).a;\\n}\\n\";\n\nexport { fragment as default };\n//# sourceMappingURL=glitch2.mjs.map\n","import { Filter, GpuProgram, GlProgram, Texture, ImageSource, DEG_TO_RAD } from 'pixi.js';\nimport vertex from '../defaults/default.mjs';\nimport wgslVertex from '../defaults/default2.mjs';\nimport fragment from './glitch2.mjs';\nimport source from './glitch.mjs';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _GlitchFilter = class _GlitchFilter extends Filter {\n  /**\n   * @param options - Options for the GlitchFilter constructor.\n   */\n  constructor(options) {\n    options = { ..._GlitchFilter.defaults, ...options };\n    const gpuProgram = GpuProgram.from({\n      vertex: {\n        source: wgslVertex,\n        entryPoint: \"mainVertex\"\n      },\n      fragment: {\n        source,\n        entryPoint: \"mainFragment\"\n      }\n    });\n    const glProgram = GlProgram.from({\n      vertex,\n      fragment,\n      name: \"glitch-filter\"\n    });\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = 4;\n    canvas.height = options.sampleSize ?? 512;\n    const texture = new Texture({\n      source: new ImageSource({ resource: canvas })\n    });\n    super({\n      gpuProgram,\n      glProgram,\n      resources: {\n        glitchUniforms: {\n          uSeed: { value: options?.seed ?? 0, type: \"f32\" },\n          uDimensions: { value: new Float32Array(2), type: \"vec2<f32>\" },\n          uAspect: { value: 1, type: \"f32\" },\n          uFillMode: { value: options?.fillMode ?? 0, type: \"f32\" },\n          uOffset: { value: options?.offset ?? 100, type: \"f32\" },\n          uDirection: { value: options?.direction ?? 0, type: \"f32\" },\n          uRed: { value: options.red, type: \"vec2<f32>\" },\n          uGreen: { value: options.green, type: \"vec2<f32>\" },\n          uBlue: { value: options.blue, type: \"vec2<f32>\" }\n        },\n        uDisplacementMap: texture.source,\n        uDisplacementSampler: texture.source.style\n      }\n    });\n    __publicField(this, \"uniforms\");\n    /**\n     * `true` will divide the bands roughly based on equal amounts\n     * where as setting to `false` will vary the band sizes dramatically (more random looking).\n     */\n    __publicField(this, \"average\", false);\n    /** Minimum size of slices as a portion of the `sampleSize` */\n    __publicField(this, \"minSize\", 8);\n    /** Height of the displacement map canvas. */\n    __publicField(this, \"sampleSize\", 512);\n    /** Internally generated canvas. */\n    __publicField(this, \"_canvas\");\n    /**\n     * The displacement map is used to generate the bands.\n     * If using your own texture, `slices` will be ignored.\n     *\n     * @member {Texture}\n     * @readonly\n     */\n    __publicField(this, \"texture\");\n    /** Internal number of slices */\n    __publicField(this, \"_slices\", 0);\n    __publicField(this, \"_sizes\", new Float32Array(1));\n    __publicField(this, \"_offsets\", new Float32Array(1));\n    this.uniforms = this.resources.glitchUniforms.uniforms;\n    this._canvas = canvas;\n    this.texture = texture;\n    Object.assign(this, options);\n  }\n  /**\n   * Override existing apply method in Filter\n   * @private\n   */\n  apply(filterManager, input, output, clearMode) {\n    const { width, height } = input.frame;\n    this.uniforms.uDimensions[0] = width;\n    this.uniforms.uDimensions[1] = height;\n    this.uniforms.uAspect = height / width;\n    filterManager.applyFilter(this, input, output, clearMode);\n  }\n  /**\n   * Randomize the slices size (heights).\n   *\n   * @private\n   */\n  _randomizeSizes() {\n    const arr = this._sizes;\n    const last = this._slices - 1;\n    const size = this.sampleSize;\n    const min = Math.min(this.minSize / size, 0.9 / this._slices);\n    if (this.average) {\n      const count = this._slices;\n      let rest = 1;\n      for (let i = 0; i < last; i++) {\n        const averageWidth = rest / (count - i);\n        const w = Math.max(averageWidth * (1 - Math.random() * 0.6), min);\n        arr[i] = w;\n        rest -= w;\n      }\n      arr[last] = rest;\n    } else {\n      let rest = 1;\n      const ratio = Math.sqrt(1 / this._slices);\n      for (let i = 0; i < last; i++) {\n        const w = Math.max(ratio * rest * Math.random(), min);\n        arr[i] = w;\n        rest -= w;\n      }\n      arr[last] = rest;\n    }\n    this.shuffle();\n  }\n  /**\n   * Shuffle the sizes of the slices, advanced usage.\n   */\n  shuffle() {\n    const arr = this._sizes;\n    const last = this._slices - 1;\n    for (let i = last; i > 0; i--) {\n      const rand = Math.random() * i >> 0;\n      const temp = arr[i];\n      arr[i] = arr[rand];\n      arr[rand] = temp;\n    }\n  }\n  /**\n   * Randomize the values for offset from -1 to 1\n   *\n   * @private\n   */\n  _randomizeOffsets() {\n    for (let i = 0; i < this._slices; i++) {\n      this._offsets[i] = Math.random() * (Math.random() < 0.5 ? -1 : 1);\n    }\n  }\n  /**\n   * Regenerating random size, offsets for slices.\n   */\n  refresh() {\n    this._randomizeSizes();\n    this._randomizeOffsets();\n    this.redraw();\n  }\n  /**\n   * Redraw displacement bitmap texture, advanced usage.\n   */\n  redraw() {\n    const size = this.sampleSize;\n    const texture = this.texture;\n    const ctx = this._canvas.getContext(\"2d\");\n    ctx.clearRect(0, 0, 8, size);\n    let offset;\n    let y = 0;\n    for (let i = 0; i < this._slices; i++) {\n      offset = Math.floor(this._offsets[i] * 256);\n      const height = this._sizes[i] * size;\n      const red = offset > 0 ? offset : 0;\n      const green = offset < 0 ? -offset : 0;\n      ctx.fillStyle = `rgba(${red}, ${green}, 0, 1)`;\n      ctx.fillRect(0, y >> 0, size, height + 1 >> 0);\n      y += height;\n    }\n    texture.source.update();\n  }\n  /**\n   * Manually custom slices size (height) of displacement bitmap\n   *\n   * @member {number[]|Float32Array}\n   */\n  set sizes(sizes) {\n    const len = Math.min(this._slices, sizes.length);\n    for (let i = 0; i < len; i++) {\n      this._sizes[i] = sizes[i];\n    }\n  }\n  get sizes() {\n    return this._sizes;\n  }\n  /**\n   * Manually set custom slices offset of displacement bitmap, this is\n   * a collection of values from -1 to 1. To change the max offset value\n   * set `offset`.\n   *\n   * @member {number[]|Float32Array}\n   */\n  set offsets(offsets) {\n    const len = Math.min(this._slices, offsets.length);\n    for (let i = 0; i < len; i++) {\n      this._offsets[i] = offsets[i];\n    }\n  }\n  get offsets() {\n    return this._offsets;\n  }\n  /**\n   * The count of slices.\n   * @default 5\n   */\n  get slices() {\n    return this._slices;\n  }\n  set slices(value) {\n    if (this._slices === value)\n      return;\n    this._slices = value;\n    this._sizes = new Float32Array(value);\n    this._offsets = new Float32Array(value);\n    this.refresh();\n  }\n  /**\n   * The maximum offset amount of slices.\n   * @default 100\n   */\n  get offset() {\n    return this.uniforms.uOffset;\n  }\n  set offset(value) {\n    this.uniforms.uOffset = value;\n  }\n  /**\n   * A seed value for randomizing glitch effect.\n   * @default 0\n   */\n  get seed() {\n    return this.uniforms.uSeed;\n  }\n  set seed(value) {\n    this.uniforms.uSeed = value;\n  }\n  /**\n   * The fill mode of the space after the offset.\n   * @default FILL_MODES.TRANSPARENT\n   */\n  get fillMode() {\n    return this.uniforms.uFillMode;\n  }\n  set fillMode(value) {\n    this.uniforms.uFillMode = value;\n  }\n  /**\n   * The angle in degree of the offset of slices.\n   * @default 0\n   */\n  get direction() {\n    return this.uniforms.uDirection / DEG_TO_RAD;\n  }\n  set direction(value) {\n    this.uniforms.uDirection = value * DEG_TO_RAD;\n  }\n  /**\n   * Red channel offset.\n   * @default {x:0,y:0}\n   */\n  get red() {\n    return this.uniforms.uRed;\n  }\n  set red(value) {\n    if (Array.isArray(value)) {\n      value = { x: value[0], y: value[1] };\n    }\n    this.uniforms.uRed = value;\n  }\n  /**\n   * Green channel offset.\n   * @default {x:0,y:0}\n   */\n  get green() {\n    return this.uniforms.uGreen;\n  }\n  set green(value) {\n    if (Array.isArray(value)) {\n      value = { x: value[0], y: value[1] };\n    }\n    this.uniforms.uGreen = value;\n  }\n  /**\n   * Blue offset.\n   * @default {x:0,y:0}\n   */\n  get blue() {\n    return this.uniforms.uBlue;\n  }\n  set blue(value) {\n    if (Array.isArray(value)) {\n      value = { x: value[0], y: value[1] };\n    }\n    this.uniforms.uBlue = value;\n  }\n  /**\n   * Removes all references\n   */\n  destroy() {\n    this.texture?.destroy(true);\n    this.texture = this._canvas = this.red = this.green = this.blue = this._sizes = this._offsets = null;\n  }\n};\n/** Default constructor options. */\n__publicField(_GlitchFilter, \"defaults\", {\n  slices: 5,\n  offset: 100,\n  direction: 0,\n  fillMode: 0,\n  average: false,\n  seed: 0,\n  red: { x: 0, y: 0 },\n  green: { x: 0, y: 0 },\n  blue: { x: 0, y: 0 },\n  minSize: 8,\n  sampleSize: 512\n});\nlet GlitchFilter = _GlitchFilter;\n\nexport { GlitchFilter };\n//# sourceMappingURL=GlitchFilter.mjs.map\n","var source = \"struct GlitchUniforms {\\n  uSeed: f32,\\n  uDimensions: vec2<f32>,\\n  uAspect: f32,\\n  uFillMode: f32,\\n  uOffset: f32,\\n  uDirection: f32,\\n  uRed: vec2<f32>,\\n  uGreen: vec2<f32>,\\n  uBlue: vec2<f32>,\\n};\\n\\nstruct GlobalFilterUniforms {\\n  uInputSize:vec4<f32>,\\n  uInputPixel:vec4<f32>,\\n  uInputClamp:vec4<f32>,\\n  uOutputFrame:vec4<f32>,\\n  uGlobalFrame:vec4<f32>,\\n  uOutputTexture:vec4<f32>,\\n};\\n\\n@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;\\n\\n@group(0) @binding(1) var uTexture: texture_2d<f32>; \\n@group(0) @binding(2) var uSampler: sampler;\\n@group(1) @binding(0) var<uniform> glitchUniforms : GlitchUniforms;\\n@group(1) @binding(1) var uDisplacementMap: texture_2d<f32>; \\n@group(1) @binding(2) var uDisplacementSampler: sampler; \\n\\n@fragment\\nfn mainFragment(\\n  @builtin(position) position: vec4<f32>,\\n  @location(0) uv : vec2<f32>\\n) -> @location(0) vec4<f32> {\\n  let uSeed: f32 = glitchUniforms.uSeed;\\n  let uDimensions: vec2<f32> = glitchUniforms.uDimensions;\\n  let uAspect: f32 = glitchUniforms.uAspect;\\n  let uOffset: f32 = glitchUniforms.uOffset;\\n  let uDirection: f32 = glitchUniforms.uDirection;\\n  let uRed: vec2<f32> = glitchUniforms.uRed;\\n  let uGreen: vec2<f32> = glitchUniforms.uGreen;\\n  let uBlue: vec2<f32> = glitchUniforms.uBlue;\\n\\n  let uInputSize: vec4<f32> = gfu.uInputSize;\\n  let uInputClamp: vec4<f32> = gfu.uInputClamp;\\n\\n  var discarded: bool = false;\\n  var coord: vec2<f32> = (uv * uInputSize.xy) / uDimensions;\\n\\n    if (coord.x > 1.0 || coord.y > 1.0) {\\n      discarded = true;\\n    }\\n\\n    let sinDir: f32 = sin(uDirection);\\n    let cosDir: f32 = cos(uDirection);\\n\\n    let cx: f32 = coord.x - 0.5;\\n    let cy: f32 = (coord.y - 0.5) * uAspect;\\n    var ny: f32 = (-sinDir * cx + cosDir * cy) / uAspect + 0.5;\\n\\n    ny = select(select(ny, -ny, ny < 0.0), 2.0 - ny, ny > 1.0);\\n\\n    let dc: vec4<f32> = textureSample(uDisplacementMap, uDisplacementSampler, vec2<f32>(0.5, ny));\\n\\n    let displacement: f32 = (dc.r - dc.g) * (uOffset / uInputSize.x);\\n\\n    coord = uv + vec2<f32>(cosDir * displacement, sinDir * displacement * uAspect);\\n\\n    let fillMode: i32 = i32(glitchUniforms.uFillMode);\\n\\n    if (fillMode == CLAMP) {\\n      coord = clamp(coord, uInputClamp.xy, uInputClamp.zw);\\n    } else {\\n      if (coord.x > uInputClamp.z) {\\n        if (fillMode == TRANSPARENT) {\\n          discarded = true;\\n        } else if (fillMode == LOOP) {\\n          coord.x = coord.x - uInputClamp.z;\\n        } else if (fillMode == MIRROR) {\\n          coord.x = uInputClamp.z * 2.0 - coord.x;\\n        }\\n      } else if (coord.x < uInputClamp.x) {\\n        if (fillMode == TRANSPARENT) {\\n          discarded = true;\\n        } else if (fillMode == LOOP) {\\n          coord.x = coord.x + uInputClamp.z;\\n        } else if (fillMode == MIRROR) {\\n          coord.x = coord.x * -uInputClamp.z;\\n        }\\n      }\\n\\n      if (coord.y > uInputClamp.w) {\\n        if (fillMode == TRANSPARENT) {\\n          discarded = true;\\n        } else if (fillMode == LOOP) {\\n          coord.y = coord.y - uInputClamp.w;\\n        } else if (fillMode == MIRROR) {\\n          coord.y = uInputClamp.w * 2.0 - coord.y;\\n        }\\n      } else if (coord.y < uInputClamp.y) {\\n        if (fillMode == TRANSPARENT) {\\n          discarded = true;\\n        } else if (fillMode == LOOP) {\\n          coord.y = coord.y + uInputClamp.w;\\n        } else if (fillMode == MIRROR) {\\n          coord.y = coord.y * -uInputClamp.w;\\n        }\\n      }\\n    }\\n\\n    let seedR: f32 = 1.0 - uSeed * 0.4;\\n    let seedG: f32 = 1.0 - uSeed * 0.3;\\n    let seedB: f32 = 1.0 - uSeed * 0.2;\\n\\n    let offsetR: vec2<f32> = vec2(uRed.x * seedR / uInputSize.x, uRed.y * seedR / uInputSize.y);\\n    let offsetG: vec2<f32> = vec2(uGreen.x * seedG / uInputSize.x, uGreen.y * seedG / uInputSize.y);\\n    let offsetB: vec2<f32> = vec2(uBlue.x * seedB / uInputSize.x, uBlue.y * seedB / uInputSize.y);\\n\\n    let r = textureSample(uTexture, uSampler, coord + offsetR).r;\\n    let g = textureSample(uTexture, uSampler, coord + offsetG).g;\\n    let b = textureSample(uTexture, uSampler, coord + offsetB).b;\\n    let a = textureSample(uTexture, uSampler, coord).a;\\n\\n    return select(vec4<f32>(r, g, b, a), vec4<f32>(0.0,0.0,0.0,0.0), discarded);\\n}\\n\\nconst TRANSPARENT: i32 = 0;\\nconst ORIGINAL: i32 = 1;\\nconst LOOP: i32 = 2;\\nconst CLAMP: i32 = 3;\\nconst MIRROR: i32 = 4;\";\n\nexport { source as default };\n//# sourceMappingURL=glitch.mjs.map\n","var fragment = \"precision highp float;\\nin vec2 vTextureCoord;\\nout vec4 finalColor;\\n\\nuniform sampler2D uTexture;\\nuniform vec2 uStrength;\\nuniform vec3 uColor;\\nuniform float uKnockout;\\nuniform float uAlpha;\\n\\nuniform vec4 uInputSize;\\nuniform vec4 uInputClamp;\\n\\nconst float PI = 3.14159265358979323846264;\\n\\n// Hard-assignment of DIST and ANGLE_STEP_SIZE instead of using uDistance and uQuality to allow them to be use on GLSL loop conditions\\nconst float DIST = __DIST__;\\nconst float ANGLE_STEP_SIZE = min(__ANGLE_STEP_SIZE__, PI * 2.);\\nconst float ANGLE_STEP_NUM = ceil(PI * 2. / ANGLE_STEP_SIZE);\\nconst float MAX_TOTAL_ALPHA = ANGLE_STEP_NUM * DIST * (DIST + 1.) / 2.;\\n\\nvoid main(void) {\\n    vec2 px = vec2(1.) / uInputSize.xy;\\n\\n    float totalAlpha = 0.;\\n\\n    vec2 direction;\\n    vec2 displaced;\\n    vec4 curColor;\\n\\n    for (float angle = 0.; angle < PI * 2.; angle += ANGLE_STEP_SIZE) {\\n      direction = vec2(cos(angle), sin(angle)) * px;\\n\\n      for (float curDistance = 0.; curDistance < DIST; curDistance++) {\\n          displaced = clamp(vTextureCoord + direction * (curDistance + 1.), uInputClamp.xy, uInputClamp.zw);\\n          curColor = texture(uTexture, displaced);\\n          totalAlpha += (DIST - curDistance) * curColor.a;\\n      }\\n    }\\n    \\n    curColor = texture(uTexture, vTextureCoord);\\n\\n    vec4 glowColor = vec4(uColor, uAlpha);\\n    bool knockout = uKnockout > .5;\\n    float innerStrength = uStrength[0];\\n    float outerStrength = uStrength[1];\\n\\n    float alphaRatio = totalAlpha / MAX_TOTAL_ALPHA;\\n    float innerGlowAlpha = (1. - alphaRatio) * innerStrength * curColor.a * uAlpha;\\n    float innerGlowStrength = min(1., innerGlowAlpha);\\n    \\n    vec4 innerColor = mix(curColor, glowColor, innerGlowStrength);\\n    float outerGlowAlpha = alphaRatio * outerStrength * (1. - curColor.a) * uAlpha;\\n    float outerGlowStrength = min(1. - innerColor.a, outerGlowAlpha);\\n    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;\\n\\n    if (knockout) {\\n      float resultAlpha = outerGlowAlpha + innerGlowAlpha;\\n      finalColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);\\n    }\\n    else {\\n      finalColor = innerColor + outerGlowColor;\\n    }\\n}\\n\";\n\nexport { fragment as default };\n//# sourceMappingURL=glow2.mjs.map\n","import { Filter, GpuProgram, GlProgram, Color } from 'pixi.js';\nimport vertex from '../defaults/default.mjs';\nimport wgslVertex from '../defaults/default2.mjs';\nimport fragment from './glow2.mjs';\nimport source from './glow.mjs';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _GlowFilter = class _GlowFilter extends Filter {\n  /**\n   * @param options - Options for the GlowFilter constructor.\n   */\n  constructor(options) {\n    options = { ..._GlowFilter.DEFAULT_OPTIONS, ...options };\n    const distance = options.distance ?? 10;\n    const quality = options.quality ?? 0.1;\n    const gpuProgram = GpuProgram.from({\n      vertex: {\n        source: wgslVertex,\n        entryPoint: \"mainVertex\"\n      },\n      fragment: {\n        source,\n        entryPoint: \"mainFragment\"\n      }\n    });\n    const glProgram = GlProgram.from({\n      vertex,\n      fragment: fragment.replace(/__ANGLE_STEP_SIZE__/gi, `${(1 / quality / distance).toFixed(7)}`).replace(/__DIST__/gi, `${distance.toFixed(0)}.0`),\n      name: \"glow-filter\"\n    });\n    super({\n      gpuProgram,\n      glProgram,\n      resources: {\n        glowUniforms: {\n          uDistance: { value: distance, type: \"f32\" },\n          uStrength: { value: [options.innerStrength, options.outerStrength], type: \"vec2<f32>\" },\n          uColor: { value: new Float32Array(3), type: \"vec3<f32>\" },\n          uAlpha: { value: options.alpha, type: \"f32\" },\n          uQuality: { value: quality, type: \"f32\" },\n          uKnockout: { value: options?.knockout ?? false ? 1 : 0, type: \"f32\" }\n        }\n      },\n      padding: distance\n    });\n    __publicField(this, \"uniforms\");\n    __publicField(this, \"_color\");\n    this.uniforms = this.resources.glowUniforms.uniforms;\n    this._color = new Color();\n    this.color = options.color ?? 16777215;\n  }\n  /**\n   * Only draw the glow, not the texture itself\n   * @default false\n   */\n  get distance() {\n    return this.uniforms.uDistance;\n  }\n  set distance(value) {\n    this.uniforms.uDistance = this.padding = value;\n  }\n  /**\n  * The strength of the glow inward from the edge of the sprite.\n  * @default 0\n  */\n  get innerStrength() {\n    return this.uniforms.uStrength[0];\n  }\n  set innerStrength(value) {\n    this.uniforms.uStrength[0] = value;\n  }\n  /**\n  * The strength of the glow outward from the edge of the sprite.\n  * @default 4\n  */\n  get outerStrength() {\n    return this.uniforms.uStrength[1];\n  }\n  set outerStrength(value) {\n    this.uniforms.uStrength[1] = value;\n  }\n  /**\n  * The color of the glow.\n  * @default 0xFFFFFF\n  */\n  get color() {\n    return this._color.value;\n  }\n  set color(value) {\n    this._color.setValue(value);\n    const [r, g, b] = this._color.toArray();\n    this.uniforms.uColor[0] = r;\n    this.uniforms.uColor[1] = g;\n    this.uniforms.uColor[2] = b;\n  }\n  /**\n  * The alpha of the glow\n  * @default 1\n  */\n  get alpha() {\n    return this.uniforms.uAlpha;\n  }\n  set alpha(value) {\n    this.uniforms.uAlpha = value;\n  }\n  /**\n  * A number between 0 and 1 that describes the quality of the glow. The higher the number the less performant\n  * @default 0.1\n  */\n  get quality() {\n    return this.uniforms.uQuality;\n  }\n  set quality(value) {\n    this.uniforms.uQuality = value;\n  }\n  /**\n  * Only draw the glow, not the texture itself\n  * @default false\n  */\n  get knockout() {\n    return this.uniforms.uKnockout === 1;\n  }\n  set knockout(value) {\n    this.uniforms.uKnockout = value ? 1 : 0;\n  }\n};\n/** Default values for options. */\n__publicField(_GlowFilter, \"DEFAULT_OPTIONS\", {\n  distance: 10,\n  outerStrength: 4,\n  innerStrength: 0,\n  color: 16777215,\n  alpha: 1,\n  quality: 0.1,\n  knockout: false\n});\nlet GlowFilter = _GlowFilter;\n\nexport { GlowFilter };\n//# sourceMappingURL=GlowFilter.mjs.map\n","var source = \"struct GlowUniforms {\\n  uDistance: f32,\\n  uStrength: vec2<f32>,\\n  uColor: vec3<f32>,\\n  uAlpha: f32,\\n  uQuality: f32,\\n  uKnockout: f32,\\n};\\n\\nstruct GlobalFilterUniforms {\\n  uInputSize:vec4<f32>,\\n  uInputPixel:vec4<f32>,\\n  uInputClamp:vec4<f32>,\\n  uOutputFrame:vec4<f32>,\\n  uGlobalFrame:vec4<f32>,\\n  uOutputTexture:vec4<f32>,\\n};\\n\\n@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;\\n\\n@group(0) @binding(1) var uTexture: texture_2d<f32>; \\n@group(0) @binding(2) var uSampler: sampler;\\n@group(1) @binding(0) var<uniform> glowUniforms : GlowUniforms;\\n\\n@fragment\\nfn mainFragment(\\n  @builtin(position) position: vec4<f32>,\\n  @location(0) uv : vec2<f32>\\n) -> @location(0) vec4<f32> {\\n  let quality = glowUniforms.uQuality;\\n  let distance = glowUniforms.uDistance;\\n\\n  let dist: f32 = glowUniforms.uDistance;\\n  let angleStepSize: f32 = min(1. / quality / distance, PI * 2.0);\\n  let angleStepNum: f32 = ceil(PI * 2.0 / angleStepSize);\\n\\n  let px: vec2<f32> = vec2<f32>(1.0 / gfu.uInputSize.xy);\\n\\n  var totalAlpha: f32 = 0.0;\\n\\n  var direction: vec2<f32>;\\n  var displaced: vec2<f32>;\\n  var curColor: vec4<f32>;\\n\\n  for (var angle = 0.0; angle < PI * 2.0; angle += angleStepSize) {\\n    direction = vec2<f32>(cos(angle), sin(angle)) * px;\\n    for (var curDistance = 0.0; curDistance < dist; curDistance+=1) {\\n      displaced = vec2<f32>(clamp(uv + direction * (curDistance + 1.0), gfu.uInputClamp.xy, gfu.uInputClamp.zw));\\n      curColor = textureSample(uTexture, uSampler, displaced);\\n      totalAlpha += (dist - curDistance) * curColor.a;\\n    }\\n  }\\n    \\n  curColor = textureSample(uTexture, uSampler, uv);\\n\\n  let glowColorRGB = glowUniforms.uColor;\\n  let glowAlpha = glowUniforms.uAlpha;\\n  let glowColor = vec4<f32>(glowColorRGB, glowAlpha);\\n  let knockout: bool = glowUniforms.uKnockout > 0.5;\\n  let innerStrength = glowUniforms.uStrength[0];\\n  let outerStrength = glowUniforms.uStrength[1];\\n\\n  let alphaRatio: f32 = (totalAlpha / (angleStepNum * dist * (dist + 1.0) / 2.0));\\n  let innerGlowAlpha: f32 = (1.0 - alphaRatio) * innerStrength * curColor.a * glowAlpha;\\n  let innerGlowStrength: f32 = min(1.0, innerGlowAlpha);\\n  \\n  let innerColor: vec4<f32> = mix(curColor, glowColor, innerGlowStrength);\\n  let outerGlowAlpha: f32 = alphaRatio * outerStrength * (1. - curColor.a) * glowAlpha;\\n  let outerGlowStrength: f32 = min(1.0 - innerColor.a, outerGlowAlpha);\\n  let outerGlowColor: vec4<f32> = outerGlowStrength * glowColor.rgba;\\n  \\n  if (knockout) {\\n    let resultAlpha: f32 = outerGlowAlpha + innerGlowAlpha;\\n    return vec4<f32>(glowColor.rgb * resultAlpha, resultAlpha);\\n  }\\n  else {\\n    return innerColor + outerGlowColor;\\n  }\\n}\\n\\nconst PI: f32 = 3.14159265358979323846264;\";\n\nexport { source as default };\n//# sourceMappingURL=glow.mjs.map\n","var fragment = \"precision highp float;\\nin vec2 vTextureCoord;\\nout vec4 finalColor;\\n\\nuniform sampler2D uTexture;\\nuniform vec2 uDimensions;\\nuniform float uParallel;\\nuniform vec2 uLight;\\nuniform float uAspect;\\nuniform float uTime;\\nuniform vec3 uRay;\\n\\nuniform vec4 uInputSize;\\n\\n${PERLIN}\\n\\nvoid main(void) {\\n    vec2 uDimensions = uDimensions;\\n    bool uParallel = uParallel > 0.5;\\n    vec2 uLight = uLight;\\n    float uAspect = uAspect;\\n\\n    vec2 coord = vTextureCoord * uInputSize.xy / uDimensions;\\n\\n    float d;\\n\\n    if (uParallel) {\\n        float _cos = uLight.x;\\n        float _sin = uLight.y;\\n        d = (_cos * coord.x) + (_sin * coord.y * uAspect);\\n    } else {\\n        float dx = coord.x - uLight.x / uDimensions.x;\\n        float dy = (coord.y - uLight.y / uDimensions.y) * uAspect;\\n        float dis = sqrt(dx * dx + dy * dy) + 0.00001;\\n        d = dy / dis;\\n    }\\n\\n    float uTime = uTime;\\n    vec3 uRay = uRay;\\n\\n    float gain = uRay[0];\\n    float lacunarity = uRay[1];\\n    float alpha = uRay[2];\\n\\n    vec3 dir = vec3(d, d, 0.0);\\n    float noise = turb(dir + vec3(uTime, 0.0, 62.1 + uTime) * 0.05, vec3(480.0, 320.0, 480.0), lacunarity, gain);\\n    noise = mix(noise, 0.0, 0.3);\\n    //fade vertically.\\n    vec4 mist = vec4(vec3(noise), 1.0) * (1.0 - coord.y);\\n    mist.a = 1.0;\\n    // apply user alpha\\n    mist *= alpha;\\n\\n    finalColor = texture(uTexture, vTextureCoord) + mist;\\n}\\n\";\n\nexport { fragment as default };\n//# sourceMappingURL=god-ray.mjs.map\n","import { Filter, GpuProgram, GlProgram, DEG_TO_RAD } from 'pixi.js';\nimport vertex from '../defaults/default.mjs';\nimport wgslVertex from '../defaults/default2.mjs';\nimport fragment from './god-ray.mjs';\nimport source from './god-ray2.mjs';\nimport perlin from './perlin2.mjs';\nimport sourcePerlin from './perlin.mjs';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _GodrayFilter = class _GodrayFilter extends Filter {\n  /**\n   * @param options - Options for the GodrayFilter constructor.\n   */\n  constructor(options) {\n    options = { ..._GodrayFilter.DEFAULT_OPTIONS, ...options };\n    const gpuProgram = GpuProgram.from({\n      vertex: {\n        source: wgslVertex,\n        entryPoint: \"mainVertex\"\n      },\n      fragment: {\n        source: source.replace(\"${PERLIN}\", sourcePerlin),\n        entryPoint: \"mainFragment\"\n      }\n    });\n    const glProgram = GlProgram.from({\n      vertex,\n      fragment: fragment.replace(\"${PERLIN}\", perlin),\n      name: \"god-ray-filter\"\n    });\n    super({\n      gpuProgram,\n      glProgram,\n      resources: {\n        godrayUniforms: {\n          uLight: { value: new Float32Array(2), type: \"vec2<f32>\" },\n          uParallel: { value: 0, type: \"f32\" },\n          uAspect: { value: 0, type: \"f32\" },\n          uTime: { value: options.time, type: \"f32\" },\n          uRay: { value: new Float32Array(3), type: \"vec3<f32>\" },\n          uDimensions: { value: new Float32Array(2), type: \"vec2<f32>\" }\n        }\n      }\n    });\n    __publicField(this, \"uniforms\");\n    /**\n     * The current time position\n     * @default 0\n     */\n    __publicField(this, \"time\", 0);\n    __publicField(this, \"_angleLight\", [0, 0]);\n    __publicField(this, \"_angle\", 0);\n    __publicField(this, \"_center\");\n    this.uniforms = this.resources.godrayUniforms.uniforms;\n    Object.assign(this, options);\n  }\n  /**\n   * Override existing apply method in Filter\n   * @override\n   * @ignore\n   */\n  apply(filterManager, input, output, clearMode) {\n    const width = input.frame.width;\n    const height = input.frame.height;\n    this.uniforms.uLight[0] = this.parallel ? this._angleLight[0] : this._center.x;\n    this.uniforms.uLight[1] = this.parallel ? this._angleLight[1] : this._center.y;\n    this.uniforms.uDimensions[0] = width;\n    this.uniforms.uDimensions[1] = height;\n    this.uniforms.uAspect = height / width;\n    this.uniforms.uTime = this.time;\n    filterManager.applyFilter(this, input, output, clearMode);\n  }\n  /**\n   * The angle/light-source of the rays in degrees. For instance,\n   * a value of 0 is vertical rays, values of 90 or -90 produce horizontal rays\n   * @default 30\n   */\n  get angle() {\n    return this._angle;\n  }\n  set angle(value) {\n    this._angle = value;\n    const radians = value * DEG_TO_RAD;\n    this._angleLight[0] = Math.cos(radians);\n    this._angleLight[1] = Math.sin(radians);\n  }\n  /**\n   * `true` if light rays are parallel (uses angle), `false` to use the focal `center` point\n   * @default true\n   */\n  get parallel() {\n    return this.uniforms.uParallel > 0.5;\n  }\n  set parallel(value) {\n    this.uniforms.uParallel = value ? 1 : 0;\n  }\n  /**\n   * Focal point for non-parallel rays, to use this `parallel` must be set to `false`.\n   * @default {x:0,y:0}\n   */\n  get center() {\n    return this._center;\n  }\n  set center(value) {\n    if (Array.isArray(value)) {\n      value = { x: value[0], y: value[1] };\n    }\n    this._center = value;\n  }\n  /**\n   * Focal point for non-parallel rays on the `x` axis, to use this `parallel` must be set to `false`.\n   * @default 0\n   */\n  get centerX() {\n    return this.center.x;\n  }\n  set centerX(value) {\n    this.center.x = value;\n  }\n  /**\n   * Focal point for non-parallel rays on the `y` axis, to use this `parallel` must be set to `false`.\n   * @default 0\n   */\n  get centerY() {\n    return this.center.y;\n  }\n  set centerY(value) {\n    this.center.y = value;\n  }\n  /**\n   * General intensity of the effect. A value closer to 1 will produce a more intense effect,\n   * where a value closer to 0 will produce a subtler effect\n   * @default 0.5\n   */\n  get gain() {\n    return this.uniforms.uRay[0];\n  }\n  set gain(value) {\n    this.uniforms.uRay[0] = value;\n  }\n  /**\n   * The density of the fractal noise.\n   * A higher amount produces more rays and a smaller amount produces fewer waves\n   * @default 2.5\n   */\n  get lacunarity() {\n    return this.uniforms.uRay[1];\n  }\n  set lacunarity(value) {\n    this.uniforms.uRay[1] = value;\n  }\n  /**\n   * The alpha (opacity) of the rays.  0 is fully transparent, 1 is fully opaque.\n   * @default 1\n   */\n  get alpha() {\n    return this.uniforms.uRay[2];\n  }\n  set alpha(value) {\n    this.uniforms.uRay[2] = value;\n  }\n};\n/** Default values for options. */\n__publicField(_GodrayFilter, \"DEFAULT_OPTIONS\", {\n  angle: 30,\n  gain: 0.5,\n  lacunarity: 2.5,\n  parallel: true,\n  time: 0,\n  center: { x: 0, y: 0 },\n  alpha: 1\n});\nlet GodrayFilter = _GodrayFilter;\n\nexport { GodrayFilter };\n//# sourceMappingURL=GodrayFilter.mjs.map\n","var source = \"struct GodrayUniforms {\\n  uLight: vec2<f32>,\\n  uParallel: f32,\\n  uAspect: f32,\\n  uTime: f32,\\n  uRay: vec3<f32>,\\n  uDimensions: vec2<f32>,\\n};\\n\\nstruct GlobalFilterUniforms {\\n  uInputSize:vec4<f32>,\\n  uInputPixel:vec4<f32>,\\n  uInputClamp:vec4<f32>,\\n  uOutputFrame:vec4<f32>,\\n  uGlobalFrame:vec4<f32>,\\n  uOutputTexture:vec4<f32>,\\n};\\n\\n@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;\\n\\n@group(0) @binding(1) var uTexture: texture_2d<f32>; \\n@group(0) @binding(2) var uSampler: sampler;\\n@group(1) @binding(0) var<uniform> godrayUniforms : GodrayUniforms;\\n\\n@fragment\\nfn mainFragment(\\n  @builtin(position) position: vec4<f32>,\\n  @location(0) uv : vec2<f32>\\n) -> @location(0) vec4<f32> {\\n  let uDimensions: vec2<f32> = godrayUniforms.uDimensions;\\n  let uParallel: bool = godrayUniforms.uParallel > 0.5;\\n  let uLight: vec2<f32> = godrayUniforms.uLight;\\n  let uAspect: f32 = godrayUniforms.uAspect;\\n\\n  let coord: vec2<f32> = uv * gfu.uInputSize.xy / uDimensions;\\n\\n  var d: f32;\\n\\n  if (uParallel) {\\n    let _cos: f32 = uLight.x;\\n    let _sin: f32 = uLight.y;\\n    d = (_cos * coord.x) + (_sin * coord.y * uAspect);\\n  } else {\\n    let dx: f32 = coord.x - uLight.x / uDimensions.x;\\n    let dy: f32 = (coord.y - uLight.y / uDimensions.y) * uAspect;\\n    let dis: f32 = sqrt(dx * dx + dy * dy) + 0.00001;\\n    d = dy / dis;\\n  }\\n\\n  let uTime: f32 = godrayUniforms.uTime;\\n  let uRay: vec3<f32> = godrayUniforms.uRay;\\n  \\n  let gain = uRay[0];\\n  let lacunarity = uRay[1];\\n  let alpha = uRay[2];\\n\\n  let dir: vec3<f32> = vec3<f32>(d, d, 0.0);\\n  var noise: f32 = turb(dir + vec3<f32>(uTime, 0.0, 62.1 + uTime) * 0.05, vec3<f32>(480.0, 320.0, 480.0), lacunarity, gain);\\n  noise = mix(noise, 0.0, 0.3);\\n  //fade vertically.\\n  var mist: vec4<f32> = vec4<f32>(vec3<f32>(noise), 1.0) * (1.0 - coord.y);\\n  mist.a = 1.0;\\n  // apply user alpha\\n  mist *= alpha;\\n  return textureSample(uTexture, uSampler, uv) + mist;\\n}\\n\\n${PERLIN}\";\n\nexport { source as default };\n//# sourceMappingURL=god-ray2.mjs.map\n","var sourcePerlin = \"// Taken from https://gist.github.com/munrocket/236ed5ba7e409b8bdf1ff6eca5dcdc39\\n\\nfn moduloVec3(x: vec3<f32>, y: vec3<f32>) -> vec3<f32>\\n{\\n  return x - y * floor(x/y);\\n}\\nfn mod289Vec3(x: vec3<f32>) -> vec3<f32>\\n{\\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\\n}\\nfn mod289Vec4(x: vec4<f32>) -> vec4<f32>\\n{\\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\\n}\\nfn permute4(x: vec4<f32>) -> vec4<f32>\\n{\\n    return mod289Vec4(((x * 34.0) + 1.0) * x);\\n}\\nfn taylorInvSqrt(r: vec4<f32>) -> vec4<f32>\\n{\\n    return 1.79284291400159 - 0.85373472095314 * r;\\n}\\nfn fade3(t: vec3<f32>) -> vec3<f32>\\n{\\n    return t * t * t * (t * (t * 6.0 - 15.0) + 10.0);\\n}\\nfn fade2(t: vec2<f32>) -> vec2<f32> { return t * t * t * (t * (t * 6. - 15.) + 10.); }\\n\\nfn perlinNoise2(P: vec2<f32>) -> f32 {\\n  var Pi: vec4<f32> = floor(P.xyxy) + vec4<f32>(0., 0., 1., 1.);\\n  let Pf = fract(P.xyxy) - vec4<f32>(0., 0., 1., 1.);\\n  Pi = Pi % vec4<f32>(289.); // To avoid truncation effects in permutation\\n  let ix = Pi.xzxz;\\n  let iy = Pi.yyww;\\n  let fx = Pf.xzxz;\\n  let fy = Pf.yyww;\\n  let i = permute4(permute4(ix) + iy);\\n  var gx: vec4<f32> = 2. * fract(i * 0.0243902439) - 1.; // 1/41 = 0.024...\\n  let gy = abs(gx) - 0.5;\\n  let tx = floor(gx + 0.5);\\n  gx = gx - tx;\\n  var g00: vec2<f32> = vec2<f32>(gx.x, gy.x);\\n  var g10: vec2<f32> = vec2<f32>(gx.y, gy.y);\\n  var g01: vec2<f32> = vec2<f32>(gx.z, gy.z);\\n  var g11: vec2<f32> = vec2<f32>(gx.w, gy.w);\\n  let norm = 1.79284291400159 - 0.85373472095314 *\\n      vec4<f32>(dot(g00, g00), dot(g01, g01), dot(g10, g10), dot(g11, g11));\\n  g00 = g00 * norm.x;\\n  g01 = g01 * norm.y;\\n  g10 = g10 * norm.z;\\n  g11 = g11 * norm.w;\\n  let n00 = dot(g00, vec2<f32>(fx.x, fy.x));\\n  let n10 = dot(g10, vec2<f32>(fx.y, fy.y));\\n  let n01 = dot(g01, vec2<f32>(fx.z, fy.z));\\n  let n11 = dot(g11, vec2<f32>(fx.w, fy.w));\\n  let fade_xy = fade2(Pf.xy);\\n  let n_x = mix(vec2<f32>(n00, n01), vec2<f32>(n10, n11), vec2<f32>(fade_xy.x));\\n  let n_xy = mix(n_x.x, n_x.y, fade_xy.y);\\n  return 2.3 * n_xy;\\n}\\n\\n// Classic Perlin noise, periodic variant\\nfn perlinNoise3(P: vec3<f32>, rep: vec3<f32>) -> f32\\n{\\n    var Pi0: vec3<f32> = moduloVec3(floor(P), rep); // Integer part, modulo period\\n    var Pi1: vec3<f32> = moduloVec3(Pi0 + vec3<f32>(1.0), rep); // Integer part + 1, mod period\\n    Pi0 = mod289Vec3(Pi0);\\n    Pi1 = mod289Vec3(Pi1);\\n    let Pf0: vec3<f32> = fract(P); // Fractional part for interpolation\\n    let Pf1: vec3<f32> = Pf0 - vec3<f32>(1.0); // Fractional part - 1.0\\n    let ix: vec4<f32> = vec4<f32>(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\\n    let iy: vec4<f32> = vec4<f32>(Pi0.yy, Pi1.yy);\\n    let iz0: vec4<f32> = Pi0.zzzz;\\n    let iz1: vec4<f32> = Pi1.zzzz;\\n    let ixy: vec4<f32> = permute4(permute4(ix) + iy);\\n    let ixy0: vec4<f32> = permute4(ixy + iz0);\\n    let ixy1: vec4<f32> = permute4(ixy + iz1);\\n    var gx0: vec4<f32> = ixy0 * (1.0 / 7.0);\\n    var gy0: vec4<f32> = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\\n    gx0 = fract(gx0);\\n    let gz0: vec4<f32> = vec4<f32>(0.5) - abs(gx0) - abs(gy0);\\n    let sz0: vec4<f32> = step(gz0, vec4<f32>(0.0));\\n    gx0 -= sz0 * (step(vec4<f32>(0.0), gx0) - 0.5);\\n    gy0 -= sz0 * (step(vec4<f32>(0.0), gy0) - 0.5);\\n    var gx1: vec4<f32> = ixy1 * (1.0 / 7.0);\\n    var gy1: vec4<f32> = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\\n    gx1 = fract(gx1);\\n    let gz1: vec4<f32> = vec4<f32>(0.5) - abs(gx1) - abs(gy1);\\n    let sz1: vec4<f32> = step(gz1, vec4<f32>(0.0));\\n    gx1 -= sz1 * (step(vec4<f32>(0.0), gx1) - 0.5);\\n    gy1 -= sz1 * (step(vec4<f32>(0.0), gy1) - 0.5);\\n    var g000: vec3<f32> = vec3<f32>(gx0.x, gy0.x, gz0.x);\\n    var g100: vec3<f32> = vec3<f32>(gx0.y, gy0.y, gz0.y);\\n    var g010: vec3<f32> = vec3<f32>(gx0.z, gy0.z, gz0.z);\\n    var g110: vec3<f32> = vec3<f32>(gx0.w, gy0.w, gz0.w);\\n    var g001: vec3<f32> = vec3<f32>(gx1.x, gy1.x, gz1.x);\\n    var g101: vec3<f32> = vec3<f32>(gx1.y, gy1.y, gz1.y);\\n    var g011: vec3<f32> = vec3<f32>(gx1.z, gy1.z, gz1.z);\\n    var g111: vec3<f32> = vec3<f32>(gx1.w, gy1.w, gz1.w);\\n    let norm0: vec4<f32> = taylorInvSqrt(vec4<f32>(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\\n    g000 *= norm0.x;\\n    g010 *= norm0.y;\\n    g100 *= norm0.z;\\n    g110 *= norm0.w;\\n    let norm1: vec4<f32> = taylorInvSqrt(vec4<f32>(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\\n    g001 *= norm1.x;\\n    g011 *= norm1.y;\\n    g101 *= norm1.z;\\n    g111 *= norm1.w;\\n    let n000: f32 = dot(g000, Pf0);\\n    let n100: f32 = dot(g100, vec3<f32>(Pf1.x, Pf0.yz));\\n    let n010: f32 = dot(g010, vec3<f32>(Pf0.x, Pf1.y, Pf0.z));\\n    let n110: f32 = dot(g110, vec3<f32>(Pf1.xy, Pf0.z));\\n    let n001: f32 = dot(g001, vec3<f32>(Pf0.xy, Pf1.z));\\n    let n101: f32 = dot(g101, vec3<f32>(Pf1.x, Pf0.y, Pf1.z));\\n    let n011: f32 = dot(g011, vec3<f32>(Pf0.x, Pf1.yz));\\n    let n111: f32 = dot(g111, Pf1);\\n    let fade_xyz: vec3<f32> = fade3(Pf0);\\n    let n_z: vec4<f32> = mix(vec4<f32>(n000, n100, n010, n110), vec4<f32>(n001, n101, n011, n111), fade_xyz.z);\\n    let n_yz: vec2<f32> = mix(n_z.xy, n_z.zw, fade_xyz.y);\\n    let n_xyz: f32 = mix(n_yz.x, n_yz.y, fade_xyz.x);\\n    return 2.2 * n_xyz;\\n}\\nfn turb(P: vec3<f32>, rep: vec3<f32>, lacunarity: f32, gain: f32) -> f32\\n{\\n    var sum: f32 = 0.0;\\n    var sc: f32 = 1.0;\\n    var totalgain: f32 = 1.0;\\n    for (var i = 0.0; i < 6.0; i += 1)\\n    {\\n        sum += totalgain * perlinNoise3(P * sc, rep);\\n        sc *= lacunarity;\\n        totalgain *= gain;\\n    }\\n    return abs(sum);\\n}\";\n\nexport { sourcePerlin as default };\n//# sourceMappingURL=perlin.mjs.map\n","var perlin = \"vec3 mod289(vec3 x)\\n{\\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\\n}\\nvec4 mod289(vec4 x)\\n{\\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\\n}\\nvec4 permute(vec4 x)\\n{\\n    return mod289(((x * 34.0) + 1.0) * x);\\n}\\nvec4 taylorInvSqrt(vec4 r)\\n{\\n    return 1.79284291400159 - 0.85373472095314 * r;\\n}\\nvec3 fade(vec3 t)\\n{\\n    return t * t * t * (t * (t * 6.0 - 15.0) + 10.0);\\n}\\n// Classic Perlin noise, periodic variant\\nfloat pnoise(vec3 P, vec3 rep)\\n{\\n    vec3 Pi0 = mod(floor(P), rep); // Integer part, modulo period\\n    vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); // Integer part + 1, mod period\\n    Pi0 = mod289(Pi0);\\n    Pi1 = mod289(Pi1);\\n    vec3 Pf0 = fract(P); // Fractional part for interpolation\\n    vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\\n    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\\n    vec4 iy = vec4(Pi0.yy, Pi1.yy);\\n    vec4 iz0 = Pi0.zzzz;\\n    vec4 iz1 = Pi1.zzzz;\\n    vec4 ixy = permute(permute(ix) + iy);\\n    vec4 ixy0 = permute(ixy + iz0);\\n    vec4 ixy1 = permute(ixy + iz1);\\n    vec4 gx0 = ixy0 * (1.0 / 7.0);\\n    vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\\n    gx0 = fract(gx0);\\n    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\\n    vec4 sz0 = step(gz0, vec4(0.0));\\n    gx0 -= sz0 * (step(0.0, gx0) - 0.5);\\n    gy0 -= sz0 * (step(0.0, gy0) - 0.5);\\n    vec4 gx1 = ixy1 * (1.0 / 7.0);\\n    vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\\n    gx1 = fract(gx1);\\n    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\\n    vec4 sz1 = step(gz1, vec4(0.0));\\n    gx1 -= sz1 * (step(0.0, gx1) - 0.5);\\n    gy1 -= sz1 * (step(0.0, gy1) - 0.5);\\n    vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\\n    vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\\n    vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\\n    vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\\n    vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\\n    vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\\n    vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\\n    vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\\n    vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\\n    g000 *= norm0.x;\\n    g010 *= norm0.y;\\n    g100 *= norm0.z;\\n    g110 *= norm0.w;\\n    vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\\n    g001 *= norm1.x;\\n    g011 *= norm1.y;\\n    g101 *= norm1.z;\\n    g111 *= norm1.w;\\n    float n000 = dot(g000, Pf0);\\n    float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\\n    float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\\n    float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\\n    float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\\n    float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\\n    float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\\n    float n111 = dot(g111, Pf1);\\n    vec3 fade_xyz = fade(Pf0);\\n    vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\\n    vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\\n    float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\\n    return 2.2 * n_xyz;\\n}\\nfloat turb(vec3 P, vec3 rep, float lacunarity, float gain)\\n{\\n    float sum = 0.0;\\n    float sc = 1.0;\\n    float totalgain = 1.0;\\n    for (float i = 0.0; i < 6.0; i++)\\n    {\\n        sum += totalgain * pnoise(P * sc, rep);\\n        sc *= lacunarity;\\n        totalgain *= gain;\\n    }\\n    return abs(sum);\\n}\\n\";\n\nexport { perlin as default };\n//# sourceMappingURL=perlin2.mjs.map\n","import { Filter, GpuProgram, GlProgram } from 'pixi.js';\nimport vertex from '../defaults/default.mjs';\nimport wgslVertex from '../defaults/default2.mjs';\nimport fragment from './grayscale.mjs';\nimport source from './grayscale2.mjs';\n\nclass GrayscaleFilter extends Filter {\n  constructor() {\n    const gpuProgram = GpuProgram.from({\n      vertex: {\n        source: wgslVertex,\n        entryPoint: \"mainVertex\"\n      },\n      fragment: {\n        source,\n        entryPoint: \"mainFragment\"\n      }\n    });\n    const glProgram = GlProgram.from({\n      vertex,\n      fragment,\n      name: \"grayscale-filter\"\n    });\n    super({\n      gpuProgram,\n      glProgram,\n      resources: {}\n    });\n  }\n}\n\nexport { GrayscaleFilter };\n//# sourceMappingURL=GrayscaleFilter.mjs.map\n","var fragment = \"in vec2 vTextureCoord;\\nout vec4 finalColor;\\n\\nuniform sampler2D uTexture;\\nuniform vec3 uHsl;\\nuniform float uAlpha;\\nuniform float uColorize;\\n\\n// https://en.wikipedia.org/wiki/Luma_(video)\\nconst vec3 weight = vec3(0.299, 0.587, 0.114);\\n\\nfloat getWeightedAverage(vec3 rgb) {\\n    return rgb.r * weight.r + rgb.g * weight.g + rgb.b * weight.b;\\n}\\n\\n// https://gist.github.com/mairod/a75e7b44f68110e1576d77419d608786?permalink_comment_id=3195243#gistcomment-3195243\\nconst vec3 k = vec3(0.57735, 0.57735, 0.57735);\\n\\nvec3 hueShift(vec3 color, float angle) {\\n    float cosAngle = cos(angle);\\n    return vec3(\\n    color * cosAngle +\\n    cross(k, color) * sin(angle) +\\n    k * dot(k, color) * (1.0 - cosAngle)\\n    );\\n}\\n\\nvoid main()\\n{\\n    vec4 color = texture(uTexture, vTextureCoord);\\n    vec3 resultRGB = color.rgb;\\n\\n    float hue = uHsl[0];\\n    float saturation = uHsl[1];\\n    float lightness = uHsl[2];\\n\\n    // colorize\\n    if (uColorize > 0.5) {\\n        resultRGB = vec3(getWeightedAverage(resultRGB), 0., 0.);\\n    }\\n\\n    // hue\\n    resultRGB = hueShift(resultRGB, hue);\\n\\n    // saturation\\n    // https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/huesaturation.js\\n    float average = (resultRGB.r + resultRGB.g + resultRGB.b) / 3.0;\\n\\n    if (saturation > 0.) {\\n        resultRGB += (average - resultRGB) * (1. - 1. / (1.001 - saturation));\\n    } else {\\n        resultRGB -= (average - resultRGB) * saturation;\\n    }\\n\\n    // lightness\\n    resultRGB = mix(resultRGB, vec3(ceil(lightness)) * color.a, abs(lightness));\\n\\n    // alpha\\n    finalColor = mix(color, vec4(resultRGB, color.a), uAlpha);\\n}\\n\";\n\nexport { fragment as default };\n//# sourceMappingURL=hsladjustment2.mjs.map\n","import { Filter, GpuProgram, GlProgram } from 'pixi.js';\nimport vertex from '../defaults/default.mjs';\nimport wgslVertex from '../defaults/default2.mjs';\nimport fragment from './hsladjustment2.mjs';\nimport source from './hsladjustment.mjs';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _HslAdjustmentFilter = class _HslAdjustmentFilter extends Filter {\n  /**\n   * @param options - Options for the HslAdjustmentFilter constructor.\n   */\n  constructor(options) {\n    options = { ..._HslAdjustmentFilter.DEFAULT_OPTIONS, ...options };\n    const gpuProgram = GpuProgram.from({\n      vertex: {\n        source: wgslVertex,\n        entryPoint: \"mainVertex\"\n      },\n      fragment: {\n        source,\n        entryPoint: \"mainFragment\"\n      }\n    });\n    const glProgram = GlProgram.from({\n      vertex,\n      fragment,\n      name: \"hsl-adjustment-filter\"\n    });\n    super({\n      gpuProgram,\n      glProgram,\n      resources: {\n        hslUniforms: {\n          uHsl: { value: new Float32Array(3), type: \"vec3<f32>\" },\n          uColorize: { value: options.colorize ? 1 : 0, type: \"f32\" },\n          uAlpha: { value: options.alpha, type: \"f32\" }\n        }\n      }\n    });\n    __publicField(this, \"uniforms\");\n    __publicField(this, \"_hue\");\n    this.uniforms = this.resources.hslUniforms.uniforms;\n    this.hue = options.hue;\n  }\n  /**\n   * The amount of hue in degrees (-180 to 180)\n   * @default 0\n   */\n  get hue() {\n    return this._hue;\n  }\n  set hue(value) {\n    this._hue = value;\n    this.resources.hslUniforms.uniforms.uHsl[0] = value * (Math.PI / 180);\n  }\n  /**\n   * The amount of lightness (-1 to 1)\n   * @default 0\n   */\n  get saturation() {\n    return this.resources.hslUniforms.uniforms.uHsl[1];\n  }\n  set saturation(value) {\n    this.resources.hslUniforms.uniforms.uHsl[1] = value;\n  }\n  /**\n   * The amount of lightness (-1 to 1)\n   * @default 0\n   */\n  get lightness() {\n    return this.resources.hslUniforms.uniforms.uHsl[2];\n  }\n  set lightness(value) {\n    this.resources.hslUniforms.uniforms.uHsl[2] = value;\n  }\n  /**\n   * Whether to colorize the image\n   * @default false\n   */\n  get colorize() {\n    return this.resources.hslUniforms.uniforms.uColorize === 1;\n  }\n  set colorize(value) {\n    this.resources.hslUniforms.uniforms.uColorize = value ? 1 : 0;\n  }\n  /**\n   * The amount of alpha (0 to 1)\n   * @default 1\n   */\n  get alpha() {\n    return this.resources.hslUniforms.uniforms.uAlpha;\n  }\n  set alpha(value) {\n    this.resources.hslUniforms.uniforms.uAlpha = value;\n  }\n};\n/** Default values for options. */\n__publicField(_HslAdjustmentFilter, \"DEFAULT_OPTIONS\", {\n  hue: 0,\n  saturation: 0,\n  lightness: 0,\n  colorize: false,\n  alpha: 1\n});\nlet HslAdjustmentFilter = _HslAdjustmentFilter;\n\nexport { HslAdjustmentFilter };\n//# sourceMappingURL=HslAdjustmentFilter.mjs.map\n","var source = \"struct HslUniforms {\\n  uHsl:vec3<f32>,\\n  uColorize:f32,\\n  uAlpha:f32,\\n};\\n\\n@group(0) @binding(1) var uTexture: texture_2d<f32>; \\n@group(0) @binding(2) var uSampler: sampler;\\n@group(1) @binding(0) var<uniform> hslUniforms : HslUniforms;\\n\\n@fragment\\nfn mainFragment(\\n  @location(0) uv: vec2<f32>,\\n  @builtin(position) position: vec4<f32>\\n) -> @location(0) vec4<f32> {\\n    let color: vec4<f32> = textureSample(uTexture, uSampler, uv);\\n    var resultRGB: vec3<f32> = color.rgb;\\n\\n    let hue: f32 = hslUniforms.uHsl[0];\\n    let saturation: f32 = hslUniforms.uHsl[1];\\n    let lightness: f32 = hslUniforms.uHsl[2];\\n\\n    // colorize\\n    if (hslUniforms.uColorize > 0.5) {\\n        resultRGB = vec3<f32>(dot(color.rgb, vec3<f32>(0.299, 0.587, 0.114)), 0., 0.);\\n    }\\n\\n    // hue\\n    resultRGB = hueShift(resultRGB, hue);\\n\\n    // saturation\\n    // https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/huesaturation.js\\n    let average: f32 = (resultRGB.r + resultRGB.g + resultRGB.b) / 3.0;\\n\\n    if (saturation > 0.) {\\n        resultRGB += (average - resultRGB) * (1. - 1. / (1.001 - saturation));\\n    } else {\\n        resultRGB -= (average - resultRGB) * saturation;\\n    }\\n\\n    // lightness\\n    resultRGB = mix(resultRGB, vec3<f32>(ceil(lightness)) * color.a, abs(lightness));\\n\\n    // alpha\\n    return mix(color, vec4<f32>(resultRGB, color.a), hslUniforms.uAlpha);\\n}\\n\\n// https://gist.github.com/mairod/a75e7b44f68110e1576d77419d608786?permalink_comment_id=3195243#gistcomment-3195243\\nconst k: vec3<f32> = vec3(0.57735, 0.57735, 0.57735);\\n\\nfn hueShift(color: vec3<f32>, angle: f32) -> vec3<f32> \\n{\\n    let cosAngle: f32 = cos(angle);\\n    return vec3<f32>(\\n    color * cosAngle +\\n    cross(k, color) * sin(angle) +\\n    k * dot(k, color) * (1.0 - cosAngle)\\n    );\\n}\";\n\nexport { source as default };\n//# sourceMappingURL=hsladjustment.mjs.map\n","var fragment = \"precision highp float;\\nin vec2 vTextureCoord;\\nout vec4 finalColor;\\n\\nuniform sampler2D uTexture;\\nuniform vec2 uVelocity;\\nuniform int uKernelSize;\\nuniform float uOffset;\\n\\nuniform vec4 uInputSize;\\n\\nconst int MAX_KERNEL_SIZE = 2048;\\n\\n// Notice:\\n// the perfect way:\\n//    int kernelSize = min(uKernelSize, MAX_KERNELSIZE);\\n// BUT in real use-case , uKernelSize < MAX_KERNELSIZE almost always.\\n// So use uKernelSize directly.\\n\\nvoid main(void)\\n{\\n    vec4 color = texture(uTexture, vTextureCoord);\\n\\n    if (uKernelSize == 0)\\n    {\\n        finalColor = color;\\n        return;\\n    }\\n\\n    vec2 velocity = uVelocity / uInputSize.xy;\\n    float offset = -uOffset / length(uVelocity) - 0.5;\\n    int k = uKernelSize - 1;\\n\\n    for(int i = 0; i < MAX_KERNEL_SIZE - 1; i++) {\\n        if (i == k) {\\n            break;\\n        }\\n        vec2 bias = velocity * (float(i) / float(k) + offset);\\n        color += texture(uTexture, vTextureCoord + bias);\\n    }\\n    finalColor = color / float(uKernelSize);\\n}\\n\";\n\nexport { fragment as default };\n//# sourceMappingURL=motion-blur.mjs.map\n","import { Filter, ObservablePoint, deprecation, GpuProgram, GlProgram } from 'pixi.js';\nimport vertex from '../defaults/default.mjs';\nimport wgslVertex from '../defaults/default2.mjs';\nimport fragment from './motion-blur.mjs';\nimport source from './motion-blur2.mjs';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _MotionBlurFilter = class _MotionBlurFilter extends Filter {\n  /** @ignore */\n  constructor(...args) {\n    let options = args[0] ?? {};\n    if (Array.isArray(options) || \"x\" in options && \"y\" in options || options instanceof ObservablePoint) {\n      deprecation(\"6.0.0\", \"MotionBlurFilter constructor params are now options object. See params: { velocity, kernelSize, offset }\");\n      const x = \"x\" in options ? options.x : options[0];\n      const y = \"y\" in options ? options.y : options[1];\n      options = { velocity: { x, y } };\n      if (args[1] !== void 0)\n        options.kernelSize = args[1];\n      if (args[2] !== void 0)\n        options.offset = args[2];\n    }\n    options = { ..._MotionBlurFilter.DEFAULT_OPTIONS, ...options };\n    const gpuProgram = GpuProgram.from({\n      vertex: {\n        source: wgslVertex,\n        entryPoint: \"mainVertex\"\n      },\n      fragment: {\n        source,\n        entryPoint: \"mainFragment\"\n      }\n    });\n    const glProgram = GlProgram.from({\n      vertex,\n      fragment,\n      name: \"motion-blur-filter\"\n    });\n    super({\n      gpuProgram,\n      glProgram,\n      resources: {\n        motionBlurUniforms: {\n          uVelocity: { value: options.velocity, type: \"vec2<f32>\" },\n          uKernelSize: { value: Math.trunc(options.kernelSize ?? 5), type: \"i32\" },\n          uOffset: { value: options.offset, type: \"f32\" }\n        }\n      }\n    });\n    __publicField(this, \"uniforms\");\n    __publicField(this, \"_kernelSize\");\n    this.uniforms = this.resources.motionBlurUniforms.uniforms;\n    Object.assign(this, options);\n  }\n  /**\n   * Sets the velocity of the motion for blur effect\n   * This should be a size 2 array or an object containing `x` and `y` values, you cannot change types\n   * once defined in the constructor\n   * @default {x:0,y:0}\n   */\n  get velocity() {\n    return this.uniforms.uVelocity;\n  }\n  set velocity(value) {\n    if (Array.isArray(value)) {\n      value = { x: value[0], y: value[1] };\n    }\n    this.uniforms.uVelocity = value;\n    this._updateDirty();\n  }\n  /**\n   * Sets the velocity of the motion for blur effect on the `x` axis\n   * @default 0\n   */\n  get velocityX() {\n    return this.velocity.x;\n  }\n  set velocityX(value) {\n    this.velocity.x = value;\n    this._updateDirty();\n  }\n  /**\n   * Sets the velocity of the motion for blur effect on the `x` axis\n   * @default 0\n   */\n  get velocityY() {\n    return this.velocity.y;\n  }\n  set velocityY(value) {\n    this.velocity.y = value;\n    this._updateDirty();\n  }\n  /**\n   * The kernelSize of the blur filter. Must be odd number >= 5\n   * @default 5\n   */\n  get kernelSize() {\n    return this._kernelSize;\n  }\n  set kernelSize(value) {\n    this._kernelSize = value;\n    this._updateDirty();\n  }\n  /**\n   * The offset of the blur filter\n   * @default 0\n   */\n  get offset() {\n    return this.uniforms.uOffset;\n  }\n  set offset(value) {\n    this.uniforms.uOffset = value;\n  }\n  _updateDirty() {\n    this.padding = (Math.max(Math.abs(this.velocityX), Math.abs(this.velocityY)) >> 0) + 1;\n    this.uniforms.uKernelSize = this.velocityX !== 0 || this.velocityY !== 0 ? this._kernelSize : 0;\n  }\n};\n/** Default values for options. */\n__publicField(_MotionBlurFilter, \"DEFAULT_OPTIONS\", {\n  velocity: { x: 0, y: 0 },\n  kernelSize: 5,\n  offset: 0\n});\nlet MotionBlurFilter = _MotionBlurFilter;\n\nexport { MotionBlurFilter };\n//# sourceMappingURL=MotionBlurFilter.mjs.map\n","var source = \"struct MotionBlurUniforms {\\n  uVelocity: vec2<f32>,\\n  uKernelSize: f32,\\n  uOffset: f32,\\n};\\n\\nstruct GlobalFilterUniforms {\\n  uInputSize:vec4<f32>,\\n  uInputPixel:vec4<f32>,\\n  uInputClamp:vec4<f32>,\\n  uOutputFrame:vec4<f32>,\\n  uGlobalFrame:vec4<f32>,\\n  uOutputTexture:vec4<f32>,\\n};\\n\\n@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;\\n\\n@group(0) @binding(1) var uTexture: texture_2d<f32>; \\n@group(0) @binding(2) var uSampler: sampler;\\n@group(1) @binding(0) var<uniform> motionBlurUniforms : MotionBlurUniforms;\\n\\n@fragment\\nfn mainFragment(\\n  @builtin(position) position: vec4<f32>,\\n  @location(0) uv : vec2<f32>\\n) -> @location(0) vec4<f32> {\\n  let uVelocity = motionBlurUniforms.uVelocity;\\n  let uKernelSize = motionBlurUniforms.uKernelSize;\\n  let uOffset = motionBlurUniforms.uOffset;\\n\\n  let velocity: vec2<f32> = uVelocity / gfu.uInputSize.xy;\\n  let offset: f32 = -uOffset / length(uVelocity) - 0.5;\\n  let k: i32 = i32(min(uKernelSize - 1, MAX_KERNEL_SIZE - 1));\\n\\n  var color: vec4<f32> = textureSample(uTexture, uSampler, uv);\\n\\n  for(var i: i32 = 0; i < k; i += 1) {\\n    let bias: vec2<f32> = velocity * (f32(i) / f32(k) + offset);\\n    color += textureSample(uTexture, uSampler, uv + bias);\\n  }\\n  \\n  return select(color / f32(uKernelSize), textureSample(uTexture, uSampler, uv), uKernelSize == 0);\\n}\\n\\nconst MAX_KERNEL_SIZE: f32 = 2048;\";\n\nexport { source as default };\n//# sourceMappingURL=motion-blur2.mjs.map\n","var fragment = \"in vec2 vTextureCoord;\\nout vec4 finalColor;\\n\\nconst int MAX_COLORS = ${MAX_COLORS};\\n\\nuniform sampler2D uTexture;\\nuniform vec3 uOriginalColors[MAX_COLORS];\\nuniform vec3 uTargetColors[MAX_COLORS];\\nuniform float uTolerance;\\n\\nvoid main(void)\\n{\\n    finalColor = texture(uTexture, vTextureCoord);\\n\\n    float alpha = finalColor.a;\\n    if (alpha < 0.0001)\\n    {\\n      return;\\n    }\\n\\n    vec3 color = finalColor.rgb / alpha;\\n\\n    for(int i = 0; i < MAX_COLORS; i++)\\n    {\\n      vec3 origColor = uOriginalColors[i];\\n      if (origColor.r < 0.0)\\n      {\\n        break;\\n      }\\n      vec3 colorDiff = origColor - color;\\n      if (length(colorDiff) < uTolerance)\\n      {\\n        vec3 targetColor = uTargetColors[i];\\n        finalColor = vec4((targetColor + colorDiff) * alpha, alpha);\\n        return;\\n      }\\n    }\\n}\\n\";\n\nexport { fragment as default };\n//# sourceMappingURL=multi-color-replace2.mjs.map\n","import { Filter, deprecation, GpuProgram, GlProgram, Color } from 'pixi.js';\nimport vertex from '../defaults/default.mjs';\nimport wgslVertex from '../defaults/default2.mjs';\nimport fragment from './multi-color-replace2.mjs';\nimport source from './multi-color-replace.mjs';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _MultiColorReplaceFilter = class _MultiColorReplaceFilter extends Filter {\n  /** @ignore */\n  constructor(...args) {\n    let options = args[0] ?? {};\n    if (Array.isArray(options)) {\n      deprecation(\"6.0.0\", \"MultiColorReplaceFilter constructor params are now options object. See params: { replacements, tolerance, maxColors }\");\n      options = { replacements: options };\n      if (args[1])\n        options.tolerance = args[1];\n      if (args[2])\n        options.maxColors = args[2];\n    }\n    options = { ..._MultiColorReplaceFilter.DEFAULT_OPTIONS, ...options };\n    const maxColors = options.maxColors ?? options.replacements.length;\n    const gpuProgram = GpuProgram.from({\n      vertex: {\n        source: wgslVertex,\n        entryPoint: \"mainVertex\"\n      },\n      fragment: {\n        source: source.replace(/\\$\\{MAX_COLORS\\}/g, maxColors.toFixed(0)),\n        entryPoint: \"mainFragment\"\n      }\n    });\n    const glProgram = GlProgram.from({\n      vertex,\n      fragment: fragment.replace(/\\$\\{MAX_COLORS\\}/g, maxColors.toFixed(0)),\n      name: \"multi-color-replace-filter\"\n    });\n    super({\n      gpuProgram,\n      glProgram,\n      resources: {\n        multiColorReplaceUniforms: {\n          uOriginalColors: {\n            value: new Float32Array(3 * maxColors),\n            type: \"vec3<f32>\",\n            size: maxColors\n          },\n          uTargetColors: {\n            value: new Float32Array(3 * maxColors),\n            type: \"vec3<f32>\",\n            size: maxColors\n          },\n          uTolerance: { value: options.tolerance, type: \"f32\" }\n        }\n      }\n    });\n    __publicField(this, \"uniforms\");\n    __publicField(this, \"_replacements\", []);\n    __publicField(this, \"_maxColors\");\n    this._maxColors = maxColors;\n    this.uniforms = this.resources.multiColorReplaceUniforms.uniforms;\n    this.replacements = options.replacements;\n  }\n  /**\n   * The collection of replacement items. Each item is color-pair\n   * (an array length is 2). In the pair, the first value is original color , the second value is target color\n   */\n  set replacements(replacements) {\n    const originals = this.uniforms.uOriginalColors;\n    const targets = this.uniforms.uTargetColors;\n    const colorCount = replacements.length;\n    const color = new Color();\n    if (colorCount > this._maxColors) {\n      throw new Error(`Length of replacements (${colorCount}) exceeds the maximum colors length (${this._maxColors})`);\n    }\n    originals[colorCount * 3] = -1;\n    let r;\n    let g;\n    let b;\n    for (let i = 0; i < colorCount; i++) {\n      const pair = replacements[i];\n      color.setValue(pair[0]);\n      [r, g, b] = color.toArray();\n      originals[i * 3] = r;\n      originals[i * 3 + 1] = g;\n      originals[i * 3 + 2] = b;\n      color.setValue(pair[1]);\n      [r, g, b] = color.toArray();\n      targets[i * 3] = r;\n      targets[i * 3 + 1] = g;\n      targets[i * 3 + 2] = b;\n    }\n    this._replacements = replacements;\n  }\n  get replacements() {\n    return this._replacements;\n  }\n  /**\n    * Should be called after changing any of the contents of the replacements.\n    * This is a convenience method for resetting the `replacements`.\n    * @todo implement nested proxy to remove the need for this function\n    */\n  refresh() {\n    this.replacements = this._replacements;\n  }\n  /**\n    * The maximum number of color replacements supported by this filter. Can be changed\n    * _only_ during construction.\n    * @readonly\n    */\n  get maxColors() {\n    return this._maxColors;\n  }\n  /**\n    * Tolerance of the floating-point comparison between colors (lower = more exact, higher = more inclusive)\n    * @default 0.05\n    */\n  get tolerance() {\n    return this.uniforms.uTolerance;\n  }\n  set tolerance(value) {\n    this.uniforms.uTolerance = value;\n  }\n  /**\n   * @deprecated since 6.0.0\n   *\n   * Tolerance of the floating-point comparison between colors (lower = more exact, higher = more inclusive)\n   * @default 0.05\n   */\n  set epsilon(value) {\n    deprecation(\"6.0.0\", \"MultiColorReplaceFilter.epsilon is deprecated, please use MultiColorReplaceFilter.tolerance instead\");\n    this.tolerance = value;\n  }\n  get epsilon() {\n    deprecation(\"6.0.0\", \"MultiColorReplaceFilter.epsilon is deprecated, please use MultiColorReplaceFilter.tolerance instead\");\n    return this.tolerance;\n  }\n};\n/** Default values for options. */\n__publicField(_MultiColorReplaceFilter, \"DEFAULT_OPTIONS\", {\n  replacements: [[16711680, 255]],\n  tolerance: 0.05,\n  maxColors: void 0\n});\nlet MultiColorReplaceFilter = _MultiColorReplaceFilter;\n\nexport { MultiColorReplaceFilter };\n//# sourceMappingURL=MultiColorReplaceFilter.mjs.map\n","var source = \"struct MultiColorReplaceUniforms {\\n  uOriginalColors: array<vec3<f32>, MAX_COLORS>,\\n  uTargetColors: array<vec3<f32>, MAX_COLORS>,\\n  uTolerance:f32,\\n};\\n\\n@group(0) @binding(1) var uTexture: texture_2d<f32>; \\n@group(0) @binding(2) var uSampler: sampler;\\n@group(1) @binding(0) var<uniform> multiColorReplaceUniforms : MultiColorReplaceUniforms;\\n\\n@fragment\\nfn mainFragment(\\n  @builtin(position) position: vec4<f32>,\\n  @location(0) uv : vec2<f32>\\n) -> @location(0) vec4<f32> {\\n  let uOriginalColors = multiColorReplaceUniforms.uOriginalColors;\\n  let uTargetColors = multiColorReplaceUniforms.uTargetColors;\\n  let uTolerance = multiColorReplaceUniforms.uTolerance;\\n\\n  var color: vec4<f32> = textureSample(uTexture, uSampler, uv);\\n\\n  let alpha: f32 = color.a;\\n\\n  if (alpha > 0.0001)\\n  {\\n    var modColor: vec3<f32> = vec3<f32>(color.rgb) / alpha;\\n\\n    for(var i: i32 = 0; i < MAX_COLORS; i += 1)\\n    {\\n      let origColor: vec3<f32> = uOriginalColors[i];\\n      if (origColor.r < 0.0)\\n      {\\n        break;\\n      }\\n      let colorDiff: vec3<f32> = origColor - modColor;\\n      \\n      if (length(colorDiff) < uTolerance)\\n      {\\n        let targetColor: vec3<f32> = uTargetColors[i];\\n        color = vec4((targetColor + colorDiff) * alpha, alpha);\\n        return color;\\n      }\\n    }\\n  }\\n\\n  return color;\\n}\\n\\nconst MAX_COLORS: i32 = ${MAX_COLORS};\";\n\nexport { source as default };\n//# sourceMappingURL=multi-color-replace.mjs.map\n","var fragment = \"precision highp float;\\nin vec2 vTextureCoord;\\nout vec4 finalColor;\\n\\nuniform sampler2D uTexture;\\nuniform float uSepia;\\nuniform vec2 uNoise;\\nuniform vec3 uScratch;\\nuniform vec3 uVignetting;\\nuniform float uSeed;\\nuniform vec2 uDimensions;\\n\\nuniform vec4 uInputSize;\\n\\nconst float SQRT_2 = 1.414213;\\nconst vec3 SEPIA_RGB = vec3(112.0 / 255.0, 66.0 / 255.0, 20.0 / 255.0);\\n\\nfloat rand(vec2 co) {\\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\\n}\\n\\nvec3 Overlay(vec3 src, vec3 dst)\\n{\\n    // if (dst <= 0.5) then: 2 * src * dst\\n    // if (dst > 0.5) then: 1 - 2 * (1 - dst) * (1 - src)\\n    return vec3((dst.x <= 0.5) ? (2.0 * src.x * dst.x) : (1.0 - 2.0 * (1.0 - dst.x) * (1.0 - src.x)),\\n                (dst.y <= 0.5) ? (2.0 * src.y * dst.y) : (1.0 - 2.0 * (1.0 - dst.y) * (1.0 - src.y)),\\n                (dst.z <= 0.5) ? (2.0 * src.z * dst.z) : (1.0 - 2.0 * (1.0 - dst.z) * (1.0 - src.z)));\\n}\\n\\n\\nvoid main()\\n{\\n    finalColor = texture(uTexture, vTextureCoord);\\n    vec3 color = finalColor.rgb;\\n\\n    if (uSepia > 0.0)\\n    {\\n        float gray = (color.x + color.y + color.z) / 3.0;\\n        vec3 grayscale = vec3(gray);\\n\\n        color = Overlay(SEPIA_RGB, grayscale);\\n\\n        color = grayscale + uSepia * (color - grayscale);\\n    }\\n\\n    vec2 coord = vTextureCoord * uInputSize.xy / uDimensions.xy;\\n\\n    float vignette = uVignetting[0];\\n    float vignetteAlpha = uVignetting[1];\\n    float vignetteBlur = uVignetting[2];\\n\\n    if (vignette > 0.0)\\n    {\\n        float outter = SQRT_2 - vignette * SQRT_2;\\n        vec2 dir = vec2(vec2(0.5, 0.5) - coord);\\n        dir.y *= uDimensions.y / uDimensions.x;\\n        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignetteBlur * SQRT_2), 0.0, 1.0);\\n        color.rgb *= darker + (1.0 - darker) * (1.0 - vignetteAlpha);\\n    }\\n\\n    float scratch = uScratch[0];\\n    float scratchDensity = uScratch[1];\\n    float scratchWidth = uScratch[2];\\n\\n    if (scratchDensity > uSeed && scratch != 0.0)\\n    {\\n        float phase = uSeed * 256.0;\\n        float s = mod(floor(phase), 2.0);\\n        float dist = 1.0 / scratchDensity;\\n        float d = distance(coord, vec2(uSeed * dist, abs(s - uSeed * dist)));\\n        if (d < uSeed * 0.6 + 0.4)\\n        {\\n            highp float period = scratchDensity * 10.0;\\n\\n            float xx = coord.x * period + phase;\\n            float aa = abs(mod(xx, 0.5) * 4.0);\\n            float bb = mod(floor(xx / 0.5), 2.0);\\n            float yy = (1.0 - bb) * aa + bb * (2.0 - aa);\\n\\n            float kk = 2.0 * period;\\n            float dw = scratchWidth / uDimensions.x * (0.75 + uSeed);\\n            float dh = dw * kk;\\n\\n            float tine = (yy - (2.0 - dh));\\n\\n            if (tine > 0.0) {\\n                float _sign = sign(scratch);\\n\\n                tine = s * tine / period + scratch + 0.1;\\n                tine = clamp(tine + 1.0, 0.5 + _sign * 0.5, 1.5 + _sign * 0.5);\\n\\n                color.rgb *= tine;\\n            }\\n        }\\n    }\\n\\n    float noise = uNoise[0];\\n    float noiseSize = uNoise[1];\\n\\n    if (noise > 0.0 && noiseSize > 0.0)\\n    {\\n        vec2 pixelCoord = vTextureCoord.xy * uInputSize.xy;\\n        pixelCoord.x = floor(pixelCoord.x / noiseSize);\\n        pixelCoord.y = floor(pixelCoord.y / noiseSize);\\n        // vec2 d = pixelCoord * noiseSize * vec2(1024.0 + uSeed * 512.0, 1024.0 - uSeed * 512.0);\\n        // float _noise = snoise(d) * 0.5;\\n        float _noise = rand(pixelCoord * noiseSize * uSeed) - 0.5;\\n        color += _noise * noise;\\n    }\\n\\n    finalColor.rgb = color;\\n}\";\n\nexport { fragment as default };\n//# sourceMappingURL=old-film.mjs.map\n","import { Filter, GpuProgram, GlProgram } from 'pixi.js';\nimport vertex from '../defaults/default.mjs';\nimport wgslVertex from '../defaults/default2.mjs';\nimport fragment from './old-film.mjs';\nimport source from './old-film2.mjs';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _OldFilmFilter = class _OldFilmFilter extends Filter {\n  /**\n   * @param options - Options for the OldFilmFilter constructor.\n   */\n  constructor(options) {\n    options = { ..._OldFilmFilter.DEFAULT_OPTIONS, ...options };\n    const gpuProgram = GpuProgram.from({\n      vertex: {\n        source: wgslVertex,\n        entryPoint: \"mainVertex\"\n      },\n      fragment: {\n        source,\n        entryPoint: \"mainFragment\"\n      }\n    });\n    const glProgram = GlProgram.from({\n      vertex,\n      fragment,\n      name: \"old-film-filter\"\n    });\n    super({\n      gpuProgram,\n      glProgram,\n      resources: {\n        oldFilmUniforms: {\n          uSepia: { value: options.sepia, type: \"f32\" },\n          uNoise: { value: new Float32Array(2), type: \"vec2<f32>\" },\n          uScratch: { value: new Float32Array(3), type: \"vec3<f32>\" },\n          uVignetting: { value: new Float32Array(3), type: \"vec3<f32>\" },\n          uSeed: { value: options.seed, type: \"f32\" },\n          uDimensions: { value: new Float32Array(2), type: \"vec2<f32>\" }\n        }\n      }\n    });\n    __publicField(this, \"uniforms\");\n    /**\n     * A seed value to apply to the random noise generation\n     * @default 0\n     */\n    __publicField(this, \"seed\");\n    this.uniforms = this.resources.oldFilmUniforms.uniforms;\n    Object.assign(this, options);\n  }\n  /**\n   * Override existing apply method in `Filter`\n   * @override\n   * @ignore\n   */\n  apply(filterManager, input, output, clearMode) {\n    this.uniforms.uDimensions[0] = input.frame.width;\n    this.uniforms.uDimensions[1] = input.frame.height;\n    this.uniforms.uSeed = this.seed;\n    filterManager.applyFilter(this, input, output, clearMode);\n  }\n  /**\n   * The amount of saturation of sepia effect,\n   * a value of `1` is more saturation and closer to `0` is less, and a value of `0` produces no sepia effect\n   * @default 0.3\n   */\n  get sepia() {\n    return this.uniforms.uSepia;\n  }\n  set sepia(value) {\n    this.uniforms.uSepia = value;\n  }\n  /**\n   * Opacity/intensity of the noise effect between `0` and `1`\n   * @default 0.3\n   */\n  get noise() {\n    return this.uniforms.uNoise[0];\n  }\n  set noise(value) {\n    this.uniforms.uNoise[0] = value;\n  }\n  /**\n   * The size of the noise particles\n   * @default 1\n   */\n  get noiseSize() {\n    return this.uniforms.uNoise[1];\n  }\n  set noiseSize(value) {\n    this.uniforms.uNoise[1] = value;\n  }\n  /**\n   * How often scratches appear\n   * @default 0.5\n   */\n  get scratch() {\n    return this.uniforms.uScratch[0];\n  }\n  set scratch(value) {\n    this.uniforms.uScratch[0] = value;\n  }\n  /**\n   * The density of the number of scratches\n   * @default 0.3\n   */\n  get scratchDensity() {\n    return this.uniforms.uScratch[1];\n  }\n  set scratchDensity(value) {\n    this.uniforms.uScratch[1] = value;\n  }\n  /**\n   * The width of the scratches\n   * @default 1\n   */\n  get scratchWidth() {\n    return this.uniforms.uScratch[2];\n  }\n  set scratchWidth(value) {\n    this.uniforms.uScratch[2] = value;\n  }\n  /**\n   * The radius of the vignette effect, smaller values produces a smaller vignette\n   * @default 0.3\n   */\n  get vignetting() {\n    return this.uniforms.uVignetting[0];\n  }\n  set vignetting(value) {\n    this.uniforms.uVignetting[0] = value;\n  }\n  /**\n   * Amount of opacity on the vignette\n   * @default 1\n   */\n  get vignettingAlpha() {\n    return this.uniforms.uVignetting[1];\n  }\n  set vignettingAlpha(value) {\n    this.uniforms.uVignetting[1] = value;\n  }\n  /**\n   * Blur intensity of the vignette\n   * @default 1\n   */\n  get vignettingBlur() {\n    return this.uniforms.uVignetting[2];\n  }\n  set vignettingBlur(value) {\n    this.uniforms.uVignetting[2] = value;\n  }\n};\n/** Default values for options. */\n__publicField(_OldFilmFilter, \"DEFAULT_OPTIONS\", {\n  sepia: 0.3,\n  noise: 0.3,\n  noiseSize: 1,\n  scratch: 0.5,\n  scratchDensity: 0.3,\n  scratchWidth: 1,\n  vignetting: 0.3,\n  vignettingAlpha: 1,\n  vignettingBlur: 0.3,\n  seed: 0\n});\nlet OldFilmFilter = _OldFilmFilter;\n\nexport { OldFilmFilter };\n//# sourceMappingURL=OldFilmFilter.mjs.map\n","var source = \"struct OldFilmUniforms {\\n    uSepia: f32,\\n    uNoise: vec2<f32>,\\n    uScratch: vec3<f32>,\\n    uVignetting: vec3<f32>,\\n    uSeed: f32,\\n    uDimensions: vec2<f32>,\\n};\\n\\nstruct GlobalFilterUniforms {\\n  uInputSize:vec4<f32>,\\n  uInputPixel:vec4<f32>,\\n  uInputClamp:vec4<f32>,\\n  uOutputFrame:vec4<f32>,\\n  uGlobalFrame:vec4<f32>,\\n  uOutputTexture:vec4<f32>,\\n};\\n\\n@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;\\n\\n@group(0) @binding(1) var uTexture: texture_2d<f32>; \\n@group(0) @binding(2) var uSampler: sampler;\\n@group(1) @binding(0) var<uniform> oldFilmUniforms : OldFilmUniforms;\\n\\n@fragment\\nfn mainFragment(\\n  @builtin(position) position: vec4<f32>,\\n  @location(0) uv : vec2<f32>\\n) -> @location(0) vec4<f32> {\\n  var color: vec4<f32> = textureSample(uTexture, uSampler, uv);\\n\\n  if (oldFilmUniforms.uSepia > 0.)\\n  {\\n    color = vec4<f32>(sepia(color.rgb), color.a);\\n  }\\n\\n  let coord: vec2<f32> = uv * gfu.uInputSize.xy / oldFilmUniforms.uDimensions;\\n\\n  if (oldFilmUniforms.uVignetting[0] > 0.)\\n  {\\n    color *= vec4<f32>(vec3<f32>(vignette(color.rgb, coord)), color.a);\\n  }\\n\\n  let uScratch = oldFilmUniforms.uScratch; \\n\\n  if (uScratch[1] > oldFilmUniforms.uSeed && uScratch[0] != 0.)\\n  {\\n    color = vec4<f32>(scratch(color.rgb, coord), color.a);\\n  }\\n\\n  let uNoise = oldFilmUniforms.uNoise;\\n\\n  if (uNoise[0] > 0.0 && uNoise[1] > 0.0)\\n  {\\n    color += vec4<f32>(vec3<f32>(noise(uv)), color.a);\\n  }\\n\\n  return color;\\n}\\n\\nconst SQRT_2: f32 = 1.414213;\\nconst SEPIA_RGB: vec3<f32> = vec3<f32>(112.0 / 255.0, 66.0 / 255.0, 20.0 / 255.0);\\n\\nfn modulo(x: f32, y: f32) -> f32\\n{\\n  return x - y * floor(x/y);\\n}\\n\\nfn rand(co: vec2<f32>) -> f32\\n{\\n  return fract(sin(dot(co, vec2<f32>(12.9898, 78.233))) * 43758.5453);\\n}\\n\\nfn overlay(src: vec3<f32>, dst: vec3<f32>) -> vec3<f32>\\n{\\n    // if (dst <= 0.5) then: 2 * src * dst\\n    // if (dst > 0.5) then: 1 - 2 * (1 - dst) * (1 - src)\\n\\n    return vec3<f32>(\\n      select((1.0 - 2.0 * (1.0 - dst.x) * (1.0 - src.x)), (2.0 * src.x * dst.x), (dst.x <= 0.5)), \\n      select((1.0 - 2.0 * (1.0 - dst.y) * (1.0 - src.y)), (2.0 * src.y * dst.y), (dst.y <= 0.5)),\\n      select((1.0 - 2.0 * (1.0 - dst.z) * (1.0 - src.z)), (2.0 * src.z * dst.z), (dst.z <= 0.5))\\n    );\\n}\\n\\nfn sepia(co: vec3<f32>) -> vec3<f32>\\n{\\n  let gray: f32 = (co.x + co.y + co.z) / 3.0;\\n  let grayscale: vec3<f32> = vec3<f32>(gray);\\n  let color = overlay(SEPIA_RGB, grayscale);\\n  return grayscale + oldFilmUniforms.uSepia * (color - grayscale);\\n}\\n\\nfn vignette(co: vec3<f32>, coord: vec2<f32>) -> f32\\n{\\n  let uVignetting = oldFilmUniforms.uVignetting;\\n  let uDimensions = oldFilmUniforms.uDimensions;\\n  \\n  let outter: f32 = SQRT_2 - uVignetting[0] * SQRT_2;\\n  var dir: vec2<f32> = vec2<f32>(vec2<f32>(0.5) - coord);\\n  dir.y *= uDimensions.y / uDimensions.x;\\n  let darker: f32 = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + uVignetting[2] * SQRT_2), 0.0, 1.0);\\n  return darker + (1.0 - darker) * (1.0 - uVignetting[1]);\\n}\\n\\nfn scratch(co: vec3<f32>, coord: vec2<f32>) -> vec3<f32>\\n{\\n  var color = co;\\n  let uScratch = oldFilmUniforms.uScratch;\\n  let uSeed = oldFilmUniforms.uSeed;\\n  let uDimensions = oldFilmUniforms.uDimensions;\\n\\n  let phase: f32 = uSeed * 256.0;\\n  let s: f32 = modulo(floor(phase), 2.0);\\n  let dist: f32 = 1.0 / uScratch[1];\\n  let d: f32 = distance(coord, vec2<f32>(uSeed * dist, abs(s - uSeed * dist)));\\n\\n  if (d < uSeed * 0.6 + 0.4)\\n  {\\n    let period: f32 = uScratch[1] * 10.0;\\n\\n    let xx: f32 = coord.x * period + phase;\\n    let aa: f32 = abs(modulo(xx, 0.5) * 4.0);\\n    let bb: f32 = modulo(floor(xx / 0.5), 2.0);\\n    let yy: f32 = (1.0 - bb) * aa + bb * (2.0 - aa);\\n\\n    let kk: f32 = 2.0 * period;\\n    let dw: f32 = uScratch[2] / uDimensions.x * (0.75 + uSeed);\\n    let dh: f32 = dw * kk;\\n\\n    var tine: f32 = (yy - (2.0 - dh));\\n\\n    if (tine > 0.0) {\\n        let _sign: f32 = sign(uScratch[0]);\\n\\n        tine = s * tine / period + uScratch[0] + 0.1;\\n        tine = clamp(tine + 1.0, 0.5 + _sign * 0.5, 1.5 + _sign * 0.5);\\n\\n        color *= tine;\\n    }\\n  }\\n\\n  return color;\\n}\\n\\nfn noise(coord: vec2<f32>) -> f32\\n{\\n  let uNoise = oldFilmUniforms.uNoise;\\n  let uSeed = oldFilmUniforms.uSeed;\\n\\n  var pixelCoord: vec2<f32> = coord * gfu.uInputSize.xy;\\n  pixelCoord.x = floor(pixelCoord.x / uNoise[1]);\\n  pixelCoord.y = floor(pixelCoord.y / uNoise[1]);\\n  return (rand(pixelCoord * uNoise[1] * uSeed) - 0.5) * uNoise[0];\\n}\";\n\nexport { source as default };\n//# sourceMappingURL=old-film2.mjs.map\n","var fragment = \"precision highp float;\\nin vec2 vTextureCoord;\\nout vec4 finalColor;\\n\\nuniform sampler2D uTexture;\\nuniform vec2 uThickness;\\nuniform vec3 uColor;\\nuniform float uAlpha;\\nuniform float uKnockout;\\n\\nuniform vec4 uInputClamp;\\n\\nconst float DOUBLE_PI = 2. * 3.14159265358979323846264;\\nconst float ANGLE_STEP = ${ANGLE_STEP};\\n\\nfloat outlineMaxAlphaAtPos(vec2 pos) {\\n    if (uThickness.x == 0. || uThickness.y == 0.) {\\n        return 0.;\\n    }\\n\\n    vec4 displacedColor;\\n    vec2 displacedPos;\\n    float maxAlpha = 0.;\\n\\n    for (float angle = 0.; angle <= DOUBLE_PI; angle += ANGLE_STEP) {\\n        displacedPos.x = vTextureCoord.x + uThickness.x * cos(angle);\\n        displacedPos.y = vTextureCoord.y + uThickness.y * sin(angle);\\n        displacedColor = texture(uTexture, clamp(displacedPos, uInputClamp.xy, uInputClamp.zw));\\n        maxAlpha = max(maxAlpha, displacedColor.a);\\n    }\\n\\n    return maxAlpha;\\n}\\n\\nvoid main(void) {\\n    vec4 sourceColor = texture(uTexture, vTextureCoord);\\n    vec4 contentColor = sourceColor * float(uKnockout < 0.5);\\n    float outlineAlpha = uAlpha * outlineMaxAlphaAtPos(vTextureCoord.xy) * (1.-sourceColor.a);\\n    vec4 outlineColor = vec4(vec3(uColor) * outlineAlpha, outlineAlpha);\\n    finalColor = contentColor + outlineColor;\\n}\\n\";\n\nexport { fragment as default };\n//# sourceMappingURL=outline.mjs.map\n","import { Filter, deprecation, GpuProgram, GlProgram, Color } from 'pixi.js';\nimport vertex from '../defaults/default.mjs';\nimport wgslVertex from '../defaults/default2.mjs';\nimport fragment from './outline.mjs';\nimport source from './outline2.mjs';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _OutlineFilter = class _OutlineFilter extends Filter {\n  /** @ignore */\n  constructor(...args) {\n    let options = args[0] ?? {};\n    if (typeof options === \"number\") {\n      deprecation(\"6.0.0\", \"OutlineFilter constructor params are now options object. See params: { thickness, color, quality, alpha, knockout }\");\n      options = { thickness: options };\n      if (args[1] !== void 0)\n        options.color = args[1];\n      if (args[2] !== void 0)\n        options.quality = args[2];\n      if (args[3] !== void 0)\n        options.alpha = args[3];\n      if (args[4] !== void 0)\n        options.knockout = args[4];\n    }\n    options = { ..._OutlineFilter.DEFAULT_OPTIONS, ...options };\n    const quality = options.quality ?? 0.1;\n    const gpuProgram = GpuProgram.from({\n      vertex: {\n        source: wgslVertex,\n        entryPoint: \"mainVertex\"\n      },\n      fragment: {\n        source,\n        entryPoint: \"mainFragment\"\n      }\n    });\n    const glProgram = GlProgram.from({\n      vertex,\n      fragment: fragment.replace(/\\$\\{ANGLE_STEP\\}/, _OutlineFilter.getAngleStep(quality).toFixed(7)),\n      name: \"outline-filter\"\n    });\n    super({\n      gpuProgram,\n      glProgram,\n      resources: {\n        outlineUniforms: {\n          uThickness: { value: new Float32Array(2), type: \"vec2<f32>\" },\n          uColor: { value: new Float32Array(3), type: \"vec3<f32>\" },\n          uAlpha: { value: options.alpha, type: \"f32\" },\n          uAngleStep: { value: 0, type: \"f32\" },\n          uKnockout: { value: options.knockout ? 1 : 0, type: \"f32\" }\n        }\n      }\n    });\n    __publicField(this, \"uniforms\");\n    __publicField(this, \"_thickness\");\n    __publicField(this, \"_quality\");\n    __publicField(this, \"_color\");\n    this.uniforms = this.resources.outlineUniforms.uniforms;\n    this.uniforms.uAngleStep = _OutlineFilter.getAngleStep(quality);\n    this._color = new Color();\n    this.color = options.color ?? 0;\n    Object.assign(this, options);\n  }\n  /**\n   * Override existing apply method in `Filter`\n   * @override\n   * @ignore\n   */\n  apply(filterManager, input, output, clearMode) {\n    this.uniforms.uThickness[0] = this.thickness / input.source.width;\n    this.uniforms.uThickness[1] = this.thickness / input.source.height;\n    filterManager.applyFilter(this, input, output, clearMode);\n  }\n  /**\n   * Get the angleStep by quality\n   * @param quality\n   */\n  static getAngleStep(quality) {\n    return parseFloat((Math.PI * 2 / Math.max(\n      quality * _OutlineFilter.MAX_SAMPLES,\n      _OutlineFilter.MIN_SAMPLES\n    )).toFixed(7));\n  }\n  /**\n   * The thickness of the outline\n   * @default 1\n   */\n  get thickness() {\n    return this._thickness;\n  }\n  set thickness(value) {\n    this._thickness = this.padding = value;\n  }\n  /**\n   * The color value of the ambient color\n   * @example [1.0, 1.0, 1.0] = 0xffffff\n   * @default 0x000000\n   */\n  get color() {\n    return this._color.value;\n  }\n  set color(value) {\n    this._color.setValue(value);\n    const [r, g, b] = this._color.toArray();\n    this.uniforms.uColor[0] = r;\n    this.uniforms.uColor[1] = g;\n    this.uniforms.uColor[2] = b;\n  }\n  /**\n   * Coefficient for alpha multiplication\n   * @default 1\n   */\n  get alpha() {\n    return this.uniforms.uAlpha;\n  }\n  set alpha(value) {\n    this.uniforms.uAlpha = value;\n  }\n  /**\n   * The quality of the outline from `0` to `1`.\n   * Using a higher quality setting will result in more accuracy but slower performance\n   * @default 0.1\n   */\n  get quality() {\n    return this._quality;\n  }\n  set quality(value) {\n    this._quality = value;\n    this.uniforms.uAngleStep = _OutlineFilter.getAngleStep(value);\n  }\n  /**\n   * Whether to only render outline, not the contents.\n   * @default false\n   */\n  get knockout() {\n    return this.uniforms.uKnockout === 1;\n  }\n  set knockout(value) {\n    this.uniforms.uKnockout = value ? 1 : 0;\n  }\n};\n/** Default values for options. */\n__publicField(_OutlineFilter, \"DEFAULT_OPTIONS\", {\n  thickness: 1,\n  color: 0,\n  alpha: 1,\n  quality: 0.1,\n  knockout: false\n});\n/** The minimum number of samples for rendering outline. */\n__publicField(_OutlineFilter, \"MIN_SAMPLES\", 1);\n/** The maximum number of samples for rendering outline. */\n__publicField(_OutlineFilter, \"MAX_SAMPLES\", 100);\nlet OutlineFilter = _OutlineFilter;\n\nexport { OutlineFilter };\n//# sourceMappingURL=OutlineFilter.mjs.map\n","var source = \"struct OutlineUniforms {\\n  uThickness:vec2<f32>,\\n  uColor:vec3<f32>,\\n  uAlpha:f32,\\n  uAngleStep:f32,\\n  uKnockout:f32,\\n};\\n\\nstruct GlobalFilterUniforms {\\n  uInputSize:vec4<f32>,\\n  uInputPixel:vec4<f32>,\\n  uInputClamp:vec4<f32>,\\n  uOutputFrame:vec4<f32>,\\n  uGlobalFrame:vec4<f32>,\\n  uOutputTexture:vec4<f32>,\\n};\\n\\n@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;\\n\\n@group(0) @binding(1) var uTexture: texture_2d<f32>; \\n@group(0) @binding(2) var uSampler: sampler;\\n@group(1) @binding(0) var<uniform> outlineUniforms : OutlineUniforms;\\n\\n@fragment\\nfn mainFragment(\\n  @builtin(position) position: vec4<f32>,\\n  @location(0) uv : vec2<f32>\\n) -> @location(0) vec4<f32> {\\n  let sourceColor: vec4<f32> = textureSample(uTexture, uSampler, uv);\\n  let contentColor: vec4<f32> = sourceColor * (1. - outlineUniforms.uKnockout);\\n  \\n  let outlineAlpha: f32 = outlineUniforms.uAlpha * outlineMaxAlphaAtPos(uv) * (1. - sourceColor.a);\\n  let outlineColor: vec4<f32> = vec4<f32>(vec3<f32>(outlineUniforms.uColor) * outlineAlpha, outlineAlpha);\\n  \\n  return contentColor + outlineColor;\\n}\\n\\nfn outlineMaxAlphaAtPos(uv: vec2<f32>) -> f32 {\\n  let thickness = outlineUniforms.uThickness;\\n\\n  if (thickness.x == 0. || thickness.y == 0.) {\\n    return 0.;\\n  }\\n  \\n  let angleStep = outlineUniforms.uAngleStep;\\n\\n  var displacedColor: vec4<f32>;\\n  var displacedPos: vec2<f32>;\\n\\n  var maxAlpha: f32 = 0.;\\n  var displaced: vec2<f32>;\\n  var curColor: vec4<f32>;\\n\\n  for (var angle = 0.; angle <= DOUBLE_PI; angle += angleStep)\\n  {\\n    displaced.x = uv.x + thickness.x * cos(angle);\\n    displaced.y = uv.y + thickness.y * sin(angle);\\n    curColor = textureSample(uTexture, uSampler, clamp(displaced, gfu.uInputClamp.xy, gfu.uInputClamp.zw));\\n    maxAlpha = max(maxAlpha, curColor.a);\\n  }\\n\\n  return maxAlpha;\\n}\\n\\nconst DOUBLE_PI: f32 = 3.14159265358979323846264 * 2.;\";\n\nexport { source as default };\n//# sourceMappingURL=outline2.mjs.map\n","import { Filter, GpuProgram, GlProgram, Point } from 'pixi.js';\nimport vertex from '../defaults/default.mjs';\nimport wgslVertex from '../defaults/default2.mjs';\nimport fragment from './pixelate.mjs';\nimport source from './pixelate2.mjs';\n\nclass PixelateFilter extends Filter {\n  /**\n   * @param {Point|Array<number>|number} [size=10] - Either the width/height of the size of the pixels, or square size\n   */\n  constructor(size = 10) {\n    const gpuProgram = GpuProgram.from({\n      vertex: {\n        source: wgslVertex,\n        entryPoint: \"mainVertex\"\n      },\n      fragment: {\n        source,\n        entryPoint: \"mainFragment\"\n      }\n    });\n    const glProgram = GlProgram.from({\n      vertex,\n      fragment,\n      name: \"pixelate-filter\"\n    });\n    super({\n      gpuProgram,\n      glProgram,\n      resources: {\n        pixelateUniforms: {\n          uSize: { value: new Float32Array(2), type: \"vec2<f32>\" }\n        }\n      }\n    });\n    this.size = size;\n  }\n  /**\n   * The size of the pixels\n   * @default [10,10]\n   */\n  get size() {\n    return this.resources.pixelateUniforms.uniforms.uSize;\n  }\n  set size(value) {\n    if (value instanceof Point) {\n      this.sizeX = value.x;\n      this.sizeY = value.y;\n    } else if (Array.isArray(value)) {\n      this.resources.pixelateUniforms.uniforms.uSize = value;\n    } else {\n      this.sizeX = this.sizeY = value;\n    }\n  }\n  /**\n  * The size of the pixels on the `x` axis\n  * @default 10\n  */\n  get sizeX() {\n    return this.resources.pixelateUniforms.uniforms.uSize[0];\n  }\n  set sizeX(value) {\n    this.resources.pixelateUniforms.uniforms.uSize[0] = value;\n  }\n  /**\n  * The size of the pixels on the `y` axis\n  * @default 10\n  */\n  get sizeY() {\n    return this.resources.pixelateUniforms.uniforms.uSize[1];\n  }\n  set sizeY(value) {\n    this.resources.pixelateUniforms.uniforms.uSize[1] = value;\n  }\n}\n\nexport { PixelateFilter };\n//# sourceMappingURL=PixelateFilter.mjs.map\n","var fragment = \"precision highp float;\\nin vec2 vTextureCoord;\\nout vec4 finalColor;\\n\\nuniform sampler2D uTexture;\\nuniform float uRadian;\\nuniform vec2 uCenter;\\nuniform float uRadius;\\nuniform int uKernelSize;\\n\\nuniform vec4 uInputSize;\\n\\nconst int MAX_KERNEL_SIZE = 2048;\\n\\nvoid main(void)\\n{\\n    vec4 color = texture(uTexture, vTextureCoord);\\n\\n    if (uKernelSize == 0)\\n    {\\n        finalColor = color;\\n        return;\\n    }\\n\\n    float aspect = uInputSize.y / uInputSize.x;\\n    vec2 center = uCenter.xy / uInputSize.xy;\\n    float gradient = uRadius / uInputSize.x * 0.3;\\n    float radius = uRadius / uInputSize.x - gradient * 0.5;\\n    int k = uKernelSize - 1;\\n\\n    vec2 coord = vTextureCoord;\\n    vec2 dir = vec2(center - coord);\\n    float dist = length(vec2(dir.x, dir.y * aspect));\\n\\n    float radianStep = uRadian;\\n    if (radius >= 0.0 && dist > radius) {\\n        float delta = dist - radius;\\n        float gap = gradient;\\n        float scale = 1.0 - abs(delta / gap);\\n        if (scale <= 0.0) {\\n            finalColor = color;\\n            return;\\n        }\\n        radianStep *= scale;\\n    }\\n    radianStep /= float(k);\\n\\n    float s = sin(radianStep);\\n    float c = cos(radianStep);\\n    mat2 rotationMatrix = mat2(vec2(c, -s), vec2(s, c));\\n\\n    for(int i = 0; i < MAX_KERNEL_SIZE - 1; i++) {\\n        if (i == k) {\\n            break;\\n        }\\n\\n        coord -= center;\\n        coord.y *= aspect;\\n        coord = rotationMatrix * coord;\\n        coord.y /= aspect;\\n        coord += center;\\n\\n        vec4 sample = texture(uTexture, coord);\\n\\n        // switch to pre-multiplied alpha to correctly blur transparent images\\n        // sample.rgb *= sample.a;\\n\\n        color += sample;\\n    }\\n\\n    finalColor = color / float(uKernelSize);\\n}\\n\";\n\nexport { fragment as default };\n//# sourceMappingURL=radial-blur.mjs.map\n","import { Filter, deprecation, GpuProgram, GlProgram } from 'pixi.js';\nimport vertex from '../defaults/default.mjs';\nimport wgslVertex from '../defaults/default2.mjs';\nimport fragment from './radial-blur.mjs';\nimport source from './radial-blur2.mjs';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _RadialBlurFilter = class _RadialBlurFilter extends Filter {\n  /** @ignore */\n  constructor(...args) {\n    let options = args[0] ?? {};\n    if (typeof options === \"number\") {\n      deprecation(\"6.0.0\", \"RadialBlurFilter constructor params are now options object. See params: { angle, center, kernelSize, radius }\");\n      options = { angle: options };\n      if (args[1]) {\n        const x = \"x\" in args[1] ? args[1].x : args[1][0];\n        const y = \"y\" in args[1] ? args[1].y : args[1][1];\n        options.center = { x, y };\n      }\n      if (args[2])\n        options.kernelSize = args[2];\n      if (args[3])\n        options.radius = args[3];\n    }\n    options = { ..._RadialBlurFilter.DEFAULT_OPTIONS, ...options };\n    const gpuProgram = GpuProgram.from({\n      vertex: {\n        source: wgslVertex,\n        entryPoint: \"mainVertex\"\n      },\n      fragment: {\n        source,\n        entryPoint: \"mainFragment\"\n      }\n    });\n    const glProgram = GlProgram.from({\n      vertex,\n      fragment,\n      name: \"radial-blur-filter\"\n    });\n    super({\n      gpuProgram,\n      glProgram,\n      resources: {\n        radialBlurUniforms: {\n          uRadian: { value: 0, type: \"f32\" },\n          uCenter: { value: options.center, type: \"vec2<f32>\" },\n          uKernelSize: { value: options.kernelSize, type: \"i32\" },\n          uRadius: { value: options.radius, type: \"f32\" }\n        }\n      }\n    });\n    __publicField(this, \"uniforms\");\n    __publicField(this, \"_angle\");\n    __publicField(this, \"_kernelSize\");\n    this.uniforms = this.resources.radialBlurUniforms.uniforms;\n    Object.assign(this, options);\n  }\n  _updateKernelSize() {\n    this.uniforms.uKernelSize = this._angle !== 0 ? this.kernelSize : 0;\n  }\n  /**\n   * Sets the angle in degrees of the motion for blur effect.\n   * @default 0\n   */\n  get angle() {\n    return this._angle;\n  }\n  set angle(value) {\n    this._angle = value;\n    this.uniforms.uRadian = value * Math.PI / 180;\n    this._updateKernelSize();\n  }\n  /**\n   * The `x` and `y` offset coordinates to change the position of the center of the circle of effect.\n   * This should be a size 2 array or an object containing `x` and `y` values, you cannot change types\n   * once defined in the constructor\n   * @default {x:0,y:0}\n   */\n  get center() {\n    return this.uniforms.uCenter;\n  }\n  set center(value) {\n    if (Array.isArray(value)) {\n      value = { x: value[0], y: value[1] };\n    }\n    this.uniforms.uCenter = value;\n  }\n  /**\n   * Sets the velocity of the motion for blur effect on the `x` axis\n   * @default 0\n   */\n  get centerX() {\n    return this.center.x;\n  }\n  set centerX(value) {\n    this.center.x = value;\n  }\n  /**\n   * Sets the velocity of the motion for blur effect on the `x` axis\n   * @default 0\n   */\n  get centerY() {\n    return this.center.y;\n  }\n  set centerY(value) {\n    this.center.y = value;\n  }\n  /**\n   * The kernelSize of the blur filter. Must be odd number >= 3\n   * @default 5\n   */\n  get kernelSize() {\n    return this._kernelSize;\n  }\n  set kernelSize(value) {\n    this._kernelSize = value;\n    this._updateKernelSize();\n  }\n  /**\n   * The maximum size of the blur radius, less than `0` equates to infinity\n   * @default -1\n   */\n  get radius() {\n    return this.uniforms.uRadius;\n  }\n  set radius(value) {\n    this.uniforms.uRadius = value < 0 || value === Infinity ? -1 : value;\n  }\n};\n/** Default values for options. */\n__publicField(_RadialBlurFilter, \"DEFAULT_OPTIONS\", {\n  angle: 0,\n  center: { x: 0, y: 0 },\n  kernelSize: 5,\n  radius: -1\n});\nlet RadialBlurFilter = _RadialBlurFilter;\n\nexport { RadialBlurFilter };\n//# sourceMappingURL=RadialBlurFilter.mjs.map\n","var source = \"struct RadialBlurUniforms {\\n  uRadian: f32,\\n  uCenter: vec2<f32>,\\n  uKernelSize: f32,\\n  uRadius: f32,\\n};\\n\\nstruct GlobalFilterUniforms {\\n  uInputSize:vec4<f32>,\\n  uInputPixel:vec4<f32>,\\n  uInputClamp:vec4<f32>,\\n  uOutputFrame:vec4<f32>,\\n  uGlobalFrame:vec4<f32>,\\n  uOutputTexture:vec4<f32>,\\n};\\n\\n@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;\\n\\n@group(0) @binding(1) var uTexture: texture_2d<f32>; \\n@group(0) @binding(2) var uSampler: sampler;\\n@group(1) @binding(0) var<uniform> radialBlurUniforms : RadialBlurUniforms;\\n\\n@fragment\\nfn mainFragment(\\n  @builtin(position) position: vec4<f32>,\\n  @location(0) uv : vec2<f32>\\n) -> @location(0) vec4<f32> {\\n  let uRadian = radialBlurUniforms.uRadian;\\n  let uCenter = radialBlurUniforms.uCenter;\\n  let uKernelSize = radialBlurUniforms.uKernelSize;\\n  let uRadius = radialBlurUniforms.uRadius;\\n  \\n  var returnColorOnly = false;\\n\\n  if (uKernelSize == 0)\\n  {\\n    returnColorOnly = true;\\n  }\\n\\n  let aspect: f32 = gfu.uInputSize.y / gfu.uInputSize.x;\\n  let center: vec2<f32> = uCenter.xy / gfu.uInputSize.xy;\\n  let gradient: f32 = uRadius / gfu.uInputSize.x * 0.3;\\n  let radius: f32 = uRadius / gfu.uInputSize.x - gradient * 0.5;\\n  let k: i32 = i32(uKernelSize - 1);\\n\\n  var coord: vec2<f32> = uv;\\n  let dir: vec2<f32> = vec2<f32>(center - coord);\\n  let dist: f32 = length(vec2<f32>(dir.x, dir.y * aspect));\\n\\n  var radianStep: f32 = uRadian;\\n  \\n  if (radius >= 0.0 && dist > radius)\\n  {\\n    let delta: f32 = dist - radius;\\n    let gap: f32 = gradient;\\n    let scale: f32 = 1.0 - abs(delta / gap);\\n    if (scale <= 0.0) {\\n      returnColorOnly = true;\\n    }\\n    radianStep *= scale;\\n  }\\n\\n  radianStep /= f32(k);\\n\\n  let s: f32 = sin(radianStep);\\n  let c: f32 = cos(radianStep);\\n  let rotationMatrix: mat2x2<f32> = mat2x2<f32>(vec2<f32>(c, -s), vec2<f32>(s, c));\\n  \\n  var color: vec4<f32> = textureSample(uTexture, uSampler, uv);\\n  let baseColor = vec4<f32>(color);\\n\\n  let minK: i32 = min(i32(uKernelSize) - 1, MAX_KERNEL_SIZE - 1);\\n\\n  for(var i: i32 = 0; i < minK; i += 1) \\n  {\\n    coord -= center;\\n    coord.y *= aspect;\\n    coord = rotationMatrix * coord;\\n    coord.y /= aspect;\\n    coord += center;\\n    let sample: vec4<f32> = textureSample(uTexture, uSampler, coord);\\n    // switch to pre-multiplied alpha to correctly blur transparent images\\n    // sample.rgb *= sample.a;\\n    color += sample;\\n  }\\n\\n  return select(color / f32(uKernelSize), baseColor, returnColorOnly);\\n}\\n\\nconst MAX_KERNEL_SIZE: i32 = 2048;\";\n\nexport { source as default };\n//# sourceMappingURL=radial-blur2.mjs.map\n","var fragment = \"precision highp float;\\nin vec2 vTextureCoord;\\nout vec4 finalColor;\\n\\nuniform sampler2D uTexture;\\nuniform float uMirror;\\nuniform float uBoundary;\\nuniform vec2 uAmplitude;\\nuniform vec2 uWavelength;\\nuniform vec2 uAlpha;\\nuniform float uTime;\\nuniform vec2 uDimensions;\\n\\nuniform vec4 uInputSize;\\nuniform vec4 uInputClamp;\\n\\nfloat rand(vec2 co) {\\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\\n}\\n\\nvoid main(void)\\n{\\n    vec2 pixelCoord = vTextureCoord.xy * uInputSize.xy;\\n    vec2 coord = pixelCoord / uDimensions;\\n\\n    if (coord.y < uBoundary) {\\n        finalColor = texture(uTexture, vTextureCoord);\\n        return;\\n    }\\n\\n    float k = (coord.y - uBoundary) / (1. - uBoundary + 0.0001);\\n    float areaY = uBoundary * uDimensions.y / uInputSize.y;\\n    float v = areaY + areaY - vTextureCoord.y;\\n    float y = uMirror > 0.5 ? v : vTextureCoord.y;\\n\\n    float _amplitude = ((uAmplitude.y - uAmplitude.x) * k + uAmplitude.x ) / uInputSize.x;\\n    float _waveLength = ((uWavelength.y - uWavelength.x) * k + uWavelength.x) / uInputSize.y;\\n    float _alpha = (uAlpha.y - uAlpha.x) * k + uAlpha.x;\\n\\n    float x = vTextureCoord.x + cos(v * 6.28 / _waveLength - uTime) * _amplitude;\\n    x = clamp(x, uInputClamp.x, uInputClamp.z);\\n\\n    vec4 color = texture(uTexture, vec2(x, y));\\n\\n    finalColor = color * _alpha;\\n}\\n\";\n\nexport { fragment as default };\n//# sourceMappingURL=reflection2.mjs.map\n","import { Filter, GpuProgram, GlProgram } from 'pixi.js';\nimport vertex from '../defaults/default.mjs';\nimport wgslVertex from '../defaults/default2.mjs';\nimport fragment from './reflection2.mjs';\nimport source from './reflection.mjs';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _ReflectionFilter = class _ReflectionFilter extends Filter {\n  /**\n   * @param options - Options for the ReflectionFilter constructor.\n   */\n  constructor(options) {\n    options = { ..._ReflectionFilter.DEFAULT_OPTIONS, ...options };\n    const gpuProgram = GpuProgram.from({\n      vertex: {\n        source: wgslVertex,\n        entryPoint: \"mainVertex\"\n      },\n      fragment: {\n        source,\n        entryPoint: \"mainFragment\"\n      }\n    });\n    const glProgram = GlProgram.from({\n      vertex,\n      fragment,\n      name: \"reflection-filter\"\n    });\n    super({\n      gpuProgram,\n      glProgram,\n      resources: {\n        reflectionUniforms: {\n          uMirror: { value: options.mirror ? 1 : 0, type: \"f32\" },\n          uBoundary: { value: options.boundary, type: \"f32\" },\n          uAmplitude: { value: options.amplitude, type: \"vec2<f32>\" },\n          uWavelength: { value: options.waveLength, type: \"vec2<f32>\" },\n          uAlpha: { value: options.alpha, type: \"vec2<f32>\" },\n          uTime: { value: options.time, type: \"f32\" },\n          uDimensions: { value: new Float32Array(2), type: \"vec2<f32>\" }\n        }\n      }\n    });\n    __publicField(this, \"uniforms\");\n    /**\n     * Time for animating position of waves\n     * @default 0\n     */\n    __publicField(this, \"time\", 0);\n    this.uniforms = this.resources.reflectionUniforms.uniforms;\n    Object.assign(this, options);\n  }\n  /**\n   * Override existing apply method in `Filter`\n   * @override\n   * @ignore\n   */\n  apply(filterManager, input, output, clearMode) {\n    this.uniforms.uDimensions[0] = input.frame.width;\n    this.uniforms.uDimensions[1] = input.frame.height;\n    this.uniforms.uTime = this.time;\n    filterManager.applyFilter(this, input, output, clearMode);\n  }\n  /**\n   * `true` to reflect the image, `false` for waves-only\n   * @default true\n   */\n  get mirror() {\n    return this.uniforms.uMirror > 0.5;\n  }\n  set mirror(value) {\n    this.uniforms.uMirror = value ? 1 : 0;\n  }\n  /**\n   * Vertical position of the reflection point, default is 50% (middle)\n   * smaller numbers produce a larger reflection, larger numbers produce a smaller reflection.\n   * @default 0.5\n   */\n  get boundary() {\n    return this.uniforms.uBoundary;\n  }\n  set boundary(value) {\n    this.uniforms.uBoundary = value;\n  }\n  /**\n   * Starting and ending amplitude of waves\n   * @default [0,20]\n   */\n  get amplitude() {\n    return Array.from(this.uniforms.uAmplitude);\n  }\n  set amplitude(value) {\n    this.uniforms.uAmplitude[0] = value[0];\n    this.uniforms.uAmplitude[1] = value[1];\n  }\n  /**\n   * Starting amplitude of waves\n   * @default 0\n   */\n  get amplitudeStart() {\n    return this.uniforms.uAmplitude[0];\n  }\n  set amplitudeStart(value) {\n    this.uniforms.uAmplitude[0] = value;\n  }\n  /**\n   * Starting amplitude of waves\n   * @default 20\n   */\n  get amplitudeEnd() {\n    return this.uniforms.uAmplitude[1];\n  }\n  set amplitudeEnd(value) {\n    this.uniforms.uAmplitude[1] = value;\n  }\n  /**\n   * Starting and ending length of waves\n   * @default [30,100]\n   */\n  get waveLength() {\n    return Array.from(this.uniforms.uWavelength);\n  }\n  set waveLength(value) {\n    this.uniforms.uWavelength[0] = value[0];\n    this.uniforms.uWavelength[1] = value[1];\n  }\n  /**\n   * Starting wavelength of waves\n   * @default 30\n   */\n  get wavelengthStart() {\n    return this.uniforms.uWavelength[0];\n  }\n  set wavelengthStart(value) {\n    this.uniforms.uWavelength[0] = value;\n  }\n  /**\n   * Starting wavelength of waves\n   * @default 100\n   */\n  get wavelengthEnd() {\n    return this.uniforms.uWavelength[1];\n  }\n  set wavelengthEnd(value) {\n    this.uniforms.uWavelength[1] = value;\n  }\n  /**\n   * Starting and ending alpha values\n   * @default [1,1]\n   */\n  get alpha() {\n    return Array.from(this.uniforms.uAlpha);\n  }\n  set alpha(value) {\n    this.uniforms.uAlpha[0] = value[0];\n    this.uniforms.uAlpha[1] = value[1];\n  }\n  /**\n   * Starting wavelength of waves\n   * @default 1\n   */\n  get alphaStart() {\n    return this.uniforms.uAlpha[0];\n  }\n  set alphaStart(value) {\n    this.uniforms.uAlpha[0] = value;\n  }\n  /**\n   * Starting wavelength of waves\n   * @default 1\n   */\n  get alphaEnd() {\n    return this.uniforms.uAlpha[1];\n  }\n  set alphaEnd(value) {\n    this.uniforms.uAlpha[1] = value;\n  }\n};\n/** Default values for options. */\n__publicField(_ReflectionFilter, \"DEFAULT_OPTIONS\", {\n  mirror: true,\n  boundary: 0.5,\n  amplitude: [0, 20],\n  waveLength: [30, 100],\n  alpha: [1, 1],\n  time: 0\n});\nlet ReflectionFilter = _ReflectionFilter;\n\nexport { ReflectionFilter };\n//# sourceMappingURL=ReflectionFilter.mjs.map\n","var source = \"struct ReflectionUniforms {\\n  uMirror: f32,\\n  uBoundary: f32,\\n  uAmplitude: vec2<f32>,\\n  uWavelength: vec2<f32>,\\n  uAlpha: vec2<f32>,\\n  uTime: f32,\\n  uDimensions: vec2<f32>,\\n};\\n\\nstruct GlobalFilterUniforms {\\n  uInputSize:vec4<f32>,\\n  uInputPixel:vec4<f32>,\\n  uInputClamp:vec4<f32>,\\n  uOutputFrame:vec4<f32>,\\n  uGlobalFrame:vec4<f32>,\\n  uOutputTexture:vec4<f32>,\\n};\\n\\n@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;\\n\\n@group(0) @binding(1) var uTexture: texture_2d<f32>; \\n@group(0) @binding(2) var uSampler: sampler;\\n@group(1) @binding(0) var<uniform> reflectionUniforms : ReflectionUniforms;\\n\\n@fragment\\nfn mainFragment(\\n  @builtin(position) position: vec4<f32>,\\n  @location(0) uv : vec2<f32>\\n) -> @location(0) vec4<f32> {\\n  let uDimensions: vec2<f32> = reflectionUniforms.uDimensions;\\n  let uBoundary: f32 = reflectionUniforms.uBoundary;\\n  let uMirror: bool = reflectionUniforms.uMirror > 0.5;\\n  let uAmplitude: vec2<f32> = reflectionUniforms.uAmplitude;\\n  let uWavelength: vec2<f32> = reflectionUniforms.uWavelength;\\n  let uAlpha: vec2<f32> = reflectionUniforms.uAlpha;\\n  let uTime: f32 = reflectionUniforms.uTime;\\n\\n  let pixelCoord: vec2<f32> = uv * gfu.uInputSize.xy;\\n  let coord: vec2<f32> = pixelCoord /uDimensions;\\n  var returnColorOnly: bool = false;\\n\\n  if (coord.y < uBoundary) {\\n    returnColorOnly = true;\\n  }\\n\\n  let k: f32 = (coord.y - uBoundary) / (1. - uBoundary + 0.0001);\\n  let areaY: f32 = uBoundary * uDimensions.y / gfu.uInputSize.y;\\n  let v: f32 = areaY + areaY - uv.y;\\n  let y: f32 = select(uv.y, v, uMirror);\\n\\n  let amplitude: f32 = ((uAmplitude.y - uAmplitude.x) * k + uAmplitude.x ) / gfu.uInputSize.x;\\n  let waveLength: f32 = ((uWavelength.y - uWavelength.x) * k + uWavelength.x) / gfu.uInputSize.y;\\n  let alpha: f32 = select((uAlpha.y - uAlpha.x) * k + uAlpha.x, 1., returnColorOnly);\\n\\n  var x: f32 = uv.x + cos(v * 6.28 / waveLength - uTime) * amplitude;\\n  x = clamp(x, gfu.uInputClamp.x, gfu.uInputClamp.z);\\n  \\n  return textureSample(uTexture, uSampler, select(vec2<f32>(x, y), uv, returnColorOnly)) * alpha;\\n}\\n\\nfn rand(co: vec2<f32>) -> f32 \\n{\\n  return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\\n}\";\n\nexport { source as default };\n//# sourceMappingURL=reflection.mjs.map\n","var fragment = \"precision highp float;\\nin vec2 vTextureCoord;\\nout vec4 finalColor;\\n\\nuniform sampler2D uTexture;\\nuniform vec4 uInputSize;\\nuniform vec2 uRed;\\nuniform vec2 uGreen;\\nuniform vec2 uBlue;\\n\\nvoid main(void)\\n{\\n   float r = texture(uTexture, vTextureCoord + uRed/uInputSize.xy).r;\\n   float g = texture(uTexture, vTextureCoord + uGreen/uInputSize.xy).g;\\n   float b = texture(uTexture, vTextureCoord + uBlue/uInputSize.xy).b;\\n   float a = texture(uTexture, vTextureCoord).a;\\n   finalColor = vec4(r, g, b, a);\\n}\\n\";\n\nexport { fragment as default };\n//# sourceMappingURL=rgb-split.mjs.map\n","import { Filter, deprecation, GpuProgram, GlProgram } from 'pixi.js';\nimport vertex from '../defaults/default.mjs';\nimport wgslVertex from '../defaults/default2.mjs';\nimport fragment from './rgb-split.mjs';\nimport source from './rgb-split2.mjs';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _RGBSplitFilter = class _RGBSplitFilter extends Filter {\n  /** @ignore */\n  constructor(...args) {\n    let options = args[0] ?? {};\n    if (Array.isArray(options) || \"x\" in options && \"y\" in options) {\n      deprecation(\"6.0.0\", \"RGBSplitFilter constructor params are now options object. See params: { red, green, blue }\");\n      options = { red: options };\n      if (args[1] !== void 0)\n        options.green = args[1];\n      if (args[2] !== void 0)\n        options.blue = args[2];\n    }\n    options = { ..._RGBSplitFilter.DEFAULT_OPTIONS, ...options };\n    const gpuProgram = GpuProgram.from({\n      vertex: {\n        source: wgslVertex,\n        entryPoint: \"mainVertex\"\n      },\n      fragment: {\n        source,\n        entryPoint: \"mainFragment\"\n      }\n    });\n    const glProgram = GlProgram.from({\n      vertex,\n      fragment,\n      name: \"rgb-split-filter\"\n    });\n    super({\n      gpuProgram,\n      glProgram,\n      resources: {\n        rgbSplitUniforms: {\n          uRed: { value: options.red, type: \"vec2<f32>\" },\n          uGreen: { value: options.green, type: \"vec2<f32>\" },\n          uBlue: { value: options.blue, type: \"vec2<f32>\" }\n        }\n      }\n    });\n    __publicField(this, \"uniforms\");\n    this.uniforms = this.resources.rgbSplitUniforms.uniforms;\n    Object.assign(this, options);\n  }\n  /**\n   * Red channel offset.\n   * @default {x:-10,y:0}\n   */\n  get red() {\n    return this.uniforms.uRed;\n  }\n  set red(value) {\n    if (Array.isArray(value)) {\n      value = { x: value[0], y: value[1] };\n    }\n    this.uniforms.uRed = value;\n  }\n  /**\n   * Amount of x-axis offset for the red channel.\n   * @default -10\n   */\n  get redX() {\n    return this.red.x;\n  }\n  set redX(value) {\n    this.red.x = value;\n  }\n  /**\n   * Amount of y-axis offset for the red channel.\n   * @default 0\n   */\n  get redY() {\n    return this.red.y;\n  }\n  set redY(value) {\n    this.red.y = value;\n  }\n  /**\n   * Green channel offset.\n   * @default {x:0,y:10}\n   */\n  get green() {\n    return this.uniforms.uGreen;\n  }\n  set green(value) {\n    if (Array.isArray(value)) {\n      value = { x: value[0], y: value[1] };\n    }\n    this.uniforms.uGreen = value;\n  }\n  /**\n   * Amount of x-axis offset for the green channel.\n   * @default 0\n   */\n  get greenX() {\n    return this.green.x;\n  }\n  set greenX(value) {\n    this.green.x = value;\n  }\n  /**\n   * Amount of y-axis offset for the green channel.\n   * @default 10\n   */\n  get greenY() {\n    return this.green.y;\n  }\n  set greenY(value) {\n    this.green.y = value;\n  }\n  /**\n   * Blue channel offset.\n   * @default {x:0,y:0}\n   */\n  get blue() {\n    return this.uniforms.uBlue;\n  }\n  set blue(value) {\n    if (Array.isArray(value)) {\n      value = { x: value[0], y: value[1] };\n    }\n    this.uniforms.uBlue = value;\n  }\n  /**\n   * Amount of x-axis offset for the blue channel.\n   * @default 0\n   */\n  get blueX() {\n    return this.blue.x;\n  }\n  set blueX(value) {\n    this.blue.x = value;\n  }\n  /**\n   * Amount of y-axis offset for the blue channel.\n   * @default 0\n   */\n  get blueY() {\n    return this.blue.y;\n  }\n  set blueY(value) {\n    this.blue.y = value;\n  }\n};\n/** Default values for options. */\n__publicField(_RGBSplitFilter, \"DEFAULT_OPTIONS\", {\n  red: { x: -10, y: 0 },\n  green: { x: 0, y: 10 },\n  blue: { x: 0, y: 0 }\n});\nlet RGBSplitFilter = _RGBSplitFilter;\n\nexport { RGBSplitFilter };\n//# sourceMappingURL=RGBSplitFilter.mjs.map\n","var source = \"struct RgbSplitUniforms {\\n    uRed: vec2<f32>,\\n    uGreen: vec2<f32>,\\n    uBlue: vec3<f32>,\\n};\\n\\nstruct GlobalFilterUniforms {\\n    uInputSize:vec4<f32>,\\n    uInputPixel:vec4<f32>,\\n    uInputClamp:vec4<f32>,\\n    uOutputFrame:vec4<f32>,\\n    uGlobalFrame:vec4<f32>,\\n    uOutputTexture:vec4<f32>,\\n};\\n\\n@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;\\n\\n@group(0) @binding(1) var uTexture: texture_2d<f32>; \\n@group(0) @binding(2) var uSampler: sampler;\\n@group(1) @binding(0) var<uniform> rgbSplitUniforms : RgbSplitUniforms;\\n\\n@fragment\\nfn mainFragment(\\n    @builtin(position) position: vec4<f32>,\\n    @location(0) uv : vec2<f32>\\n) -> @location(0) vec4<f32> {\\n    let r = textureSample(uTexture, uSampler, uv + vec2<f32>(rgbSplitUniforms.uRed.x / gfu.uInputSize.x, rgbSplitUniforms.uRed.y / gfu.uInputSize.y)).r;\\n    let g = textureSample(uTexture, uSampler, uv + vec2<f32>(rgbSplitUniforms.uGreen.x / gfu.uInputSize.x, rgbSplitUniforms.uGreen.y / gfu.uInputSize.y)).g;\\n    let b = textureSample(uTexture, uSampler, uv + vec2<f32>(rgbSplitUniforms.uBlue.x / gfu.uInputSize.x, rgbSplitUniforms.uBlue.y / gfu.uInputSize.y)).b;\\n    let a = textureSample(uTexture, uSampler, uv).a;\\n    return vec4<f32>(r, g, b, a);\\n}\\n\";\n\nexport { source as default };\n//# sourceMappingURL=rgb-split2.mjs.map\n","var fragment = \"\\nprecision highp float;\\nin vec2 vTextureCoord;\\nout vec4 finalColor;\\n\\nuniform sampler2D uTexture;\\nuniform vec2 uCenter;\\nuniform float uTime;\\nuniform float uSpeed;\\nuniform vec4 uWave;\\n\\nuniform vec4 uInputSize;\\nuniform vec4 uInputClamp;\\n\\nconst float PI = 3.14159;\\n\\nvoid main()\\n{\\n    float uAmplitude = uWave[0];\\n    float uWavelength = uWave[1];\\n    float uBrightness = uWave[2];\\n    float uRadius = uWave[3];\\n\\n    float halfWavelength = uWavelength * 0.5 / uInputSize.x;\\n    float maxRadius = uRadius / uInputSize.x;\\n    float currentRadius = uTime * uSpeed / uInputSize.x;\\n\\n    float fade = 1.0;\\n\\n    if (maxRadius > 0.0) {\\n        if (currentRadius > maxRadius) {\\n            finalColor = texture(uTexture, vTextureCoord);\\n            return;\\n        }\\n        fade = 1.0 - pow(currentRadius / maxRadius, 2.0);\\n    }\\n\\n    vec2 dir = vec2(vTextureCoord - uCenter / uInputSize.xy);\\n    dir.y *= uInputSize.y / uInputSize.x;\\n    float dist = length(dir);\\n\\n    if (dist <= 0.0 || dist < currentRadius - halfWavelength || dist > currentRadius + halfWavelength) {\\n        finalColor = texture(uTexture, vTextureCoord);\\n        return;\\n    }\\n\\n    vec2 diffUV = normalize(dir);\\n\\n    float diff = (dist - currentRadius) / halfWavelength;\\n\\n    float p = 1.0 - pow(abs(diff), 2.0);\\n\\n    // float powDiff = diff * pow(p, 2.0) * ( amplitude * fade );\\n    float powDiff = 1.25 * sin(diff * PI) * p * ( uAmplitude * fade );\\n\\n    vec2 offset = diffUV * powDiff / uInputSize.xy;\\n\\n    // Do clamp :\\n    vec2 coord = vTextureCoord + offset;\\n    vec2 clampedCoord = clamp(coord, uInputClamp.xy, uInputClamp.zw);\\n    vec4 color = texture(uTexture, clampedCoord);\\n    if (coord != clampedCoord) {\\n        color *= max(0.0, 1.0 - length(coord - clampedCoord));\\n    }\\n\\n    // No clamp :\\n    // finalColor = texture(uTexture, vTextureCoord + offset);\\n\\n    color.rgb *= 1.0 + (uBrightness - 1.0) * p * fade;\\n\\n    finalColor = color;\\n}\\n\";\n\nexport { fragment as default };\n//# sourceMappingURL=shockwave.mjs.map\n","import { Filter, deprecation, GpuProgram, GlProgram } from 'pixi.js';\nimport vertex from '../defaults/default.mjs';\nimport wgslVertex from '../defaults/default2.mjs';\nimport fragment from './shockwave.mjs';\nimport source from './shockwave2.mjs';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _ShockwaveFilter = class _ShockwaveFilter extends Filter {\n  /** @ignore */\n  // eslint-disable-next-line max-len\n  constructor(...args) {\n    let options = args[0] ?? {};\n    if (Array.isArray(options) || \"x\" in options && \"y\" in options) {\n      deprecation(\"6.0.0\", \"ShockwaveFilter constructor params are now options object. See params: { center, speed, amplitude, wavelength, brightness, radius, time }\");\n      options = { center: options, ...args[1] };\n      if (args[2] !== void 0)\n        options.time = args[2];\n    }\n    options = { ..._ShockwaveFilter.DEFAULT_OPTIONS, ...options };\n    const gpuProgram = GpuProgram.from({\n      vertex: {\n        source: wgslVertex,\n        entryPoint: \"mainVertex\"\n      },\n      fragment: {\n        source,\n        entryPoint: \"mainFragment\"\n      }\n    });\n    const glProgram = GlProgram.from({\n      vertex,\n      fragment,\n      name: \"shockwave-filter\"\n    });\n    super({\n      gpuProgram,\n      glProgram,\n      resources: {\n        shockwaveUniforms: {\n          uTime: { value: options.time, type: \"f32\" },\n          uCenter: { value: options.center, type: \"vec2<f32>\" },\n          uSpeed: { value: options.speed, type: \"f32\" },\n          uWave: { value: new Float32Array(4), type: \"vec4<f32>\" }\n        }\n      }\n    });\n    __publicField(this, \"uniforms\");\n    /** Sets the elapsed time of the shockwave. It could control the current size of shockwave. */\n    __publicField(this, \"time\");\n    this.time = 0;\n    this.uniforms = this.resources.shockwaveUniforms.uniforms;\n    Object.assign(this, options);\n  }\n  apply(filterManager, input, output, clearMode) {\n    this.uniforms.uTime = this.time;\n    filterManager.applyFilter(this, input, output, clearMode);\n  }\n  /**\n   * The `x` and `y` center coordinates to change the position of the center of the circle of effect.\n   * @default [0,0]\n   */\n  get center() {\n    return this.uniforms.uCenter;\n  }\n  set center(value) {\n    if (Array.isArray(value)) {\n      value = { x: value[0], y: value[1] };\n    }\n    this.uniforms.uCenter = value;\n  }\n  /**\n   * Sets the center of the effect in normalized screen coords on the `x` axis\n   * @default 0\n   */\n  get centerX() {\n    return this.uniforms.uCenter.x;\n  }\n  set centerX(value) {\n    this.uniforms.uCenter.x = value;\n  }\n  /**\n   * Sets the center of the effect in normalized screen coords on the `y` axis\n   * @default 0\n   */\n  get centerY() {\n    return this.uniforms.uCenter.y;\n  }\n  set centerY(value) {\n    this.uniforms.uCenter.y = value;\n  }\n  /**\n   * The speed about the shockwave ripples out. The unit is `pixel-per-second`\n   * @default 500\n   */\n  get speed() {\n    return this.uniforms.uSpeed;\n  }\n  set speed(value) {\n    this.uniforms.uSpeed = value;\n  }\n  /**\n   * The amplitude of the shockwave\n   * @default 30\n   */\n  get amplitude() {\n    return this.uniforms.uWave[0];\n  }\n  set amplitude(value) {\n    this.uniforms.uWave[0] = value;\n  }\n  /**\n   * The wavelength of the shockwave\n   * @default 160\n   */\n  get wavelength() {\n    return this.uniforms.uWave[1];\n  }\n  set wavelength(value) {\n    this.uniforms.uWave[1] = value;\n  }\n  /**\n   * The brightness of the shockwave\n   * @default 1\n   */\n  get brightness() {\n    return this.uniforms.uWave[2];\n  }\n  set brightness(value) {\n    this.uniforms.uWave[2] = value;\n  }\n  /**\n   * The maximum radius of shockwave. less than `0` means the max is an infinite distance\n   * @default -1\n   */\n  get radius() {\n    return this.uniforms.uWave[3];\n  }\n  set radius(value) {\n    this.uniforms.uWave[3] = value;\n  }\n};\n/** Default shockwave filter options */\n__publicField(_ShockwaveFilter, \"DEFAULT_OPTIONS\", {\n  /** The `x` and `y` center coordinates to change the position of the center of the circle of effect. */\n  center: { x: 0, y: 0 },\n  /** The speed about the shockwave ripples out. The unit is `pixel-per-second` */\n  speed: 500,\n  /** The amplitude of the shockwave */\n  amplitude: 30,\n  /** The wavelength of the shockwave */\n  wavelength: 160,\n  /** The brightness of the shockwave */\n  brightness: 1,\n  /** The maximum radius of shockwave. less than `0` means the max is an infinite distance */\n  radius: -1\n});\nlet ShockwaveFilter = _ShockwaveFilter;\n\nexport { ShockwaveFilter };\n//# sourceMappingURL=ShockwaveFilter.mjs.map\n","var source = \"\\nstruct ShockWaveUniforms {\\n    uTime: f32,\\n    uOffset: vec2<f32>,\\n    uSpeed: f32,\\n    uWave: vec4<f32>,\\n};\\n\\nstruct GlobalFilterUniforms {\\n    uInputSize:vec4<f32>,\\n    uInputPixel:vec4<f32>,\\n    uInputClamp:vec4<f32>,\\n    uOutputFrame:vec4<f32>,\\n    uGlobalFrame:vec4<f32>,\\n    uOutputTexture:vec4<f32>,\\n};\\n\\n@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;\\n\\n@group(0) @binding(1) var uTexture: texture_2d<f32>; \\n@group(0) @binding(2) var uSampler: sampler;\\n@group(1) @binding(0) var<uniform> shockwaveUniforms : ShockWaveUniforms;\\n\\n@fragment\\nfn mainFragment(\\n    @builtin(position) position: vec4<f32>,\\n    @location(0) uv : vec2<f32>\\n) -> @location(0) vec4<f32> {\\n\\n    let uTime = shockwaveUniforms.uTime;\\n    let uOffset = shockwaveUniforms.uOffset;\\n    let uSpeed = shockwaveUniforms.uSpeed;\\n    let uAmplitude = shockwaveUniforms.uWave[0];\\n    let uWavelength = shockwaveUniforms.uWave[1];\\n    let uBrightness = shockwaveUniforms.uWave[2];\\n    let uRadius = shockwaveUniforms.uWave[3];\\n    let halfWavelength: f32 = uWavelength * 0.5 / gfu.uInputSize.x;\\n    let maxRadius: f32 = uRadius / gfu.uInputSize.x;\\n    let currentRadius: f32 = uTime * uSpeed / gfu.uInputSize.x;\\n    var fade: f32 = 1.0;\\n    var returnColorOnly: bool = false;\\n    \\n    if (maxRadius > 0.0) {\\n        if (currentRadius > maxRadius) {\\n            returnColorOnly = true;\\n        }\\n        fade = 1.0 - pow(currentRadius / maxRadius, 2.0);\\n    }\\n    var dir: vec2<f32> = vec2<f32>(uv - uOffset / gfu.uInputSize.xy);\\n    dir.y *= gfu.uInputSize.y / gfu.uInputSize.x;\\n\\n    let dist:f32 = length(dir);\\n\\n    if (dist <= 0.0 || dist < currentRadius - halfWavelength || dist > currentRadius + halfWavelength) {\\n        returnColorOnly = true;\\n    }\\n\\n    let diffUV: vec2<f32> = normalize(dir);\\n    let diff: f32 = (dist - currentRadius) / halfWavelength;\\n    let p: f32 = 1.0 - pow(abs(diff), 2.0);\\n    let powDiff: f32 = 1.25 * sin(diff * PI) * p * ( uAmplitude * fade );\\n    let offset: vec2<f32> = diffUV * powDiff / gfu.uInputSize.xy;\\n    // Do clamp :\\n    let coord: vec2<f32> = uv + offset;\\n    let clampedCoord: vec2<f32> = clamp(coord, gfu.uInputClamp.xy, gfu.uInputClamp.zw);\\n\\n    var clampedColor: vec4<f32> = textureSample(uTexture, uSampler, clampedCoord);\\n    \\n    if (boolVec2(coord, clampedCoord)) \\n    {\\n        clampedColor *= max(0.0, 1.0 - length(coord - clampedCoord));\\n    }\\n    // No clamp :\\n    var finalColor = clampedColor;\\n\\n    return select(finalColor, textureSample(uTexture, uSampler, uv), returnColorOnly);\\n}\\n\\nfn boolVec2(x: vec2<f32>, y: vec2<f32>) -> bool\\n{\\n    if (x.x == y.x && x.y == y.y)\\n    {\\n        return true;\\n    }\\n    \\n    return false;\\n}\\n\\nconst PI: f32 = 3.14159265358979323846264;\\n\";\n\nexport { source as default };\n//# sourceMappingURL=shockwave2.mjs.map\n","var fragment = \"precision highp float;\\nin vec2 vTextureCoord;\\nout vec4 finalColor;\\n\\nuniform sampler2D uTexture;\\nuniform sampler2D uMapTexture;\\nuniform vec3 uColor;\\nuniform float uAlpha;\\nuniform vec2 uDimensions;\\n\\nuniform vec4 uInputSize;\\n\\nvoid main() {\\n    vec4 diffuseColor = texture(uTexture, vTextureCoord);\\n    vec2 lightCoord = (vTextureCoord * uInputSize.xy) / uDimensions;\\n    vec4 light = texture(uMapTexture, lightCoord);\\n    vec3 ambient = uColor.rgb * uAlpha;\\n    vec3 intensity = ambient + light.rgb;\\n    vec3 color = diffuseColor.rgb * intensity;\\n    finalColor = vec4(color, diffuseColor.a);\\n}\\n\";\n\nexport { fragment as default };\n//# sourceMappingURL=simple-lightmap.mjs.map\n","import { Texture, Filter, deprecation, GpuProgram, GlProgram, Color } from 'pixi.js';\nimport vertex from '../defaults/default.mjs';\nimport wgslVertex from '../defaults/default2.mjs';\nimport fragment from './simple-lightmap.mjs';\nimport source from './simple-lightmap2.mjs';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _SimpleLightmapFilter = class _SimpleLightmapFilter extends Filter {\n  /** @ignore */\n  constructor(...args) {\n    let options = args[0] ?? {};\n    if (options instanceof Texture) {\n      deprecation(\"6.0.0\", \"SimpleLightmapFilter constructor params are now options object. See params: { lightMap, color, alpha }\");\n      options = { lightMap: options };\n      if (args[1] !== void 0)\n        options.color = args[1];\n      if (args[2] !== void 0)\n        options.alpha = args[2];\n    }\n    options = { ..._SimpleLightmapFilter.DEFAULT_OPTIONS, ...options };\n    if (!options.lightMap)\n      throw Error(\"No light map texture source was provided to SimpleLightmapFilter\");\n    const gpuProgram = GpuProgram.from({\n      vertex: {\n        source: wgslVertex,\n        entryPoint: \"mainVertex\"\n      },\n      fragment: {\n        source,\n        entryPoint: \"mainFragment\"\n      }\n    });\n    const glProgram = GlProgram.from({\n      vertex,\n      fragment,\n      name: \"simple-lightmap-filter\"\n    });\n    super({\n      gpuProgram,\n      glProgram,\n      resources: {\n        simpleLightmapUniforms: {\n          uColor: { value: new Float32Array(3), type: \"vec3<f32>\" },\n          uAlpha: { value: options.alpha, type: \"f32\" },\n          uDimensions: { value: new Float32Array(2), type: \"vec2<f32>\" }\n        },\n        uMapTexture: options.lightMap.source,\n        uMapSampler: options.lightMap.source.style\n      }\n    });\n    __publicField(this, \"uniforms\");\n    __publicField(this, \"_color\");\n    __publicField(this, \"_lightMap\");\n    this.uniforms = this.resources.simpleLightmapUniforms.uniforms;\n    this._color = new Color();\n    this.color = options.color ?? 0;\n    Object.assign(this, options);\n  }\n  /**\n   * Override existing apply method in `Filter`\n   * @override\n   * @ignore\n   */\n  apply(filterManager, input, output, clearMode) {\n    this.uniforms.uDimensions[0] = input.frame.width;\n    this.uniforms.uDimensions[1] = input.frame.height;\n    filterManager.applyFilter(this, input, output, clearMode);\n  }\n  /** A sprite where your lightmap is rendered */\n  get lightMap() {\n    return this._lightMap;\n  }\n  set lightMap(value) {\n    this._lightMap = value;\n    this.resources.uMapTexture = value.source;\n    this.resources.uMapSampler = value.source.style;\n  }\n  /**\n   * The color value of the ambient color\n   * @example [1.0, 1.0, 1.0] = 0xffffff\n   * @default 0x000000\n   */\n  get color() {\n    return this._color.value;\n  }\n  set color(value) {\n    this._color.setValue(value);\n    const [r, g, b] = this._color.toArray();\n    this.uniforms.uColor[0] = r;\n    this.uniforms.uColor[1] = g;\n    this.uniforms.uColor[2] = b;\n  }\n  /**\n   * Coefficient for alpha multiplication\n   * @default 1\n   */\n  get alpha() {\n    return this.uniforms.uAlpha;\n  }\n  set alpha(value) {\n    this.uniforms.uAlpha = value;\n  }\n};\n/** Default values for options. */\n__publicField(_SimpleLightmapFilter, \"DEFAULT_OPTIONS\", {\n  lightMap: Texture.WHITE,\n  color: 0,\n  alpha: 1\n});\nlet SimpleLightmapFilter = _SimpleLightmapFilter;\n\nexport { SimpleLightmapFilter };\n//# sourceMappingURL=SimpleLightmapFilter.mjs.map\n","var source = \"struct SimpleLightmapUniforms {\\n  uColor: vec3<f32>,\\n  uAlpha: f32,\\n  uDimensions: vec2<f32>,\\n};\\n\\nstruct GlobalFilterUniforms {\\n  uInputSize:vec4<f32>,\\n  uInputPixel:vec4<f32>,\\n  uInputClamp:vec4<f32>,\\n  uOutputFrame:vec4<f32>,\\n  uGlobalFrame:vec4<f32>,\\n  uOutputTexture:vec4<f32>,\\n};\\n\\n@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;\\n\\n@group(0) @binding(1) var uTexture: texture_2d<f32>; \\n@group(0) @binding(2) var uSampler: sampler;\\n@group(1) @binding(0) var<uniform> simpleLightmapUniforms : SimpleLightmapUniforms;\\n@group(1) @binding(1) var uMapTexture: texture_2d<f32>;\\n@group(1) @binding(2) var uMapSampler: sampler;\\n\\n@fragment\\nfn mainFragment(\\n  @builtin(position) position: vec4<f32>,\\n  @location(0) uv : vec2<f32>,\\n) -> @location(0) vec4<f32> {\\n  let uColor = simpleLightmapUniforms.uColor;\\n  let uAlpha = simpleLightmapUniforms.uAlpha;\\n  let uDimensions = simpleLightmapUniforms.uDimensions;\\n\\n  let diffuseColor: vec4<f32> = textureSample(uTexture, uSampler, uv);\\n  let lightCoord: vec2<f32> = (uv * gfu.uInputSize.xy) / simpleLightmapUniforms.uDimensions;\\n  let light: vec4<f32> = textureSample(uMapTexture, uMapSampler, lightCoord);\\n  let ambient: vec3<f32> = uColor * uAlpha;\\n  let intensity: vec3<f32> = ambient + light.rgb;\\n  let finalColor: vec3<f32> = diffuseColor.rgb * intensity;\\n  return vec4<f32>(finalColor, diffuseColor.a);\\n}\";\n\nexport { source as default };\n//# sourceMappingURL=simple-lightmap2.mjs.map\n","var fragment = \"in vec2 vTextureCoord;\\nout vec4 finalColor;\\n\\nuniform sampler2D uTexture;\\nuniform vec2 uBlur;\\nuniform vec2 uStart;\\nuniform vec2 uEnd;\\nuniform vec2 uDelta;\\nuniform vec2 uTexSize;\\n\\nfloat random(vec3 scale, float seed)\\n{\\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\\n}\\n\\nvoid main(void)\\n{\\n    vec4 color = vec4(0.0);\\n    float total = 0.0;\\n\\n    float blur = uBlur[0];\\n    float gradientBlur = uBlur[1];\\n\\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\\n    vec2 normal = normalize(vec2(uStart.y - uEnd.y, uEnd.x - uStart.x));\\n    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * uTexSize - uStart, normal)) / gradientBlur) * blur;\\n\\n    for (float t = -30.0; t <= 30.0; t++)\\n    {\\n        float percent = (t + offset - 0.5) / 30.0;\\n        float weight = 1.0 - abs(percent);\\n        vec4 sample = texture(uTexture, vTextureCoord + uDelta / uTexSize * percent * radius);\\n        sample.rgb *= sample.a;\\n        color += sample * weight;\\n        total += weight;\\n    }\\n\\n    color /= total;\\n    color.rgb /= color.a + 0.00001;\\n\\n    finalColor = color;\\n}\\n\";\n\nexport { fragment as default };\n//# sourceMappingURL=tilt-shift.mjs.map\n","import { Filter, GpuProgram, GlProgram } from 'pixi.js';\nimport vertex from '../defaults/default.mjs';\nimport wgslVertex from '../defaults/default2.mjs';\nimport fragment from './tilt-shift.mjs';\nimport source from './tilt-shift2.mjs';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _TiltShiftAxisFilter = class _TiltShiftAxisFilter extends Filter {\n  constructor(options) {\n    options = { ..._TiltShiftAxisFilter.DEFAULT_OPTIONS, ...options };\n    const gpuProgram = GpuProgram.from({\n      vertex: {\n        source: wgslVertex,\n        entryPoint: \"mainVertex\"\n      },\n      fragment: {\n        source,\n        entryPoint: \"mainFragment\"\n      }\n    });\n    const glProgram = GlProgram.from({\n      vertex,\n      fragment,\n      name: \"tilt-shift-axis-filter\"\n    });\n    super({\n      gpuProgram,\n      glProgram,\n      resources: {\n        tiltShiftUniforms: {\n          uBlur: {\n            value: new Float32Array([\n              options.blur ?? 100,\n              options.gradientBlur ?? 600\n            ]),\n            type: \"vec2<f32>\"\n          },\n          uStart: { value: options.start, type: \"vec2<f32>\" },\n          uEnd: { value: options.end, type: \"vec2<f32>\" },\n          uDelta: { value: new Float32Array([30, 30]), type: \"vec2<f32>\" },\n          uTexSize: { value: new Float32Array([window.innerWidth, window.innerHeight]), type: \"vec2<f32>\" }\n        }\n      }\n    });\n    __publicField(this, \"uniforms\");\n    __publicField(this, \"_tiltAxis\");\n    this.uniforms = this.resources.tiltShiftUniforms.uniforms;\n    this._tiltAxis = options.axis;\n    this.updateDelta();\n  }\n  /** Updates the filter delta values. */\n  updateDelta() {\n    this.uniforms.uDelta[0] = 0;\n    this.uniforms.uDelta[1] = 0;\n    if (this._tiltAxis === void 0)\n      return;\n    const end = this.uniforms.uEnd;\n    const start = this.uniforms.uStart;\n    const dx = end.x - start.x;\n    const dy = end.y - start.y;\n    const d = Math.sqrt(dx * dx + dy * dy);\n    const isVert = this._tiltAxis === \"vertical\";\n    this.uniforms.uDelta[0] = !isVert ? dx / d : -dy / d;\n    this.uniforms.uDelta[1] = !isVert ? dy / d : dx / d;\n  }\n  // /** The strength of the blur. */\n  // get blur(): number { return this.uniforms.uBlur[0]; }\n  // set blur(value: number) { this.uniforms.uBlur[0] = value; }\n  // /** The strength of the gradient blur. */\n  // get gradientBlur(): number { return this.uniforms.uBlur[1]; }\n  // set gradientBlur(value: number) { this.uniforms.uBlur[1] = value; }\n  // /** The start position of the effect. */\n  // get start(): PointData { return this.uniforms.uStart; }\n  // set start(value: PointData)\n  // {\n  //     this.uniforms.uStart = value;\n  //     this.updateDelta();\n  // }\n  // /** The start position of the effect on the `x` axis. */\n  // get startX(): number { return this.start.x; }\n  // set startX(value: number)\n  // {\n  //     this.start.x = value;\n  //     this.updateDelta();\n  // }\n  // /** The start position of the effect on the `y` axis. */\n  // get startY(): number { return this.startY; }\n  // set startY(value: number)\n  // {\n  //     this.start.y = value;\n  //     this.updateDelta();\n  // }\n  // /** The end position of the effect. */\n  // get end(): PointData { return this.uniforms.uEnd; }\n  // set end(value: PointData)\n  // {\n  //     this.uniforms.uEnd = value;\n  //     this.updateDelta();\n  // }\n  // /** The end position of the effect on the `x` axis. */\n  // get endX(): number { return this.end.x; }\n  // set endX(value: number)\n  // {\n  //     this.end.x = value;\n  //     this.updateDelta();\n  // }\n  // /** The end position of the effect on the `y` axis. */\n  // get endY(): number { return this.end.y; }\n  // set endY(value: number)\n  // {\n  //     this.end.y = value;\n  //     this.updateDelta();\n  // }\n};\n/** Default values for options. */\n__publicField(_TiltShiftAxisFilter, \"DEFAULT_OPTIONS\", {\n  /** The strength of the blur. */\n  blur: 100,\n  /** The strength of the blur gradient */\n  gradientBlur: 600,\n  /** The position to start the effect at. */\n  start: { x: 0, y: window.innerHeight / 2 },\n  /** The position to end the effect at. */\n  end: { x: 600, y: window.innerHeight / 2 }\n});\nlet TiltShiftAxisFilter = _TiltShiftAxisFilter;\n\nexport { TiltShiftAxisFilter };\n//# sourceMappingURL=TiltShiftAxisFilter.mjs.map\n","var source = \"struct TiltShiftUniforms {\\n  uBlur: vec2<f32>,\\n  uStart: vec2<f32>,\\n  uEnd: vec2<f32>,\\n  uDelta: vec2<f32>,\\n  uTexSize: vec2<f32>,\\n};\\n\\n@group(0) @binding(1) var uTexture: texture_2d<f32>; \\n@group(0) @binding(2) var uSampler: sampler;\\n@group(1) @binding(0) var<uniform> tiltShiftUniforms : TiltShiftUniforms;\\n\\n@fragment\\nfn mainFragment(\\n  @builtin(position) position: vec4<f32>,\\n  @location(0) uv : vec2<f32>\\n) -> @location(0) vec4<f32> {\\n  let uBlur = tiltShiftUniforms.uBlur[0];\\n  let uBlurGradient = tiltShiftUniforms.uBlur[1];\\n  let uStart = tiltShiftUniforms.uStart;\\n  let uEnd = tiltShiftUniforms.uEnd;\\n  let uDelta = tiltShiftUniforms.uDelta;\\n  let uTexSize = tiltShiftUniforms.uTexSize;\\n\\n  var color: vec4<f32> = vec4<f32>(0.0);\\n  var total: f32 = 0.0;\\n\\n  let offset: f32 = random(position, vec3<f32>(12.9898, 78.233, 151.7182), 0.0);\\n  let normal: vec2<f32> = normalize(vec2<f32>(uStart.y - uEnd.y, uEnd.x - uStart.x));\\n  let radius: f32 = smoothstep(0.0, 1.0, abs(dot(uv * uTexSize - uStart, normal)) / uBlurGradient) * uBlur;\\n\\n  for (var t: f32 = -30.0; t <= 30.0; t += 1.0)\\n  {\\n    var percent: f32 = (t + offset - 0.5) / 30.0;\\n    var weight: f32 = 1.0 - abs(percent);\\n    var sample: vec4<f32> = textureSample(uTexture, uSampler, uv + uDelta / uTexSize * percent * radius);\\n    sample = vec4<f32>(sample.xyz * sample.a, sample.a); // multiply sample.rgb with sample.a\\n    color += sample * weight;\\n    total += weight;\\n  }\\n\\n  color /= total;\\n  color = vec4<f32>(color.xyz / (color.a + 0.00001), color.a); // divide color.rgb by color.a + 0.00001\\n\\n  return color;\\n}\\n\\n\\nfn random(position: vec4<f32>, scale: vec3<f32>, seed: f32) -> f32\\n{\\n  return fract(sin(dot(position.xyz + seed, scale)) * 43758.5453 + seed);\\n}\";\n\nexport { source as default };\n//# sourceMappingURL=tilt-shift2.mjs.map\n","import { TexturePool } from 'pixi.js';\nimport { TiltShiftAxisFilter } from './TiltShiftAxisFilter.mjs';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass TiltShiftFilter extends TiltShiftAxisFilter {\n  /**\n   * @param options - Options for the TiltShiftFilter constructor.\n   */\n  constructor(options) {\n    options = { ...TiltShiftAxisFilter.DEFAULT_OPTIONS, ...options };\n    super({ ...options, axis: \"horizontal\" });\n    __publicField(this, \"_tiltShiftYFilter\");\n    this._tiltShiftYFilter = new TiltShiftAxisFilter({ ...options, axis: \"vertical\" });\n    Object.assign(this, options);\n  }\n  /**\n   * Override existing apply method in `Filter`\n   * @override\n   * @ignore\n   */\n  apply(filterManager, input, output, clearMode) {\n    const renderTarget = TexturePool.getSameSizeTexture(input);\n    filterManager.applyFilter(this, input, renderTarget, true);\n    filterManager.applyFilter(this._tiltShiftYFilter, renderTarget, output, clearMode);\n    TexturePool.returnTexture(renderTarget);\n  }\n  /** The strength of the blur. */\n  get blur() {\n    return this.uniforms.uBlur[0];\n  }\n  set blur(value) {\n    this.uniforms.uBlur[0] = this._tiltShiftYFilter.uniforms.uBlur[0] = value;\n  }\n  /** The strength of the gradient blur. */\n  get gradientBlur() {\n    return this.uniforms.uBlur[1];\n  }\n  set gradientBlur(value) {\n    this.uniforms.uBlur[1] = this._tiltShiftYFilter.uniforms.uBlur[1] = value;\n  }\n  /** The position to start the effect at. */\n  get start() {\n    return this.uniforms.uStart;\n  }\n  set start(value) {\n    this.uniforms.uStart = this._tiltShiftYFilter.uniforms.uStart = value;\n  }\n  /** The position to start the effect at on the `x` axis. */\n  get startX() {\n    return this.start.x;\n  }\n  set startX(value) {\n    this.start.x = value;\n  }\n  /** The position to start the effect at on the `x` axis. */\n  get startY() {\n    return this.start.y;\n  }\n  set startY(value) {\n    this.start.y = value;\n  }\n  /** The position to end the effect at. */\n  get end() {\n    return this.uniforms.uEnd;\n  }\n  set end(value) {\n    this.uniforms.uEnd = this._tiltShiftYFilter.uniforms.uEnd = value;\n  }\n  /** The position to end the effect at on the `x` axis. */\n  get endX() {\n    return this.end.x;\n  }\n  set endX(value) {\n    this.end.x = value;\n  }\n  /** The position to end the effect at on the `y` axis. */\n  get endY() {\n    return this.end.y;\n  }\n  set endY(value) {\n    this.end.y = value;\n  }\n}\n\nexport { TiltShiftFilter };\n//# sourceMappingURL=TiltShiftFilter.mjs.map\n","var fragment = \"precision highp float;\\nin vec2 vTextureCoord;\\nout vec4 finalColor;\\n\\nuniform sampler2D uTexture;\\nuniform vec2 uTwist;\\nuniform vec2 uOffset;\\nuniform vec4 uInputSize;\\n\\nvec2 mapCoord( vec2 coord )\\n{\\n    coord *= uInputSize.xy;\\n    coord += uInputSize.zw;\\n\\n    return coord;\\n}\\n\\nvec2 unmapCoord( vec2 coord )\\n{\\n    coord -= uInputSize.zw;\\n    coord /= uInputSize.xy;\\n\\n    return coord;\\n}\\n\\nvec2 twist(vec2 coord)\\n{\\n    coord -= uOffset;\\n\\n    float dist = length(coord);\\n    float uRadius = uTwist[0];\\n    float uAngle = uTwist[1];\\n\\n    if (dist < uRadius)\\n    {\\n        float ratioDist = (uRadius - dist) / uRadius;\\n        float angleMod = ratioDist * ratioDist * uAngle;\\n        float s = sin(angleMod);\\n        float c = cos(angleMod);\\n        coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);\\n    }\\n\\n    coord += uOffset;\\n\\n    return coord;\\n}\\n\\nvoid main(void)\\n{\\n    vec2 coord = mapCoord(vTextureCoord);\\n    coord = twist(coord);\\n    coord = unmapCoord(coord);\\n    finalColor = texture(uTexture, coord);\\n}\\n\";\n\nexport { fragment as default };\n//# sourceMappingURL=twist.mjs.map\n","import { Filter, GpuProgram, GlProgram } from 'pixi.js';\nimport vertex from '../defaults/default.mjs';\nimport wgslVertex from '../defaults/default2.mjs';\nimport fragment from './twist.mjs';\nimport source from './twist2.mjs';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _TwistFilter = class _TwistFilter extends Filter {\n  /**\n   * @param options - Options for the TwistFilter constructor.\n   */\n  constructor(options) {\n    options = { ..._TwistFilter.DEFAULT_OPTIONS, ...options };\n    const gpuProgram = GpuProgram.from({\n      vertex: {\n        source: wgslVertex,\n        entryPoint: \"mainVertex\"\n      },\n      fragment: {\n        source,\n        entryPoint: \"mainFragment\"\n      }\n    });\n    const glProgram = GlProgram.from({\n      vertex,\n      fragment,\n      name: \"twist-filter\"\n    });\n    super({\n      gpuProgram,\n      glProgram,\n      resources: {\n        twistUniforms: {\n          uTwist: {\n            value: [options.radius ?? 0, options.angle ?? 0],\n            type: \"vec2<f32>\"\n          },\n          uOffset: {\n            value: options.offset,\n            type: \"vec2<f32>\"\n          }\n        }\n      },\n      ...options\n    });\n    __publicField(this, \"uniforms\");\n    this.uniforms = this.resources.twistUniforms.uniforms;\n  }\n  /**\n   * The radius of the twist\n   * @default 200\n   */\n  get radius() {\n    return this.uniforms.uTwist[0];\n  }\n  set radius(value) {\n    this.uniforms.uTwist[0] = value;\n  }\n  /**\n   * The angle of the twist\n   * @default 4\n   */\n  get angle() {\n    return this.uniforms.uTwist[1];\n  }\n  set angle(value) {\n    this.uniforms.uTwist[1] = value;\n  }\n  /**\n   * The `x` offset coordinate to change the position of the center of the circle of effect\n   * @default 0\n   */\n  get offset() {\n    return this.uniforms.uOffset;\n  }\n  set offset(value) {\n    this.uniforms.uOffset = value;\n  }\n  /**\n   * The `x` offset coordinate to change the position of the center of the circle of effect\n   * @default 0\n   */\n  get offsetX() {\n    return this.offset.x;\n  }\n  set offsetX(value) {\n    this.offset.x = value;\n  }\n  /**\n   * The `y` offset coordinate to change the position of the center of the circle of effect\n   * @default 0\n   */\n  get offsetY() {\n    return this.offset.y;\n  }\n  set offsetY(value) {\n    this.offset.y = value;\n  }\n};\n/** Default values for options. */\n__publicField(_TwistFilter, \"DEFAULT_OPTIONS\", {\n  padding: 20,\n  radius: 200,\n  angle: 4,\n  offset: { x: 0, y: 0 }\n});\nlet TwistFilter = _TwistFilter;\n\nexport { TwistFilter };\n//# sourceMappingURL=TwistFilter.mjs.map\n","var source = \"struct TwistUniforms {\\n  uTwist:vec2<f32>,\\n  uOffset:vec2<f32>,\\n};\\n\\nstruct GlobalFilterUniforms {\\n  uInputSize:vec4<f32>,\\n  uInputPixel:vec4<f32>,\\n  uInputClamp:vec4<f32>,\\n  uOutputFrame:vec4<f32>,\\n  uGlobalFrame:vec4<f32>,\\n  uOutputTexture:vec4<f32>,\\n};\\n\\n@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;\\n\\n@group(0) @binding(1) var uTexture: texture_2d<f32>; \\n@group(0) @binding(2) var uSampler: sampler;\\n@group(1) @binding(0) var<uniform> twistUniforms : TwistUniforms;\\n\\n@fragment\\nfn mainFragment(\\n  @location(0) uv: vec2<f32>,\\n  @builtin(position) position: vec4<f32>\\n) -> @location(0) vec4<f32> {\\n  return textureSample(uTexture, uSampler, unmapCoord(twist(mapCoord(uv))));\\n}\\n\\nfn mapCoord(coord: vec2<f32> ) -> vec2<f32>\\n{\\n  var mappedCoord: vec2<f32> = coord;\\n  mappedCoord *= gfu.uInputSize.xy;\\n  mappedCoord += gfu.uOutputFrame.xy;\\n  return mappedCoord;\\n}\\n\\nfn unmapCoord(coord: vec2<f32> ) -> vec2<f32>\\n{\\n  var mappedCoord: vec2<f32> = coord;\\n  mappedCoord -= gfu.uOutputFrame.xy;\\n  mappedCoord /= gfu.uInputSize.xy;\\n  return mappedCoord;\\n}\\n\\nfn twist(coord: vec2<f32>) -> vec2<f32>\\n{\\n  var twistedCoord: vec2<f32> = coord;\\n  let uRadius = twistUniforms.uTwist[0];\\n  let uAngle = twistUniforms.uTwist[1];\\n  let uOffset = twistUniforms.uOffset;\\n\\n  twistedCoord -= uOffset;\\n  \\n  let dist = length(twistedCoord);\\n\\n  if (dist < uRadius)\\n  {\\n    let ratioDist: f32 = (uRadius - dist) / uRadius;\\n    let angleMod: f32 = ratioDist * ratioDist * uAngle;\\n    let s: f32 = sin(angleMod);\\n    let c: f32 = cos(angleMod);\\n    twistedCoord = vec2<f32>(twistedCoord.x * c - twistedCoord.y * s, twistedCoord.x * s + twistedCoord.y * c);\\n  }\\n\\n  twistedCoord += uOffset;\\n  return twistedCoord;\\n}\\n\";\n\nexport { source as default };\n//# sourceMappingURL=twist2.mjs.map\n","var fragment = \"precision highp float;\\nin vec2 vTextureCoord;\\nout vec4 finalColor;\\n\\nuniform sampler2D uTexture;\\nuniform float uStrength;\\nuniform vec2 uCenter;\\nuniform vec2 uRadii;\\n\\nuniform vec4 uInputSize;\\n\\nconst float MAX_KERNEL_SIZE = ${MAX_KERNEL_SIZE};\\n\\n// author: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/\\nhighp float rand(vec2 co, float seed) {\\n    const highp float a = 12.9898, b = 78.233, c = 43758.5453;\\n    highp float dt = dot(co + seed, vec2(a, b)), sn = mod(dt, 3.14159);\\n    return fract(sin(sn) * c + seed);\\n}\\n\\nvoid main() {\\n    float minGradient = uRadii[0] * 0.3;\\n    float innerRadius = (uRadii[0] + minGradient * 0.5) / uInputSize.x;\\n\\n    float gradient = uRadii[1] * 0.3;\\n    float radius = (uRadii[1] - gradient * 0.5) / uInputSize.x;\\n\\n    float countLimit = MAX_KERNEL_SIZE;\\n\\n    vec2 dir = vec2(uCenter.xy / uInputSize.xy - vTextureCoord);\\n    float dist = length(vec2(dir.x, dir.y * uInputSize.y / uInputSize.x));\\n\\n    float strength = uStrength;\\n\\n    float delta = 0.0;\\n    float gap;\\n    if (dist < innerRadius) {\\n        delta = innerRadius - dist;\\n        gap = minGradient;\\n    } else if (radius >= 0.0 && dist > radius) { // radius < 0 means it's infinity\\n        delta = dist - radius;\\n        gap = gradient;\\n    }\\n\\n    if (delta > 0.0) {\\n        float normalCount = gap / uInputSize.x;\\n        delta = (normalCount - delta) / normalCount;\\n        countLimit *= delta;\\n        strength *= delta;\\n        if (countLimit < 1.0)\\n        {\\n            gl_FragColor = texture(uTexture, vTextureCoord);\\n            return;\\n        }\\n    }\\n\\n    // randomize the lookup values to hide the fixed number of samples\\n    float offset = rand(vTextureCoord, 0.0);\\n\\n    float total = 0.0;\\n    vec4 color = vec4(0.0);\\n\\n    dir *= strength;\\n\\n    for (float t = 0.0; t < MAX_KERNEL_SIZE; t++) {\\n        float percent = (t + offset) / MAX_KERNEL_SIZE;\\n        float weight = 4.0 * (percent - percent * percent);\\n        vec2 p = vTextureCoord + dir * percent;\\n        vec4 sample = texture(uTexture, p);\\n\\n        // switch to pre-multiplied alpha to correctly blur transparent images\\n        // sample.rgb *= sample.a;\\n\\n        color += sample * weight;\\n        total += weight;\\n\\n        if (t > countLimit){\\n            break;\\n        }\\n    }\\n\\n    color /= total;\\n    // switch back from pre-multiplied alpha\\n    // color.rgb /= color.a + 0.00001;\\n\\n    gl_FragColor = color;\\n}\\n\";\n\nexport { fragment as default };\n//# sourceMappingURL=zoom-blur.mjs.map\n","import { Filter, GpuProgram, GlProgram } from 'pixi.js';\nimport vertex from '../defaults/default.mjs';\nimport wgslVertex from '../defaults/default2.mjs';\nimport fragment from './zoom-blur.mjs';\nimport source from './zoom-blur2.mjs';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _ZoomBlurFilter = class _ZoomBlurFilter extends Filter {\n  /**\n   * @param options - Options for the ZoomBlurFilter constructor.\n   */\n  constructor(options) {\n    options = { ..._ZoomBlurFilter.DEFAULT_OPTIONS, ...options };\n    const kernelSize = options.maxKernelSize ?? 32;\n    const gpuProgram = GpuProgram.from({\n      vertex: {\n        source: wgslVertex,\n        entryPoint: \"mainVertex\"\n      },\n      fragment: {\n        source: source.replace(\"${MAX_KERNEL_SIZE}\", kernelSize.toFixed(1)),\n        entryPoint: \"mainFragment\"\n      }\n    });\n    const glProgram = GlProgram.from({\n      vertex,\n      fragment: fragment.replace(\"${MAX_KERNEL_SIZE}\", kernelSize.toFixed(1)),\n      name: \"zoom-blur-filter\"\n    });\n    super({\n      gpuProgram,\n      glProgram,\n      resources: {\n        zoomBlurUniforms: {\n          uStrength: { value: options.strength, type: \"f32\" },\n          uCenter: { value: options.center, type: \"vec2<f32>\" },\n          uRadii: { value: new Float32Array(2), type: \"vec2<f32>\" }\n        }\n      }\n    });\n    __publicField(this, \"uniforms\");\n    this.uniforms = this.resources.zoomBlurUniforms.uniforms;\n    Object.assign(this, options);\n  }\n  /**\n   * Sets the strength of the zoom blur effect\n   * @default 0.1\n   */\n  get strength() {\n    return this.uniforms.uStrength;\n  }\n  set strength(value) {\n    this.uniforms.uStrength = value;\n  }\n  /**\n   * The center of the zoom\n   * @default [0,0]\n   */\n  get center() {\n    return this.uniforms.uCenter;\n  }\n  set center(value) {\n    if (Array.isArray(value)) {\n      value = { x: value[0], y: value[1] };\n    }\n    this.uniforms.uCenter = value;\n  }\n  /**\n   * Sets the center of the effect in normalized screen coords on the `x` axis\n   * @default 0\n   */\n  get centerX() {\n    return this.uniforms.uCenter.x;\n  }\n  set centerX(value) {\n    this.uniforms.uCenter.x = value;\n  }\n  /**\n   * Sets the center of the effect in normalized screen coords on the `y` axis\n   * @default 0\n   */\n  get centerY() {\n    return this.uniforms.uCenter.y;\n  }\n  set centerY(value) {\n    this.uniforms.uCenter.y = value;\n  }\n  /**\n   * The inner radius of zoom. The part in inner circle won't apply zoom blur effect\n   * @default 0\n   */\n  get innerRadius() {\n    return this.uniforms.uRadii[0];\n  }\n  set innerRadius(value) {\n    this.uniforms.uRadii[0] = value;\n  }\n  /**\n   * Outer radius of the effect. less than `0` equates to infinity\n   * @default -1\n   */\n  get radius() {\n    return this.uniforms.uRadii[1];\n  }\n  set radius(value) {\n    this.uniforms.uRadii[1] = value < 0 || value === Infinity ? -1 : value;\n  }\n};\n/** Default values for options. */\n__publicField(_ZoomBlurFilter, \"DEFAULT_OPTIONS\", {\n  strength: 0.1,\n  center: { x: 0, y: 0 },\n  innerRadius: 0,\n  radius: -1,\n  maxKernelSize: 32\n});\nlet ZoomBlurFilter = _ZoomBlurFilter;\n\nexport { ZoomBlurFilter };\n//# sourceMappingURL=ZoomBlurFilter.mjs.map\n","var source = \"struct ZoomBlurUniforms {\\n    uStrength:f32,\\n    uCenter:vec2<f32>,\\n    uRadii:vec2<f32>,\\n};\\n\\nstruct GlobalFilterUniforms {\\n  uInputSize:vec4<f32>,\\n  uInputPixel:vec4<f32>,\\n  uInputClamp:vec4<f32>,\\n  uOutputFrame:vec4<f32>,\\n  uGlobalFrame:vec4<f32>,\\n  uOutputTexture:vec4<f32>,\\n};\\n\\n@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;\\n\\n@group(0) @binding(1) var uTexture: texture_2d<f32>; \\n@group(0) @binding(2) var uSampler: sampler;\\n@group(1) @binding(0) var<uniform> zoomBlurUniforms : ZoomBlurUniforms;\\n\\n@fragment\\nfn mainFragment(\\n    @builtin(position) position: vec4<f32>,\\n    @location(0) uv : vec2<f32>\\n) -> @location(0) vec4<f32> {\\n  let uStrength = zoomBlurUniforms.uStrength;\\n  let uCenter = zoomBlurUniforms.uCenter;\\n  let uRadii = zoomBlurUniforms.uRadii;\\n\\n  let minGradient: f32 = uRadii[0] * 0.3;\\n  let innerRadius: f32 = (uRadii[0] + minGradient * 0.5) / gfu.uInputSize.x;\\n\\n  let gradient: f32 = uRadii[1] * 0.3;\\n  let radius: f32 = (uRadii[1] - gradient * 0.5) / gfu.uInputSize.x;\\n\\n  let MAX_KERNEL_SIZE: f32 = ${MAX_KERNEL_SIZE};\\n\\n  var countLimit: f32 = MAX_KERNEL_SIZE;\\n\\n  var dir: vec2<f32> = vec2<f32>(uCenter / gfu.uInputSize.xy - uv);\\n  let dist: f32 = length(vec2<f32>(dir.x, dir.y * gfu.uInputSize.y / gfu.uInputSize.x));\\n\\n  var strength: f32 = uStrength;\\n\\n  var delta: f32 = 0.0;\\n  var gap: f32;\\n\\n  if (dist < innerRadius) {\\n      delta = innerRadius - dist;\\n      gap = minGradient;\\n  } else if (radius >= 0.0 && dist > radius) { // radius < 0 means it's infinity\\n      delta = dist - radius;\\n      gap = gradient;\\n  }\\n\\n  var returnColorOnly: bool = false;\\n\\n  if (delta > 0.0) {\\n    let normalCount: f32 = gap / gfu.uInputSize.x;\\n    delta = (normalCount - delta) / normalCount;\\n    countLimit *= delta;\\n    strength *= delta;\\n    \\n    if (countLimit < 1.0)\\n    {\\n      returnColorOnly = true;;\\n    }\\n  }\\n\\n  // randomize the lookup values to hide the fixed number of samples\\n  let offset: f32 = rand(uv, 0.0);\\n\\n  var total: f32 = 0.0;\\n  var color: vec4<f32> = vec4<f32>(0.);\\n\\n  dir *= strength;\\n\\n  for (var t = 0.0; t < MAX_KERNEL_SIZE; t += 1.0) {\\n    let percent: f32 = (t + offset) / MAX_KERNEL_SIZE;\\n    let weight: f32 = 4.0 * (percent - percent * percent);\\n    let p: vec2<f32> = uv + dir * percent;\\n    let sample: vec4<f32> = textureSample(uTexture, uSampler, p);\\n    \\n    if (t < countLimit)\\n    {\\n      color += sample * weight;\\n      total += weight;\\n    }\\n  }\\n\\n  color /= total;\\n\\n  return select(color, textureSample(uTexture, uSampler, uv), returnColorOnly);\\n}\\n\\nfn modulo(x: f32, y: f32) -> f32\\n{\\n  return x - y * floor(x/y);\\n}\\n\\n// author: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/\\nfn rand(co: vec2<f32>, seed: f32) -> f32\\n{\\n  let a: f32 = 12.9898;\\n  let b: f32 = 78.233;\\n  let c: f32 = 43758.5453;\\n  let dt: f32 = dot(co + seed, vec2<f32>(a, b));\\n  let sn: f32 = modulo(dt, 3.14159);\\n  return fract(sin(sn) * c + seed);\\n}\";\n\nexport { source as default };\n//# sourceMappingURL=zoom-blur2.mjs.map\n","import { Point as c, Rectangle as y, Ticker as b, Container as H } from \"pixi.js\";\nclass u {\n  /** @param {Viewport} parent */\n  constructor(t) {\n    this.parent = t, this.paused = !1;\n  }\n  /** Called when plugin is removed */\n  destroy() {\n  }\n  /** Handler for pointerdown PIXI event */\n  down(t) {\n    return !1;\n  }\n  /** Handler for pointermove PIXI event */\n  move(t) {\n    return !1;\n  }\n  /** Handler for pointerup PIXI event */\n  up(t) {\n    return !1;\n  }\n  /** Handler for wheel event on div */\n  wheel(t) {\n    return !1;\n  }\n  /**\n   * Called on each tick\n   * @param {number} elapsed time in millisecond since last update\n   */\n  update(t) {\n  }\n  /** Called when the viewport is resized */\n  resize() {\n  }\n  /** Called when the viewport is manually moved */\n  reset() {\n  }\n  /** Pause the plugin */\n  pause() {\n    this.paused = !0;\n  }\n  /** Un-pause the plugin */\n  resume() {\n    this.paused = !1;\n  }\n}\nvar S = typeof globalThis < \"u\" ? globalThis : typeof window < \"u\" ? window : typeof global < \"u\" ? global : typeof self < \"u\" ? self : {};\nfunction M(l) {\n  return l && l.__esModule && Object.prototype.hasOwnProperty.call(l, \"default\") ? l.default : l;\n}\nvar W = { exports: {} };\n(function(l, t) {\n  (function() {\n    var e, n;\n    n = function(i) {\n      return l.exports = i;\n    }, e = {\n      linear: function(i, s, h, o) {\n        return h * i / o + s;\n      },\n      easeInQuad: function(i, s, h, o) {\n        return h * (i /= o) * i + s;\n      },\n      easeOutQuad: function(i, s, h, o) {\n        return -h * (i /= o) * (i - 2) + s;\n      },\n      easeInOutQuad: function(i, s, h, o) {\n        return (i /= o / 2) < 1 ? h / 2 * i * i + s : -h / 2 * (--i * (i - 2) - 1) + s;\n      },\n      easeInCubic: function(i, s, h, o) {\n        return h * (i /= o) * i * i + s;\n      },\n      easeOutCubic: function(i, s, h, o) {\n        return h * ((i = i / o - 1) * i * i + 1) + s;\n      },\n      easeInOutCubic: function(i, s, h, o) {\n        return (i /= o / 2) < 1 ? h / 2 * i * i * i + s : h / 2 * ((i -= 2) * i * i + 2) + s;\n      },\n      easeInQuart: function(i, s, h, o) {\n        return h * (i /= o) * i * i * i + s;\n      },\n      easeOutQuart: function(i, s, h, o) {\n        return -h * ((i = i / o - 1) * i * i * i - 1) + s;\n      },\n      easeInOutQuart: function(i, s, h, o) {\n        return (i /= o / 2) < 1 ? h / 2 * i * i * i * i + s : -h / 2 * ((i -= 2) * i * i * i - 2) + s;\n      },\n      easeInQuint: function(i, s, h, o) {\n        return h * (i /= o) * i * i * i * i + s;\n      },\n      easeOutQuint: function(i, s, h, o) {\n        return h * ((i = i / o - 1) * i * i * i * i + 1) + s;\n      },\n      easeInOutQuint: function(i, s, h, o) {\n        return (i /= o / 2) < 1 ? h / 2 * i * i * i * i * i + s : h / 2 * ((i -= 2) * i * i * i * i + 2) + s;\n      },\n      easeInSine: function(i, s, h, o) {\n        return -h * Math.cos(i / o * (Math.PI / 2)) + h + s;\n      },\n      easeOutSine: function(i, s, h, o) {\n        return h * Math.sin(i / o * (Math.PI / 2)) + s;\n      },\n      easeInOutSine: function(i, s, h, o) {\n        return -h / 2 * (Math.cos(Math.PI * i / o) - 1) + s;\n      },\n      easeInExpo: function(i, s, h, o) {\n        return i === 0 ? s : h * Math.pow(2, 10 * (i / o - 1)) + s;\n      },\n      easeOutExpo: function(i, s, h, o) {\n        return i === o ? s + h : h * (-Math.pow(2, -10 * i / o) + 1) + s;\n      },\n      easeInOutExpo: function(i, s, h, o) {\n        return (i /= o / 2) < 1 ? h / 2 * Math.pow(2, 10 * (i - 1)) + s : h / 2 * (-Math.pow(2, -10 * --i) + 2) + s;\n      },\n      easeInCirc: function(i, s, h, o) {\n        return -h * (Math.sqrt(1 - (i /= o) * i) - 1) + s;\n      },\n      easeOutCirc: function(i, s, h, o) {\n        return h * Math.sqrt(1 - (i = i / o - 1) * i) + s;\n      },\n      easeInOutCirc: function(i, s, h, o) {\n        return (i /= o / 2) < 1 ? -h / 2 * (Math.sqrt(1 - i * i) - 1) + s : h / 2 * (Math.sqrt(1 - (i -= 2) * i) + 1) + s;\n      },\n      easeInElastic: function(i, s, h, o) {\n        var r, a, p;\n        return p = 1.70158, a = 0, r = h, i === 0 || (i /= o), a || (a = o * 0.3), r < Math.abs(h) ? (r = h, p = a / 4) : p = a / (2 * Math.PI) * Math.asin(h / r), -(r * Math.pow(2, 10 * (i -= 1)) * Math.sin((i * o - p) * (2 * Math.PI) / a)) + s;\n      },\n      easeOutElastic: function(i, s, h, o) {\n        var r, a, p;\n        return p = 1.70158, a = 0, r = h, i === 0 || (i /= o), a || (a = o * 0.3), r < Math.abs(h) ? (r = h, p = a / 4) : p = a / (2 * Math.PI) * Math.asin(h / r), r * Math.pow(2, -10 * i) * Math.sin((i * o - p) * (2 * Math.PI) / a) + h + s;\n      },\n      easeInOutElastic: function(i, s, h, o) {\n        var r, a, p;\n        return p = 1.70158, a = 0, r = h, i === 0 || (i /= o / 2), a || (a = o * (0.3 * 1.5)), r < Math.abs(h) ? (r = h, p = a / 4) : p = a / (2 * Math.PI) * Math.asin(h / r), i < 1 ? -0.5 * (r * Math.pow(2, 10 * (i -= 1)) * Math.sin((i * o - p) * (2 * Math.PI) / a)) + s : r * Math.pow(2, -10 * (i -= 1)) * Math.sin((i * o - p) * (2 * Math.PI) / a) * 0.5 + h + s;\n      },\n      easeInBack: function(i, s, h, o, r) {\n        return r === void 0 && (r = 1.70158), h * (i /= o) * i * ((r + 1) * i - r) + s;\n      },\n      easeOutBack: function(i, s, h, o, r) {\n        return r === void 0 && (r = 1.70158), h * ((i = i / o - 1) * i * ((r + 1) * i + r) + 1) + s;\n      },\n      easeInOutBack: function(i, s, h, o, r) {\n        return r === void 0 && (r = 1.70158), (i /= o / 2) < 1 ? h / 2 * (i * i * (((r *= 1.525) + 1) * i - r)) + s : h / 2 * ((i -= 2) * i * (((r *= 1.525) + 1) * i + r) + 2) + s;\n      },\n      easeInBounce: function(i, s, h, o) {\n        var r;\n        return r = e.easeOutBounce(o - i, 0, h, o), h - r + s;\n      },\n      easeOutBounce: function(i, s, h, o) {\n        return (i /= o) < 1 / 2.75 ? h * (7.5625 * i * i) + s : i < 2 / 2.75 ? h * (7.5625 * (i -= 1.5 / 2.75) * i + 0.75) + s : i < 2.5 / 2.75 ? h * (7.5625 * (i -= 2.25 / 2.75) * i + 0.9375) + s : h * (7.5625 * (i -= 2.625 / 2.75) * i + 0.984375) + s;\n      },\n      easeInOutBounce: function(i, s, h, o) {\n        var r;\n        return i < o / 2 ? (r = e.easeInBounce(i * 2, 0, h, o), r * 0.5 + s) : (r = e.easeOutBounce(i * 2 - o, 0, h, o), r * 0.5 + h * 0.5 + s);\n      }\n    }, n(e);\n  }).call(S);\n})(W);\nvar O = W.exports;\nconst v = /* @__PURE__ */ M(O);\nfunction x(l, t) {\n  if (l) {\n    if (typeof l == \"function\")\n      return l;\n    if (typeof l == \"string\")\n      return v[l];\n  } else\n    return v[t];\n}\nconst P = {\n  removeOnInterrupt: !1,\n  ease: \"linear\",\n  time: 1e3\n};\nclass C extends u {\n  /**\n   * This is called by {@link Viewport.animate}.\n   *\n   * @param parent\n   * @param options\n   */\n  constructor(t, e = {}) {\n    super(t), this.startWidth = null, this.startHeight = null, this.deltaWidth = null, this.deltaHeight = null, this.width = null, this.height = null, this.time = 0, this.options = Object.assign({}, P, e), this.options.ease = x(this.options.ease), this.setupPosition(), this.setupZoom(), this.time = 0;\n  }\n  /**\n   * Setup `startX`, `startY`, `deltaX`, `deltaY`, `keepCenter`.\n   *\n   * This is called during construction.\n   */\n  setupPosition() {\n    typeof this.options.position < \"u\" ? (this.startX = this.parent.center.x, this.startY = this.parent.center.y, this.deltaX = this.options.position.x - this.parent.center.x, this.deltaY = this.options.position.y - this.parent.center.y, this.keepCenter = !1) : this.keepCenter = !0;\n  }\n  /**\n   * Setup `startWidth, `startHeight`, `deltaWidth, `deltaHeight, `width`, `height`.\n   *\n   * This is called during construction.\n   */\n  setupZoom() {\n    this.width = null, this.height = null, typeof this.options.scale < \"u\" ? this.width = this.parent.screenWidth / this.options.scale : typeof this.options.scaleX < \"u\" || typeof this.options.scaleY < \"u\" ? (typeof this.options.scaleX < \"u\" && (this.width = this.parent.screenWidth / this.options.scaleX), typeof this.options.scaleY < \"u\" && (this.height = this.parent.screenHeight / this.options.scaleY)) : (typeof this.options.width < \"u\" && (this.width = this.options.width), typeof this.options.height < \"u\" && (this.height = this.options.height)), this.width !== null && (this.startWidth = this.parent.screenWidthInWorldPixels, this.deltaWidth = this.width - this.startWidth), this.height !== null && (this.startHeight = this.parent.screenHeightInWorldPixels, this.deltaHeight = this.height - this.startHeight);\n  }\n  down() {\n    return this.options.removeOnInterrupt && this.parent.plugins.remove(\"animate\"), !1;\n  }\n  complete() {\n    this.parent.plugins.remove(\"animate\"), this.width !== null && this.parent.fitWidth(this.width, this.keepCenter, this.height === null), this.height !== null && this.parent.fitHeight(this.height, this.keepCenter, this.width === null), !this.keepCenter && this.options.position && this.parent.moveCenter(this.options.position), this.parent.emit(\"animate-end\", this.parent), this.options.callbackOnComplete && this.options.callbackOnComplete(this.parent);\n  }\n  update(t) {\n    if (this.paused)\n      return;\n    this.time += t;\n    const e = new c(this.parent.scale.x, this.parent.scale.y);\n    if (this.time >= this.options.time) {\n      const n = this.parent.width, i = this.parent.height;\n      this.complete(), (n !== this.parent.width || i !== this.parent.height) && this.parent.emit(\"zoomed\", { viewport: this.parent, original: e, type: \"animate\" });\n    } else {\n      const n = this.options.ease(this.time, 0, 1, this.options.time);\n      if (this.width !== null) {\n        const i = this.startWidth, s = this.deltaWidth;\n        this.parent.fitWidth(\n          i + s * n,\n          this.keepCenter,\n          this.height === null\n        );\n      }\n      if (this.height !== null) {\n        const i = this.startHeight, s = this.deltaHeight;\n        this.parent.fitHeight(\n          i + s * n,\n          this.keepCenter,\n          this.width === null\n        );\n      }\n      if (this.width === null ? this.parent.scale.x = this.parent.scale.y : this.height === null && (this.parent.scale.y = this.parent.scale.x), !this.keepCenter) {\n        const i = this.startX, s = this.startY, h = this.deltaX, o = this.deltaY, r = new c(this.parent.x, this.parent.y);\n        this.parent.moveCenter(i + h * n, s + o * n), this.parent.emit(\"moved\", { viewport: this.parent, original: r, type: \"animate\" });\n      }\n      (this.width || this.height) && this.parent.emit(\"zoomed\", { viewport: this.parent, original: e, type: \"animate\" });\n    }\n  }\n}\nconst I = {\n  sides: \"all\",\n  friction: 0.5,\n  time: 150,\n  ease: \"easeInOutSine\",\n  underflow: \"center\",\n  bounceBox: null\n};\nclass k extends u {\n  /**\n   * This is called by {@link Viewport.bounce}.\n   */\n  constructor(t, e = {}) {\n    super(t), this.options = Object.assign({}, I, e), this.ease = x(this.options.ease, \"easeInOutSine\"), this.options.sides ? this.options.sides === \"all\" ? this.top = this.bottom = this.left = this.right = !0 : this.options.sides === \"horizontal\" ? (this.right = this.left = !0, this.top = this.bottom = !1) : this.options.sides === \"vertical\" ? (this.left = this.right = !1, this.top = this.bottom = !0) : (this.top = this.options.sides.indexOf(\"top\") !== -1, this.bottom = this.options.sides.indexOf(\"bottom\") !== -1, this.left = this.options.sides.indexOf(\"left\") !== -1, this.right = this.options.sides.indexOf(\"right\") !== -1) : this.left = this.top = this.right = this.bottom = !1;\n    const n = this.options.underflow.toLowerCase();\n    n === \"center\" ? (this.underflowX = 0, this.underflowY = 0) : (this.underflowX = n.indexOf(\"left\") !== -1 ? -1 : n.indexOf(\"right\") !== -1 ? 1 : 0, this.underflowY = n.indexOf(\"top\") !== -1 ? -1 : n.indexOf(\"bottom\") !== -1 ? 1 : 0), this.reset();\n  }\n  isActive() {\n    return this.toX !== null || this.toY !== null;\n  }\n  down() {\n    return this.toX = this.toY = null, !1;\n  }\n  up() {\n    return this.bounce(), !1;\n  }\n  update(t) {\n    if (!this.paused) {\n      if (this.bounce(), this.toX) {\n        const e = this.toX;\n        e.time += t, this.parent.emit(\"moved\", { viewport: this.parent, type: \"bounce-x\" }), e.time >= this.options.time ? (this.parent.x = e.end, this.toX = null, this.parent.emit(\"bounce-x-end\", this.parent)) : this.parent.x = this.ease(e.time, e.start, e.delta, this.options.time);\n      }\n      if (this.toY) {\n        const e = this.toY;\n        e.time += t, this.parent.emit(\"moved\", { viewport: this.parent, type: \"bounce-y\" }), e.time >= this.options.time ? (this.parent.y = e.end, this.toY = null, this.parent.emit(\"bounce-y-end\", this.parent)) : this.parent.y = this.ease(e.time, e.start, e.delta, this.options.time);\n      }\n    }\n  }\n  /** @internal */\n  calcUnderflowX() {\n    let t;\n    switch (this.underflowX) {\n      case -1:\n        t = 0;\n        break;\n      case 1:\n        t = this.parent.screenWidth - this.parent.screenWorldWidth;\n        break;\n      default:\n        t = (this.parent.screenWidth - this.parent.screenWorldWidth) / 2;\n    }\n    return t;\n  }\n  /** @internal */\n  calcUnderflowY() {\n    let t;\n    switch (this.underflowY) {\n      case -1:\n        t = 0;\n        break;\n      case 1:\n        t = this.parent.screenHeight - this.parent.screenWorldHeight;\n        break;\n      default:\n        t = (this.parent.screenHeight - this.parent.screenWorldHeight) / 2;\n    }\n    return t;\n  }\n  oob() {\n    const t = this.options.bounceBox;\n    if (t) {\n      const e = typeof t.x > \"u\" ? 0 : t.x, n = typeof t.y > \"u\" ? 0 : t.y, i = typeof t.width > \"u\" ? this.parent.worldWidth : t.width, s = typeof t.height > \"u\" ? this.parent.worldHeight : t.height;\n      return {\n        left: this.parent.left < e,\n        right: this.parent.right > i,\n        top: this.parent.top < n,\n        bottom: this.parent.bottom > s,\n        topLeft: new c(\n          e * this.parent.scale.x,\n          n * this.parent.scale.y\n        ),\n        bottomRight: new c(\n          i * this.parent.scale.x - this.parent.screenWidth,\n          s * this.parent.scale.y - this.parent.screenHeight\n        )\n      };\n    }\n    return {\n      left: this.parent.left < 0,\n      right: this.parent.right > this.parent.worldWidth,\n      top: this.parent.top < 0,\n      bottom: this.parent.bottom > this.parent.worldHeight,\n      topLeft: new c(0, 0),\n      bottomRight: new c(\n        this.parent.worldWidth * this.parent.scale.x - this.parent.screenWidth,\n        this.parent.worldHeight * this.parent.scale.y - this.parent.screenHeight\n      )\n    };\n  }\n  bounce() {\n    var s, h;\n    if (this.paused)\n      return;\n    let t, e = this.parent.plugins.get(\"decelerate\", !0);\n    e && (e.x || e.y) && (e.x && e.percentChangeX === ((s = e.options) == null ? void 0 : s.friction) || e.y && e.percentChangeY === ((h = e.options) == null ? void 0 : h.friction)) && (t = this.oob(), (t.left && this.left || t.right && this.right) && (e.percentChangeX = this.options.friction), (t.top && this.top || t.bottom && this.bottom) && (e.percentChangeY = this.options.friction));\n    const n = this.parent.plugins.get(\"drag\", !0) || {}, i = this.parent.plugins.get(\"pinch\", !0) || {};\n    if (e = e || {}, !(n != null && n.active) && !(i != null && i.active) && (!this.toX || !this.toY) && (!e.x || !e.y)) {\n      t = t || this.oob();\n      const o = t.topLeft, r = t.bottomRight;\n      if (!this.toX && !e.x) {\n        let a = null;\n        t.left && this.left ? a = this.parent.screenWorldWidth < this.parent.screenWidth ? this.calcUnderflowX() : -o.x : t.right && this.right && (a = this.parent.screenWorldWidth < this.parent.screenWidth ? this.calcUnderflowX() : -r.x), a !== null && this.parent.x !== a && (this.toX = { time: 0, start: this.parent.x, delta: a - this.parent.x, end: a }, this.parent.emit(\"bounce-x-start\", this.parent));\n      }\n      if (!this.toY && !e.y) {\n        let a = null;\n        t.top && this.top ? a = this.parent.screenWorldHeight < this.parent.screenHeight ? this.calcUnderflowY() : -o.y : t.bottom && this.bottom && (a = this.parent.screenWorldHeight < this.parent.screenHeight ? this.calcUnderflowY() : -r.y), a !== null && this.parent.y !== a && (this.toY = { time: 0, start: this.parent.y, delta: a - this.parent.y, end: a }, this.parent.emit(\"bounce-y-start\", this.parent));\n      }\n    }\n  }\n  reset() {\n    this.toX = this.toY = null, this.bounce();\n  }\n}\nconst Y = {\n  left: !1,\n  right: !1,\n  top: !1,\n  bottom: !1,\n  direction: null,\n  underflow: \"center\"\n};\nclass X extends u {\n  /**\n   * This is called by {@link Viewport.clamp}.\n   */\n  constructor(t, e = {}) {\n    super(t), this.options = Object.assign({}, Y, e), this.options.direction && (this.options.left = this.options.direction === \"x\" || this.options.direction === \"all\" ? !0 : null, this.options.right = this.options.direction === \"x\" || this.options.direction === \"all\" ? !0 : null, this.options.top = this.options.direction === \"y\" || this.options.direction === \"all\" ? !0 : null, this.options.bottom = this.options.direction === \"y\" || this.options.direction === \"all\" ? !0 : null), this.parseUnderflow(), this.last = { x: null, y: null, scaleX: null, scaleY: null }, this.update();\n  }\n  parseUnderflow() {\n    const t = this.options.underflow.toLowerCase();\n    t === \"none\" ? this.noUnderflow = !0 : t === \"center\" ? (this.underflowX = this.underflowY = 0, this.noUnderflow = !1) : (this.underflowX = t.indexOf(\"left\") !== -1 ? -1 : t.indexOf(\"right\") !== -1 ? 1 : 0, this.underflowY = t.indexOf(\"top\") !== -1 ? -1 : t.indexOf(\"bottom\") !== -1 ? 1 : 0, this.noUnderflow = !1);\n  }\n  move() {\n    return this.update(), !1;\n  }\n  update() {\n    if (this.paused || this.parent.x === this.last.x && this.parent.y === this.last.y && this.parent.scale.x === this.last.scaleX && this.parent.scale.y === this.last.scaleY)\n      return;\n    const t = new c(this.parent.x, this.parent.y), e = this.parent.plugins.decelerate || {};\n    if (this.options.left !== null || this.options.right !== null) {\n      let n = !1;\n      if (!this.noUnderflow && this.parent.screenWorldWidth < this.parent.screenWidth)\n        switch (this.underflowX) {\n          case -1:\n            this.parent.x !== 0 && (this.parent.x = 0, n = !0);\n            break;\n          case 1:\n            this.parent.x !== this.parent.screenWidth - this.parent.screenWorldWidth && (this.parent.x = this.parent.screenWidth - this.parent.screenWorldWidth, n = !0);\n            break;\n          default:\n            this.parent.x !== (this.parent.screenWidth - this.parent.screenWorldWidth) / 2 && (this.parent.x = (this.parent.screenWidth - this.parent.screenWorldWidth) / 2, n = !0);\n        }\n      else\n        this.options.left !== null && this.parent.left < (this.options.left === !0 ? 0 : this.options.left) && (this.parent.x = -(this.options.left === !0 ? 0 : this.options.left) * this.parent.scale.x, e.x = 0, n = !0), this.options.right !== null && this.parent.right > (this.options.right === !0 ? this.parent.worldWidth : this.options.right) && (this.parent.x = -(this.options.right === !0 ? this.parent.worldWidth : this.options.right) * this.parent.scale.x + this.parent.screenWidth, e.x = 0, n = !0);\n      n && this.parent.emit(\"moved\", { viewport: this.parent, original: t, type: \"clamp-x\" });\n    }\n    if (this.options.top !== null || this.options.bottom !== null) {\n      let n = !1;\n      if (!this.noUnderflow && this.parent.screenWorldHeight < this.parent.screenHeight)\n        switch (this.underflowY) {\n          case -1:\n            this.parent.y !== 0 && (this.parent.y = 0, n = !0);\n            break;\n          case 1:\n            this.parent.y !== this.parent.screenHeight - this.parent.screenWorldHeight && (this.parent.y = this.parent.screenHeight - this.parent.screenWorldHeight, n = !0);\n            break;\n          default:\n            this.parent.y !== (this.parent.screenHeight - this.parent.screenWorldHeight) / 2 && (this.parent.y = (this.parent.screenHeight - this.parent.screenWorldHeight) / 2, n = !0);\n        }\n      else\n        this.options.top !== null && this.parent.top < (this.options.top === !0 ? 0 : this.options.top) && (this.parent.y = -(this.options.top === !0 ? 0 : this.options.top) * this.parent.scale.y, e.y = 0, n = !0), this.options.bottom !== null && this.parent.bottom > (this.options.bottom === !0 ? this.parent.worldHeight : this.options.bottom) && (this.parent.y = -(this.options.bottom === !0 ? this.parent.worldHeight : this.options.bottom) * this.parent.scale.y + this.parent.screenHeight, e.y = 0, n = !0);\n      n && this.parent.emit(\"moved\", { viewport: this.parent, original: t, type: \"clamp-y\" });\n    }\n    this.last.x = this.parent.x, this.last.y = this.parent.y, this.last.scaleX = this.parent.scale.x, this.last.scaleY = this.parent.scale.y;\n  }\n  reset() {\n    this.update();\n  }\n}\nconst z = {\n  minWidth: null,\n  minHeight: null,\n  maxWidth: null,\n  maxHeight: null,\n  minScale: null,\n  maxScale: null\n};\nclass A extends u {\n  /**\n   * This is called by {@link Viewport.clampZoom}.\n   */\n  constructor(t, e = {}) {\n    super(t), this.options = Object.assign({}, z, e), this.clamp();\n  }\n  resize() {\n    this.clamp();\n  }\n  /** Clamp the viewport scale zoom) */\n  clamp() {\n    if (!this.paused) {\n      if (this.options.minWidth || this.options.minHeight || this.options.maxWidth || this.options.maxHeight) {\n        let t = this.parent.worldScreenWidth, e = this.parent.worldScreenHeight;\n        if (this.options.minWidth !== null && t < this.options.minWidth) {\n          const n = this.parent.scale.x;\n          this.parent.fitWidth(this.options.minWidth, !1, !1, !0), this.parent.scale.y *= this.parent.scale.x / n, t = this.parent.worldScreenWidth, e = this.parent.worldScreenHeight, this.parent.emit(\"zoomed\", { viewport: this.parent, type: \"clamp-zoom\" });\n        }\n        if (this.options.maxWidth !== null && t > this.options.maxWidth) {\n          const n = this.parent.scale.x;\n          this.parent.fitWidth(this.options.maxWidth, !1, !1, !0), this.parent.scale.y *= this.parent.scale.x / n, t = this.parent.worldScreenWidth, e = this.parent.worldScreenHeight, this.parent.emit(\"zoomed\", { viewport: this.parent, type: \"clamp-zoom\" });\n        }\n        if (this.options.minHeight !== null && e < this.options.minHeight) {\n          const n = this.parent.scale.y;\n          this.parent.fitHeight(this.options.minHeight, !1, !1, !0), this.parent.scale.x *= this.parent.scale.y / n, t = this.parent.worldScreenWidth, e = this.parent.worldScreenHeight, this.parent.emit(\"zoomed\", { viewport: this.parent, type: \"clamp-zoom\" });\n        }\n        if (this.options.maxHeight !== null && e > this.options.maxHeight) {\n          const n = this.parent.scale.y;\n          this.parent.fitHeight(this.options.maxHeight, !1, !1, !0), this.parent.scale.x *= this.parent.scale.y / n, this.parent.emit(\"zoomed\", { viewport: this.parent, type: \"clamp-zoom\" });\n        }\n      } else if (this.options.minScale || this.options.maxScale) {\n        const t = { x: null, y: null }, e = { x: null, y: null };\n        if (typeof this.options.minScale == \"number\")\n          t.x = this.options.minScale, t.y = this.options.minScale;\n        else if (this.options.minScale !== null) {\n          const s = this.options.minScale;\n          t.x = typeof s.x > \"u\" ? null : s.x, t.y = typeof s.y > \"u\" ? null : s.y;\n        }\n        if (typeof this.options.maxScale == \"number\")\n          e.x = this.options.maxScale, e.y = this.options.maxScale;\n        else if (this.options.maxScale !== null) {\n          const s = this.options.maxScale;\n          e.x = typeof s.x > \"u\" ? null : s.x, e.y = typeof s.y > \"u\" ? null : s.y;\n        }\n        let n = this.parent.scale.x, i = this.parent.scale.y;\n        t.x !== null && n < t.x && (n = t.x), e.x !== null && n > e.x && (n = e.x), t.y !== null && i < t.y && (i = t.y), e.y !== null && i > e.y && (i = e.y), (n !== this.parent.scale.x || i !== this.parent.scale.y) && (this.parent.scale.set(n, i), this.parent.emit(\"zoomed\", { viewport: this.parent, type: \"clamp-zoom\" }));\n      }\n    }\n  }\n  reset() {\n    this.clamp();\n  }\n}\nconst _ = {\n  friction: 0.98,\n  bounce: 0.8,\n  minSpeed: 0.01\n}, d = 16;\nclass T extends u {\n  /**\n   * This is called by {@link Viewport.decelerate}.\n   */\n  constructor(t, e = {}) {\n    super(t), this.options = Object.assign({}, _, e), this.saved = [], this.timeSinceRelease = 0, this.reset(), this.parent.on(\"moved\", (n) => this.handleMoved(n));\n  }\n  down() {\n    return this.saved = [], this.x = this.y = null, !1;\n  }\n  isActive() {\n    return !!(this.x || this.y);\n  }\n  move() {\n    if (this.paused)\n      return !1;\n    const t = this.parent.input.count();\n    return (t === 1 || t > 1 && !this.parent.plugins.get(\"pinch\", !0)) && (this.saved.push({ x: this.parent.x, y: this.parent.y, time: performance.now() }), this.saved.length > 60 && this.saved.splice(0, 30)), !1;\n  }\n  /** Listener to viewport's \"moved\" event. */\n  handleMoved(t) {\n    if (this.saved.length) {\n      const e = this.saved[this.saved.length - 1];\n      t.type === \"clamp-x\" && t.original ? e.x === t.original.x && (e.x = this.parent.x) : t.type === \"clamp-y\" && t.original && e.y === t.original.y && (e.y = this.parent.y);\n    }\n  }\n  up() {\n    if (this.parent.input.count() === 0 && this.saved.length) {\n      const t = performance.now();\n      for (const e of this.saved)\n        if (e.time >= t - 100) {\n          const n = t - e.time;\n          this.x = (this.parent.x - e.x) / n, this.y = (this.parent.y - e.y) / n, this.percentChangeX = this.percentChangeY = this.options.friction, this.timeSinceRelease = 0;\n          break;\n        }\n    }\n    return !1;\n  }\n  /**\n   * Manually activate deceleration, starting from the (x, y) velocity components passed in the options.\n   *\n   * @param {object} options\n   * @param {number} [options.x] - Specify x-component of initial velocity.\n   * @param {number} [options.y] - Specify y-component of initial velocity.\n   */\n  activate(t) {\n    t = t || {}, typeof t.x < \"u\" && (this.x = t.x, this.percentChangeX = this.options.friction), typeof t.y < \"u\" && (this.y = t.y, this.percentChangeY = this.options.friction);\n  }\n  update(t) {\n    if (this.paused)\n      return;\n    const e = this.x || this.y, n = this.timeSinceRelease, i = this.timeSinceRelease + t;\n    if (this.x) {\n      const s = this.percentChangeX, h = Math.log(s);\n      this.parent.x += this.x * d / h * (Math.pow(s, i / d) - Math.pow(s, n / d)), this.x *= Math.pow(this.percentChangeX, t / d);\n    }\n    if (this.y) {\n      const s = this.percentChangeY, h = Math.log(s);\n      this.parent.y += this.y * d / h * (Math.pow(s, i / d) - Math.pow(s, n / d)), this.y *= Math.pow(this.percentChangeY, t / d);\n    }\n    this.timeSinceRelease += t, this.x && this.y ? Math.abs(this.x) < this.options.minSpeed && Math.abs(this.y) < this.options.minSpeed && (this.x = 0, this.y = 0) : (Math.abs(this.x || 0) < this.options.minSpeed && (this.x = 0), Math.abs(this.y || 0) < this.options.minSpeed && (this.y = 0)), e && this.parent.emit(\"moved\", { viewport: this.parent, type: \"decelerate\" });\n  }\n  reset() {\n    this.x = this.y = null;\n  }\n}\nconst E = {\n  direction: \"all\",\n  pressDrag: !0,\n  wheel: !0,\n  wheelScroll: 1,\n  reverse: !1,\n  clampWheel: !1,\n  underflow: \"center\",\n  factor: 1,\n  mouseButtons: \"all\",\n  keyToPress: null,\n  ignoreKeyToPressOnTouch: !1,\n  lineHeight: 20,\n  wheelSwapAxes: !1\n};\nclass D extends u {\n  /**\n   * This is called by {@link Viewport.drag}.\n   */\n  constructor(t, e = {}) {\n    super(t), this.windowEventHandlers = [], this.options = Object.assign({}, E, e), this.moved = !1, this.reverse = this.options.reverse ? 1 : -1, this.xDirection = !this.options.direction || this.options.direction === \"all\" || this.options.direction === \"x\", this.yDirection = !this.options.direction || this.options.direction === \"all\" || this.options.direction === \"y\", this.keyIsPressed = !1, this.parseUnderflow(), this.mouseButtons(this.options.mouseButtons), this.options.keyToPress && this.handleKeyPresses(this.options.keyToPress);\n  }\n  /**\n   * Handles keypress events and set the keyIsPressed boolean accordingly\n   *\n   * @param {array} codes - key codes that can be used to trigger drag event\n   */\n  handleKeyPresses(t) {\n    const e = (i) => {\n      t.includes(i.code) && (this.keyIsPressed = !0);\n    }, n = (i) => {\n      t.includes(i.code) && (this.keyIsPressed = !1);\n    };\n    this.addWindowEventHandler(\"keyup\", n), this.addWindowEventHandler(\"keydown\", e);\n  }\n  addWindowEventHandler(t, e) {\n    typeof window > \"u\" || (window.addEventListener(t, e), this.windowEventHandlers.push({ event: t, handler: e }));\n  }\n  destroy() {\n    typeof window > \"u\" || this.windowEventHandlers.forEach(({ event: t, handler: e }) => {\n      window.removeEventListener(t, e);\n    });\n  }\n  /**\n   * initialize mousebuttons array\n   * @param {string} buttons\n   */\n  mouseButtons(t) {\n    !t || t === \"all\" ? this.mouse = [!0, !0, !0] : this.mouse = [\n      t.indexOf(\"left\") !== -1,\n      t.indexOf(\"middle\") !== -1,\n      t.indexOf(\"right\") !== -1\n    ];\n  }\n  parseUnderflow() {\n    const t = this.options.underflow.toLowerCase();\n    t === \"center\" ? (this.underflowX = 0, this.underflowY = 0) : (t.includes(\"left\") ? this.underflowX = -1 : t.includes(\"right\") ? this.underflowX = 1 : this.underflowX = 0, t.includes(\"top\") ? this.underflowY = -1 : t.includes(\"bottom\") ? this.underflowY = 1 : this.underflowY = 0);\n  }\n  /**\n   * @param {PIXI.FederatedPointerEvent} event\n   * @returns {boolean}\n   */\n  checkButtons(t) {\n    const e = t.pointerType === \"mouse\", n = this.parent.input.count();\n    return !!((n === 1 || n > 1 && !this.parent.plugins.get(\"pinch\", !0)) && (!e || this.mouse[t.button]));\n  }\n  /**\n   * @param {PIXI.FederatedPointerEvent} event\n   * @returns {boolean}\n   */\n  checkKeyPress(t) {\n    return !this.options.keyToPress || this.keyIsPressed || this.options.ignoreKeyToPressOnTouch && t.data.pointerType === \"touch\";\n  }\n  down(t) {\n    return this.paused || !this.options.pressDrag ? !1 : this.checkButtons(t) && this.checkKeyPress(t) ? (this.last = { x: t.global.x, y: t.global.y }, this.current = t.pointerId, !0) : (this.last = null, !1);\n  }\n  get active() {\n    return this.moved;\n  }\n  move(t) {\n    if (this.paused || !this.options.pressDrag)\n      return !1;\n    if (this.last && this.current === t.data.pointerId) {\n      const e = t.global.x, n = t.global.y, i = this.parent.input.count();\n      if (i === 1 || i > 1 && !this.parent.plugins.get(\"pinch\", !0)) {\n        const s = e - this.last.x, h = n - this.last.y;\n        if (this.moved || this.xDirection && this.parent.input.checkThreshold(s) || this.yDirection && this.parent.input.checkThreshold(h)) {\n          const o = { x: e, y: n };\n          return this.xDirection && (this.parent.x += (o.x - this.last.x) * this.options.factor), this.yDirection && (this.parent.y += (o.y - this.last.y) * this.options.factor), this.last = o, this.moved || this.parent.emit(\"drag-start\", {\n            event: t,\n            screen: new c(this.last.x, this.last.y),\n            world: this.parent.toWorld(new c(this.last.x, this.last.y)),\n            viewport: this.parent\n          }), this.moved = !0, this.parent.emit(\"moved\", { viewport: this.parent, type: \"drag\" }), !0;\n        }\n      } else\n        this.moved = !1;\n    }\n    return !1;\n  }\n  up(t) {\n    if (this.paused)\n      return !1;\n    const e = this.parent.input.touches;\n    if (e.length === 1) {\n      const n = e[0];\n      return n.last && (this.last = { x: n.last.x, y: n.last.y }, this.current = n.id), this.moved = !1, !0;\n    } else if (this.last && this.moved) {\n      const n = new c(this.last.x, this.last.y);\n      return this.parent.emit(\"drag-end\", {\n        event: t,\n        screen: n,\n        world: this.parent.toWorld(n),\n        viewport: this.parent\n      }), this.last = null, this.moved = !1, !0;\n    }\n    return !1;\n  }\n  wheel(t) {\n    if (this.paused)\n      return !1;\n    if (this.options.wheel) {\n      const e = this.parent.plugins.get(\"wheel\", !0);\n      if (!e || !e.options.wheelZoom && !t.ctrlKey) {\n        const n = t.deltaMode ? this.options.lineHeight : 1, i = [t.deltaX, t.deltaY], [s, h] = this.options.wheelSwapAxes ? i.reverse() : i;\n        return this.xDirection && (this.parent.x += s * n * this.options.wheelScroll * this.reverse), this.yDirection && (this.parent.y += h * n * this.options.wheelScroll * this.reverse), this.options.clampWheel && this.clamp(), this.parent.emit(\"wheel-scroll\", this.parent), this.parent.emit(\"moved\", { viewport: this.parent, type: \"wheel\" }), this.parent.options.passiveWheel || t.preventDefault(), this.parent.options.stopPropagation && t.stopPropagation(), !0;\n      }\n    }\n    return !1;\n  }\n  resume() {\n    this.last = null, this.paused = !1;\n  }\n  clamp() {\n    const t = this.parent.plugins.get(\"decelerate\", !0) || {};\n    if (this.options.clampWheel !== \"y\")\n      if (this.parent.screenWorldWidth < this.parent.screenWidth)\n        switch (this.underflowX) {\n          case -1:\n            this.parent.x = 0;\n            break;\n          case 1:\n            this.parent.x = this.parent.screenWidth - this.parent.screenWorldWidth;\n            break;\n          default:\n            this.parent.x = (this.parent.screenWidth - this.parent.screenWorldWidth) / 2;\n        }\n      else\n        this.parent.left < 0 ? (this.parent.x = 0, t.x = 0) : this.parent.right > this.parent.worldWidth && (this.parent.x = -this.parent.worldWidth * this.parent.scale.x + this.parent.screenWidth, t.x = 0);\n    if (this.options.clampWheel !== \"x\")\n      if (this.parent.screenWorldHeight < this.parent.screenHeight)\n        switch (this.underflowY) {\n          case -1:\n            this.parent.y = 0;\n            break;\n          case 1:\n            this.parent.y = this.parent.screenHeight - this.parent.screenWorldHeight;\n            break;\n          default:\n            this.parent.y = (this.parent.screenHeight - this.parent.screenWorldHeight) / 2;\n        }\n      else\n        this.parent.top < 0 && (this.parent.y = 0, t.y = 0), this.parent.bottom > this.parent.worldHeight && (this.parent.y = -this.parent.worldHeight * this.parent.scale.y + this.parent.screenHeight, t.y = 0);\n  }\n}\nconst L = {\n  speed: 0,\n  acceleration: null,\n  radius: null\n};\nclass U extends u {\n  /**\n   * This is called by {@link Viewport.follow}.\n   *\n   * @param parent\n   * @param target - target to follow\n   * @param options\n   */\n  constructor(t, e, n = {}) {\n    super(t), this.target = e, this.options = Object.assign({}, L, n), this.velocity = { x: 0, y: 0 };\n  }\n  update(t) {\n    if (this.paused)\n      return;\n    const e = this.parent.center;\n    let n = this.target.x, i = this.target.y;\n    if (this.options.radius)\n      if (Math.sqrt(Math.pow(this.target.y - e.y, 2) + Math.pow(this.target.x - e.x, 2)) > this.options.radius) {\n        const r = Math.atan2(this.target.y - e.y, this.target.x - e.x);\n        n = this.target.x - Math.cos(r) * this.options.radius, i = this.target.y - Math.sin(r) * this.options.radius;\n      } else\n        return;\n    const s = n - e.x, h = i - e.y;\n    if (s || h)\n      if (this.options.speed)\n        if (this.options.acceleration) {\n          const o = Math.atan2(i - e.y, n - e.x), r = Math.sqrt(Math.pow(s, 2) + Math.pow(h, 2));\n          if (r) {\n            const a = (Math.pow(this.velocity.x, 2) + Math.pow(this.velocity.y, 2)) / (2 * this.options.acceleration);\n            r > a ? this.velocity = {\n              x: Math.min(this.velocity.x + (this.options.acceleration * t, this.options.speed)),\n              y: Math.min(this.velocity.y + (this.options.acceleration * t, this.options.speed))\n            } : this.velocity = {\n              x: Math.max(this.velocity.x - this.options.acceleration * this.options.speed, 0),\n              y: Math.max(this.velocity.y - this.options.acceleration * this.options.speed, 0)\n            };\n            const p = Math.cos(o) * this.velocity.x, f = Math.sin(o) * this.velocity.y, g = Math.abs(p) > Math.abs(s) ? n : e.x + p, w = Math.abs(f) > Math.abs(h) ? i : e.y + f;\n            this.parent.moveCenter(g, w), this.parent.emit(\"moved\", { viewport: this.parent, type: \"follow\" });\n          }\n        } else {\n          const o = Math.atan2(i - e.y, n - e.x), r = Math.cos(o) * this.options.speed, a = Math.sin(o) * this.options.speed, p = Math.abs(r) > Math.abs(s) ? n : e.x + r, f = Math.abs(a) > Math.abs(h) ? i : e.y + a;\n          this.parent.moveCenter(p, f), this.parent.emit(\"moved\", { viewport: this.parent, type: \"follow\" });\n        }\n      else\n        this.parent.moveCenter(n, i), this.parent.emit(\"moved\", { viewport: this.parent, type: \"follow\" });\n  }\n}\nconst F = {\n  radius: null,\n  distance: null,\n  top: null,\n  bottom: null,\n  left: null,\n  right: null,\n  speed: 8,\n  reverse: !1,\n  noDecelerate: !1,\n  linear: !1,\n  allowButtons: !1\n};\nclass B extends u {\n  /**\n   * This is called by {@link Viewport.mouseEdges}.\n   */\n  constructor(t, e = {}) {\n    super(t), this.options = Object.assign({}, F, e), this.reverse = this.options.reverse ? 1 : -1, this.radiusSquared = typeof this.options.radius == \"number\" ? Math.pow(this.options.radius, 2) : null, this.resize();\n  }\n  resize() {\n    const t = this.options.distance;\n    t !== null ? (this.left = t, this.top = t, this.right = this.parent.screenWidth - t, this.bottom = this.parent.screenHeight - t) : this.options.radius || (this.left = this.options.left, this.top = this.options.top, this.right = this.options.right === null ? null : this.parent.screenWidth - this.options.right, this.bottom = this.options.bottom === null ? null : this.parent.screenHeight - this.options.bottom);\n  }\n  down() {\n    return this.paused || this.options.allowButtons || (this.horizontal = this.vertical = null), !1;\n  }\n  move(t) {\n    if (this.paused || t.pointerType !== \"mouse\" && t.pointerId !== 1 || !this.options.allowButtons && t.buttons !== 0)\n      return !1;\n    const e = t.global.x, n = t.global.y;\n    if (this.radiusSquared) {\n      const i = this.parent.toScreen(this.parent.center);\n      if (Math.pow(i.x - e, 2) + Math.pow(i.y - n, 2) >= this.radiusSquared) {\n        const h = Math.atan2(i.y - n, i.x - e);\n        this.options.linear ? (this.horizontal = Math.round(Math.cos(h)) * this.options.speed * this.reverse * (60 / 1e3), this.vertical = Math.round(Math.sin(h)) * this.options.speed * this.reverse * (60 / 1e3)) : (this.horizontal = Math.cos(h) * this.options.speed * this.reverse * (60 / 1e3), this.vertical = Math.sin(h) * this.options.speed * this.reverse * (60 / 1e3));\n      } else\n        this.horizontal && this.decelerateHorizontal(), this.vertical && this.decelerateVertical(), this.horizontal = this.vertical = 0;\n    } else\n      this.left !== null && e < this.left ? this.horizontal = Number(this.reverse) * this.options.speed * (60 / 1e3) : this.right !== null && e > this.right ? this.horizontal = -1 * this.reverse * this.options.speed * (60 / 1e3) : (this.decelerateHorizontal(), this.horizontal = 0), this.top !== null && n < this.top ? this.vertical = Number(this.reverse) * this.options.speed * (60 / 1e3) : this.bottom !== null && n > this.bottom ? this.vertical = -1 * this.reverse * this.options.speed * (60 / 1e3) : (this.decelerateVertical(), this.vertical = 0);\n    return !1;\n  }\n  decelerateHorizontal() {\n    const t = this.parent.plugins.get(\"decelerate\", !0);\n    this.horizontal && t && !this.options.noDecelerate && t.activate({ x: this.horizontal * this.options.speed * this.reverse / (1e3 / 60) });\n  }\n  decelerateVertical() {\n    const t = this.parent.plugins.get(\"decelerate\", !0);\n    this.vertical && t && !this.options.noDecelerate && t.activate({ y: this.vertical * this.options.speed * this.reverse / (1e3 / 60) });\n  }\n  up() {\n    return this.paused || (this.horizontal && this.decelerateHorizontal(), this.vertical && this.decelerateVertical(), this.horizontal = this.vertical = null), !1;\n  }\n  update() {\n    if (!this.paused && (this.horizontal || this.vertical)) {\n      const t = this.parent.center;\n      this.horizontal && (t.x += this.horizontal * this.options.speed), this.vertical && (t.y += this.vertical * this.options.speed), this.parent.moveCenter(t), this.parent.emit(\"moved\", { viewport: this.parent, type: \"mouse-edges\" });\n    }\n  }\n}\nconst V = {\n  noDrag: !1,\n  percent: 1,\n  center: null,\n  factor: 1,\n  axis: \"all\"\n};\nclass N extends u {\n  /**\n   * This is called by {@link Viewport.pinch}.\n   */\n  constructor(t, e = {}) {\n    super(t), this.active = !1, this.pinching = !1, this.moved = !1, this.options = Object.assign({}, V, e);\n  }\n  down() {\n    return this.parent.input.count() >= 2 ? (this.active = !0, !0) : !1;\n  }\n  isAxisX() {\n    return [\"all\", \"x\"].includes(this.options.axis);\n  }\n  isAxisY() {\n    return [\"all\", \"y\"].includes(this.options.axis);\n  }\n  move(t) {\n    if (this.paused || !this.active)\n      return !1;\n    const e = t.global.x, n = t.global.y, i = this.parent.input.touches;\n    if (i.length >= 2) {\n      const s = i[0], h = i[1], o = s.last && h.last ? Math.sqrt(Math.pow(h.last.x - s.last.x, 2) + Math.pow(h.last.y - s.last.y, 2)) : null;\n      if (s.id === t.pointerId ? s.last = { x: e, y: n, data: t } : h.id === t.pointerId && (h.last = { x: e, y: n, data: t }), o) {\n        let r;\n        const a = new c(\n          s.last.x + (h.last.x - s.last.x) / 2,\n          s.last.y + (h.last.y - s.last.y) / 2\n        );\n        this.options.center || (r = this.parent.toLocal(a));\n        let p = Math.sqrt(Math.pow(\n          h.last.x - s.last.x,\n          2\n        ) + Math.pow(h.last.y - s.last.y, 2));\n        p = p === 0 ? p = 1e-10 : p;\n        const f = (1 - o / p) * this.options.percent * (this.isAxisX() ? this.parent.scale.x : this.parent.scale.y);\n        this.isAxisX() && (this.parent.scale.x += f), this.isAxisY() && (this.parent.scale.y += f), this.parent.emit(\"zoomed\", { viewport: this.parent, type: \"pinch\", center: a });\n        const g = this.parent.plugins.get(\"clamp-zoom\", !0);\n        if (g && g.clamp(), this.options.center)\n          this.parent.moveCenter(this.options.center);\n        else {\n          const w = this.parent.toGlobal(r);\n          this.parent.x += (a.x - w.x) * this.options.factor, this.parent.y += (a.y - w.y) * this.options.factor, this.parent.emit(\"moved\", { viewport: this.parent, type: \"pinch\" });\n        }\n        !this.options.noDrag && this.lastCenter && (this.parent.x += (a.x - this.lastCenter.x) * this.options.factor, this.parent.y += (a.y - this.lastCenter.y) * this.options.factor, this.parent.emit(\"moved\", { viewport: this.parent, type: \"pinch\" })), this.lastCenter = a, this.moved = !0;\n      } else\n        this.pinching || (this.parent.emit(\"pinch-start\", this.parent), this.pinching = !0);\n      return !0;\n    }\n    return !1;\n  }\n  up() {\n    return this.pinching && this.parent.input.touches.length <= 1 ? (this.active = !1, this.lastCenter = null, this.pinching = !1, this.moved = !1, this.parent.emit(\"pinch-end\", this.parent), !0) : !1;\n  }\n}\nconst Z = {\n  topLeft: !1,\n  friction: 0.8,\n  time: 1e3,\n  ease: \"easeInOutSine\",\n  interrupt: !0,\n  removeOnComplete: !1,\n  removeOnInterrupt: !1,\n  forceStart: !1\n};\nclass j extends u {\n  /**\n   * This is called by {@link Viewport.snap}.\n   */\n  constructor(t, e, n, i = {}) {\n    super(t), this.options = Object.assign({}, Z, i), this.ease = x(i.ease, \"easeInOutSine\"), this.x = e, this.y = n, this.options.forceStart && this.snapStart();\n  }\n  snapStart() {\n    this.percent = 0, this.snapping = { time: 0 };\n    const t = this.options.topLeft ? this.parent.corner : this.parent.center;\n    this.deltaX = this.x - t.x, this.deltaY = this.y - t.y, this.startX = t.x, this.startY = t.y, this.parent.emit(\"snap-start\", this.parent);\n  }\n  wheel() {\n    return this.options.removeOnInterrupt && this.parent.plugins.remove(\"snap\"), !1;\n  }\n  down() {\n    return this.options.removeOnInterrupt ? this.parent.plugins.remove(\"snap\") : this.options.interrupt && (this.snapping = null), !1;\n  }\n  up() {\n    if (this.parent.input.count() === 0) {\n      const t = this.parent.plugins.get(\"decelerate\", !0);\n      t && (t.x || t.y) && (t.percentChangeX = t.percentChangeY = this.options.friction);\n    }\n    return !1;\n  }\n  update(t) {\n    if (!this.paused && !(this.options.interrupt && this.parent.input.count() !== 0))\n      if (this.snapping) {\n        const e = this.snapping;\n        e.time += t;\n        let n, i, s;\n        const h = this.startX, o = this.startY, r = this.deltaX, a = this.deltaY;\n        if (e.time > this.options.time)\n          n = !0, i = h + r, s = o + a;\n        else {\n          const p = this.ease(e.time, 0, 1, this.options.time);\n          i = h + r * p, s = o + a * p;\n        }\n        this.options.topLeft ? this.parent.moveCorner(i, s) : this.parent.moveCenter(i, s), this.parent.emit(\"moved\", { viewport: this.parent, type: \"snap\" }), n && (this.options.removeOnComplete && this.parent.plugins.remove(\"snap\"), this.parent.emit(\"snap-end\", this.parent), this.snapping = null);\n      } else {\n        const e = this.options.topLeft ? this.parent.corner : this.parent.center;\n        (e.x !== this.x || e.y !== this.y) && this.snapStart();\n      }\n  }\n}\nconst R = {\n  width: 0,\n  height: 0,\n  time: 1e3,\n  ease: \"easeInOutSine\",\n  center: null,\n  interrupt: !0,\n  removeOnComplete: !1,\n  removeOnInterrupt: !1,\n  forceStart: !1,\n  noMove: !1\n};\nclass K extends u {\n  /**\n   * This is called by {@link Viewport.snapZoom}.\n   */\n  constructor(t, e = {}) {\n    super(t), this.options = Object.assign({}, R, e), this.ease = x(this.options.ease), this.xIndependent = !1, this.yIndependent = !1, this.xScale = 0, this.yScale = 0, this.options.width > 0 && (this.xScale = t.screenWidth / this.options.width, this.xIndependent = !0), this.options.height > 0 && (this.yScale = t.screenHeight / this.options.height, this.yIndependent = !0), this.xScale = this.xIndependent ? this.xScale : this.yScale, this.yScale = this.yIndependent ? this.yScale : this.xScale, this.options.time === 0 ? (t.container.scale.x = this.xScale, t.container.scale.y = this.yScale, this.options.removeOnComplete && this.parent.plugins.remove(\"snap-zoom\")) : e.forceStart && this.createSnapping();\n  }\n  createSnapping() {\n    const t = this.parent.worldScreenWidth, e = this.parent.worldScreenHeight, n = this.parent.screenWidth / this.xScale, i = this.parent.screenHeight / this.yScale;\n    this.snapping = {\n      time: 0,\n      startX: t,\n      startY: e,\n      deltaX: n - t,\n      deltaY: i - e\n    }, this.parent.emit(\"snap-zoom-start\", this.parent);\n  }\n  resize() {\n    this.snapping = null, this.options.width > 0 && (this.xScale = this.parent.screenWidth / this.options.width), this.options.height > 0 && (this.yScale = this.parent.screenHeight / this.options.height), this.xScale = this.xIndependent ? this.xScale : this.yScale, this.yScale = this.yIndependent ? this.yScale : this.xScale;\n  }\n  wheel() {\n    return this.options.removeOnInterrupt && this.parent.plugins.remove(\"snap-zoom\"), !1;\n  }\n  down() {\n    return this.options.removeOnInterrupt ? this.parent.plugins.remove(\"snap-zoom\") : this.options.interrupt && (this.snapping = null), !1;\n  }\n  update(t) {\n    if (this.paused || this.options.interrupt && this.parent.input.count() !== 0)\n      return;\n    let e;\n    if (!this.options.center && !this.options.noMove && (e = this.parent.center), !this.snapping)\n      (this.parent.scale.x !== this.xScale || this.parent.scale.y !== this.yScale) && this.createSnapping();\n    else if (this.snapping) {\n      const n = this.snapping;\n      if (n.time += t, n.time >= this.options.time)\n        this.parent.scale.set(this.xScale, this.yScale), this.options.removeOnComplete && this.parent.plugins.remove(\"snap-zoom\"), this.parent.emit(\"snap-zoom-end\", this.parent), this.snapping = null;\n      else {\n        const s = this.snapping, h = this.ease(s.time, s.startX, s.deltaX, this.options.time), o = this.ease(s.time, s.startY, s.deltaY, this.options.time);\n        this.parent.scale.x = this.parent.screenWidth / h, this.parent.scale.y = this.parent.screenHeight / o;\n      }\n      const i = this.parent.plugins.get(\"clamp-zoom\", !0);\n      i && i.clamp(), this.options.noMove || (this.options.center ? this.parent.moveCenter(this.options.center) : this.parent.moveCenter(e));\n    }\n  }\n  resume() {\n    this.snapping = null, super.resume();\n  }\n}\nconst q = {\n  percent: 0.1,\n  smooth: !1,\n  interrupt: !0,\n  reverse: !1,\n  center: null,\n  lineHeight: 20,\n  axis: \"all\",\n  keyToPress: null,\n  trackpadPinch: !1,\n  wheelZoom: !0\n};\nclass G extends u {\n  /**\n   * This is called by {@link Viewport.wheel}.\n   */\n  constructor(t, e = {}) {\n    super(t), this.options = Object.assign({}, q, e), this.keyIsPressed = !1, this.options.keyToPress && this.handleKeyPresses(this.options.keyToPress);\n  }\n  /**\n   * Handles keypress events and set the keyIsPressed boolean accordingly\n   *\n   * @param {array} codes - key codes that can be used to trigger zoom event\n   */\n  handleKeyPresses(t) {\n    typeof window > \"u\" || (window.addEventListener(\"keydown\", (e) => {\n      t.includes(e.code) && (this.keyIsPressed = !0);\n    }), window.addEventListener(\"keyup\", (e) => {\n      t.includes(e.code) && (this.keyIsPressed = !1);\n    }));\n  }\n  checkKeyPress() {\n    return !this.options.keyToPress || this.keyIsPressed;\n  }\n  down() {\n    return this.options.interrupt && (this.smoothing = null), !1;\n  }\n  isAxisX() {\n    return [\"all\", \"x\"].includes(this.options.axis);\n  }\n  isAxisY() {\n    return [\"all\", \"y\"].includes(this.options.axis);\n  }\n  update() {\n    if (this.smoothing) {\n      const t = this.smoothingCenter, e = this.smoothing;\n      let n;\n      this.options.center || (n = this.parent.toLocal(t)), this.isAxisX() && (this.parent.scale.x += e.x), this.isAxisY() && (this.parent.scale.y += e.y), this.parent.emit(\"zoomed\", { viewport: this.parent, type: \"wheel\" });\n      const i = this.parent.plugins.get(\"clamp-zoom\", !0);\n      if (i && i.clamp(), this.options.center)\n        this.parent.moveCenter(this.options.center);\n      else {\n        const s = this.parent.toGlobal(n);\n        this.parent.x += t.x - s.x, this.parent.y += t.y - s.y;\n      }\n      this.parent.emit(\"moved\", { viewport: this.parent, type: \"wheel\" }), this.smoothingCount++, this.smoothingCount >= this.options.smooth && (this.smoothing = null);\n    }\n  }\n  pinch(t) {\n    if (this.paused)\n      return;\n    const e = this.parent.input.getPointerPosition(t), n = -t.deltaY * (t.deltaMode ? this.options.lineHeight : 1) / 200, i = Math.pow(2, (1 + this.options.percent) * n);\n    let s;\n    this.options.center || (s = this.parent.toLocal(e)), this.isAxisX() && (this.parent.scale.x *= i), this.isAxisY() && (this.parent.scale.y *= i), this.parent.emit(\"zoomed\", { viewport: this.parent, type: \"wheel\" });\n    const h = this.parent.plugins.get(\"clamp-zoom\", !0);\n    if (h && h.clamp(), this.options.center)\n      this.parent.moveCenter(this.options.center);\n    else {\n      const o = this.parent.toGlobal(s);\n      this.parent.x += e.x - o.x, this.parent.y += e.y - o.y;\n    }\n    this.parent.emit(\"moved\", { viewport: this.parent, type: \"wheel\" }), this.parent.emit(\n      \"wheel-start\",\n      { event: t, viewport: this.parent }\n    );\n  }\n  wheel(t) {\n    if (this.paused || !this.checkKeyPress())\n      return !1;\n    if (t.ctrlKey && this.options.trackpadPinch)\n      this.pinch(t);\n    else if (this.options.wheelZoom) {\n      const e = this.parent.input.getPointerPosition(t), i = (this.options.reverse ? -1 : 1) * -t.deltaY * (t.deltaMode ? this.options.lineHeight : 1) / 500, s = Math.pow(2, (1 + this.options.percent) * i);\n      if (this.options.smooth) {\n        const h = {\n          x: this.smoothing ? this.smoothing.x * (this.options.smooth - this.smoothingCount) : 0,\n          y: this.smoothing ? this.smoothing.y * (this.options.smooth - this.smoothingCount) : 0\n        };\n        this.smoothing = {\n          x: ((this.parent.scale.x + h.x) * s - this.parent.scale.x) / this.options.smooth,\n          y: ((this.parent.scale.y + h.y) * s - this.parent.scale.y) / this.options.smooth\n        }, this.smoothingCount = 0, this.smoothingCenter = e;\n      } else {\n        let h;\n        this.options.center || (h = this.parent.toLocal(e)), this.isAxisX() && (this.parent.scale.x *= s), this.isAxisY() && (this.parent.scale.y *= s), this.parent.emit(\"zoomed\", { viewport: this.parent, type: \"wheel\" });\n        const o = this.parent.plugins.get(\"clamp-zoom\", !0);\n        if (o && o.clamp(), this.options.center)\n          this.parent.moveCenter(this.options.center);\n        else {\n          const r = this.parent.toGlobal(h);\n          this.parent.x += e.x - r.x, this.parent.y += e.y - r.y;\n        }\n      }\n      this.parent.emit(\"moved\", { viewport: this.parent, type: \"wheel\" }), this.parent.emit(\n        \"wheel-start\",\n        { event: t, viewport: this.parent }\n      );\n    }\n    return !this.parent.options.passiveWheel;\n  }\n}\nclass Q {\n  constructor(t) {\n    this.viewport = t, this.touches = [], this.addListeners();\n  }\n  /** Add input listeners */\n  addListeners() {\n    this.viewport.eventMode = \"static\", this.viewport.forceHitArea || (this.viewport.hitArea = new y(0, 0, this.viewport.worldWidth, this.viewport.worldHeight)), this.viewport.on(\"pointerdown\", this.down, this), this.viewport.options.allowPreserveDragOutside ? this.viewport.on(\"globalpointermove\", this.move, this) : this.viewport.on(\"pointermove\", this.move, this), this.viewport.on(\"pointerup\", this.up, this), this.viewport.on(\"pointerupoutside\", this.up, this), this.viewport.on(\"pointercancel\", this.up, this), this.viewport.options.allowPreserveDragOutside || this.viewport.on(\"pointerleave\", this.up, this), this.wheelFunction = (t) => this.handleWheel(t), this.viewport.options.events.domElement.addEventListener(\n      \"wheel\",\n      this.wheelFunction,\n      { passive: this.viewport.options.passiveWheel }\n    ), this.isMouseDown = !1;\n  }\n  /**\n   * Removes all event listeners from viewport\n   * (useful for cleanup of wheel when removing viewport)\n   */\n  destroy() {\n    var t;\n    (t = this.viewport.options.events.domElement) == null || t.removeEventListener(\"wheel\", this.wheelFunction);\n  }\n  /**\n   * handle down events for viewport\n   *\n   * @param {PIXI.FederatedPointerEvent} event\n   */\n  down(t) {\n    if (this.viewport.pause || !this.viewport.visible)\n      return;\n    if (t.pointerType === \"mouse\" ? this.isMouseDown = !0 : this.get(t.pointerId) || this.touches.push({ id: t.pointerId, last: null }), this.count() === 1) {\n      this.last = t.global.clone();\n      const n = this.viewport.plugins.get(\"decelerate\", !0), i = this.viewport.plugins.get(\"bounce\", !0);\n      (!n || !n.isActive()) && (!i || !i.isActive()) ? this.clickedAvailable = !0 : this.clickedAvailable = !1;\n    } else\n      this.clickedAvailable = !1;\n    this.viewport.plugins.down(t) && this.viewport.options.stopPropagation && t.stopPropagation();\n  }\n  /** Clears all pointer events */\n  clear() {\n    this.isMouseDown = !1, this.touches = [], this.last = null;\n  }\n  /**\n   * @param {number} change\n   * @returns whether change exceeds threshold\n   */\n  checkThreshold(t) {\n    return Math.abs(t) >= this.viewport.threshold;\n  }\n  /** Handle move events for viewport */\n  move(t) {\n    if (this.viewport.pause || !this.viewport.visible)\n      return;\n    const e = this.viewport.plugins.move(t);\n    if (this.clickedAvailable && this.last) {\n      const n = t.global.x - this.last.x, i = t.global.y - this.last.y;\n      (this.checkThreshold(n) || this.checkThreshold(i)) && (this.clickedAvailable = !1);\n    }\n    e && this.viewport.options.stopPropagation && t.stopPropagation();\n  }\n  /** Handle up events for viewport */\n  up(t) {\n    if (this.viewport.pause || !this.viewport.visible)\n      return;\n    t.pointerType === \"mouse\" && (this.isMouseDown = !1), t.pointerType !== \"mouse\" && this.remove(t.pointerId);\n    const e = this.viewport.plugins.up(t);\n    this.clickedAvailable && this.count() === 0 && this.last && (this.viewport.emit(\"clicked\", {\n      event: t,\n      screen: this.last,\n      world: this.viewport.toWorld(this.last),\n      viewport: this.viewport\n    }), this.clickedAvailable = !1), e && this.viewport.options.stopPropagation && t.stopPropagation();\n  }\n  /** Gets pointer position if this.interaction is set */\n  getPointerPosition(t) {\n    const e = new c();\n    return this.viewport.options.events.mapPositionToPoint(e, t.clientX, t.clientY), e;\n  }\n  /** Handle wheel events */\n  handleWheel(t) {\n    if (this.viewport.pause || !this.viewport.visible)\n      return;\n    const e = this.viewport.toLocal(this.getPointerPosition(t));\n    this.viewport.left <= e.x && e.x <= this.viewport.right && this.viewport.top <= e.y && e.y <= this.viewport.bottom && this.viewport.plugins.wheel(t) && !this.viewport.options.passiveWheel && t.preventDefault();\n  }\n  pause() {\n    this.touches = [], this.isMouseDown = !1;\n  }\n  /** Get touch by id */\n  get(t) {\n    for (const e of this.touches)\n      if (e.id === t)\n        return e;\n    return null;\n  }\n  /** Remove touch by number */\n  remove(t) {\n    for (let e = 0; e < this.touches.length; e++)\n      if (this.touches[e].id === t) {\n        this.touches.splice(e, 1);\n        return;\n      }\n  }\n  /**\n   * @returns {number} count of mouse/touch pointers that are down on the viewport\n   */\n  count() {\n    return (this.isMouseDown ? 1 : 0) + this.touches.length;\n  }\n}\nconst m = [\n  \"drag\",\n  \"pinch\",\n  \"wheel\",\n  \"follow\",\n  \"mouse-edges\",\n  \"decelerate\",\n  \"animate\",\n  \"bounce\",\n  \"snap-zoom\",\n  \"clamp-zoom\",\n  \"snap\",\n  \"clamp\"\n];\nclass J {\n  /** This is called by {@link Viewport} to initialize the {@link Viewport.plugins plugins}. */\n  constructor(t) {\n    this.viewport = t, this.list = [], this.plugins = {};\n  }\n  /**\n   * Inserts a named plugin or a user plugin into the viewport\n   * default plugin order: 'drag', 'pinch', 'wheel', 'follow', 'mouse-edges', 'decelerate', 'bounce',\n   * 'snap-zoom', 'clamp-zoom', 'snap', 'clamp'\n   *\n   * @param {string} name of plugin\n   * @param {Plugin} plugin - instantiated Plugin class\n   * @param {number} index to insert userPlugin (otherwise inserts it at the end)\n   */\n  add(t, e, n = m.length) {\n    const i = this.plugins[t];\n    i && i.destroy(), this.plugins[t] = e;\n    const s = m.indexOf(t);\n    s !== -1 && m.splice(s, 1), m.splice(n, 0, t), this.sort();\n  }\n  /**\n   * Get plugin\n   *\n   * @param {string} name of plugin\n   * @param {boolean} [ignorePaused] return null if plugin is paused\n   */\n  get(t, e) {\n    var n;\n    return e && (n = this.plugins[t]) != null && n.paused ? null : this.plugins[t];\n  }\n  /**\n   * Update all active plugins\n   *\n   * @internal\n   * @ignore\n   * @param {number} elapsed type in milliseconds since last update\n   */\n  update(t) {\n    for (const e of this.list)\n      e.update(t);\n  }\n  /**\n   * Resize all active plugins\n   *\n   * @internal\n   * @ignore\n   */\n  resize() {\n    for (const t of this.list)\n      t.resize();\n  }\n  /** Clamps and resets bounce and decelerate (as needed) after manually moving viewport */\n  reset() {\n    for (const t of this.list)\n      t.reset();\n  }\n  /** removes all installed plugins */\n  removeAll() {\n    this.list.forEach((t) => {\n      t.destroy();\n    }), this.plugins = {}, this.sort();\n  }\n  /**\n   * Removes installed plugin\n   *\n   * @param {string} name of plugin (e.g., 'drag', 'pinch')\n   */\n  remove(t) {\n    var e;\n    this.plugins[t] && ((e = this.plugins[t]) == null || e.destroy(), delete this.plugins[t], this.viewport.emit(\"plugin-remove\", t), this.sort());\n  }\n  /**\n   * Pause plugin\n   *\n   * @param {string} name of plugin (e.g., 'drag', 'pinch')\n   */\n  pause(t) {\n    var e;\n    (e = this.plugins[t]) == null || e.pause();\n  }\n  /**\n   * Resume plugin\n   *\n   * @param {string} name of plugin (e.g., 'drag', 'pinch')\n   */\n  resume(t) {\n    var e;\n    (e = this.plugins[t]) == null || e.resume();\n  }\n  /**\n   * Sort plugins according to PLUGIN_ORDER\n   *\n   * @internal\n   * @ignore\n   */\n  sort() {\n    this.list = [];\n    for (const t of m)\n      this.plugins[t] && this.list.push(this.plugins[t]);\n  }\n  /**\n   * Handle down for all plugins\n   *\n   * @internal\n   * @ignore\n   */\n  down(t) {\n    let e = !1;\n    for (const n of this.list)\n      n.down(t) && (e = !0);\n    return e;\n  }\n  /**\n   * Handle move for all plugins\n   *\n   * @internal\n   * @ignore\n   */\n  move(t) {\n    let e = !1;\n    for (const n of this.viewport.plugins.list)\n      n.move(t) && (e = !0);\n    return e;\n  }\n  /**\n   * Handle up for all plugins\n   *\n   * @internal\n   * @ignore\n   */\n  up(t) {\n    let e = !1;\n    for (const n of this.list)\n      n.up(t) && (e = !0);\n    return e;\n  }\n  /**\n   * Handle wheel event for all plugins\n   *\n   * @internal\n   * @ignore\n   */\n  wheel(t) {\n    let e = !1;\n    for (const n of this.list)\n      n.wheel(t) && (e = !0);\n    return e;\n  }\n}\nconst $ = {\n  screenWidth: typeof window > \"u\" ? 0 : window.innerWidth,\n  screenHeight: typeof window > \"u\" ? 0 : window.innerHeight,\n  worldWidth: null,\n  worldHeight: null,\n  threshold: 5,\n  passiveWheel: !0,\n  stopPropagation: !1,\n  forceHitArea: null,\n  noTicker: !1,\n  disableOnContextMenu: !1,\n  ticker: b.shared,\n  allowPreserveDragOutside: !1\n};\nclass et extends H {\n  /**\n   * @param {IViewportOptions} ViewportOptions\n   * @param {number} [options.screenWidth=window.innerWidth]\n   * @param {number} [options.screenHeight=window.innerHeight]\n   * @param {number} [options.worldWidth=this.width]\n   * @param {number} [options.worldHeight=this.height]\n   * @param {number} [options.threshold=5] number of pixels to move to trigger an input event (e.g., drag, pinch)\n   * or disable a clicked event\n   * @param {boolean} [options.passiveWheel=true] whether the 'wheel' event is set to passive (note: if false,\n   * e.preventDefault() will be called when wheel is used over the viewport)\n   * @param {boolean} [options.stopPropagation=false] whether to stopPropagation of events that impact the viewport\n   * (except wheel events, see options.passiveWheel)\n   * @param {HitArea} [options.forceHitArea] change the default hitArea from world size to a new value\n   * @param {boolean} [options.noTicker] set this if you want to manually call update() function on each frame\n   * @param {PIXI.Ticker} [options.ticker=PIXI.Ticker.shared] use this PIXI.ticker for updates\n   * @param {PIXI.EventSystem} [options.events] EventSystem available from app.events or added manually and passed here\n   * location on screen\n   * @param {boolean} [options.disableOnContextMenu] remove oncontextmenu=() => {} from the pixi's events.domElement\n   */\n  constructor(t) {\n    super(), this._disableOnContextMenu = (e) => e.preventDefault(), this.options = {\n      ...$,\n      ...t\n    }, this.screenWidth = this.options.screenWidth, this.screenHeight = this.options.screenHeight, this._worldWidth = this.options.worldWidth, this._worldHeight = this.options.worldHeight, this.forceHitArea = this.options.forceHitArea, this.threshold = this.options.threshold, this.options.disableOnContextMenu && this.options.events.domElement.addEventListener(\"contextmenu\", this._disableOnContextMenu), this.options.noTicker || (this.tickerFunction = () => this.update(this.options.ticker.elapsedMS), this.options.ticker.add(this.tickerFunction)), this.input = new Q(this), this.plugins = new J(this);\n  }\n  /** Overrides PIXI.Container's destroy to also remove the 'wheel' and PIXI.Ticker listeners */\n  destroy(t) {\n    var e;\n    !this.options.noTicker && this.tickerFunction && this.options.ticker.remove(this.tickerFunction), this.options.disableOnContextMenu && ((e = this.options.events.domElement) == null || e.removeEventListener(\"contextmenu\", this._disableOnContextMenu)), this.input.destroy(), super.destroy(t);\n  }\n  /**\n   * Update viewport on each frame.\n   *\n   * By default, you do not need to call this unless you set `options.noTicker=true`.\n   *\n   * @param {number} elapsed time in milliseconds since last update\n   */\n  update(t) {\n    this.pause || (this.plugins.update(t), this.lastViewport && (this.lastViewport.x !== this.x || this.lastViewport.y !== this.y ? this.moving = !0 : this.moving && (this.emit(\"moved-end\", this), this.moving = !1), this.lastViewport.scaleX !== this.scale.x || this.lastViewport.scaleY !== this.scale.y ? this.zooming = !0 : this.zooming && (this.emit(\"zoomed-end\", this), this.zooming = !1)), this.forceHitArea || (this._hitAreaDefault = new y(this.left, this.top, this.worldScreenWidth, this.worldScreenHeight), this.hitArea = this._hitAreaDefault), this._dirty = this._dirty || !this.lastViewport || this.lastViewport.x !== this.x || this.lastViewport.y !== this.y || this.lastViewport.scaleX !== this.scale.x || this.lastViewport.scaleY !== this.scale.y, this.lastViewport = {\n      x: this.x,\n      y: this.y,\n      scaleX: this.scale.x,\n      scaleY: this.scale.y\n    }, this.emit(\"frame-end\", this));\n  }\n  /**\n   * Use this to set screen and world sizes, needed for pinch/wheel/clamp/bounce.\n   * @param {number} screenWidth=window.innerWidth\n   * @param {number} screenHeight=window.innerHeight\n   * @param {number} [worldWidth]\n   * @param {number} [worldHeight]\n   */\n  resize(t = typeof window > \"u\" ? 0 : window.innerWidth, e = typeof window > \"u\" ? 0 : window.innerHeight, n, i) {\n    this.screenWidth = t, this.screenHeight = e, typeof n < \"u\" && (this._worldWidth = n), typeof i < \"u\" && (this._worldHeight = i), this.plugins.resize(), this.dirty = !0;\n  }\n  /** World width, in pixels */\n  get worldWidth() {\n    return this._worldWidth ? this._worldWidth : this.width / this.scale.x;\n  }\n  set worldWidth(t) {\n    this._worldWidth = t, this.plugins.resize();\n  }\n  /** World height, in pixels */\n  get worldHeight() {\n    return this._worldHeight ? this._worldHeight : this.height / this.scale.y;\n  }\n  set worldHeight(t) {\n    this._worldHeight = t, this.plugins.resize();\n  }\n  /** Get visible world bounds of viewport */\n  getVisibleBounds() {\n    return new y(this.left, this.top, this.worldScreenWidth, this.worldScreenHeight);\n  }\n  /**\n   * Changes coordinate from screen to world\n   * @param {number|PIXI.Point} x\n   * @param {number} y\n   * @returns {PIXI.Point}\n   */\n  toWorld(t, e) {\n    return arguments.length === 2 ? this.toLocal(new c(t, e)) : this.toLocal(t);\n  }\n  /**\n   * Changes coordinate from world to screen\n   * @param {number|PIXI.Point} x\n   * @param {number} y\n   * @returns {PIXI.Point}\n   */\n  toScreen(t, e) {\n    return arguments.length === 2 ? this.toGlobal(new c(t, e)) : this.toGlobal(t);\n  }\n  /** Screen width in world coordinates */\n  get worldScreenWidth() {\n    return this.screenWidth / this.scale.x;\n  }\n  /** Screen height in world coordinates */\n  get worldScreenHeight() {\n    return this.screenHeight / this.scale.y;\n  }\n  /** World width in screen coordinates */\n  get screenWorldWidth() {\n    return this.worldWidth * this.scale.x;\n  }\n  /** World height in screen coordinates */\n  get screenWorldHeight() {\n    return this.worldHeight * this.scale.y;\n  }\n  /** Center of screen in world coordinates */\n  get center() {\n    return new c(\n      this.worldScreenWidth / 2 - this.x / this.scale.x,\n      this.worldScreenHeight / 2 - this.y / this.scale.y\n    );\n  }\n  set center(t) {\n    this.moveCenter(t);\n  }\n  /**\n   * Move center of viewport to (x, y)\n   * @param {number|PIXI.Point} x\n   * @param {number} [y]\n   * @return {Viewport}\n   */\n  moveCenter(...t) {\n    let e, n;\n    typeof t[0] == \"number\" ? (e = t[0], n = t[1]) : (e = t[0].x, n = t[0].y);\n    const i = (this.worldScreenWidth / 2 - e) * this.scale.x, s = (this.worldScreenHeight / 2 - n) * this.scale.y;\n    return (this.x !== i || this.y !== s) && (this.position.set(i, s), this.plugins.reset(), this.dirty = !0), this;\n  }\n  /** Top-left corner of Viewport */\n  get corner() {\n    return new c(-this.x / this.scale.x, -this.y / this.scale.y);\n  }\n  set corner(t) {\n    this.moveCorner(t);\n  }\n  /**\n   * MoveCorner\n   * @param {number|PIXI.Point} x\n   * @param {number} [y]\n   * @returns {Viewport}\n   */\n  moveCorner(...t) {\n    let e, n;\n    return t.length === 1 ? (e = -t[0].x * this.scale.x, n = -t[0].y * this.scale.y) : (e = -t[0] * this.scale.x, n = -t[1] * this.scale.y), (e !== this.x || n !== this.y) && (this.position.set(e, n), this.plugins.reset(), this.dirty = !0), this;\n  }\n  /** Get how many world pixels fit in screen's width */\n  get screenWidthInWorldPixels() {\n    return this.screenWidth / this.scale.x;\n  }\n  /** Get how many world pixels fit on screen's height */\n  get screenHeightInWorldPixels() {\n    return this.screenHeight / this.scale.y;\n  }\n  /**\n   * Find the scale value that fits a world width on the screen\n   * does not change the viewport (use fit... to change)\n   *\n   * @param width - Width in world pixels\n   * @return - scale\n   */\n  findFitWidth(t) {\n    return this.screenWidth / t;\n  }\n  /**\n   * Finds the scale value that fits a world height on the screens\n   * does not change the viewport (use fit... to change)\n   *\n   * @param height - Height in world pixels\n   * @return - scale\n   */\n  findFitHeight(t) {\n    return this.screenHeight / t;\n  }\n  /**\n   * Finds the scale value that fits the smaller of a world width and world height on the screen\n   * does not change the viewport (use fit... to change)\n   *\n   * @param {number} width in world pixels\n   * @param {number} height in world pixels\n   * @returns {number} scale\n   */\n  findFit(t, e) {\n    const n = this.screenWidth / t, i = this.screenHeight / e;\n    return Math.min(n, i);\n  }\n  /**\n   * Finds the scale value that fits the larger of a world width and world height on the screen\n   * does not change the viewport (use fit... to change)\n   *\n   * @param {number} width in world pixels\n   * @param {number} height in world pixels\n   * @returns {number} scale\n   */\n  findCover(t, e) {\n    const n = this.screenWidth / t, i = this.screenHeight / e;\n    return Math.max(n, i);\n  }\n  /**\n   * Change zoom so the width fits in the viewport\n   *\n   * @param width - width in world coordinates\n   * @param center - maintain the same center\n   * @param scaleY - whether to set scaleY=scaleX\n   * @param noClamp - whether to disable clamp-zoom\n   * @returns {Viewport} this\n   */\n  fitWidth(t = this.worldWidth, e, n = !0, i) {\n    let s;\n    e && (s = this.center), this.scale.x = this.screenWidth / t, n && (this.scale.y = this.scale.x);\n    const h = this.plugins.get(\"clamp-zoom\", !0);\n    return !i && h && h.clamp(), e && s && this.moveCenter(s), this;\n  }\n  /**\n   * Change zoom so the height fits in the viewport\n   *\n   * @param {number} [height=this.worldHeight] in world coordinates\n   * @param {boolean} [center] maintain the same center of the screen after zoom\n   * @param {boolean} [scaleX=true] whether to set scaleX = scaleY\n   * @param {boolean} [noClamp] whether to disable clamp-zoom\n   * @returns {Viewport} this\n   */\n  fitHeight(t = this.worldHeight, e, n = !0, i) {\n    let s;\n    e && (s = this.center), this.scale.y = this.screenHeight / t, n && (this.scale.x = this.scale.y);\n    const h = this.plugins.get(\"clamp-zoom\", !0);\n    return !i && h && h.clamp(), e && s && this.moveCenter(s), this;\n  }\n  /**\n   * Change zoom so it fits the entire world in the viewport\n   *\n   * @param {boolean} center maintain the same center of the screen after zoom\n   * @returns {Viewport} this\n   */\n  fitWorld(t) {\n    let e;\n    t && (e = this.center), this.scale.x = this.screenWidth / this.worldWidth, this.scale.y = this.screenHeight / this.worldHeight, this.scale.x < this.scale.y ? this.scale.y = this.scale.x : this.scale.x = this.scale.y;\n    const n = this.plugins.get(\"clamp-zoom\", !0);\n    return n && n.clamp(), t && e && this.moveCenter(e), this;\n  }\n  /**\n   * Change zoom so it fits the size or the entire world in the viewport\n   *\n   * @param {boolean} [center] maintain the same center of the screen after zoom\n   * @param {number} [width=this.worldWidth] desired width\n   * @param {number} [height=this.worldHeight] desired height\n   * @returns {Viewport} this\n   */\n  fit(t, e = this.worldWidth, n = this.worldHeight) {\n    let i;\n    t && (i = this.center), this.scale.x = this.screenWidth / e, this.scale.y = this.screenHeight / n, this.scale.x < this.scale.y ? this.scale.y = this.scale.x : this.scale.x = this.scale.y;\n    const s = this.plugins.get(\"clamp-zoom\", !0);\n    return s && s.clamp(), t && i && this.moveCenter(i), this;\n  }\n  /**\n   * Zoom viewport to specific value.\n   *\n   * @param {number} scale value (e.g., 1 would be 100%, 0.25 would be 25%)\n   * @param {boolean} [center] maintain the same center of the screen after zoom\n   * @return {Viewport} this\n   */\n  setZoom(t, e) {\n    let n;\n    e && (n = this.center), this.scale.set(t);\n    const i = this.plugins.get(\"clamp-zoom\", !0);\n    return i && i.clamp(), e && n && this.moveCenter(n), this;\n  }\n  /**\n   * Zoom viewport by a certain percent (in both x and y direction).\n   *\n   * @param {number} percent change (e.g., 0.25 would increase a starting scale of 1.0 to 1.25)\n   * @param {boolean} [center] maintain the same center of the screen after zoom\n   * @return {Viewport} this\n   */\n  zoomPercent(t, e) {\n    return this.setZoom(this.scale.x + this.scale.x * t, e);\n  }\n  /**\n   * Zoom viewport by increasing/decreasing width by a certain number of pixels.\n   *\n   * @param {number} change in pixels\n   * @param {boolean} [center] maintain the same center of the screen after zoom\n   * @return {Viewport} this\n   */\n  zoom(t, e) {\n    return this.fitWidth(t + this.worldScreenWidth, e), this;\n  }\n  /** Changes scale of viewport and maintains center of viewport */\n  get scaled() {\n    return this.scale.x;\n  }\n  set scaled(t) {\n    this.setZoom(t, !0);\n  }\n  /**\n   * Returns zoom to the desired scale\n   *\n   * @param {ISnapZoomOptions} options\n   * @param {number} [options.width=0] - the desired width to snap (to maintain aspect ratio, choose width or height)\n   * @param {number} [options.height=0] - the desired height to snap (to maintain aspect ratio, choose width or height)\n   * @param {number} [options.time=1000] - time for snapping in ms\n   * @param {(string|function)} [options.ease=easeInOutSine] ease function or name (see http://easings.net/\n   *   for supported names)\n   * @param {PIXI.Point} [options.center] - place this point at center during zoom instead of center of the viewport\n   * @param {boolean} [options.interrupt=true] - pause snapping with any user input on the viewport\n   * @param {boolean} [options.removeOnComplete] - removes this plugin after snapping is complete\n   * @param {boolean} [options.removeOnInterrupt] - removes this plugin if interrupted by any user input\n   * @param {boolean} [options.forceStart] - starts the snap immediately regardless of whether the viewport is at the\n   *   desired zoom\n   * @param {boolean} [options.noMove] - zoom but do not move\n   */\n  snapZoom(t) {\n    return this.plugins.add(\"snap-zoom\", new K(this, t)), this;\n  }\n  /** Is container out of world bounds */\n  OOB() {\n    return {\n      left: this.left < 0,\n      right: this.right > this.worldWidth,\n      top: this.top < 0,\n      bottom: this.bottom > this.worldHeight,\n      cornerPoint: new c(\n        this.worldWidth * this.scale.x - this.screenWidth,\n        this.worldHeight * this.scale.y - this.screenHeight\n      )\n    };\n  }\n  /** World coordinates of the right edge of the screen */\n  get right() {\n    return -this.x / this.scale.x + this.worldScreenWidth;\n  }\n  set right(t) {\n    this.x = -t * this.scale.x + this.screenWidth, this.plugins.reset();\n  }\n  /** World coordinates of the left edge of the screen */\n  get left() {\n    return -this.x / this.scale.x;\n  }\n  set left(t) {\n    this.x = -t * this.scale.x, this.plugins.reset();\n  }\n  /** World coordinates of the top edge of the screen */\n  get top() {\n    return -this.y / this.scale.y;\n  }\n  set top(t) {\n    this.y = -t * this.scale.y, this.plugins.reset();\n  }\n  /** World coordinates of the bottom edge of the screen */\n  get bottom() {\n    return -this.y / this.scale.y + this.worldScreenHeight;\n  }\n  set bottom(t) {\n    this.y = -t * this.scale.y + this.screenHeight, this.plugins.reset();\n  }\n  /**\n   * Determines whether the viewport is dirty (i.e., needs to be rendered to the screen because of a change)\n   */\n  get dirty() {\n    return !!this._dirty;\n  }\n  set dirty(t) {\n    this._dirty = t;\n  }\n  /**\n   * Permanently changes the Viewport's hitArea\n   *\n   * NOTE: if not set then hitArea = PIXI.Rectangle(Viewport.left, Viewport.top, Viewport.worldScreenWidth,\n   * Viewport.worldScreenHeight)\n   */\n  get forceHitArea() {\n    return this._forceHitArea;\n  }\n  set forceHitArea(t) {\n    t ? (this._forceHitArea = t, this.hitArea = t) : (this._forceHitArea = null, this.hitArea = new y(0, 0, this.worldWidth, this.worldHeight));\n  }\n  /**\n   * Enable one-finger touch to drag\n   *\n   * NOTE: if you expect users to use right-click dragging, you should enable `viewport.options.disableOnContextMenu`\n   * to avoid the context menu popping up on each right-click drag.\n   *\n   * @param {IDragOptions} [options]\n   * @param {string} [options.direction=all] direction to drag\n   * @param {boolean} [options.pressDrag=true] whether click to drag is active\n   * @param {boolean} [options.wheel=true] use wheel to scroll in direction (unless wheel plugin is active)\n   * @param {number} [options.wheelScroll=1] number of pixels to scroll with each wheel spin\n   * @param {boolean} [options.reverse] reverse the direction of the wheel scroll\n   * @param {(boolean|string)} [options.clampWheel=false] clamp wheel(to avoid weird bounce with mouse wheel)\n   * @param {string} [options.underflow=center] where to place world if too small for screen\n   * @param {number} [options.factor=1] factor to multiply drag to increase the speed of movement\n   * @param {string} [options.mouseButtons=all] changes which mouse buttons trigger drag, use: 'all', 'left',\n   *  'right' 'middle', or some combination, like, 'middle-right'; you may want to set\n   *   viewport.options.disableOnContextMenu if you want to use right-click dragging\n   * @param {string[]} [options.keyToPress=null] - array containing\n   *  {@link key|https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/code} codes of keys that can be\n   *  pressed for the drag to be triggered, e.g.: ['ShiftLeft', 'ShiftRight'}.\n   * @param {boolean} [options.ignoreKeyToPressOnTouch=false] - ignore keyToPress for touch events\n   * @param {number} [options.lineHeight=20] - scaling factor for non-DOM_DELTA_PIXEL scrolling events\n   * @returns {Viewport} this\n   */\n  drag(t) {\n    return this.plugins.add(\"drag\", new D(this, t)), this;\n  }\n  /**\n   * Clamp to world boundaries or other provided boundaries\n   * There are three ways to clamp:\n   * 1. direction: 'all' = the world is clamped to its world boundaries, ie, you cannot drag any part of offscreen\n   *    direction: 'x' | 'y' = only the x or y direction is clamped to its world boundary\n   * 2. left, right, top, bottom = true | number = the world is clamped to the world's pixel location for each side;\n   *    if any of these are set to true, then the location is set to the boundary\n   *    [0, viewport.worldWidth/viewport.worldHeight], eg: to allow the world to be completely dragged offscreen,\n   *    set [-viewport.worldWidth, -viewport.worldHeight, viewport.worldWidth * 2, viewport.worldHeight * 2]\n   *\n   * Underflow determines what happens when the world is smaller than the viewport\n   * 1. none = the world is clamped but there is no special behavior\n   * 2. center = the world is centered on the viewport\n   * 3. combination of top/bottom/center and left/right/center (case insensitive) = the world is stuck to the\n   *     appropriate boundaries\n   *\n   * NOTES:\n   *   clamp is disabled if called with no options; use { direction: 'all' } for all edge clamping\n   *   screenWidth, screenHeight, worldWidth, and worldHeight needs to be set for this to work properly\n   *\n   * @param {object} [options]\n   * @param {(number|boolean)} [options.left=false] - clamp left; true = 0\n   * @param {(number|boolean)} [options.right=false] - clamp right; true = viewport.worldWidth\n   * @param {(number|boolean)} [options.top=false] - clamp top; true = 0\n   * @param {(number|boolean)} [options.bottom=false] - clamp bottom; true = viewport.worldHeight\n   * @param {string} [direction] - (all, x, or y) using clamps of [0, viewport.worldWidth/viewport.worldHeight];\n   *  replaces left/right/top/bottom if set\n   * @param {string} [underflow=center] - where to place world if too small for screen (e.g., top-right, center,\n   *  none, bottomLeft)     * @returns {Viewport} this\n   */\n  clamp(t) {\n    return this.plugins.add(\"clamp\", new X(this, t)), this;\n  }\n  /**\n   * Decelerate after a move\n   *\n   * NOTE: this fires 'moved' event during deceleration\n   *\n   * @param {IDecelerateOptions} [options]\n   * @param {number} [options.friction=0.95] - percent to decelerate after movement\n   * @param {number} [options.bounce=0.8] - percent to decelerate when past boundaries (only applicable when\n   *   viewport.bounce() is active)\n   * @param {number} [options.minSpeed=0.01] - minimum velocity before stopping/reversing acceleration\n   * @return {Viewport} this\n   */\n  decelerate(t) {\n    return this.plugins.add(\"decelerate\", new T(this, t)), this;\n  }\n  /**\n   * Bounce on borders\n   * NOTES:\n   *    screenWidth, screenHeight, worldWidth, and worldHeight needs to be set for this to work properly\n   *    fires 'moved', 'bounce-x-start', 'bounce-y-start', 'bounce-x-end', and 'bounce-y-end' events\n   * @param {object} [options]\n   * @param {string} [options.sides=all] - all, horizontal, vertical, or combination of top, bottom, right, left\n   *  (e.g., 'top-bottom-right')\n   * @param {number} [options.friction=0.5] - friction to apply to decelerate if active\n   * @param {number} [options.time=150] - time in ms to finish bounce\n   * @param {object} [options.bounceBox] - use this bounceBox instead of (0, 0, viewport.worldWidth, viewport.worldHeight)\n   * @param {number} [options.bounceBox.x=0]\n   * @param {number} [options.bounceBox.y=0]\n   * @param {number} [options.bounceBox.width=viewport.worldWidth]\n   * @param {number} [options.bounceBox.height=viewport.worldHeight]\n   * @param {string|function} [options.ease=easeInOutSine] - ease function or name\n   *  (see http://easings.net/ for supported names)\n   * @param {string} [options.underflow=center] - (top/bottom/center and left/right/center, or center)\n   *  where to place world if too small for screen\n   * @return {Viewport} this\n   */\n  bounce(t) {\n    return this.plugins.add(\"bounce\", new k(this, t)), this;\n  }\n  /**\n   * Enable pinch to zoom and two-finger touch to drag\n   *\n   * @param {PinchOptions} [options]\n   * @param {boolean} [options.noDrag] - disable two-finger dragging\n   * @param {number} [options.percent=1] - percent to modify pinch speed\n   * @param {number} [options.factor=1] - factor to multiply two-finger drag to increase the speed of movement\n   * @param {PIXI.Point} [options.center] - place this point at center during zoom instead of center of two fingers\n   * @param {('all'|'x'|'y')} [options.axis=all] - axis to zoom\n   * @return {Viewport} this\n   */\n  pinch(t) {\n    return this.plugins.add(\"pinch\", new N(this, t)), this;\n  }\n  /**\n   * Snap to a point\n   *\n   * @param {number} x\n   * @param {number} y\n   * @param {ISnapOptions} [options]\n   * @param {boolean} [options.topLeft] - snap to the top-left of viewport instead of center\n   * @param {number} [options.friction=0.8] - friction/frame to apply if decelerate is active\n   * @param {number} [options.time=1000] - time in ms to snap\n   * @param {string|function} [options.ease=easeInOutSine] - ease function or name (see http://easings.net/\n   *   for supported names)\n   * @param {boolean} [options.interrupt=true] - pause snapping with any user input on the viewport\n   * @param {boolean} [options.removeOnComplete] - removes this plugin after snapping is complete\n   * @param {boolean} [options.removeOnInterrupt] - removes this plugin if interrupted by any user input\n   * @param {boolean} [options.forceStart] - starts the snap immediately regardless of whether the viewport is at\n   *   the desired location\n   * @return {Viewport} this\n   */\n  snap(t, e, n) {\n    return this.plugins.add(\"snap\", new j(this, t, e, n)), this;\n  }\n  /**\n   * Follow a target\n   *\n   * NOTES:\n   *    uses the (x, y) as the center to follow; for PIXI.Sprite to work properly, use sprite.anchor.set(0.5)\n   *    options.acceleration is not perfect as it doesn't know the velocity of the target. It adds acceleration\n   *    to the start of movement and deceleration to the end of movement when the target is stopped.\n   *    To cancel the follow, use: `viewport.plugins.remove('follow')`\n   *\n   * @fires 'moved' event\n   *\n   * @param {PIXI.DisplayObject} target to follow\n   * @param {IFollowOptions} [options]\n   * @param {number} [options.speed=0] - to follow in pixels/frame (0=teleport to location)\n   * @param {number} [options.acceleration] - set acceleration to accelerate and decelerate at this rate; speed\n   *   cannot be 0 to use acceleration\n   * @param {number} [options.radius] - radius (in world coordinates) of center circle where movement is allowed\n   *   without moving the viewport     * @returns {Viewport} this\n   * @returns {Viewport} this\n   */\n  follow(t, e) {\n    return this.plugins.add(\"follow\", new U(this, t, e)), this;\n  }\n  /**\n   * Zoom using mouse wheel\n   *\n   * NOTE: the default event listener for 'wheel' event is the options.events.domElement.\n   *\n   * @param {IWheelOptions} [options]\n   * @param {number} [options.percent=0.1] - percent to scroll with each spin\n   * @param {number} [options.smooth] - smooth the zooming by providing the number of frames to zoom between wheel spins\n   * @param {boolean} [options.interrupt=true] - stop smoothing with any user input on the viewport\n   * @param {boolean} [options.reverse] - reverse the direction of the scroll\n   * @param {PIXI.Point} [options.center] - place this point at center during zoom instead of current mouse position\n   * @param {number} [options.lineHeight=20] - scaling factor for non-DOM_DELTA_PIXEL scrolling events\n   * @param {('all'|'x'|'y')} [options.axis=all] - axis to zoom\n   * @return {Viewport} this\n   */\n  wheel(t) {\n    return this.plugins.add(\"wheel\", new G(this, t)), this;\n  }\n  /**\n   * Animate the position and/or scale of the viewport\n   * To set the zoom level, use: (1) scale, (2) scaleX and scaleY, or (3) width and/or height\n   * @param {object} options\n   * @param {number} [options.time=1000] - time to animate\n   * @param {PIXI.Point} [options.position=viewport.center] - position to move viewport\n   * @param {number} [options.width] - desired viewport width in world pixels (use instead of scale;\n   *  aspect ratio is maintained if height is not provided)\n   * @param {number} [options.height] - desired viewport height in world pixels (use instead of scale;\n   *  aspect ratio is maintained if width is not provided)\n   * @param {number} [options.scale] - scale to change zoom (scale.x = scale.y)\n   * @param {number} [options.scaleX] - independently change zoom in x-direction\n   * @param {number} [options.scaleY] - independently change zoom in y-direction\n   * @param {(function|string)} [options.ease=linear] - easing function to use\n   * @param {function} [options.callbackOnComplete]\n   * @param {boolean} [options.removeOnInterrupt] removes this plugin if interrupted by any user input\n   * @returns {Viewport} this\n   */\n  animate(t) {\n    return this.plugins.add(\"animate\", new C(this, t)), this;\n  }\n  /**\n   * Enable clamping of zoom to constraints\n   *\n   * The minWidth/Height settings are how small the world can get (as it would appear on the screen)\n   * before clamping. The maxWidth/maxHeight is how larger the world can scale (as it would appear on\n   * the screen) before clamping.\n   *\n   * For example, if you have a world size of 1000 x 1000 and a screen size of 100 x 100, if you set\n   * minWidth/Height = 100 then the world will not be able to zoom smaller than the screen size (ie,\n   * zooming out so it appears smaller than the screen). Similarly, if you set maxWidth/Height = 100\n   * the world will not be able to zoom larger than the screen size (ie, zooming in so it appears\n   * larger than the screen).\n   *\n   * @param {object} [options]\n   * @param {number} [options.minWidth] - minimum width\n   * @param {number} [options.minHeight] - minimum height\n   * @param {number} [options.maxWidth] - maximum width\n   * @param {number} [options.maxHeight] - maximum height\n   * @param {number} [options.minScale] - minimum scale\n   * @param {number} [options.maxScale] - minimum scale\n   * @return {Viewport} this\n   */\n  clampZoom(t) {\n    return this.plugins.add(\"clamp-zoom\", new A(this, t)), this;\n  }\n  /**\n   * Scroll viewport when mouse hovers near one of the edges or radius-distance from center of screen.\n   *\n   * NOTES: fires 'moved' event; there's a known bug where the mouseEdges does not work properly with \"windowed\" viewports\n   *\n   * @param {IMouseEdgesOptions} [options]\n   * @param {number} [options.radius] - distance from center of screen in screen pixels\n   * @param {number} [options.distance] - distance from all sides in screen pixels\n   * @param {number} [options.top] - alternatively, set top distance (leave unset for no top scroll)\n   * @param {number} [options.bottom] - alternatively, set bottom distance (leave unset for no top scroll)\n   * @param {number} [options.left] - alternatively, set left distance (leave unset for no top scroll)\n   * @param {number} [options.right] - alternatively, set right distance (leave unset for no top scroll)\n   * @param {number} [options.speed=8] - speed in pixels/frame to scroll viewport\n   * @param {boolean} [options.reverse] - reverse direction of scroll\n   * @param {boolean} [options.noDecelerate] - don't use decelerate plugin even if it's installed\n   * @param {boolean} [options.linear] - if using radius, use linear movement (+/- 1, +/- 1) instead of angled\n   *   movement (Math.cos(angle from center), Math.sin(angle from center))\n   * @param {boolean} [options.allowButtons] allows plugin to continue working even when there's a mousedown event\n   */\n  mouseEdges(t) {\n    return this.plugins.add(\"mouse-edges\", new B(this, t)), this;\n  }\n  /** Pause viewport (including animation updates such as decelerate) */\n  get pause() {\n    return !!this._pause;\n  }\n  set pause(t) {\n    this._pause = t, this.lastViewport = null, this.moving = !1, this.zooming = !1, t && this.input.pause();\n  }\n  /**\n   * Move the viewport so the bounding box is visible\n   *\n   * @param x - left\n   * @param y - top\n   * @param width\n   * @param height\n   * @param resizeToFit - Resize the viewport so the box fits within the viewport\n   */\n  ensureVisible(t, e, n, i, s) {\n    s && (n > this.worldScreenWidth || i > this.worldScreenHeight) && (this.fit(!0, n, i), this.emit(\"zoomed\", { viewport: this, type: \"ensureVisible\" }));\n    let h = !1;\n    t < this.left ? (this.left = t, h = !0) : t + n > this.right && (this.right = t + n, h = !0), e < this.top ? (this.top = e, h = !0) : e + i > this.bottom && (this.bottom = e + i, h = !0), h && this.emit(\"moved\", { viewport: this, type: \"ensureVisible\" });\n  }\n}\nexport {\n  C as Animate,\n  k as Bounce,\n  X as Clamp,\n  A as ClampZoom,\n  T as Decelerate,\n  D as Drag,\n  U as Follow,\n  Q as InputManager,\n  B as MouseEdges,\n  N as Pinch,\n  u as Plugin,\n  J as PluginManager,\n  j as Snap,\n  K as SnapZoom,\n  et as Viewport,\n  G as Wheel\n};\n","import { warn } from '../../utils/logging/warn.mjs';\nimport { convertToList } from '../utils/convertToList.mjs';\n\n\"use strict\";\nclass CacheClass {\n  constructor() {\n    this._parsers = [];\n    this._cache = /* @__PURE__ */ new Map();\n    this._cacheMap = /* @__PURE__ */ new Map();\n  }\n  /** Clear all entries. */\n  reset() {\n    this._cacheMap.clear();\n    this._cache.clear();\n  }\n  /**\n   * Check if the key exists\n   * @param key - The key to check\n   */\n  has(key) {\n    return this._cache.has(key);\n  }\n  /**\n   * Fetch entry by key\n   * @param key - The key of the entry to get\n   */\n  get(key) {\n    const result = this._cache.get(key);\n    if (!result) {\n      warn(`[Assets] Asset id ${key} was not found in the Cache`);\n    }\n    return result;\n  }\n  /**\n   * Set a value by key or keys name\n   * @param key - The key or keys to set\n   * @param value - The value to store in the cache or from which cacheable assets will be derived.\n   */\n  set(key, value) {\n    const keys = convertToList(key);\n    let cacheableAssets;\n    for (let i = 0; i < this.parsers.length; i++) {\n      const parser = this.parsers[i];\n      if (parser.test(value)) {\n        cacheableAssets = parser.getCacheableAssets(keys, value);\n        break;\n      }\n    }\n    const cacheableMap = new Map(Object.entries(cacheableAssets || {}));\n    if (!cacheableAssets) {\n      keys.forEach((key2) => {\n        cacheableMap.set(key2, value);\n      });\n    }\n    const cacheKeys = [...cacheableMap.keys()];\n    const cachedAssets = {\n      cacheKeys,\n      keys\n    };\n    keys.forEach((key2) => {\n      this._cacheMap.set(key2, cachedAssets);\n    });\n    cacheKeys.forEach((key2) => {\n      const val = cacheableAssets ? cacheableAssets[key2] : value;\n      if (this._cache.has(key2) && this._cache.get(key2) !== val) {\n        warn(\"[Cache] already has key:\", key2);\n      }\n      this._cache.set(key2, cacheableMap.get(key2));\n    });\n  }\n  /**\n   * Remove entry by key\n   *\n   * This function will also remove any associated alias from the cache also.\n   * @param key - The key of the entry to remove\n   */\n  remove(key) {\n    if (!this._cacheMap.has(key)) {\n      warn(`[Assets] Asset id ${key} was not found in the Cache`);\n      return;\n    }\n    const cacheMap = this._cacheMap.get(key);\n    const cacheKeys = cacheMap.cacheKeys;\n    cacheKeys.forEach((key2) => {\n      this._cache.delete(key2);\n    });\n    cacheMap.keys.forEach((key2) => {\n      this._cacheMap.delete(key2);\n    });\n  }\n  /** All loader parsers registered */\n  get parsers() {\n    return this._parsers;\n  }\n}\nconst Cache = new CacheClass();\n\nexport { Cache };\n//# sourceMappingURL=Cache.mjs.map\n","\"use strict\";\nvar LoaderParserPriority = /* @__PURE__ */ ((LoaderParserPriority2) => {\n  LoaderParserPriority2[LoaderParserPriority2[\"Low\"] = 0] = \"Low\";\n  LoaderParserPriority2[LoaderParserPriority2[\"Normal\"] = 1] = \"Normal\";\n  LoaderParserPriority2[LoaderParserPriority2[\"High\"] = 2] = \"High\";\n  return LoaderParserPriority2;\n})(LoaderParserPriority || {});\n\nexport { LoaderParserPriority };\n//# sourceMappingURL=LoaderParser.mjs.map\n","\"use strict\";\nfunction processX(base, ids, depth, result, tags) {\n  const id = ids[depth];\n  for (let i = 0; i < id.length; i++) {\n    const value = id[i];\n    if (depth < ids.length - 1) {\n      processX(base.replace(result[depth], value), ids, depth + 1, result, tags);\n    } else {\n      tags.push(base.replace(result[depth], value));\n    }\n  }\n}\nfunction createStringVariations(string) {\n  const regex = /\\{(.*?)\\}/g;\n  const result = string.match(regex);\n  const tags = [];\n  if (result) {\n    const ids = [];\n    result.forEach((vars) => {\n      const split = vars.substring(1, vars.length - 1).split(\",\");\n      ids.push(split);\n    });\n    processX(string, ids, 0, result, tags);\n  } else {\n    tags.push(string);\n  }\n  return tags;\n}\n\nexport { createStringVariations };\n//# sourceMappingURL=createStringVariations.mjs.map\n","import { warn } from '../../utils/logging/warn.mjs';\nimport { path } from '../../utils/path.mjs';\nimport { convertToList } from '../utils/convertToList.mjs';\nimport { createStringVariations } from '../utils/createStringVariations.mjs';\nimport { isSingleItem } from '../utils/isSingleItem.mjs';\n\n\"use strict\";\nclass Resolver {\n  constructor() {\n    this._defaultBundleIdentifierOptions = {\n      connector: \"-\",\n      createBundleAssetId: (bundleId, assetId) => `${bundleId}${this._bundleIdConnector}${assetId}`,\n      extractAssetIdFromBundle: (bundleId, assetBundleId) => assetBundleId.replace(`${bundleId}${this._bundleIdConnector}`, \"\")\n    };\n    /** The character that is used to connect the bundleId and the assetId when generating a bundle asset id key */\n    this._bundleIdConnector = this._defaultBundleIdentifierOptions.connector;\n    /**\n     * A function that generates a bundle asset id key from a bundleId and an assetId\n     * @param bundleId - the bundleId\n     * @param assetId  - the assetId\n     * @returns the bundle asset id key\n     */\n    this._createBundleAssetId = this._defaultBundleIdentifierOptions.createBundleAssetId;\n    /**\n     * A function that generates an assetId from a bundle asset id key. This is the reverse of generateBundleAssetId\n     * @param bundleId - the bundleId\n     * @param assetBundleId - the bundle asset id key\n     * @returns the assetId\n     */\n    this._extractAssetIdFromBundle = this._defaultBundleIdentifierOptions.extractAssetIdFromBundle;\n    this._assetMap = {};\n    this._preferredOrder = [];\n    this._parsers = [];\n    this._resolverHash = {};\n    this._bundles = {};\n  }\n  /**\n   * Override how the resolver deals with generating bundle ids.\n   * must be called before any bundles are added\n   * @param bundleIdentifier - the bundle identifier options\n   */\n  setBundleIdentifier(bundleIdentifier) {\n    this._bundleIdConnector = bundleIdentifier.connector ?? this._bundleIdConnector;\n    this._createBundleAssetId = bundleIdentifier.createBundleAssetId ?? this._createBundleAssetId;\n    this._extractAssetIdFromBundle = bundleIdentifier.extractAssetIdFromBundle ?? this._extractAssetIdFromBundle;\n    if (this._extractAssetIdFromBundle(\"foo\", this._createBundleAssetId(\"foo\", \"bar\")) !== \"bar\") {\n      throw new Error(\"[Resolver] GenerateBundleAssetId are not working correctly\");\n    }\n  }\n  /**\n   * Let the resolver know which assets you prefer to use when resolving assets.\n   * Multiple prefer user defined rules can be added.\n   * @example\n   * resolver.prefer({\n   *     // first look for something with the correct format, and then then correct resolution\n   *     priority: ['format', 'resolution'],\n   *     params:{\n   *         format:'webp', // prefer webp images\n   *         resolution: 2, // prefer a resolution of 2\n   *     }\n   * })\n   * resolver.add('foo', ['bar@2x.webp', 'bar@2x.png', 'bar.webp', 'bar.png']);\n   * resolver.resolveUrl('foo') // => 'bar@2x.webp'\n   * @param preferOrders - the prefer options\n   */\n  prefer(...preferOrders) {\n    preferOrders.forEach((prefer) => {\n      this._preferredOrder.push(prefer);\n      if (!prefer.priority) {\n        prefer.priority = Object.keys(prefer.params);\n      }\n    });\n    this._resolverHash = {};\n  }\n  /**\n   * Set the base path to prepend to all urls when resolving\n   * @example\n   * resolver.basePath = 'https://home.com/';\n   * resolver.add('foo', 'bar.ong');\n   * resolver.resolveUrl('foo', 'bar.png'); // => 'https://home.com/bar.png'\n   * @param basePath - the base path to use\n   */\n  set basePath(basePath) {\n    this._basePath = basePath;\n  }\n  get basePath() {\n    return this._basePath;\n  }\n  /**\n   * Set the root path for root-relative URLs. By default the `basePath`'s root is used. If no `basePath` is set, then the\n   * default value for browsers is `window.location.origin`\n   * @example\n   * // Application hosted on https://home.com/some-path/index.html\n   * resolver.basePath = 'https://home.com/some-path/';\n   * resolver.rootPath = 'https://home.com/';\n   * resolver.add('foo', '/bar.png');\n   * resolver.resolveUrl('foo', '/bar.png'); // => 'https://home.com/bar.png'\n   * @param rootPath - the root path to use\n   */\n  set rootPath(rootPath) {\n    this._rootPath = rootPath;\n  }\n  get rootPath() {\n    return this._rootPath;\n  }\n  /**\n   * All the active URL parsers that help the parser to extract information and create\n   * an asset object-based on parsing the URL itself.\n   *\n   * Can be added using the extensions API\n   * @example\n   * resolver.add('foo', [\n   *     {\n   *         resolution: 2,\n   *         format: 'png',\n   *         src: 'image@2x.png',\n   *     },\n   *     {\n   *         resolution:1,\n   *         format:'png',\n   *         src: 'image.png',\n   *     },\n   * ]);\n   *\n   * // With a url parser the information such as resolution and file format could extracted from the url itself:\n   * extensions.add({\n   *     extension: ExtensionType.ResolveParser,\n   *     test: loadTextures.test, // test if url ends in an image\n   *     parse: (value: string) =>\n   *     ({\n   *         resolution: parseFloat(Resolver.RETINA_PREFIX.exec(value)?.[1] ?? '1'),\n   *         format: value.split('.').pop(),\n   *         src: value,\n   *     }),\n   * });\n   *\n   * // Now resolution and format can be extracted from the url\n   * resolver.add('foo', [\n   *     'image@2x.png',\n   *     'image.png',\n   * ]);\n   */\n  get parsers() {\n    return this._parsers;\n  }\n  /** Used for testing, this resets the resolver to its initial state */\n  reset() {\n    this.setBundleIdentifier(this._defaultBundleIdentifierOptions);\n    this._assetMap = {};\n    this._preferredOrder = [];\n    this._resolverHash = {};\n    this._rootPath = null;\n    this._basePath = null;\n    this._manifest = null;\n    this._bundles = {};\n    this._defaultSearchParams = null;\n  }\n  /**\n   * Sets the default URL search parameters for the URL resolver. The urls can be specified as a string or an object.\n   * @param searchParams - the default url parameters to append when resolving urls\n   */\n  setDefaultSearchParams(searchParams) {\n    if (typeof searchParams === \"string\") {\n      this._defaultSearchParams = searchParams;\n    } else {\n      const queryValues = searchParams;\n      this._defaultSearchParams = Object.keys(queryValues).map((key) => `${encodeURIComponent(key)}=${encodeURIComponent(queryValues[key])}`).join(\"&\");\n    }\n  }\n  /**\n   * Returns the aliases for a given asset\n   * @param asset - the asset to get the aliases for\n   */\n  getAlias(asset) {\n    const { alias, src } = asset;\n    const aliasesToUse = convertToList(\n      alias || src,\n      (value) => {\n        if (typeof value === \"string\")\n          return value;\n        if (Array.isArray(value))\n          return value.map((v) => v?.src ?? v);\n        if (value?.src)\n          return value.src;\n        return value;\n      },\n      true\n    );\n    return aliasesToUse;\n  }\n  /**\n   * Add a manifest to the asset resolver. This is a nice way to add all the asset information in one go.\n   * generally a manifest would be built using a tool.\n   * @param manifest - the manifest to add to the resolver\n   */\n  addManifest(manifest) {\n    if (this._manifest) {\n      warn(\"[Resolver] Manifest already exists, this will be overwritten\");\n    }\n    this._manifest = manifest;\n    manifest.bundles.forEach((bundle) => {\n      this.addBundle(bundle.name, bundle.assets);\n    });\n  }\n  /**\n   * This adds a bundle of assets in one go so that you can resolve them as a group.\n   * For example you could add a bundle for each screen in you pixi app\n   * @example\n   * resolver.addBundle('animals', [\n   *  { alias: 'bunny', src: 'bunny.png' },\n   *  { alias: 'chicken', src: 'chicken.png' },\n   *  { alias: 'thumper', src: 'thumper.png' },\n   * ]);\n   * // or\n   * resolver.addBundle('animals', {\n   *     bunny: 'bunny.png',\n   *     chicken: 'chicken.png',\n   *     thumper: 'thumper.png',\n   * });\n   *\n   * const resolvedAssets = await resolver.resolveBundle('animals');\n   * @param bundleId - The id of the bundle to add\n   * @param assets - A record of the asset or assets that will be chosen from when loading via the specified key\n   */\n  addBundle(bundleId, assets) {\n    const assetNames = [];\n    let convertedAssets = assets;\n    if (!Array.isArray(assets)) {\n      convertedAssets = Object.entries(assets).map(([alias, src]) => {\n        if (typeof src === \"string\" || Array.isArray(src)) {\n          return { alias, src };\n        }\n        return { alias, ...src };\n      });\n    }\n    convertedAssets.forEach((asset) => {\n      const srcs = asset.src;\n      const aliases = asset.alias;\n      let ids;\n      if (typeof aliases === \"string\") {\n        const bundleAssetId = this._createBundleAssetId(bundleId, aliases);\n        assetNames.push(bundleAssetId);\n        ids = [aliases, bundleAssetId];\n      } else {\n        const bundleIds = aliases.map((name) => this._createBundleAssetId(bundleId, name));\n        assetNames.push(...bundleIds);\n        ids = [...aliases, ...bundleIds];\n      }\n      this.add({\n        ...asset,\n        ...{\n          alias: ids,\n          src: srcs\n        }\n      });\n    });\n    this._bundles[bundleId] = assetNames;\n  }\n  /**\n   * Tells the resolver what keys are associated with witch asset.\n   * The most important thing the resolver does\n   * @example\n   * // Single key, single asset:\n   * resolver.add({alias: 'foo', src: 'bar.png');\n   * resolver.resolveUrl('foo') // => 'bar.png'\n   *\n   * // Multiple keys, single asset:\n   * resolver.add({alias: ['foo', 'boo'], src: 'bar.png'});\n   * resolver.resolveUrl('foo') // => 'bar.png'\n   * resolver.resolveUrl('boo') // => 'bar.png'\n   *\n   * // Multiple keys, multiple assets:\n   * resolver.add({alias: ['foo', 'boo'], src: ['bar.png', 'bar.webp']});\n   * resolver.resolveUrl('foo') // => 'bar.png'\n   *\n   * // Add custom data attached to the resolver\n   * Resolver.add({\n   *     alias: 'bunnyBooBooSmooth',\n   *     src: 'bunny{png,webp}',\n   *     data: { scaleMode:SCALE_MODES.NEAREST }, // Base texture options\n   * });\n   *\n   * resolver.resolve('bunnyBooBooSmooth') // => { src: 'bunny.png', data: { scaleMode: SCALE_MODES.NEAREST } }\n   * @param aliases - the UnresolvedAsset or array of UnresolvedAssets to add to the resolver\n   */\n  add(aliases) {\n    const assets = [];\n    if (Array.isArray(aliases)) {\n      assets.push(...aliases);\n    } else {\n      assets.push(aliases);\n    }\n    let keyCheck;\n    keyCheck = (key) => {\n      if (this.hasKey(key)) {\n        warn(`[Resolver] already has key: ${key} overwriting`);\n      }\n    };\n    const assetArray = convertToList(assets);\n    assetArray.forEach((asset) => {\n      const { src } = asset;\n      let { data, format, loadParser } = asset;\n      const srcsToUse = convertToList(src).map((src2) => {\n        if (typeof src2 === \"string\") {\n          return createStringVariations(src2);\n        }\n        return Array.isArray(src2) ? src2 : [src2];\n      });\n      const aliasesToUse = this.getAlias(asset);\n      Array.isArray(aliasesToUse) ? aliasesToUse.forEach(keyCheck) : keyCheck(aliasesToUse);\n      const resolvedAssets = [];\n      srcsToUse.forEach((srcs) => {\n        srcs.forEach((src2) => {\n          let formattedAsset = {};\n          if (typeof src2 !== \"object\") {\n            formattedAsset.src = src2;\n            for (let i = 0; i < this._parsers.length; i++) {\n              const parser = this._parsers[i];\n              if (parser.test(src2)) {\n                formattedAsset = parser.parse(src2);\n                break;\n              }\n            }\n          } else {\n            data = src2.data ?? data;\n            format = src2.format ?? format;\n            loadParser = src2.loadParser ?? loadParser;\n            formattedAsset = {\n              ...formattedAsset,\n              ...src2\n            };\n          }\n          if (!aliasesToUse) {\n            throw new Error(`[Resolver] alias is undefined for this asset: ${formattedAsset.src}`);\n          }\n          formattedAsset = this._buildResolvedAsset(formattedAsset, {\n            aliases: aliasesToUse,\n            data,\n            format,\n            loadParser\n          });\n          resolvedAssets.push(formattedAsset);\n        });\n      });\n      aliasesToUse.forEach((alias) => {\n        this._assetMap[alias] = resolvedAssets;\n      });\n    });\n  }\n  // TODO: this needs an overload like load did in Assets\n  /**\n   * If the resolver has had a manifest set via setManifest, this will return the assets urls for\n   * a given bundleId or bundleIds.\n   * @example\n   * // Manifest Example\n   * const manifest = {\n   *     bundles: [\n   *         {\n   *             name: 'load-screen',\n   *             assets: [\n   *                 {\n   *                     alias: 'background',\n   *                     src: 'sunset.png',\n   *                 },\n   *                 {\n   *                     alias: 'bar',\n   *                     src: 'load-bar.{png,webp}',\n   *                 },\n   *             ],\n   *         },\n   *         {\n   *             name: 'game-screen',\n   *             assets: [\n   *                 {\n   *                     alias: 'character',\n   *                     src: 'robot.png',\n   *                 },\n   *                 {\n   *                     alias: 'enemy',\n   *                     src: 'bad-guy.png',\n   *                 },\n   *             ],\n   *         },\n   *     ]\n   * };\n   *\n   * resolver.setManifest(manifest);\n   * const resolved = resolver.resolveBundle('load-screen');\n   * @param bundleIds - The bundle ids to resolve\n   * @returns All the bundles assets or a hash of assets for each bundle specified\n   */\n  resolveBundle(bundleIds) {\n    const singleAsset = isSingleItem(bundleIds);\n    bundleIds = convertToList(bundleIds);\n    const out = {};\n    bundleIds.forEach((bundleId) => {\n      const assetNames = this._bundles[bundleId];\n      if (assetNames) {\n        const results = this.resolve(assetNames);\n        const assets = {};\n        for (const key in results) {\n          const asset = results[key];\n          assets[this._extractAssetIdFromBundle(bundleId, key)] = asset;\n        }\n        out[bundleId] = assets;\n      }\n    });\n    return singleAsset ? out[bundleIds[0]] : out;\n  }\n  /**\n   * Does exactly what resolve does, but returns just the URL rather than the whole asset object\n   * @param key - The key or keys to resolve\n   * @returns - The URLs associated with the key(s)\n   */\n  resolveUrl(key) {\n    const result = this.resolve(key);\n    if (typeof key !== \"string\") {\n      const out = {};\n      for (const i in result) {\n        out[i] = result[i].src;\n      }\n      return out;\n    }\n    return result.src;\n  }\n  resolve(keys) {\n    const singleAsset = isSingleItem(keys);\n    keys = convertToList(keys);\n    const result = {};\n    keys.forEach((key) => {\n      if (!this._resolverHash[key]) {\n        if (this._assetMap[key]) {\n          let assets = this._assetMap[key];\n          const preferredOrder = this._getPreferredOrder(assets);\n          preferredOrder?.priority.forEach((priorityKey) => {\n            preferredOrder.params[priorityKey].forEach((value) => {\n              const filteredAssets = assets.filter((asset) => {\n                if (asset[priorityKey]) {\n                  return asset[priorityKey] === value;\n                }\n                return false;\n              });\n              if (filteredAssets.length) {\n                assets = filteredAssets;\n              }\n            });\n          });\n          this._resolverHash[key] = assets[0];\n        } else {\n          this._resolverHash[key] = this._buildResolvedAsset({\n            alias: [key],\n            src: key\n          }, {});\n        }\n      }\n      result[key] = this._resolverHash[key];\n    });\n    return singleAsset ? result[keys[0]] : result;\n  }\n  /**\n   * Checks if an asset with a given key exists in the resolver\n   * @param key - The key of the asset\n   */\n  hasKey(key) {\n    return !!this._assetMap[key];\n  }\n  /**\n   * Checks if a bundle with the given key exists in the resolver\n   * @param key - The key of the bundle\n   */\n  hasBundle(key) {\n    return !!this._bundles[key];\n  }\n  /**\n   * Internal function for figuring out what prefer criteria an asset should use.\n   * @param assets\n   */\n  _getPreferredOrder(assets) {\n    for (let i = 0; i < assets.length; i++) {\n      const asset = assets[0];\n      const preferred = this._preferredOrder.find((preference) => preference.params.format.includes(asset.format));\n      if (preferred) {\n        return preferred;\n      }\n    }\n    return this._preferredOrder[0];\n  }\n  /**\n   * Appends the default url parameters to the url\n   * @param url - The url to append the default parameters to\n   * @returns - The url with the default parameters appended\n   */\n  _appendDefaultSearchParams(url) {\n    if (!this._defaultSearchParams)\n      return url;\n    const paramConnector = /\\?/.test(url) ? \"&\" : \"?\";\n    return `${url}${paramConnector}${this._defaultSearchParams}`;\n  }\n  _buildResolvedAsset(formattedAsset, data) {\n    const { aliases, data: assetData, loadParser, format } = data;\n    if (this._basePath || this._rootPath) {\n      formattedAsset.src = path.toAbsolute(formattedAsset.src, this._basePath, this._rootPath);\n    }\n    formattedAsset.alias = aliases ?? formattedAsset.alias ?? [formattedAsset.src];\n    formattedAsset.src = this._appendDefaultSearchParams(formattedAsset.src);\n    formattedAsset.data = { ...assetData || {}, ...formattedAsset.data };\n    formattedAsset.loadParser = loadParser ?? formattedAsset.loadParser;\n    formattedAsset.format = format ?? formattedAsset.format ?? getUrlExtension(formattedAsset.src);\n    return formattedAsset;\n  }\n}\n/**\n * The prefix that denotes a URL is for a retina asset.\n * @static\n * @name RETINA_PREFIX\n * @type {RegExp}\n * @default /@([0-9\\.]+)x/\n * @example `@2x`\n */\nResolver.RETINA_PREFIX = /@([0-9\\.]+)x/;\nfunction getUrlExtension(url) {\n  return url.split(\".\").pop().split(\"?\").shift().split(\"#\").shift();\n}\n\nexport { Resolver, getUrlExtension };\n//# sourceMappingURL=Resolver.mjs.map\n","\"use strict\";\nconst convertToList = (input, transform, forceTransform = false) => {\n  if (!Array.isArray(input)) {\n    input = [input];\n  }\n  if (!transform) {\n    return input;\n  }\n  return input.map((item) => {\n    if (typeof item === \"string\" || forceTransform) {\n      return transform(item);\n    }\n    return item;\n  });\n};\n\nexport { convertToList };\n//# sourceMappingURL=convertToList.mjs.map\n","\"use strict\";\nconst copySearchParams = (targetUrl, sourceUrl) => {\n  const searchParams = sourceUrl.split(\"?\")[1];\n  if (searchParams) {\n    targetUrl += `?${searchParams}`;\n  }\n  return targetUrl;\n};\n\nexport { copySearchParams };\n//# sourceMappingURL=copySearchParams.mjs.map\n","\"use strict\";\nconst isSingleItem = (item) => !Array.isArray(item);\n\nexport { isSingleItem };\n//# sourceMappingURL=isSingleItem.mjs.map\n","var r={grad:.9,turn:360,rad:360/(2*Math.PI)},t=function(r){return\"string\"==typeof r?r.length>0:\"number\"==typeof r},n=function(r,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*r)/n+0},e=function(r,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),r>n?n:r>t?r:t},u=function(r){return(r=isFinite(r)?r%360:0)>0?r:r+360},a=function(r){return{r:e(r.r,0,255),g:e(r.g,0,255),b:e(r.b,0,255),a:e(r.a)}},o=function(r){return{r:n(r.r),g:n(r.g),b:n(r.b),a:n(r.a,3)}},i=/^#([0-9a-f]{3,8})$/i,s=function(r){var t=r.toString(16);return t.length<2?\"0\"+t:t},h=function(r){var t=r.r,n=r.g,e=r.b,u=r.a,a=Math.max(t,n,e),o=a-Math.min(t,n,e),i=o?a===t?(n-e)/o:a===n?2+(e-t)/o:4+(t-n)/o:0;return{h:60*(i<0?i+6:i),s:a?o/a*100:0,v:a/255*100,a:u}},b=function(r){var t=r.h,n=r.s,e=r.v,u=r.a;t=t/360*6,n/=100,e/=100;var a=Math.floor(t),o=e*(1-n),i=e*(1-(t-a)*n),s=e*(1-(1-t+a)*n),h=a%6;return{r:255*[e,i,o,o,s,e][h],g:255*[s,e,e,i,o,o][h],b:255*[o,o,s,e,e,i][h],a:u}},g=function(r){return{h:u(r.h),s:e(r.s,0,100),l:e(r.l,0,100),a:e(r.a)}},d=function(r){return{h:n(r.h),s:n(r.s),l:n(r.l),a:n(r.a,3)}},f=function(r){return b((n=(t=r).s,{h:t.h,s:(n*=((e=t.l)<50?e:100-e)/100)>0?2*n/(e+n)*100:0,v:e+n,a:t.a}));var t,n,e},c=function(r){return{h:(t=h(r)).h,s:(u=(200-(n=t.s))*(e=t.v)/100)>0&&u<200?n*e/100/(u<=100?u:200-u)*100:0,l:u/2,a:t.a};var t,n,e,u},l=/^hsla?\\(\\s*([+-]?\\d*\\.?\\d+)(deg|rad|grad|turn)?\\s*,\\s*([+-]?\\d*\\.?\\d+)%\\s*,\\s*([+-]?\\d*\\.?\\d+)%\\s*(?:,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,p=/^hsla?\\(\\s*([+-]?\\d*\\.?\\d+)(deg|rad|grad|turn)?\\s+([+-]?\\d*\\.?\\d+)%\\s+([+-]?\\d*\\.?\\d+)%\\s*(?:\\/\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,v=/^rgba?\\(\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*(?:,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,m=/^rgba?\\(\\s*([+-]?\\d*\\.?\\d+)(%)?\\s+([+-]?\\d*\\.?\\d+)(%)?\\s+([+-]?\\d*\\.?\\d+)(%)?\\s*(?:\\/\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,y={string:[[function(r){var t=i.exec(r);return t?(r=t[1]).length<=4?{r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16),a:4===r.length?n(parseInt(r[3]+r[3],16)/255,2):1}:6===r.length||8===r.length?{r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16),a:8===r.length?n(parseInt(r.substr(6,2),16)/255,2):1}:null:null},\"hex\"],[function(r){var t=v.exec(r)||m.exec(r);return t?t[2]!==t[4]||t[4]!==t[6]?null:a({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},\"rgb\"],[function(t){var n=l.exec(t)||p.exec(t);if(!n)return null;var e,u,a=g({h:(e=n[1],u=n[2],void 0===u&&(u=\"deg\"),Number(e)*(r[u]||1)),s:Number(n[3]),l:Number(n[4]),a:void 0===n[5]?1:Number(n[5])/(n[6]?100:1)});return f(a)},\"hsl\"]],object:[[function(r){var n=r.r,e=r.g,u=r.b,o=r.a,i=void 0===o?1:o;return t(n)&&t(e)&&t(u)?a({r:Number(n),g:Number(e),b:Number(u),a:Number(i)}):null},\"rgb\"],[function(r){var n=r.h,e=r.s,u=r.l,a=r.a,o=void 0===a?1:a;if(!t(n)||!t(e)||!t(u))return null;var i=g({h:Number(n),s:Number(e),l:Number(u),a:Number(o)});return f(i)},\"hsl\"],[function(r){var n=r.h,a=r.s,o=r.v,i=r.a,s=void 0===i?1:i;if(!t(n)||!t(a)||!t(o))return null;var h=function(r){return{h:u(r.h),s:e(r.s,0,100),v:e(r.v,0,100),a:e(r.a)}}({h:Number(n),s:Number(a),v:Number(o),a:Number(s)});return b(h)},\"hsv\"]]},N=function(r,t){for(var n=0;n<t.length;n++){var e=t[n][0](r);if(e)return[e,t[n][1]]}return[null,void 0]},x=function(r){return\"string\"==typeof r?N(r.trim(),y.string):\"object\"==typeof r&&null!==r?N(r,y.object):[null,void 0]},I=function(r){return x(r)[1]},M=function(r,t){var n=c(r);return{h:n.h,s:e(n.s+100*t,0,100),l:n.l,a:n.a}},H=function(r){return(299*r.r+587*r.g+114*r.b)/1e3/255},$=function(r,t){var n=c(r);return{h:n.h,s:n.s,l:e(n.l+100*t,0,100),a:n.a}},j=function(){function r(r){this.parsed=x(r)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return r.prototype.isValid=function(){return null!==this.parsed},r.prototype.brightness=function(){return n(H(this.rgba),2)},r.prototype.isDark=function(){return H(this.rgba)<.5},r.prototype.isLight=function(){return H(this.rgba)>=.5},r.prototype.toHex=function(){return r=o(this.rgba),t=r.r,e=r.g,u=r.b,i=(a=r.a)<1?s(n(255*a)):\"\",\"#\"+s(t)+s(e)+s(u)+i;var r,t,e,u,a,i},r.prototype.toRgb=function(){return o(this.rgba)},r.prototype.toRgbString=function(){return r=o(this.rgba),t=r.r,n=r.g,e=r.b,(u=r.a)<1?\"rgba(\"+t+\", \"+n+\", \"+e+\", \"+u+\")\":\"rgb(\"+t+\", \"+n+\", \"+e+\")\";var r,t,n,e,u},r.prototype.toHsl=function(){return d(c(this.rgba))},r.prototype.toHslString=function(){return r=d(c(this.rgba)),t=r.h,n=r.s,e=r.l,(u=r.a)<1?\"hsla(\"+t+\", \"+n+\"%, \"+e+\"%, \"+u+\")\":\"hsl(\"+t+\", \"+n+\"%, \"+e+\"%)\";var r,t,n,e,u},r.prototype.toHsv=function(){return r=h(this.rgba),{h:n(r.h),s:n(r.s),v:n(r.v),a:n(r.a,3)};var r},r.prototype.invert=function(){return w({r:255-(r=this.rgba).r,g:255-r.g,b:255-r.b,a:r.a});var r},r.prototype.saturate=function(r){return void 0===r&&(r=.1),w(M(this.rgba,r))},r.prototype.desaturate=function(r){return void 0===r&&(r=.1),w(M(this.rgba,-r))},r.prototype.grayscale=function(){return w(M(this.rgba,-1))},r.prototype.lighten=function(r){return void 0===r&&(r=.1),w($(this.rgba,r))},r.prototype.darken=function(r){return void 0===r&&(r=.1),w($(this.rgba,-r))},r.prototype.rotate=function(r){return void 0===r&&(r=15),this.hue(this.hue()+r)},r.prototype.alpha=function(r){return\"number\"==typeof r?w({r:(t=this.rgba).r,g:t.g,b:t.b,a:r}):n(this.rgba.a,3);var t},r.prototype.hue=function(r){var t=c(this.rgba);return\"number\"==typeof r?w({h:r,s:t.s,l:t.l,a:t.a}):n(t.h)},r.prototype.isEqual=function(r){return this.toHex()===w(r).toHex()},r}(),w=function(r){return r instanceof j?r:new j(r)},S=[],k=function(r){r.forEach(function(r){S.indexOf(r)<0&&(r(j,y),S.push(r))})},E=function(){return new j({r:255*Math.random(),g:255*Math.random(),b:255*Math.random()})};export{j as Colord,w as colord,k as extend,I as getFormat,E as random};\n","import { extend, colord } from '@pixi/colord';\nimport namesPlugin from '@pixi/colord/plugins/names';\n\n\"use strict\";\nextend([namesPlugin]);\nconst _Color = class _Color {\n  /**\n   * @param {ColorSource} value - Optional value to use, if not provided, white is used.\n   */\n  constructor(value = 16777215) {\n    this._value = null;\n    this._components = new Float32Array(4);\n    this._components.fill(1);\n    this._int = 16777215;\n    this.value = value;\n  }\n  /** Get red component (0 - 1) */\n  get red() {\n    return this._components[0];\n  }\n  /** Get green component (0 - 1) */\n  get green() {\n    return this._components[1];\n  }\n  /** Get blue component (0 - 1) */\n  get blue() {\n    return this._components[2];\n  }\n  /** Get alpha component (0 - 1) */\n  get alpha() {\n    return this._components[3];\n  }\n  /**\n   * Set the value, suitable for chaining\n   * @param value\n   * @see Color.value\n   */\n  setValue(value) {\n    this.value = value;\n    return this;\n  }\n  /**\n   * The current color source.\n   *\n   * When setting:\n   * - Setting to an instance of `Color` will copy its color source and components.\n   * - Otherwise, `Color` will try to normalize the color source and set the components.\n   *   If the color source is invalid, an `Error` will be thrown and the `Color` will left unchanged.\n   *\n   * Note: The `null` in the setter's parameter type is added to match the TypeScript rule: return type of getter\n   * must be assignable to its setter's parameter type. Setting `value` to `null` will throw an `Error`.\n   *\n   * When getting:\n   * - A return value of `null` means the previous value was overridden (e.g., {@link Color.multiply multiply},\n   *   {@link Color.premultiply premultiply} or {@link Color.round round}).\n   * - Otherwise, the color source used when setting is returned.\n   */\n  set value(value) {\n    if (value instanceof _Color) {\n      this._value = this._cloneSource(value._value);\n      this._int = value._int;\n      this._components.set(value._components);\n    } else if (value === null) {\n      throw new Error(\"Cannot set Color#value to null\");\n    } else if (this._value === null || !this._isSourceEqual(this._value, value)) {\n      this._normalize(value);\n      this._value = this._cloneSource(value);\n    }\n  }\n  get value() {\n    return this._value;\n  }\n  /**\n   * Copy a color source internally.\n   * @param value - Color source\n   */\n  _cloneSource(value) {\n    if (typeof value === \"string\" || typeof value === \"number\" || value instanceof Number || value === null) {\n      return value;\n    } else if (Array.isArray(value) || ArrayBuffer.isView(value)) {\n      return value.slice(0);\n    } else if (typeof value === \"object\" && value !== null) {\n      return { ...value };\n    }\n    return value;\n  }\n  /**\n   * Equality check for color sources.\n   * @param value1 - First color source\n   * @param value2 - Second color source\n   * @returns `true` if the color sources are equal, `false` otherwise.\n   */\n  _isSourceEqual(value1, value2) {\n    const type1 = typeof value1;\n    const type2 = typeof value2;\n    if (type1 !== type2) {\n      return false;\n    } else if (type1 === \"number\" || type1 === \"string\" || value1 instanceof Number) {\n      return value1 === value2;\n    } else if (Array.isArray(value1) && Array.isArray(value2) || ArrayBuffer.isView(value1) && ArrayBuffer.isView(value2)) {\n      if (value1.length !== value2.length) {\n        return false;\n      }\n      return value1.every((v, i) => v === value2[i]);\n    } else if (value1 !== null && value2 !== null) {\n      const keys1 = Object.keys(value1);\n      const keys2 = Object.keys(value2);\n      if (keys1.length !== keys2.length) {\n        return false;\n      }\n      return keys1.every((key) => value1[key] === value2[key]);\n    }\n    return value1 === value2;\n  }\n  /**\n   * Convert to a RGBA color object.\n   * @example\n   * import { Color } from 'pixi.js';\n   * new Color('white').toRgb(); // returns { r: 1, g: 1, b: 1, a: 1 }\n   */\n  toRgba() {\n    const [r, g, b, a] = this._components;\n    return { r, g, b, a };\n  }\n  /**\n   * Convert to a RGB color object.\n   * @example\n   * import { Color } from 'pixi.js';\n   * new Color('white').toRgb(); // returns { r: 1, g: 1, b: 1 }\n   */\n  toRgb() {\n    const [r, g, b] = this._components;\n    return { r, g, b };\n  }\n  /** Convert to a CSS-style rgba string: `rgba(255,255,255,1.0)`. */\n  toRgbaString() {\n    const [r, g, b] = this.toUint8RgbArray();\n    return `rgba(${r},${g},${b},${this.alpha})`;\n  }\n  toUint8RgbArray(out) {\n    const [r, g, b] = this._components;\n    if (!this._arrayRgb) {\n      this._arrayRgb = [];\n    }\n    out = out || this._arrayRgb;\n    out[0] = Math.round(r * 255);\n    out[1] = Math.round(g * 255);\n    out[2] = Math.round(b * 255);\n    return out;\n  }\n  toArray(out) {\n    if (!this._arrayRgba) {\n      this._arrayRgba = [];\n    }\n    out = out || this._arrayRgba;\n    const [r, g, b, a] = this._components;\n    out[0] = r;\n    out[1] = g;\n    out[2] = b;\n    out[3] = a;\n    return out;\n  }\n  toRgbArray(out) {\n    if (!this._arrayRgb) {\n      this._arrayRgb = [];\n    }\n    out = out || this._arrayRgb;\n    const [r, g, b] = this._components;\n    out[0] = r;\n    out[1] = g;\n    out[2] = b;\n    return out;\n  }\n  /**\n   * Convert to a hexadecimal number.\n   * @example\n   * import { Color } from 'pixi.js';\n   * new Color('white').toNumber(); // returns 16777215\n   */\n  toNumber() {\n    return this._int;\n  }\n  /**\n   * Convert to a BGR number\n   * @example\n   * import { Color } from 'pixi.js';\n   * new Color(0xffcc99).toBgrNumber(); // returns 0x99ccff\n   */\n  toBgrNumber() {\n    const [r, g, b] = this.toUint8RgbArray();\n    return (b << 16) + (g << 8) + r;\n  }\n  /**\n   * Convert to a hexadecimal number in little endian format (e.g., BBGGRR).\n   * @example\n   * import { Color } from 'pixi.js';\n   * new Color(0xffcc99).toLittleEndianNumber(); // returns 0x99ccff\n   * @returns {number} - The color as a number in little endian format.\n   */\n  toLittleEndianNumber() {\n    const value = this._int;\n    return (value >> 16) + (value & 65280) + ((value & 255) << 16);\n  }\n  /**\n   * Multiply with another color. This action is destructive, and will\n   * override the previous `value` property to be `null`.\n   * @param {ColorSource} value - The color to multiply by.\n   */\n  multiply(value) {\n    const [r, g, b, a] = _Color._temp.setValue(value)._components;\n    this._components[0] *= r;\n    this._components[1] *= g;\n    this._components[2] *= b;\n    this._components[3] *= a;\n    this._refreshInt();\n    this._value = null;\n    return this;\n  }\n  /**\n   * Converts color to a premultiplied alpha format. This action is destructive, and will\n   * override the previous `value` property to be `null`.\n   * @param alpha - The alpha to multiply by.\n   * @param {boolean} [applyToRGB=true] - Whether to premultiply RGB channels.\n   * @returns {Color} - Itself.\n   */\n  premultiply(alpha, applyToRGB = true) {\n    if (applyToRGB) {\n      this._components[0] *= alpha;\n      this._components[1] *= alpha;\n      this._components[2] *= alpha;\n    }\n    this._components[3] = alpha;\n    this._refreshInt();\n    this._value = null;\n    return this;\n  }\n  /**\n   * Premultiplies alpha with current color.\n   * @param {number} alpha - The alpha to multiply by.\n   * @param {boolean} [applyToRGB=true] - Whether to premultiply RGB channels.\n   * @returns {number} tint multiplied by alpha\n   */\n  toPremultiplied(alpha, applyToRGB = true) {\n    if (alpha === 1) {\n      return (255 << 24) + this._int;\n    }\n    if (alpha === 0) {\n      return applyToRGB ? 0 : this._int;\n    }\n    let r = this._int >> 16 & 255;\n    let g = this._int >> 8 & 255;\n    let b = this._int & 255;\n    if (applyToRGB) {\n      r = r * alpha + 0.5 | 0;\n      g = g * alpha + 0.5 | 0;\n      b = b * alpha + 0.5 | 0;\n    }\n    return (alpha * 255 << 24) + (r << 16) + (g << 8) + b;\n  }\n  /**\n   * Convert to a hexadecimal string.\n   * @example\n   * import { Color } from 'pixi.js';\n   * new Color('white').toHex(); // returns \"#ffffff\"\n   */\n  toHex() {\n    const hexString = this._int.toString(16);\n    return `#${\"000000\".substring(0, 6 - hexString.length) + hexString}`;\n  }\n  /**\n   * Convert to a hexadecimal string with alpha.\n   * @example\n   * import { Color } from 'pixi.js';\n   * new Color('white').toHexa(); // returns \"#ffffffff\"\n   */\n  toHexa() {\n    const alphaValue = Math.round(this._components[3] * 255);\n    const alphaString = alphaValue.toString(16);\n    return this.toHex() + \"00\".substring(0, 2 - alphaString.length) + alphaString;\n  }\n  /**\n   * Set alpha, suitable for chaining.\n   * @param alpha\n   */\n  setAlpha(alpha) {\n    this._components[3] = this._clamp(alpha);\n    return this;\n  }\n  /**\n   * Normalize the input value into rgba\n   * @param value - Input value\n   */\n  _normalize(value) {\n    let r;\n    let g;\n    let b;\n    let a;\n    if ((typeof value === \"number\" || value instanceof Number) && value >= 0 && value <= 16777215) {\n      const int = value;\n      r = (int >> 16 & 255) / 255;\n      g = (int >> 8 & 255) / 255;\n      b = (int & 255) / 255;\n      a = 1;\n    } else if ((Array.isArray(value) || value instanceof Float32Array) && value.length >= 3 && value.length <= 4) {\n      value = this._clamp(value);\n      [r, g, b, a = 1] = value;\n    } else if ((value instanceof Uint8Array || value instanceof Uint8ClampedArray) && value.length >= 3 && value.length <= 4) {\n      value = this._clamp(value, 0, 255);\n      [r, g, b, a = 255] = value;\n      r /= 255;\n      g /= 255;\n      b /= 255;\n      a /= 255;\n    } else if (typeof value === \"string\" || typeof value === \"object\") {\n      if (typeof value === \"string\") {\n        const match = _Color.HEX_PATTERN.exec(value);\n        if (match) {\n          value = `#${match[2]}`;\n        }\n      }\n      const color = colord(value);\n      if (color.isValid()) {\n        ({ r, g, b, a } = color.rgba);\n        r /= 255;\n        g /= 255;\n        b /= 255;\n      }\n    }\n    if (r !== void 0) {\n      this._components[0] = r;\n      this._components[1] = g;\n      this._components[2] = b;\n      this._components[3] = a;\n      this._refreshInt();\n    } else {\n      throw new Error(`Unable to convert color ${value}`);\n    }\n  }\n  /** Refresh the internal color rgb number */\n  _refreshInt() {\n    this._clamp(this._components);\n    const [r, g, b] = this._components;\n    this._int = (r * 255 << 16) + (g * 255 << 8) + (b * 255 | 0);\n  }\n  /**\n   * Clamps values to a range. Will override original values\n   * @param value - Value(s) to clamp\n   * @param min - Minimum value\n   * @param max - Maximum value\n   */\n  _clamp(value, min = 0, max = 1) {\n    if (typeof value === \"number\") {\n      return Math.min(Math.max(value, min), max);\n    }\n    value.forEach((v, i) => {\n      value[i] = Math.min(Math.max(v, min), max);\n    });\n    return value;\n  }\n  /**\n   * Check if the value is a color-like object\n   * @param value - Value to check\n   * @returns True if the value is a color-like object\n   * @static\n   * @example\n   * import { Color } from 'pixi.js';\n   * Color.isColorLike('white'); // returns true\n   * Color.isColorLike(0xffffff); // returns true\n   * Color.isColorLike([1, 1, 1]); // returns true\n   */\n  static isColorLike(value) {\n    return typeof value === \"number\" || typeof value === \"string\" || value instanceof Number || value instanceof _Color || Array.isArray(value) || value instanceof Uint8Array || value instanceof Uint8ClampedArray || value instanceof Float32Array || value.r !== void 0 && value.g !== void 0 && value.b !== void 0 || value.r !== void 0 && value.g !== void 0 && value.b !== void 0 && value.a !== void 0 || value.h !== void 0 && value.s !== void 0 && value.l !== void 0 || value.h !== void 0 && value.s !== void 0 && value.l !== void 0 && value.a !== void 0 || value.h !== void 0 && value.s !== void 0 && value.v !== void 0 || value.h !== void 0 && value.s !== void 0 && value.v !== void 0 && value.a !== void 0;\n  }\n};\n/**\n * Default Color object for static uses\n * @example\n * import { Color } from 'pixi.js';\n * Color.shared.setValue(0xffffff).toHex(); // '#ffffff'\n */\n_Color.shared = new _Color();\n/**\n * Temporary Color object for static uses internally.\n * As to not conflict with Color.shared.\n * @ignore\n */\n_Color._temp = new _Color();\n/** Pattern for hex strings */\n// eslint-disable-next-line @typescript-eslint/naming-convention\n_Color.HEX_PATTERN = /^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;\nlet Color = _Color;\n\nexport { Color };\n//# sourceMappingURL=Color.mjs.map\n","export default function(e,f){var a={white:\"#ffffff\",bisque:\"#ffe4c4\",blue:\"#0000ff\",cadetblue:\"#5f9ea0\",chartreuse:\"#7fff00\",chocolate:\"#d2691e\",coral:\"#ff7f50\",antiquewhite:\"#faebd7\",aqua:\"#00ffff\",azure:\"#f0ffff\",whitesmoke:\"#f5f5f5\",papayawhip:\"#ffefd5\",plum:\"#dda0dd\",blanchedalmond:\"#ffebcd\",black:\"#000000\",gold:\"#ffd700\",goldenrod:\"#daa520\",gainsboro:\"#dcdcdc\",cornsilk:\"#fff8dc\",cornflowerblue:\"#6495ed\",burlywood:\"#deb887\",aquamarine:\"#7fffd4\",beige:\"#f5f5dc\",crimson:\"#dc143c\",cyan:\"#00ffff\",darkblue:\"#00008b\",darkcyan:\"#008b8b\",darkgoldenrod:\"#b8860b\",darkkhaki:\"#bdb76b\",darkgray:\"#a9a9a9\",darkgreen:\"#006400\",darkgrey:\"#a9a9a9\",peachpuff:\"#ffdab9\",darkmagenta:\"#8b008b\",darkred:\"#8b0000\",darkorchid:\"#9932cc\",darkorange:\"#ff8c00\",darkslateblue:\"#483d8b\",gray:\"#808080\",darkslategray:\"#2f4f4f\",darkslategrey:\"#2f4f4f\",deeppink:\"#ff1493\",deepskyblue:\"#00bfff\",wheat:\"#f5deb3\",firebrick:\"#b22222\",floralwhite:\"#fffaf0\",ghostwhite:\"#f8f8ff\",darkviolet:\"#9400d3\",magenta:\"#ff00ff\",green:\"#008000\",dodgerblue:\"#1e90ff\",grey:\"#808080\",honeydew:\"#f0fff0\",hotpink:\"#ff69b4\",blueviolet:\"#8a2be2\",forestgreen:\"#228b22\",lawngreen:\"#7cfc00\",indianred:\"#cd5c5c\",indigo:\"#4b0082\",fuchsia:\"#ff00ff\",brown:\"#a52a2a\",maroon:\"#800000\",mediumblue:\"#0000cd\",lightcoral:\"#f08080\",darkturquoise:\"#00ced1\",lightcyan:\"#e0ffff\",ivory:\"#fffff0\",lightyellow:\"#ffffe0\",lightsalmon:\"#ffa07a\",lightseagreen:\"#20b2aa\",linen:\"#faf0e6\",mediumaquamarine:\"#66cdaa\",lemonchiffon:\"#fffacd\",lime:\"#00ff00\",khaki:\"#f0e68c\",mediumseagreen:\"#3cb371\",limegreen:\"#32cd32\",mediumspringgreen:\"#00fa9a\",lightskyblue:\"#87cefa\",lightblue:\"#add8e6\",midnightblue:\"#191970\",lightpink:\"#ffb6c1\",mistyrose:\"#ffe4e1\",moccasin:\"#ffe4b5\",mintcream:\"#f5fffa\",lightslategray:\"#778899\",lightslategrey:\"#778899\",navajowhite:\"#ffdead\",navy:\"#000080\",mediumvioletred:\"#c71585\",powderblue:\"#b0e0e6\",palegoldenrod:\"#eee8aa\",oldlace:\"#fdf5e6\",paleturquoise:\"#afeeee\",mediumturquoise:\"#48d1cc\",mediumorchid:\"#ba55d3\",rebeccapurple:\"#663399\",lightsteelblue:\"#b0c4de\",mediumslateblue:\"#7b68ee\",thistle:\"#d8bfd8\",tan:\"#d2b48c\",orchid:\"#da70d6\",mediumpurple:\"#9370db\",purple:\"#800080\",pink:\"#ffc0cb\",skyblue:\"#87ceeb\",springgreen:\"#00ff7f\",palegreen:\"#98fb98\",red:\"#ff0000\",yellow:\"#ffff00\",slateblue:\"#6a5acd\",lavenderblush:\"#fff0f5\",peru:\"#cd853f\",palevioletred:\"#db7093\",violet:\"#ee82ee\",teal:\"#008080\",slategray:\"#708090\",slategrey:\"#708090\",aliceblue:\"#f0f8ff\",darkseagreen:\"#8fbc8f\",darkolivegreen:\"#556b2f\",greenyellow:\"#adff2f\",seagreen:\"#2e8b57\",seashell:\"#fff5ee\",tomato:\"#ff6347\",silver:\"#c0c0c0\",sienna:\"#a0522d\",lavender:\"#e6e6fa\",lightgreen:\"#90ee90\",orange:\"#ffa500\",orangered:\"#ff4500\",steelblue:\"#4682b4\",royalblue:\"#4169e1\",turquoise:\"#40e0d0\",yellowgreen:\"#9acd32\",salmon:\"#fa8072\",saddlebrown:\"#8b4513\",sandybrown:\"#f4a460\",rosybrown:\"#bc8f8f\",darksalmon:\"#e9967a\",lightgoldenrodyellow:\"#fafad2\",snow:\"#fffafa\",lightgrey:\"#d3d3d3\",lightgray:\"#d3d3d3\",dimgray:\"#696969\",dimgrey:\"#696969\",olivedrab:\"#6b8e23\",olive:\"#808000\"},r={};for(var d in a)r[a[d]]=d;var l={};e.prototype.toName=function(f){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return\"transparent\";var d,i,n=r[this.toHex()];if(n)return n;if(null==f?void 0:f.closest){var o=this.toRgb(),t=1/0,b=\"black\";if(!l.length)for(var c in a)l[c]=new e(a[c]).toRgb();for(var g in a){var u=(d=o,i=l[g],Math.pow(d.r-i.r,2)+Math.pow(d.g-i.g,2)+Math.pow(d.b-i.b,2));u<t&&(t=u,b=g)}return b}};f.string.push([function(f){var r=f.toLowerCase(),d=\"transparent\"===r?\"#0000\":a[r];return d?new e(d).toRgb():null},\"name\"])}\n","import { BrowserAdapter } from '../environment-browser/BrowserAdapter.mjs';\n\n\"use strict\";\nlet currentAdapter = BrowserAdapter;\nconst DOMAdapter = {\n  /**\n   * Returns the current adapter.\n   * @returns {environment.Adapter} The current adapter.\n   */\n  get() {\n    return currentAdapter;\n  },\n  /**\n   * Sets the current adapter.\n   * @param adapter - The new adapter.\n   */\n  set(adapter) {\n    currentAdapter = adapter;\n  }\n};\n\nexport { DOMAdapter };\n//# sourceMappingURL=adapter.mjs.map\n","\"use strict\";\nconst BrowserAdapter = {\n  createCanvas: (width, height) => {\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = width;\n    canvas.height = height;\n    return canvas;\n  },\n  getCanvasRenderingContext2D: () => CanvasRenderingContext2D,\n  getWebGLRenderingContext: () => WebGLRenderingContext,\n  getNavigator: () => navigator,\n  getBaseUrl: () => document.baseURI ?? window.location.href,\n  getFontFaceSet: () => document.fonts,\n  fetch: (url, options) => fetch(url, options),\n  parseXML: (xml) => {\n    const parser = new DOMParser();\n    return parser.parseFromString(xml, \"text/xml\");\n  }\n};\n\nexport { BrowserAdapter };\n//# sourceMappingURL=BrowserAdapter.mjs.map\n","\"use strict\";\nvar ExtensionType = /* @__PURE__ */ ((ExtensionType2) => {\n  ExtensionType2[\"Application\"] = \"application\";\n  ExtensionType2[\"WebGLPipes\"] = \"webgl-pipes\";\n  ExtensionType2[\"WebGLPipesAdaptor\"] = \"webgl-pipes-adaptor\";\n  ExtensionType2[\"WebGLSystem\"] = \"webgl-system\";\n  ExtensionType2[\"WebGPUPipes\"] = \"webgpu-pipes\";\n  ExtensionType2[\"WebGPUPipesAdaptor\"] = \"webgpu-pipes-adaptor\";\n  ExtensionType2[\"WebGPUSystem\"] = \"webgpu-system\";\n  ExtensionType2[\"CanvasSystem\"] = \"canvas-system\";\n  ExtensionType2[\"CanvasPipesAdaptor\"] = \"canvas-pipes-adaptor\";\n  ExtensionType2[\"CanvasPipes\"] = \"canvas-pipes\";\n  ExtensionType2[\"Asset\"] = \"asset\";\n  ExtensionType2[\"LoadParser\"] = \"load-parser\";\n  ExtensionType2[\"ResolveParser\"] = \"resolve-parser\";\n  ExtensionType2[\"CacheParser\"] = \"cache-parser\";\n  ExtensionType2[\"DetectionParser\"] = \"detection-parser\";\n  ExtensionType2[\"MaskEffect\"] = \"mask-effect\";\n  ExtensionType2[\"BlendMode\"] = \"blend-mode\";\n  ExtensionType2[\"TextureSource\"] = \"texture-source\";\n  ExtensionType2[\"Environment\"] = \"environment\";\n  ExtensionType2[\"ShapeBuilder\"] = \"shape-builder\";\n  return ExtensionType2;\n})(ExtensionType || {});\nconst normalizeExtension = (ext) => {\n  if (typeof ext === \"function\" || typeof ext === \"object\" && ext.extension) {\n    if (!ext.extension) {\n      throw new Error(\"Extension class must have an extension object\");\n    }\n    const metadata = typeof ext.extension !== \"object\" ? { type: ext.extension } : ext.extension;\n    ext = { ...metadata, ref: ext };\n  }\n  if (typeof ext === \"object\") {\n    ext = { ...ext };\n  } else {\n    throw new Error(\"Invalid extension type\");\n  }\n  if (typeof ext.type === \"string\") {\n    ext.type = [ext.type];\n  }\n  return ext;\n};\nconst normalizeExtensionPriority = (ext, defaultPriority) => normalizeExtension(ext).priority ?? defaultPriority;\nconst extensions = {\n  /** @ignore */\n  _addHandlers: {},\n  /** @ignore */\n  _removeHandlers: {},\n  /** @ignore */\n  _queue: {},\n  /**\n   * Remove extensions from PixiJS.\n   * @param extensions - Extensions to be removed.\n   * @returns {extensions} For chaining.\n   */\n  remove(...extensions2) {\n    extensions2.map(normalizeExtension).forEach((ext) => {\n      ext.type.forEach((type) => this._removeHandlers[type]?.(ext));\n    });\n    return this;\n  },\n  /**\n   * Register new extensions with PixiJS.\n   * @param extensions - The spread of extensions to add to PixiJS.\n   * @returns {extensions} For chaining.\n   */\n  add(...extensions2) {\n    extensions2.map(normalizeExtension).forEach((ext) => {\n      ext.type.forEach((type) => {\n        const handlers = this._addHandlers;\n        const queue = this._queue;\n        if (!handlers[type]) {\n          queue[type] = queue[type] || [];\n          queue[type]?.push(ext);\n        } else {\n          handlers[type]?.(ext);\n        }\n      });\n    });\n    return this;\n  },\n  /**\n   * Internal method to handle extensions by name.\n   * @param type - The extension type.\n   * @param onAdd  - Function handler when extensions are added/registered {@link StrictExtensionFormat}.\n   * @param onRemove  - Function handler when extensions are removed/unregistered {@link StrictExtensionFormat}.\n   * @returns {extensions} For chaining.\n   */\n  handle(type, onAdd, onRemove) {\n    const addHandlers = this._addHandlers;\n    const removeHandlers = this._removeHandlers;\n    if (addHandlers[type] || removeHandlers[type]) {\n      throw new Error(`Extension type ${type} already has a handler`);\n    }\n    addHandlers[type] = onAdd;\n    removeHandlers[type] = onRemove;\n    const queue = this._queue;\n    if (queue[type]) {\n      queue[type]?.forEach((ext) => onAdd(ext));\n      delete queue[type];\n    }\n    return this;\n  },\n  /**\n   * Handle a type, but using a map by `name` property.\n   * @param type - Type of extension to handle.\n   * @param map - The object map of named extensions.\n   * @returns {extensions} For chaining.\n   */\n  handleByMap(type, map) {\n    return this.handle(\n      type,\n      (extension) => {\n        if (extension.name) {\n          map[extension.name] = extension.ref;\n        }\n      },\n      (extension) => {\n        if (extension.name) {\n          delete map[extension.name];\n        }\n      }\n    );\n  },\n  /**\n   * Handle a type, but using a list of extensions with a `name` property.\n   * @param type - Type of extension to handle.\n   * @param map - The array of named extensions.\n   * @param defaultPriority - Fallback priority if none is defined.\n   * @returns {extensions} For chaining.\n   */\n  handleByNamedList(type, map, defaultPriority = -1) {\n    return this.handle(\n      type,\n      (extension) => {\n        const index = map.findIndex((item) => item.name === extension.name);\n        if (index >= 0)\n          return;\n        map.push({ name: extension.name, value: extension.ref });\n        map.sort((a, b) => normalizeExtensionPriority(b.value, defaultPriority) - normalizeExtensionPriority(a.value, defaultPriority));\n      },\n      (extension) => {\n        const index = map.findIndex((item) => item.name === extension.name);\n        if (index !== -1) {\n          map.splice(index, 1);\n        }\n      }\n    );\n  },\n  /**\n   * Handle a type, but using a list of extensions.\n   * @param type - Type of extension to handle.\n   * @param list - The list of extensions.\n   * @param defaultPriority - The default priority to use if none is specified.\n   * @returns {extensions} For chaining.\n   */\n  handleByList(type, list, defaultPriority = -1) {\n    return this.handle(\n      type,\n      (extension) => {\n        if (list.includes(extension.ref)) {\n          return;\n        }\n        list.push(extension.ref);\n        list.sort((a, b) => normalizeExtensionPriority(b, defaultPriority) - normalizeExtensionPriority(a, defaultPriority));\n      },\n      (extension) => {\n        const index = list.indexOf(extension.ref);\n        if (index !== -1) {\n          list.splice(index, 1);\n        }\n      }\n    );\n  }\n};\n\nexport { ExtensionType, extensions, normalizeExtensionPriority };\n//# sourceMappingURL=Extensions.mjs.map\n","import { GlProgram } from '../rendering/renderers/gl/shader/GlProgram.mjs';\nimport { GpuProgram } from '../rendering/renderers/gpu/shader/GpuProgram.mjs';\nimport { Shader } from '../rendering/renderers/shared/shader/Shader.mjs';\nimport { State } from '../rendering/renderers/shared/state/State.mjs';\n\n\"use strict\";\nconst _Filter = class _Filter extends Shader {\n  /**\n   * @param options - The optional parameters of this filter.\n   */\n  constructor(options) {\n    options = { ..._Filter.defaultOptions, ...options };\n    super(options);\n    /** If enabled is true the filter is applied, if false it will not. */\n    this.enabled = true;\n    /**\n     * The gpu state the filter requires to render.\n     * @internal\n     * @ignore\n     */\n    this._state = State.for2d();\n    this.blendMode = options.blendMode;\n    this.padding = options.padding;\n    if (typeof options.antialias === \"boolean\") {\n      this.antialias = options.antialias ? \"on\" : \"off\";\n    } else {\n      this.antialias = options.antialias;\n    }\n    this.resolution = options.resolution;\n    this.blendRequired = options.blendRequired;\n    this.addResource(\"uTexture\", 0, 1);\n  }\n  /**\n   * Applies the filter\n   * @param filterManager - The renderer to retrieve the filter from\n   * @param input - The input render target.\n   * @param output - The target to output to.\n   * @param clearMode - Should the output be cleared before rendering to it\n   */\n  apply(filterManager, input, output, clearMode) {\n    filterManager.applyFilter(this, input, output, clearMode);\n  }\n  /**\n   * Get the blend mode of the filter.\n   * @default \"normal\"\n   */\n  get blendMode() {\n    return this._state.blendMode;\n  }\n  /** Sets the blend mode of the filter. */\n  set blendMode(value) {\n    this._state.blendMode = value;\n  }\n  /**\n   * A short hand function to create a filter based of a vertex and fragment shader src.\n   * @param options\n   * @returns A shiny new PixiJS filter!\n   */\n  static from(options) {\n    const { gpu, gl, ...rest } = options;\n    let gpuProgram;\n    let glProgram;\n    if (gpu) {\n      gpuProgram = GpuProgram.from(gpu);\n    }\n    if (gl) {\n      glProgram = GlProgram.from(gl);\n    }\n    return new _Filter({\n      gpuProgram,\n      glProgram,\n      ...rest\n    });\n  }\n};\n/**\n * The default filter settings\n * @static\n */\n_Filter.defaultOptions = {\n  blendMode: \"normal\",\n  resolution: 1,\n  padding: 0,\n  antialias: \"off\",\n  blendRequired: false\n};\nlet Filter = _Filter;\n\nexport { Filter };\n//# sourceMappingURL=Filter.mjs.map\n","\"use strict\";\nclass FilterEffect {\n  constructor() {\n    /** the pipe that knows how to handle this effect */\n    this.pipe = \"filter\";\n    /** the priority of this effect */\n    this.priority = 1;\n  }\n  destroy() {\n    for (let i = 0; i < this.filters.length; i++) {\n      this.filters[i].destroy();\n    }\n    this.filters = null;\n    this.filterArea = null;\n  }\n}\n\nexport { FilterEffect };\n//# sourceMappingURL=FilterEffect.mjs.map\n","import { ExtensionType } from '../extensions/Extensions.mjs';\n\n\"use strict\";\nconst browserExt = {\n  extension: {\n    type: ExtensionType.Environment,\n    name: \"browser\",\n    priority: -1\n  },\n  test: () => true,\n  load: async () => {\n    await import('./browserAll.mjs');\n  }\n};\n\nexport { browserExt };\n//# sourceMappingURL=browserExt.mjs.map\n","import { ExtensionType } from '../extensions/Extensions.mjs';\n\n\"use strict\";\nconst webworkerExt = {\n  extension: {\n    type: ExtensionType.Environment,\n    name: \"webworker\",\n    priority: 0\n  },\n  test: () => typeof self !== \"undefined\" && self.WorkerGlobalScope !== void 0,\n  load: async () => {\n    await import('./webworkerAll.mjs');\n  }\n};\n\nexport { webworkerExt };\n//# sourceMappingURL=webworkerExt.mjs.map\n","import { DOMAdapter } from '../../environment/adapter.mjs';\nimport { AbstractRenderer } from '../../rendering/renderers/shared/system/AbstractRenderer.mjs';\n\n\"use strict\";\nlet _isWebGLSupported;\nfunction isWebGLSupported(failIfMajorPerformanceCaveat) {\n  if (_isWebGLSupported !== void 0)\n    return _isWebGLSupported;\n  _isWebGLSupported = (() => {\n    const contextOptions = {\n      stencil: true,\n      failIfMajorPerformanceCaveat: failIfMajorPerformanceCaveat ?? AbstractRenderer.defaultOptions.failIfMajorPerformanceCaveat\n    };\n    try {\n      if (!DOMAdapter.get().getWebGLRenderingContext()) {\n        return false;\n      }\n      const canvas = DOMAdapter.get().createCanvas();\n      let gl = canvas.getContext(\"webgl\", contextOptions);\n      const success = !!gl?.getContextAttributes()?.stencil;\n      if (gl) {\n        const loseContext = gl.getExtension(\"WEBGL_lose_context\");\n        if (loseContext) {\n          loseContext.loseContext();\n        }\n      }\n      gl = null;\n      return success;\n    } catch (e) {\n      return false;\n    }\n  })();\n  return _isWebGLSupported;\n}\n\nexport { isWebGLSupported };\n//# sourceMappingURL=isWebGLSupported.mjs.map\n","import { DOMAdapter } from '../../environment/adapter.mjs';\n\n\"use strict\";\nlet _isWebGPUSupported;\nasync function isWebGPUSupported(options = {}) {\n  if (_isWebGPUSupported !== void 0)\n    return _isWebGPUSupported;\n  _isWebGPUSupported = await (async () => {\n    const gpu = DOMAdapter.get().getNavigator().gpu;\n    if (!gpu) {\n      return false;\n    }\n    try {\n      const adapter = await navigator.gpu.requestAdapter(options);\n      await adapter.requestDevice();\n      return true;\n    } catch (e) {\n      return false;\n    }\n  })();\n  return _isWebGPUSupported;\n}\n\nexport { isWebGPUSupported };\n//# sourceMappingURL=isWebGPUSupported.mjs.map\n","import { isWebGLSupported } from '../../utils/browser/isWebGLSupported.mjs';\nimport { isWebGPUSupported } from '../../utils/browser/isWebGPUSupported.mjs';\nimport { AbstractRenderer } from './shared/system/AbstractRenderer.mjs';\n\n\"use strict\";\nconst renderPriority = [\"webgl\", \"webgpu\", \"canvas\"];\nasync function autoDetectRenderer(options) {\n  let preferredOrder = [];\n  if (options.preference) {\n    preferredOrder.push(options.preference);\n    renderPriority.forEach((item) => {\n      if (item !== options.preference) {\n        preferredOrder.push(item);\n      }\n    });\n  } else {\n    preferredOrder = renderPriority.slice();\n  }\n  let RendererClass;\n  let finalOptions = {};\n  for (let i = 0; i < preferredOrder.length; i++) {\n    const rendererType = preferredOrder[i];\n    if (rendererType === \"webgpu\" && await isWebGPUSupported()) {\n      const { WebGPURenderer } = await import('./gpu/WebGPURenderer.mjs');\n      RendererClass = WebGPURenderer;\n      finalOptions = { ...options, ...options.webgpu };\n      break;\n    } else if (rendererType === \"webgl\" && isWebGLSupported(\n      options.failIfMajorPerformanceCaveat ?? AbstractRenderer.defaultOptions.failIfMajorPerformanceCaveat\n    )) {\n      const { WebGLRenderer } = await import('./gl/WebGLRenderer.mjs');\n      RendererClass = WebGLRenderer;\n      finalOptions = { ...options, ...options.webgl };\n      break;\n    } else if (rendererType === \"canvas\") {\n      finalOptions = { ...options };\n      throw new Error(\"CanvasRenderer is not yet implemented\");\n    }\n  }\n  delete finalOptions.webgpu;\n  delete finalOptions.webgl;\n  if (!RendererClass) {\n    throw new Error(\"No available renderer for the current environment\");\n  }\n  const renderer = new RendererClass();\n  await renderer.init(finalOptions);\n  return renderer;\n}\n\nexport { autoDetectRenderer };\n//# sourceMappingURL=autoDetectRenderer.mjs.map\n","import { extensions, ExtensionType } from '../extensions/Extensions.mjs';\nimport { autoDetectRenderer } from '../rendering/renderers/autoDetectRenderer.mjs';\nimport { Container } from '../scene/container/Container.mjs';\nimport { ApplicationInitHook } from '../utils/global/globalHooks.mjs';\nimport { deprecation, v8_0_0 } from '../utils/logging/deprecation.mjs';\n\n\"use strict\";\nconst _Application = class _Application {\n  /** @ignore */\n  constructor(...args) {\n    /** The root display container that's rendered. */\n    this.stage = new Container();\n    if (args[0] !== void 0) {\n      deprecation(v8_0_0, \"Application constructor options are deprecated, please use Application.init() instead.\");\n    }\n  }\n  /**\n   * @param options - The optional application and renderer parameters.\n   */\n  async init(options) {\n    options = { ...options };\n    this.renderer = await autoDetectRenderer(options);\n    _Application._plugins.forEach((plugin) => {\n      plugin.init.call(this, options);\n    });\n  }\n  /** Render the current stage. */\n  render() {\n    this.renderer.render({ container: this.stage });\n  }\n  /**\n   * Reference to the renderer's canvas element.\n   * @readonly\n   * @member {HTMLCanvasElement}\n   */\n  get canvas() {\n    return this.renderer.canvas;\n  }\n  /**\n   * Reference to the renderer's canvas element.\n   * @member {HTMLCanvasElement}\n   * @deprecated since 8.0.0\n   */\n  get view() {\n    deprecation(v8_0_0, \"Application.view is deprecated, please use Application.canvas instead.\");\n    return this.renderer.canvas;\n  }\n  /**\n   * Reference to the renderer's screen rectangle. Its safe to use as `filterArea` or `hitArea` for the whole screen.\n   * @readonly\n   */\n  get screen() {\n    return this.renderer.screen;\n  }\n  /**\n   * Destroys the application and all of its resources.\n   * @param {object|boolean}[rendererDestroyOptions=false] - The options for destroying the renderer.\n   * @param {boolean}[rendererDestroyOptions.removeView=false] - Removes the Canvas element from the DOM.\n   * @param {object|boolean} [options=false] - The options for destroying the stage.\n   * @param {boolean} [options.children=false] - If set to true, all the children will have their destroy method\n   * called as well. `options` will be passed on to those calls.\n   * @param {boolean} [options.texture=false] - Only used for children with textures e.g. Sprites.\n   * If options.children is set to true,\n   * it should destroy the texture of the child sprite.\n   * @param {boolean} [options.textureSource=false] - Only used for children with textures e.g. Sprites.\n   *  If options.children is set to true,\n   * it should destroy the texture source of the child sprite.\n   * @param {boolean} [options.context=false] - Only used for children with graphicsContexts e.g. Graphics.\n   * If options.children is set to true,\n   * it should destroy the context of the child graphics.\n   */\n  destroy(rendererDestroyOptions = false, options = false) {\n    const plugins = _Application._plugins.slice(0);\n    plugins.reverse();\n    plugins.forEach((plugin) => {\n      plugin.destroy.call(this);\n    });\n    this.stage.destroy(options);\n    this.stage = null;\n    this.renderer.destroy(rendererDestroyOptions);\n    this.renderer = null;\n  }\n};\n/**\n * Collection of installed plugins.\n * @alias _plugins\n */\n_Application._plugins = [];\nlet Application = _Application;\nextensions.handleByList(ExtensionType.Application, Application._plugins);\nextensions.add(ApplicationInitHook);\n\nexport { Application };\n//# sourceMappingURL=Application.mjs.map\n","import { Rectangle } from '../../maths/shapes/Rectangle.mjs';\nimport { Texture } from '../../rendering/renderers/shared/texture/Texture.mjs';\nimport { AbstractBitmapFont } from './AbstractBitmapFont.mjs';\nimport { BitmapFontManager } from './BitmapFontManager.mjs';\n\n\"use strict\";\nclass BitmapFont extends AbstractBitmapFont {\n  constructor(options, url) {\n    super();\n    const { textures, data } = options;\n    Object.keys(data.pages).forEach((key) => {\n      const pageData = data.pages[parseInt(key, 10)];\n      const texture = textures[pageData.id];\n      this.pages.push({ texture });\n    });\n    Object.keys(data.chars).forEach((key) => {\n      const charData = data.chars[key];\n      const {\n        frame: textureFrame,\n        source: textureSource\n      } = textures[charData.page];\n      const frameReal = new Rectangle(\n        charData.x + textureFrame.x,\n        charData.y + textureFrame.y,\n        charData.width,\n        charData.height\n      );\n      const texture = new Texture({\n        source: textureSource,\n        frame: frameReal\n      });\n      this.chars[key] = {\n        id: key.codePointAt(0),\n        xOffset: charData.xOffset,\n        yOffset: charData.yOffset,\n        xAdvance: charData.xAdvance,\n        kerning: charData.kerning ?? {},\n        texture\n      };\n    });\n    this.baseRenderedFontSize = data.fontSize;\n    this.baseMeasurementFontSize = data.fontSize;\n    this.fontMetrics = {\n      ascent: 0,\n      descent: 0,\n      fontSize: data.fontSize\n    };\n    this.baseLineOffset = data.baseLineOffset;\n    this.lineHeight = data.lineHeight;\n    this.fontFamily = data.fontFamily;\n    this.distanceField = data.distanceField ?? {\n      type: \"none\",\n      range: 0\n    };\n    this.url = url;\n  }\n  /** Destroys the BitmapFont object. */\n  destroy() {\n    super.destroy();\n    for (let i = 0; i < this.pages.length; i++) {\n      const { texture } = this.pages[i];\n      texture.destroy(true);\n    }\n    this.pages = null;\n  }\n  /**\n   * Generates a bitmap-font for the given style and character set\n   * @param options - Setup options for font generation.\n   * @returns Font generated by style options.\n   * @example\n   * import { BitmapFont, BitmapText } from 'pixi.js';\n   *\n   * BitmapFont.install('TitleFont', {\n   *     fontFamily: 'Arial',\n   *     fontSize: 12,\n   *     strokeThickness: 2,\n   *     fill: 'purple',\n   * });\n   *\n   * const title = new BitmapText({ text: 'This is the title', fontFamily: 'TitleFont' });\n   */\n  static install(options) {\n    BitmapFontManager.install(options);\n  }\n  /**\n   * Uninstalls a bitmap font from the cache.\n   * @param {string} name - The name of the bitmap font to uninstall.\n   */\n  static uninstall(name) {\n    BitmapFontManager.uninstall(name);\n  }\n}\n\nexport { BitmapFont };\n//# sourceMappingURL=BitmapFont.mjs.map\n","\"use strict\";\nconst bitmapFontTextParser = {\n  test(data) {\n    return typeof data === \"string\" && data.startsWith(\"info face=\");\n  },\n  parse(txt) {\n    const items = txt.match(/^[a-z]+\\s+.+$/gm);\n    const rawData = {\n      info: [],\n      common: [],\n      page: [],\n      char: [],\n      chars: [],\n      kerning: [],\n      kernings: [],\n      distanceField: []\n    };\n    for (const i in items) {\n      const name = items[i].match(/^[a-z]+/gm)[0];\n      const attributeList = items[i].match(/[a-zA-Z]+=([^\\s\"']+|\"([^\"]*)\")/gm);\n      const itemData = {};\n      for (const i2 in attributeList) {\n        const split = attributeList[i2].split(\"=\");\n        const key = split[0];\n        const strValue = split[1].replace(/\"/gm, \"\");\n        const floatValue = parseFloat(strValue);\n        const value = isNaN(floatValue) ? strValue : floatValue;\n        itemData[key] = value;\n      }\n      rawData[name].push(itemData);\n    }\n    const font = {\n      chars: {},\n      pages: [],\n      lineHeight: 0,\n      fontSize: 0,\n      fontFamily: \"\",\n      distanceField: null,\n      baseLineOffset: 0\n    };\n    const [info] = rawData.info;\n    const [common] = rawData.common;\n    const [distanceField] = rawData.distanceField ?? [];\n    if (distanceField) {\n      font.distanceField = {\n        range: parseInt(distanceField.distanceRange, 10),\n        type: distanceField.fieldType\n      };\n    }\n    font.fontSize = parseInt(info.size, 10);\n    font.fontFamily = info.face;\n    font.lineHeight = parseInt(common.lineHeight, 10);\n    const page = rawData.page;\n    for (let i = 0; i < page.length; i++) {\n      font.pages.push({\n        id: parseInt(page[i].id, 10) || 0,\n        file: page[i].file\n      });\n    }\n    const map = {};\n    font.baseLineOffset = font.lineHeight - parseInt(common.base, 10);\n    const char = rawData.char;\n    for (let i = 0; i < char.length; i++) {\n      const charNode = char[i];\n      const id = parseInt(charNode.id, 10);\n      let letter = charNode.letter ?? charNode.char ?? String.fromCharCode(id);\n      if (letter === \"space\")\n        letter = \" \";\n      map[id] = letter;\n      font.chars[letter] = {\n        id,\n        // texture deets..\n        page: parseInt(charNode.page, 10) || 0,\n        x: parseInt(charNode.x, 10),\n        y: parseInt(charNode.y, 10),\n        width: parseInt(charNode.width, 10),\n        height: parseInt(charNode.height, 10),\n        xOffset: parseInt(charNode.xoffset, 10),\n        yOffset: parseInt(charNode.yoffset, 10),\n        xAdvance: parseInt(charNode.xadvance, 10),\n        kerning: {}\n      };\n    }\n    const kerning = rawData.kerning || [];\n    for (let i = 0; i < kerning.length; i++) {\n      const first = parseInt(kerning[i].first, 10);\n      const second = parseInt(kerning[i].second, 10);\n      const amount = parseInt(kerning[i].amount, 10);\n      font.chars[map[second]].kerning[map[first]] = amount;\n    }\n    return font;\n  }\n};\n\nexport { bitmapFontTextParser };\n//# sourceMappingURL=bitmapFontTextParser.mjs.map\n","\"use strict\";\nconst bitmapFontXMLParser = {\n  test(data) {\n    const xml = data;\n    return typeof xml !== \"string\" && \"getElementsByTagName\" in xml && xml.getElementsByTagName(\"page\").length && xml.getElementsByTagName(\"info\")[0].getAttribute(\"face\") !== null;\n  },\n  parse(xml) {\n    const data = {\n      chars: {},\n      pages: [],\n      lineHeight: 0,\n      fontSize: 0,\n      fontFamily: \"\",\n      distanceField: null,\n      baseLineOffset: 0\n    };\n    const info = xml.getElementsByTagName(\"info\")[0];\n    const common = xml.getElementsByTagName(\"common\")[0];\n    const distanceField = xml.getElementsByTagName(\"distanceField\")[0];\n    if (distanceField) {\n      data.distanceField = {\n        type: distanceField.getAttribute(\"fieldType\"),\n        range: parseInt(distanceField.getAttribute(\"distanceRange\"), 10)\n      };\n    }\n    const page = xml.getElementsByTagName(\"page\");\n    const char = xml.getElementsByTagName(\"char\");\n    const kerning = xml.getElementsByTagName(\"kerning\");\n    data.fontSize = parseInt(info.getAttribute(\"size\"), 10);\n    data.fontFamily = info.getAttribute(\"face\");\n    data.lineHeight = parseInt(common.getAttribute(\"lineHeight\"), 10);\n    for (let i = 0; i < page.length; i++) {\n      data.pages.push({\n        id: parseInt(page[i].getAttribute(\"id\"), 10) || 0,\n        file: page[i].getAttribute(\"file\")\n      });\n    }\n    const map = {};\n    data.baseLineOffset = data.lineHeight - parseInt(common.getAttribute(\"base\"), 10);\n    for (let i = 0; i < char.length; i++) {\n      const charNode = char[i];\n      const id = parseInt(charNode.getAttribute(\"id\"), 10);\n      let letter = charNode.getAttribute(\"letter\") ?? charNode.getAttribute(\"char\") ?? String.fromCharCode(id);\n      if (letter === \"space\")\n        letter = \" \";\n      map[id] = letter;\n      data.chars[letter] = {\n        id,\n        // texture deets..\n        page: parseInt(charNode.getAttribute(\"page\"), 10) || 0,\n        x: parseInt(charNode.getAttribute(\"x\"), 10),\n        y: parseInt(charNode.getAttribute(\"y\"), 10),\n        width: parseInt(charNode.getAttribute(\"width\"), 10),\n        height: parseInt(charNode.getAttribute(\"height\"), 10),\n        // render deets..\n        xOffset: parseInt(charNode.getAttribute(\"xoffset\"), 10),\n        yOffset: parseInt(charNode.getAttribute(\"yoffset\"), 10),\n        // + baseLineOffset,\n        xAdvance: parseInt(charNode.getAttribute(\"xadvance\"), 10),\n        kerning: {}\n      };\n    }\n    for (let i = 0; i < kerning.length; i++) {\n      const first = parseInt(kerning[i].getAttribute(\"first\"), 10);\n      const second = parseInt(kerning[i].getAttribute(\"second\"), 10);\n      const amount = parseInt(kerning[i].getAttribute(\"amount\"), 10);\n      data.chars[map[second]].kerning[map[first]] = amount;\n    }\n    return data;\n  }\n};\n\nexport { bitmapFontXMLParser };\n//# sourceMappingURL=bitmapFontXMLParser.mjs.map\n","import { DOMAdapter } from '../../../environment/adapter.mjs';\nimport { bitmapFontXMLParser } from './bitmapFontXMLParser.mjs';\n\n\"use strict\";\nconst bitmapFontXMLStringParser = {\n  test(data) {\n    if (typeof data === \"string\" && data.includes(\"<font>\")) {\n      return bitmapFontXMLParser.test(DOMAdapter.get().parseXML(data));\n    }\n    return false;\n  },\n  parse(data) {\n    return bitmapFontXMLParser.parse(DOMAdapter.get().parseXML(data));\n  }\n};\n\nexport { bitmapFontXMLStringParser };\n//# sourceMappingURL=bitmapFontXMLStringParser.mjs.map\n","import { LoaderParserPriority } from '../../../assets/loader/parsers/LoaderParser.mjs';\nimport { copySearchParams } from '../../../assets/utils/copySearchParams.mjs';\nimport { DOMAdapter } from '../../../environment/adapter.mjs';\nimport { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { path } from '../../../utils/path.mjs';\nimport { BitmapFont } from '../BitmapFont.mjs';\nimport { bitmapFontTextParser } from './bitmapFontTextParser.mjs';\nimport { bitmapFontXMLStringParser } from './bitmapFontXMLStringParser.mjs';\n\n\"use strict\";\nconst validExtensions = [\".xml\", \".fnt\"];\nconst bitmapFontCachePlugin = {\n  extension: {\n    type: ExtensionType.CacheParser,\n    name: \"cacheBitmapFont\"\n  },\n  test: (asset) => asset instanceof BitmapFont,\n  getCacheableAssets(keys, asset) {\n    const out = {};\n    keys.forEach((key) => {\n      out[key] = asset;\n      out[`${key}-bitmap`] = asset;\n    });\n    out[`${asset.fontFamily}-bitmap`] = asset;\n    return out;\n  }\n};\nconst loadBitmapFont = {\n  extension: {\n    type: ExtensionType.LoadParser,\n    priority: LoaderParserPriority.Normal\n  },\n  name: \"loadBitmapFont\",\n  test(url) {\n    return validExtensions.includes(path.extname(url).toLowerCase());\n  },\n  async testParse(data) {\n    return bitmapFontTextParser.test(data) || bitmapFontXMLStringParser.test(data);\n  },\n  async parse(asset, data, loader) {\n    const bitmapFontData = bitmapFontTextParser.test(asset) ? bitmapFontTextParser.parse(asset) : bitmapFontXMLStringParser.parse(asset);\n    const { src } = data;\n    const { pages } = bitmapFontData;\n    const textureUrls = [];\n    const textureOptions = bitmapFontData.distanceField ? {\n      scaleMode: \"linear\",\n      alphaMode: \"premultiply-alpha-on-upload\",\n      autoGenerateMipmaps: false,\n      resolution: 1\n    } : {};\n    for (let i = 0; i < pages.length; ++i) {\n      const pageFile = pages[i].file;\n      let imagePath = path.join(path.dirname(src), pageFile);\n      imagePath = copySearchParams(imagePath, src);\n      textureUrls.push({\n        src: imagePath,\n        data: textureOptions\n      });\n    }\n    const loadedTextures = await loader.load(textureUrls);\n    const textures = textureUrls.map((url) => loadedTextures[url.src]);\n    const bitmapFont = new BitmapFont({\n      data: bitmapFontData,\n      textures\n    }, src);\n    return bitmapFont;\n  },\n  async load(url, _options) {\n    const response = await DOMAdapter.get().fetch(url);\n    return await response.text();\n  },\n  async unload(bitmapFont, _resolvedAsset, loader) {\n    await Promise.all(bitmapFont.pages.map((page) => loader.unload(page.texture.source._sourceOrigin)));\n    bitmapFont.destroy();\n  }\n};\n\nexport { bitmapFontCachePlugin, loadBitmapFont };\n//# sourceMappingURL=loadBitmapFont.mjs.map\n","\"use strict\";\nclass BackgroundLoader {\n  /**\n   * @param loader\n   * @param verbose - should the loader log to the console\n   */\n  constructor(loader, verbose = false) {\n    this._loader = loader;\n    this._assetList = [];\n    this._isLoading = false;\n    this._maxConcurrent = 1;\n    this.verbose = verbose;\n  }\n  /**\n   * Adds an array of assets to load.\n   * @param assetUrls - assets to load\n   */\n  add(assetUrls) {\n    assetUrls.forEach((a) => {\n      this._assetList.push(a);\n    });\n    if (this.verbose) {\n      console.log(\"[BackgroundLoader] assets: \", this._assetList);\n    }\n    if (this._isActive && !this._isLoading) {\n      void this._next();\n    }\n  }\n  /**\n   * Loads the next set of assets. Will try to load as many assets as it can at the same time.\n   *\n   * The max assets it will try to load at one time will be 4.\n   */\n  async _next() {\n    if (this._assetList.length && this._isActive) {\n      this._isLoading = true;\n      const toLoad = [];\n      const toLoadAmount = Math.min(this._assetList.length, this._maxConcurrent);\n      for (let i = 0; i < toLoadAmount; i++) {\n        toLoad.push(this._assetList.pop());\n      }\n      await this._loader.load(toLoad);\n      this._isLoading = false;\n      void this._next();\n    }\n  }\n  /**\n   * Activate/Deactivate the loading. If set to true then it will immediately continue to load the next asset.\n   * @returns whether the class is active\n   */\n  get active() {\n    return this._isActive;\n  }\n  set active(value) {\n    if (this._isActive === value)\n      return;\n    this._isActive = value;\n    if (value && !this._isLoading) {\n      void this._next();\n    }\n  }\n}\n\nexport { BackgroundLoader };\n//# sourceMappingURL=BackgroundLoader.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { Texture } from '../../../rendering/renderers/shared/texture/Texture.mjs';\n\n\"use strict\";\nconst cacheTextureArray = {\n  extension: {\n    type: ExtensionType.CacheParser,\n    name: \"cacheTextureArray\"\n  },\n  test: (asset) => Array.isArray(asset) && asset.every((t) => t instanceof Texture),\n  getCacheableAssets: (keys, asset) => {\n    const out = {};\n    keys.forEach((key) => {\n      asset.forEach((item, i) => {\n        out[key + (i === 0 ? \"\" : i + 1)] = item;\n      });\n    });\n    return out;\n  }\n};\n\nexport { cacheTextureArray };\n//# sourceMappingURL=cacheTextureArray.mjs.map\n","\"use strict\";\nasync function testImageFormat(imageData) {\n  if (\"Image\" in globalThis) {\n    return new Promise((resolve) => {\n      const image = new Image();\n      image.onload = () => {\n        resolve(true);\n      };\n      image.onerror = () => {\n        resolve(false);\n      };\n      image.src = imageData;\n    });\n  }\n  if (\"createImageBitmap\" in globalThis && \"fetch\" in globalThis) {\n    try {\n      const blob = await (await fetch(imageData)).blob();\n      await createImageBitmap(blob);\n    } catch (e) {\n      return false;\n    }\n    return true;\n  }\n  return false;\n}\n\nexport { testImageFormat };\n//# sourceMappingURL=testImageFormat.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { testImageFormat } from '../utils/testImageFormat.mjs';\n\n\"use strict\";\nconst detectAvif = {\n  extension: {\n    type: ExtensionType.DetectionParser,\n    priority: 1\n  },\n  test: async () => testImageFormat(\n    // eslint-disable-next-line max-len\n    \"data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=\"\n  ),\n  add: async (formats) => [...formats, \"avif\"],\n  remove: async (formats) => formats.filter((f) => f !== \"avif\")\n};\n\nexport { detectAvif };\n//# sourceMappingURL=detectAvif.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\n\n\"use strict\";\nconst imageFormats = [\"png\", \"jpg\", \"jpeg\"];\nconst detectDefaults = {\n  extension: {\n    type: ExtensionType.DetectionParser,\n    priority: -1\n  },\n  test: () => Promise.resolve(true),\n  add: async (formats) => [...formats, ...imageFormats],\n  remove: async (formats) => formats.filter((f) => !imageFormats.includes(f))\n};\n\nexport { detectDefaults };\n//# sourceMappingURL=detectDefaults.mjs.map\n","\"use strict\";\nconst inWorker = \"WorkerGlobalScope\" in globalThis && globalThis instanceof globalThis.WorkerGlobalScope;\nfunction testVideoFormat(mimeType) {\n  if (inWorker) {\n    return false;\n  }\n  const video = document.createElement(\"video\");\n  return video.canPlayType(mimeType) !== \"\";\n}\n\nexport { testVideoFormat };\n//# sourceMappingURL=testVideoFormat.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { testVideoFormat } from '../utils/testVideoFormat.mjs';\n\n\"use strict\";\nconst detectMp4 = {\n  extension: {\n    type: ExtensionType.DetectionParser,\n    priority: 0\n  },\n  test: async () => testVideoFormat(\"video/mp4\"),\n  add: async (formats) => [...formats, \"mp4\", \"m4v\"],\n  remove: async (formats) => formats.filter((f) => f !== \"mp4\" && f !== \"m4v\")\n};\n\nexport { detectMp4 };\n//# sourceMappingURL=detectMp4.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { testVideoFormat } from '../utils/testVideoFormat.mjs';\n\n\"use strict\";\nconst detectOgv = {\n  extension: {\n    type: ExtensionType.DetectionParser,\n    priority: 0\n  },\n  test: async () => testVideoFormat(\"video/ogg\"),\n  add: async (formats) => [...formats, \"ogv\"],\n  remove: async (formats) => formats.filter((f) => f !== \"ogv\")\n};\n\nexport { detectOgv };\n//# sourceMappingURL=detectOgv.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { testVideoFormat } from '../utils/testVideoFormat.mjs';\n\n\"use strict\";\nconst detectWebm = {\n  extension: {\n    type: ExtensionType.DetectionParser,\n    priority: 0\n  },\n  test: async () => testVideoFormat(\"video/webm\"),\n  add: async (formats) => [...formats, \"webm\"],\n  remove: async (formats) => formats.filter((f) => f !== \"webm\")\n};\n\nexport { detectWebm };\n//# sourceMappingURL=detectWebm.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { testImageFormat } from '../utils/testImageFormat.mjs';\n\n\"use strict\";\nconst detectWebp = {\n  extension: {\n    type: ExtensionType.DetectionParser,\n    priority: 0\n  },\n  test: async () => testImageFormat(\n    \"data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=\"\n  ),\n  add: async (formats) => [...formats, \"webp\"],\n  remove: async (formats) => formats.filter((f) => f !== \"webp\")\n};\n\nexport { detectWebp };\n//# sourceMappingURL=detectWebp.mjs.map\n","import { warn } from '../../utils/logging/warn.mjs';\nimport { path } from '../../utils/path.mjs';\nimport { convertToList } from '../utils/convertToList.mjs';\nimport { isSingleItem } from '../utils/isSingleItem.mjs';\n\n\"use strict\";\nclass Loader {\n  constructor() {\n    this._parsers = [];\n    this._parsersValidated = false;\n    /**\n     * All loader parsers registered\n     * @type {assets.LoaderParser[]}\n     */\n    this.parsers = new Proxy(this._parsers, {\n      set: (target, key, value) => {\n        this._parsersValidated = false;\n        target[key] = value;\n        return true;\n      }\n    });\n    /** Cache loading promises that ae currently active */\n    this.promiseCache = {};\n  }\n  /** function used for testing */\n  reset() {\n    this._parsersValidated = false;\n    this.promiseCache = {};\n  }\n  /**\n   * Used internally to generate a promise for the asset to be loaded.\n   * @param url - The URL to be loaded\n   * @param data - any custom additional information relevant to the asset being loaded\n   * @returns - a promise that will resolve to an Asset for example a Texture of a JSON object\n   */\n  _getLoadPromiseAndParser(url, data) {\n    const result = {\n      promise: null,\n      parser: null\n    };\n    result.promise = (async () => {\n      let asset = null;\n      let parser = null;\n      if (data.loadParser) {\n        parser = this._parserHash[data.loadParser];\n        if (!parser) {\n          warn(`[Assets] specified load parser \"${data.loadParser}\" not found while loading ${url}`);\n        }\n      }\n      if (!parser) {\n        for (let i = 0; i < this.parsers.length; i++) {\n          const parserX = this.parsers[i];\n          if (parserX.load && parserX.test?.(url, data, this)) {\n            parser = parserX;\n            break;\n          }\n        }\n        if (!parser) {\n          warn(`[Assets] ${url} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`);\n          return null;\n        }\n      }\n      asset = await parser.load(url, data, this);\n      result.parser = parser;\n      for (let i = 0; i < this.parsers.length; i++) {\n        const parser2 = this.parsers[i];\n        if (parser2.parse) {\n          if (parser2.parse && await parser2.testParse?.(asset, data, this)) {\n            asset = await parser2.parse(asset, data, this) || asset;\n            result.parser = parser2;\n          }\n        }\n      }\n      return asset;\n    })();\n    return result;\n  }\n  async load(assetsToLoadIn, onProgress) {\n    if (!this._parsersValidated) {\n      this._validateParsers();\n    }\n    let count = 0;\n    const assets = {};\n    const singleAsset = isSingleItem(assetsToLoadIn);\n    const assetsToLoad = convertToList(assetsToLoadIn, (item) => ({\n      alias: [item],\n      src: item,\n      data: {}\n    }));\n    const total = assetsToLoad.length;\n    const promises = assetsToLoad.map(async (asset) => {\n      const url = path.toAbsolute(asset.src);\n      if (!assets[asset.src]) {\n        try {\n          if (!this.promiseCache[url]) {\n            this.promiseCache[url] = this._getLoadPromiseAndParser(url, asset);\n          }\n          assets[asset.src] = await this.promiseCache[url].promise;\n          if (onProgress)\n            onProgress(++count / total);\n        } catch (e) {\n          delete this.promiseCache[url];\n          delete assets[asset.src];\n          throw new Error(`[Loader.load] Failed to load ${url}.\n${e}`);\n        }\n      }\n    });\n    await Promise.all(promises);\n    return singleAsset ? assets[assetsToLoad[0].src] : assets;\n  }\n  /**\n   * Unloads one or more assets. Any unloaded assets will be destroyed, freeing up memory for your app.\n   * The parser that created the asset, will be the one that unloads it.\n   * @example\n   * // Single asset:\n   * const asset = await Loader.load('cool.png');\n   *\n   * await Loader.unload('cool.png');\n   *\n   * console.log(asset.destroyed); // true\n   * @param assetsToUnloadIn - urls that you want to unload, or a single one!\n   */\n  async unload(assetsToUnloadIn) {\n    const assetsToUnload = convertToList(assetsToUnloadIn, (item) => ({\n      alias: [item],\n      src: item\n    }));\n    const promises = assetsToUnload.map(async (asset) => {\n      const url = path.toAbsolute(asset.src);\n      const loadPromise = this.promiseCache[url];\n      if (loadPromise) {\n        const loadedAsset = await loadPromise.promise;\n        delete this.promiseCache[url];\n        await loadPromise.parser?.unload?.(loadedAsset, asset, this);\n      }\n    });\n    await Promise.all(promises);\n  }\n  /** validates our parsers, right now it only checks for name conflicts but we can add more here as required! */\n  _validateParsers() {\n    this._parsersValidated = true;\n    this._parserHash = this._parsers.filter((parser) => parser.name).reduce((hash, parser) => {\n      if (!parser.name) {\n        warn(`[Assets] loadParser should have a name`);\n      } else if (hash[parser.name]) {\n        warn(`[Assets] loadParser name conflict \"${parser.name}\"`);\n      }\n      return { ...hash, [parser.name]: parser };\n    }, {});\n  }\n}\n\nexport { Loader };\n//# sourceMappingURL=Loader.mjs.map\n","\"use strict\";\nfunction checkDataUrl(url, mimes) {\n  if (Array.isArray(mimes)) {\n    for (const mime of mimes) {\n      if (url.startsWith(`data:${mime}`))\n        return true;\n    }\n    return false;\n  }\n  return url.startsWith(`data:${mimes}`);\n}\n\nexport { checkDataUrl };\n//# sourceMappingURL=checkDataUrl.mjs.map\n","import { path } from '../../utils/path.mjs';\n\n\"use strict\";\nfunction checkExtension(url, extension) {\n  const tempURL = url.split(\"?\")[0];\n  const ext = path.extname(tempURL).toLowerCase();\n  if (Array.isArray(extension)) {\n    return extension.includes(ext);\n  }\n  return ext === extension;\n}\n\nexport { checkExtension };\n//# sourceMappingURL=checkExtension.mjs.map\n","import { DOMAdapter } from '../../../environment/adapter.mjs';\nimport { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { checkDataUrl } from '../../utils/checkDataUrl.mjs';\nimport { checkExtension } from '../../utils/checkExtension.mjs';\nimport { LoaderParserPriority } from './LoaderParser.mjs';\n\n\"use strict\";\nconst validJSONExtension = \".json\";\nconst validJSONMIME = \"application/json\";\nconst loadJson = {\n  extension: {\n    type: ExtensionType.LoadParser,\n    priority: LoaderParserPriority.Low\n  },\n  name: \"loadJson\",\n  test(url) {\n    return checkDataUrl(url, validJSONMIME) || checkExtension(url, validJSONExtension);\n  },\n  async load(url) {\n    const response = await DOMAdapter.get().fetch(url);\n    const json = await response.json();\n    return json;\n  }\n};\n\nexport { loadJson };\n//# sourceMappingURL=loadJson.mjs.map\n","import { DOMAdapter } from '../../../environment/adapter.mjs';\nimport { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { checkDataUrl } from '../../utils/checkDataUrl.mjs';\nimport { checkExtension } from '../../utils/checkExtension.mjs';\nimport { LoaderParserPriority } from './LoaderParser.mjs';\n\n\"use strict\";\nconst validTXTExtension = \".txt\";\nconst validTXTMIME = \"text/plain\";\nconst loadTxt = {\n  name: \"loadTxt\",\n  extension: {\n    type: ExtensionType.LoadParser,\n    priority: LoaderParserPriority.Low,\n    name: \"loadTxt\"\n  },\n  test(url) {\n    return checkDataUrl(url, validTXTMIME) || checkExtension(url, validTXTExtension);\n  },\n  async load(url) {\n    const response = await DOMAdapter.get().fetch(url);\n    const txt = await response.text();\n    return txt;\n  }\n};\n\nexport { loadTxt };\n//# sourceMappingURL=loadTxt.mjs.map\n","import { DOMAdapter } from '../../../environment/adapter.mjs';\nimport { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { warn } from '../../../utils/logging/warn.mjs';\nimport { path } from '../../../utils/path.mjs';\nimport { Cache } from '../../cache/Cache.mjs';\nimport { checkDataUrl } from '../../utils/checkDataUrl.mjs';\nimport { checkExtension } from '../../utils/checkExtension.mjs';\nimport { LoaderParserPriority } from './LoaderParser.mjs';\n\n\"use strict\";\nconst validWeights = [\n  \"normal\",\n  \"bold\",\n  \"100\",\n  \"200\",\n  \"300\",\n  \"400\",\n  \"500\",\n  \"600\",\n  \"700\",\n  \"800\",\n  \"900\"\n];\nconst validFontExtensions = [\".ttf\", \".otf\", \".woff\", \".woff2\"];\nconst validFontMIMEs = [\n  \"font/ttf\",\n  \"font/otf\",\n  \"font/woff\",\n  \"font/woff2\"\n];\nconst CSS_IDENT_TOKEN_REGEX = /^(--|-?[A-Z_])[0-9A-Z_-]*$/i;\nfunction getFontFamilyName(url) {\n  const ext = path.extname(url);\n  const name = path.basename(url, ext);\n  const nameWithSpaces = name.replace(/(-|_)/g, \" \");\n  const nameTokens = nameWithSpaces.toLowerCase().split(\" \").map((word) => word.charAt(0).toUpperCase() + word.slice(1));\n  let valid = nameTokens.length > 0;\n  for (const token of nameTokens) {\n    if (!token.match(CSS_IDENT_TOKEN_REGEX)) {\n      valid = false;\n      break;\n    }\n  }\n  let fontFamilyName = nameTokens.join(\" \");\n  if (!valid) {\n    fontFamilyName = `\"${fontFamilyName.replace(/[\\\\\"]/g, \"\\\\$&\")}\"`;\n  }\n  return fontFamilyName;\n}\nconst validURICharactersRegex = /^[0-9A-Za-z%:/?#\\[\\]@!\\$&'()\\*\\+,;=\\-._~]*$/;\nfunction encodeURIWhenNeeded(uri) {\n  if (validURICharactersRegex.test(uri)) {\n    return uri;\n  }\n  return encodeURI(uri);\n}\nconst loadWebFont = {\n  extension: {\n    type: ExtensionType.LoadParser,\n    priority: LoaderParserPriority.Low\n  },\n  name: \"loadWebFont\",\n  test(url) {\n    return checkDataUrl(url, validFontMIMEs) || checkExtension(url, validFontExtensions);\n  },\n  async load(url, options) {\n    const fonts = DOMAdapter.get().getFontFaceSet();\n    if (fonts) {\n      const fontFaces = [];\n      const name = options.data?.family ?? getFontFamilyName(url);\n      const weights = options.data?.weights?.filter((weight) => validWeights.includes(weight)) ?? [\"normal\"];\n      const data = options.data ?? {};\n      for (let i = 0; i < weights.length; i++) {\n        const weight = weights[i];\n        const font = new FontFace(name, `url(${encodeURIWhenNeeded(url)})`, {\n          ...data,\n          weight\n        });\n        await font.load();\n        fonts.add(font);\n        fontFaces.push(font);\n      }\n      Cache.set(`${name}-and-url`, {\n        url,\n        fontFaces\n      });\n      return fontFaces.length === 1 ? fontFaces[0] : fontFaces;\n    }\n    warn(\"[loadWebFont] FontFace API is not supported. Skipping loading font\");\n    return null;\n  },\n  unload(font) {\n    (Array.isArray(font) ? font : [font]).forEach((t) => {\n      Cache.remove(t.family);\n      DOMAdapter.get().getFontFaceSet().delete(t);\n    });\n  }\n};\n\nexport { getFontFamilyName, loadWebFont };\n//# sourceMappingURL=loadWebFont.mjs.map\n","import { Resolver } from '../../assets/resolver/Resolver.mjs';\n\n\"use strict\";\nfunction getResolutionOfUrl(url, defaultValue = 1) {\n  const resolution = Resolver.RETINA_PREFIX?.exec(url);\n  if (resolution) {\n    return parseFloat(resolution[1]);\n  }\n  return defaultValue;\n}\n\nexport { getResolutionOfUrl };\n//# sourceMappingURL=getResolutionOfUrl.mjs.map\n","import { Texture } from '../../../../../rendering/renderers/shared/texture/Texture.mjs';\nimport { warn } from '../../../../../utils/logging/warn.mjs';\nimport { Cache } from '../../../../cache/Cache.mjs';\n\n\"use strict\";\nfunction createTexture(source, loader, url) {\n  source.label = url;\n  source._sourceOrigin = url;\n  const texture = new Texture({\n    source,\n    label: url\n  });\n  const unload = () => {\n    delete loader.promiseCache[url];\n    if (Cache.has(url)) {\n      Cache.remove(url);\n    }\n  };\n  texture.source.once(\"destroy\", () => {\n    if (loader.promiseCache[url]) {\n      warn(\"[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource.\");\n      unload();\n    }\n  });\n  texture.once(\"destroy\", () => {\n    if (!source.destroyed) {\n      warn(\"[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture.\");\n      unload();\n    }\n  });\n  return texture;\n}\n\nexport { createTexture };\n//# sourceMappingURL=createTexture.mjs.map\n","import { DOMAdapter } from '../../../../environment/adapter.mjs';\nimport { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { ImageSource } from '../../../../rendering/renderers/shared/texture/sources/ImageSource.mjs';\nimport { GraphicsContext } from '../../../../scene/graphics/shared/GraphicsContext.mjs';\nimport { getResolutionOfUrl } from '../../../../utils/network/getResolutionOfUrl.mjs';\nimport { checkDataUrl } from '../../../utils/checkDataUrl.mjs';\nimport { checkExtension } from '../../../utils/checkExtension.mjs';\nimport { LoaderParserPriority } from '../LoaderParser.mjs';\nimport { createTexture } from './utils/createTexture.mjs';\n\n\"use strict\";\nconst validSVGExtension = \".svg\";\nconst validSVGMIME = \"image/svg+xml\";\nconst loadSvg = {\n  extension: {\n    type: ExtensionType.LoadParser,\n    priority: LoaderParserPriority.Low,\n    name: \"loadSVG\"\n  },\n  name: \"loadSVG\",\n  config: {\n    crossOrigin: \"anonymous\",\n    parseAsGraphicsContext: false\n  },\n  test(url) {\n    return checkDataUrl(url, validSVGMIME) || checkExtension(url, validSVGExtension);\n  },\n  async load(url, asset, loader) {\n    if (asset.data.parseAsGraphicsContext ?? this.config.parseAsGraphicsContext) {\n      return loadAsGraphics(url);\n    }\n    return loadAsTexture(url, asset, loader, this.config.crossOrigin);\n  },\n  unload(asset) {\n    asset.destroy(true);\n  }\n};\nasync function loadAsTexture(url, asset, loader, crossOrigin) {\n  const response = await DOMAdapter.get().fetch(url);\n  const blob = await response.blob();\n  const blobUrl = URL.createObjectURL(blob);\n  const image = new Image();\n  image.src = blobUrl;\n  image.crossOrigin = crossOrigin;\n  await image.decode();\n  URL.revokeObjectURL(blobUrl);\n  const canvas = document.createElement(\"canvas\");\n  const context = canvas.getContext(\"2d\");\n  const resolution = asset.data?.resolution || getResolutionOfUrl(url);\n  const width = asset.data?.width ?? image.width;\n  const height = asset.data?.height ?? image.height;\n  canvas.width = width * resolution;\n  canvas.height = height * resolution;\n  context.drawImage(image, 0, 0, width * resolution, height * resolution);\n  const { parseAsGraphicsContext: _p, ...rest } = asset.data;\n  const base = new ImageSource({\n    resource: canvas,\n    alphaMode: \"premultiply-alpha-on-upload\",\n    resolution,\n    ...rest\n  });\n  return createTexture(base, loader, url);\n}\nasync function loadAsGraphics(url) {\n  const response = await DOMAdapter.get().fetch(url);\n  const svgSource = await response.text();\n  const context = new GraphicsContext();\n  context.svg(svgSource);\n  return context;\n}\n\nexport { loadSvg };\n//# sourceMappingURL=loadSVG.mjs.map\n","const WORKER_CODE = \"(function () {\\n    'use strict';\\n\\n    const WHITE_PNG = \\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=\\\";\\n    async function checkImageBitmap() {\\n      try {\\n        if (typeof createImageBitmap !== \\\"function\\\")\\n          return false;\\n        const response = await fetch(WHITE_PNG);\\n        const imageBlob = await response.blob();\\n        const imageBitmap = await createImageBitmap(imageBlob);\\n        return imageBitmap.width === 1 && imageBitmap.height === 1;\\n      } catch (e) {\\n        return false;\\n      }\\n    }\\n    void checkImageBitmap().then((result) => {\\n      self.postMessage(result);\\n    });\\n\\n})();\\n\";\nlet WORKER_URL = null;\nclass WorkerInstance\n{\n    constructor()\n    {\n        if (!WORKER_URL)\n        {\n            WORKER_URL = URL.createObjectURL(new Blob([WORKER_CODE], { type: 'application/javascript' }));\n        }\n        this.worker = new Worker(WORKER_URL);\n    }\n}\nWorkerInstance.revokeObjectURL = function revokeObjectURL()\n{\n    if (WORKER_URL)\n    {\n        URL.revokeObjectURL(WORKER_URL);\n        WORKER_URL = null;\n    }\n};\n\nexport { WorkerInstance as default };\n//# sourceMappingURL=checkImageBitmap.worker.mjs.map\n","const WORKER_CODE = \"(function () {\\n    'use strict';\\n\\n    async function loadImageBitmap(url) {\\n      const response = await fetch(url);\\n      if (!response.ok) {\\n        throw new Error(`[WorkerManager.loadImageBitmap] Failed to fetch ${url}: ${response.status} ${response.statusText}`);\\n      }\\n      const imageBlob = await response.blob();\\n      const imageBitmap = await createImageBitmap(imageBlob);\\n      return imageBitmap;\\n    }\\n    self.onmessage = async (event) => {\\n      try {\\n        const imageBitmap = await loadImageBitmap(event.data.data[0]);\\n        self.postMessage({\\n          data: imageBitmap,\\n          uuid: event.data.uuid,\\n          id: event.data.id\\n        }, [imageBitmap]);\\n      } catch (e) {\\n        self.postMessage({\\n          error: e,\\n          uuid: event.data.uuid,\\n          id: event.data.id\\n        });\\n      }\\n    };\\n\\n})();\\n\";\nlet WORKER_URL = null;\nclass WorkerInstance\n{\n    constructor()\n    {\n        if (!WORKER_URL)\n        {\n            WORKER_URL = URL.createObjectURL(new Blob([WORKER_CODE], { type: 'application/javascript' }));\n        }\n        this.worker = new Worker(WORKER_URL);\n    }\n}\nWorkerInstance.revokeObjectURL = function revokeObjectURL()\n{\n    if (WORKER_URL)\n    {\n        URL.revokeObjectURL(WORKER_URL);\n        WORKER_URL = null;\n    }\n};\n\nexport { WorkerInstance as default };\n//# sourceMappingURL=loadImageBitmap.worker.mjs.map\n","import WorkerInstance from '../../../_virtual/checkImageBitmap.worker.mjs';\nimport WorkerInstance$1 from '../../../_virtual/loadImageBitmap.worker.mjs';\n\n\"use strict\";\nlet UUID = 0;\nlet MAX_WORKERS;\nclass WorkerManagerClass {\n  constructor() {\n    this._initialized = false;\n    this._createdWorkers = 0;\n    this._workerPool = [];\n    this._queue = [];\n    this._resolveHash = {};\n  }\n  isImageBitmapSupported() {\n    if (this._isImageBitmapSupported !== void 0)\n      return this._isImageBitmapSupported;\n    this._isImageBitmapSupported = new Promise((resolve) => {\n      const { worker } = new WorkerInstance();\n      worker.addEventListener(\"message\", (event) => {\n        worker.terminate();\n        WorkerInstance.revokeObjectURL();\n        resolve(event.data);\n      });\n    });\n    return this._isImageBitmapSupported;\n  }\n  loadImageBitmap(src) {\n    return this._run(\"loadImageBitmap\", [src]);\n  }\n  async _initWorkers() {\n    if (this._initialized)\n      return;\n    this._initialized = true;\n  }\n  _getWorker() {\n    if (MAX_WORKERS === void 0) {\n      MAX_WORKERS = navigator.hardwareConcurrency || 4;\n    }\n    let worker = this._workerPool.pop();\n    if (!worker && this._createdWorkers < MAX_WORKERS) {\n      this._createdWorkers++;\n      worker = new WorkerInstance$1().worker;\n      worker.addEventListener(\"message\", (event) => {\n        this._complete(event.data);\n        this._returnWorker(event.target);\n        this._next();\n      });\n    }\n    return worker;\n  }\n  _returnWorker(worker) {\n    this._workerPool.push(worker);\n  }\n  _complete(data) {\n    if (data.error !== void 0) {\n      this._resolveHash[data.uuid].reject(data.error);\n    } else {\n      this._resolveHash[data.uuid].resolve(data.data);\n    }\n    this._resolveHash[data.uuid] = null;\n  }\n  async _run(id, args) {\n    await this._initWorkers();\n    const promise = new Promise((resolve, reject) => {\n      this._queue.push({ id, arguments: args, resolve, reject });\n    });\n    this._next();\n    return promise;\n  }\n  _next() {\n    if (!this._queue.length)\n      return;\n    const worker = this._getWorker();\n    if (!worker) {\n      return;\n    }\n    const toDo = this._queue.pop();\n    const id = toDo.id;\n    this._resolveHash[UUID] = { resolve: toDo.resolve, reject: toDo.reject };\n    worker.postMessage({\n      data: toDo.arguments,\n      uuid: UUID++,\n      id\n    });\n  }\n}\nconst WorkerManager = new WorkerManagerClass();\n\nexport { WorkerManager };\n//# sourceMappingURL=WorkerManager.mjs.map\n","import { DOMAdapter } from '../../../../environment/adapter.mjs';\nimport { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { ImageSource } from '../../../../rendering/renderers/shared/texture/sources/ImageSource.mjs';\nimport { getResolutionOfUrl } from '../../../../utils/network/getResolutionOfUrl.mjs';\nimport { checkDataUrl } from '../../../utils/checkDataUrl.mjs';\nimport { checkExtension } from '../../../utils/checkExtension.mjs';\nimport { WorkerManager } from '../../workers/WorkerManager.mjs';\nimport { LoaderParserPriority } from '../LoaderParser.mjs';\nimport { createTexture } from './utils/createTexture.mjs';\n\n\"use strict\";\nconst validImageExtensions = [\".jpeg\", \".jpg\", \".png\", \".webp\", \".avif\"];\nconst validImageMIMEs = [\n  \"image/jpeg\",\n  \"image/png\",\n  \"image/webp\",\n  \"image/avif\"\n];\nasync function loadImageBitmap(url) {\n  const response = await DOMAdapter.get().fetch(url);\n  if (!response.ok) {\n    throw new Error(`[loadImageBitmap] Failed to fetch ${url}: ${response.status} ${response.statusText}`);\n  }\n  const imageBlob = await response.blob();\n  const imageBitmap = await createImageBitmap(imageBlob);\n  return imageBitmap;\n}\nconst loadTextures = {\n  name: \"loadTextures\",\n  extension: {\n    type: ExtensionType.LoadParser,\n    priority: LoaderParserPriority.High,\n    name: \"loadTextures\"\n  },\n  config: {\n    preferWorkers: true,\n    preferCreateImageBitmap: true,\n    crossOrigin: \"anonymous\"\n  },\n  test(url) {\n    return checkDataUrl(url, validImageMIMEs) || checkExtension(url, validImageExtensions);\n  },\n  async load(url, asset, loader) {\n    let src = null;\n    if (globalThis.createImageBitmap && this.config.preferCreateImageBitmap) {\n      if (this.config.preferWorkers && await WorkerManager.isImageBitmapSupported()) {\n        src = await WorkerManager.loadImageBitmap(url);\n      } else {\n        src = await loadImageBitmap(url);\n      }\n    } else {\n      src = await new Promise((resolve) => {\n        src = new Image();\n        src.crossOrigin = this.config.crossOrigin;\n        src.src = url;\n        if (src.complete) {\n          resolve(src);\n        } else {\n          src.onload = () => {\n            resolve(src);\n          };\n        }\n      });\n    }\n    const base = new ImageSource({\n      resource: src,\n      alphaMode: \"premultiply-alpha-on-upload\",\n      resolution: asset.data?.resolution || getResolutionOfUrl(url),\n      ...asset.data\n    });\n    return createTexture(base, loader, url);\n  },\n  unload(texture) {\n    texture.destroy(true);\n  }\n};\n\nexport { loadImageBitmap, loadTextures };\n//# sourceMappingURL=loadTextures.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { VideoSource } from '../../../../rendering/renderers/shared/texture/sources/VideoSource.mjs';\nimport { detectVideoAlphaMode } from '../../../../utils/browser/detectVideoAlphaMode.mjs';\nimport { getResolutionOfUrl } from '../../../../utils/network/getResolutionOfUrl.mjs';\nimport { checkDataUrl } from '../../../utils/checkDataUrl.mjs';\nimport { checkExtension } from '../../../utils/checkExtension.mjs';\nimport { createTexture } from './utils/createTexture.mjs';\n\n\"use strict\";\nconst validVideoExtensions = [\".mp4\", \".m4v\", \".webm\", \".ogg\", \".ogv\", \".h264\", \".avi\", \".mov\"];\nconst validVideoMIMEs = validVideoExtensions.map((ext) => `video/${ext.substring(1)}`);\nfunction crossOrigin(element, url, crossorigin) {\n  if (crossorigin === void 0 && !url.startsWith(\"data:\")) {\n    element.crossOrigin = determineCrossOrigin(url);\n  } else if (crossorigin !== false) {\n    element.crossOrigin = typeof crossorigin === \"string\" ? crossorigin : \"anonymous\";\n  }\n}\nfunction preloadVideo(element) {\n  return new Promise((resolve, reject) => {\n    element.addEventListener(\"canplaythrough\", loaded);\n    element.addEventListener(\"error\", error);\n    element.load();\n    function loaded() {\n      cleanup();\n      resolve();\n    }\n    function error(err) {\n      cleanup();\n      reject(err);\n    }\n    function cleanup() {\n      element.removeEventListener(\"canplaythrough\", loaded);\n      element.removeEventListener(\"error\", error);\n    }\n  });\n}\nfunction determineCrossOrigin(url, loc = globalThis.location) {\n  if (url.startsWith(\"data:\")) {\n    return \"\";\n  }\n  loc = loc || globalThis.location;\n  const parsedUrl = new URL(url, document.baseURI);\n  if (parsedUrl.hostname !== loc.hostname || parsedUrl.port !== loc.port || parsedUrl.protocol !== loc.protocol) {\n    return \"anonymous\";\n  }\n  return \"\";\n}\nconst loadVideoTextures = {\n  name: \"loadVideo\",\n  extension: {\n    type: ExtensionType.LoadParser,\n    name: \"loadVideo\"\n  },\n  test(url) {\n    const isValidDataUrl = checkDataUrl(url, validVideoMIMEs);\n    const isValidExtension = checkExtension(url, validVideoExtensions);\n    return isValidDataUrl || isValidExtension;\n  },\n  async load(url, asset, loader) {\n    const options = {\n      ...VideoSource.defaultOptions,\n      resolution: asset.data?.resolution || getResolutionOfUrl(url),\n      alphaMode: asset.data?.alphaMode || await detectVideoAlphaMode(),\n      ...asset.data\n    };\n    const videoElement = document.createElement(\"video\");\n    const attributeMap = {\n      preload: options.autoLoad !== false ? \"auto\" : void 0,\n      \"webkit-playsinline\": options.playsinline !== false ? \"\" : void 0,\n      playsinline: options.playsinline !== false ? \"\" : void 0,\n      muted: options.muted === true ? \"\" : void 0,\n      loop: options.loop === true ? \"\" : void 0,\n      autoplay: options.autoPlay !== false ? \"\" : void 0\n    };\n    Object.keys(attributeMap).forEach((key) => {\n      const value = attributeMap[key];\n      if (value !== void 0)\n        videoElement.setAttribute(key, value);\n    });\n    if (options.muted === true) {\n      videoElement.muted = true;\n    }\n    crossOrigin(videoElement, url, options.crossorigin);\n    const sourceElement = document.createElement(\"source\");\n    let mime;\n    if (url.startsWith(\"data:\")) {\n      mime = url.slice(5, url.indexOf(\";\"));\n    } else if (!url.startsWith(\"blob:\")) {\n      const ext = url.split(\"?\")[0].slice(url.lastIndexOf(\".\") + 1).toLowerCase();\n      mime = VideoSource.MIME_TYPES[ext] || `video/${ext}`;\n    }\n    sourceElement.src = url;\n    if (mime) {\n      sourceElement.type = mime;\n    }\n    return new Promise((resolve) => {\n      const onCanPlay = async () => {\n        const base = new VideoSource({ ...options, resource: videoElement });\n        videoElement.removeEventListener(\"canplay\", onCanPlay);\n        if (asset.data.preload) {\n          await preloadVideo(videoElement);\n        }\n        resolve(createTexture(base, loader, url));\n      };\n      videoElement.addEventListener(\"canplay\", onCanPlay);\n      videoElement.appendChild(sourceElement);\n    });\n  },\n  unload(texture) {\n    texture.destroy(true);\n  }\n};\n\nexport { crossOrigin, determineCrossOrigin, loadVideoTextures, preloadVideo };\n//# sourceMappingURL=loadVideoTextures.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { loadTextures } from '../../loader/parsers/textures/loadTextures.mjs';\nimport { Resolver } from '../Resolver.mjs';\n\n\"use strict\";\nconst resolveTextureUrl = {\n  extension: {\n    type: ExtensionType.ResolveParser,\n    name: \"resolveTexture\"\n  },\n  test: loadTextures.test,\n  parse: (value) => ({\n    resolution: parseFloat(Resolver.RETINA_PREFIX.exec(value)?.[1] ?? \"1\"),\n    format: value.split(\".\").pop(),\n    src: value\n  })\n};\n\nexport { resolveTextureUrl };\n//# sourceMappingURL=resolveTextureUrl.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { Resolver } from '../Resolver.mjs';\nimport { resolveTextureUrl } from './resolveTextureUrl.mjs';\n\n\"use strict\";\nconst resolveJsonUrl = {\n  extension: {\n    type: ExtensionType.ResolveParser,\n    priority: -2,\n    name: \"resolveJson\"\n  },\n  test: (value) => Resolver.RETINA_PREFIX.test(value) && value.endsWith(\".json\"),\n  parse: resolveTextureUrl.parse\n};\n\nexport { resolveJsonUrl };\n//# sourceMappingURL=resolveJsonUrl.mjs.map\n","import { extensions, ExtensionType } from '../extensions/Extensions.mjs';\nimport { loadBitmapFont, bitmapFontCachePlugin } from '../scene/text-bitmap/asset/loadBitmapFont.mjs';\nimport { warn } from '../utils/logging/warn.mjs';\nimport { BackgroundLoader } from './BackgroundLoader.mjs';\nimport { Cache } from './cache/Cache.mjs';\nimport { cacheTextureArray } from './cache/parsers/cacheTextureArray.mjs';\nimport { detectAvif } from './detections/parsers/detectAvif.mjs';\nimport { detectDefaults } from './detections/parsers/detectDefaults.mjs';\nimport { detectMp4 } from './detections/parsers/detectMp4.mjs';\nimport { detectOgv } from './detections/parsers/detectOgv.mjs';\nimport { detectWebm } from './detections/parsers/detectWebm.mjs';\nimport { detectWebp } from './detections/parsers/detectWebp.mjs';\nimport { Loader } from './loader/Loader.mjs';\nimport { loadJson } from './loader/parsers/loadJson.mjs';\nimport { loadTxt } from './loader/parsers/loadTxt.mjs';\nimport { loadWebFont } from './loader/parsers/loadWebFont.mjs';\nimport { loadSvg } from './loader/parsers/textures/loadSVG.mjs';\nimport { loadTextures } from './loader/parsers/textures/loadTextures.mjs';\nimport { loadVideoTextures } from './loader/parsers/textures/loadVideoTextures.mjs';\nimport { resolveJsonUrl } from './resolver/parsers/resolveJsonUrl.mjs';\nimport { resolveTextureUrl } from './resolver/parsers/resolveTextureUrl.mjs';\nimport { Resolver } from './resolver/Resolver.mjs';\nimport { convertToList } from './utils/convertToList.mjs';\nimport { isSingleItem } from './utils/isSingleItem.mjs';\n\n\"use strict\";\nclass AssetsClass {\n  constructor() {\n    this._detections = [];\n    this._initialized = false;\n    this.resolver = new Resolver();\n    this.loader = new Loader();\n    this.cache = Cache;\n    this._backgroundLoader = new BackgroundLoader(this.loader);\n    this._backgroundLoader.active = true;\n    this.reset();\n  }\n  /**\n   * Best practice is to call this function before any loading commences\n   * Initiating is the best time to add any customization to the way things are loaded.\n   *\n   * you do not need to call this for the Assets class to work, only if you want to set any initial properties\n   * @param options - options to initialize the Assets manager with\n   */\n  async init(options = {}) {\n    if (this._initialized) {\n      warn(\"[Assets]AssetManager already initialized, did you load before calling this Assets.init()?\");\n      return;\n    }\n    this._initialized = true;\n    if (options.defaultSearchParams) {\n      this.resolver.setDefaultSearchParams(options.defaultSearchParams);\n    }\n    if (options.basePath) {\n      this.resolver.basePath = options.basePath;\n    }\n    if (options.bundleIdentifier) {\n      this.resolver.setBundleIdentifier(options.bundleIdentifier);\n    }\n    if (options.manifest) {\n      let manifest = options.manifest;\n      if (typeof manifest === \"string\") {\n        manifest = await this.load(manifest);\n      }\n      this.resolver.addManifest(manifest);\n    }\n    const resolutionPref = options.texturePreference?.resolution ?? 1;\n    const resolution = typeof resolutionPref === \"number\" ? [resolutionPref] : resolutionPref;\n    const formats = await this._detectFormats({\n      preferredFormats: options.texturePreference?.format,\n      skipDetections: options.skipDetections,\n      detections: this._detections\n    });\n    this.resolver.prefer({\n      params: {\n        format: formats,\n        resolution\n      }\n    });\n    if (options.preferences) {\n      this.setPreferences(options.preferences);\n    }\n  }\n  /**\n   * Allows you to specify how to resolve any assets load requests.\n   * There are a few ways to add things here as shown below:\n   * @example\n   * import { Assets } from 'pixi.js';\n   *\n   * // Simple\n   * Assets.add({alias: 'bunnyBooBoo', src: 'bunny.png'});\n   * const bunny = await Assets.load('bunnyBooBoo');\n   *\n   * // Multiple keys:\n   * Assets.add({alias: ['burger', 'chicken'], src: 'bunny.png'});\n   *\n   * const bunny = await Assets.load('burger');\n   * const bunny2 = await Assets.load('chicken');\n   *\n   * // passing options to to the object\n   * Assets.add({\n   *     alias: 'bunnyBooBooSmooth',\n   *     src: 'bunny{png,webp}',\n   *     data: { scaleMode: SCALE_MODES.NEAREST }, // Base texture options\n   * });\n   *\n   * // Multiple assets\n   *\n   * // The following all do the same thing:\n   *\n   * Assets.add({alias: 'bunnyBooBoo', src: 'bunny{png,webp}'});\n   *\n   * Assets.add({\n   *     alias: 'bunnyBooBoo',\n   *     src: [\n   *         'bunny.png',\n   *         'bunny.webp',\n   *    ],\n   * });\n   *\n   * const bunny = await Assets.load('bunnyBooBoo'); // Will try to load WebP if available\n   * @param assets - the unresolved assets to add to the resolver\n   */\n  add(assets) {\n    this.resolver.add(assets);\n  }\n  async load(urls, onProgress) {\n    if (!this._initialized) {\n      await this.init();\n    }\n    const singleAsset = isSingleItem(urls);\n    const urlArray = convertToList(urls).map((url) => {\n      if (typeof url !== \"string\") {\n        const aliases = this.resolver.getAlias(url);\n        if (aliases.some((alias) => !this.resolver.hasKey(alias))) {\n          this.add(url);\n        }\n        return Array.isArray(aliases) ? aliases[0] : aliases;\n      }\n      if (!this.resolver.hasKey(url))\n        this.add({ alias: url, src: url });\n      return url;\n    });\n    const resolveResults = this.resolver.resolve(urlArray);\n    const out = await this._mapLoadToResolve(resolveResults, onProgress);\n    return singleAsset ? out[urlArray[0]] : out;\n  }\n  /**\n   * This adds a bundle of assets in one go so that you can load them as a group.\n   * For example you could add a bundle for each screen in you pixi app\n   * @example\n   * import { Assets } from 'pixi.js';\n   *\n   * Assets.addBundle('animals', [\n   *  { alias: 'bunny', src: 'bunny.png' },\n   *  { alias: 'chicken', src: 'chicken.png' },\n   *  { alias: 'thumper', src: 'thumper.png' },\n   * ]);\n   * // or\n   * Assets.addBundle('animals', {\n   *     bunny: 'bunny.png',\n   *     chicken: 'chicken.png',\n   *     thumper: 'thumper.png',\n   * });\n   *\n   * const assets = await Assets.loadBundle('animals');\n   * @param bundleId - the id of the bundle to add\n   * @param assets - a record of the asset or assets that will be chosen from when loading via the specified key\n   */\n  addBundle(bundleId, assets) {\n    this.resolver.addBundle(bundleId, assets);\n  }\n  /**\n   * Bundles are a way to load multiple assets at once.\n   * If a manifest has been provided to the init function then you can load a bundle, or bundles.\n   * you can also add bundles via `addBundle`\n   * @example\n   * import { Assets } from 'pixi.js';\n   *\n   * // Manifest Example\n   * const manifest = {\n   *     bundles: [\n   *         {\n   *             name: 'load-screen',\n   *             assets: [\n   *                 {\n   *                     alias: 'background',\n   *                     src: 'sunset.png',\n   *                 },\n   *                 {\n   *                     alias: 'bar',\n   *                     src: 'load-bar.{png,webp}',\n   *                 },\n   *             ],\n   *         },\n   *         {\n   *             name: 'game-screen',\n   *             assets: [\n   *                 {\n   *                     alias: 'character',\n   *                     src: 'robot.png',\n   *                 },\n   *                 {\n   *                     alias: 'enemy',\n   *                     src: 'bad-guy.png',\n   *                 },\n   *             ],\n   *         },\n   *     ]\n   * };\n   *\n   * await Assets.init({ manifest });\n   *\n   * // Load a bundle...\n   * loadScreenAssets = await Assets.loadBundle('load-screen');\n   * // Load another bundle...\n   * gameScreenAssets = await Assets.loadBundle('game-screen');\n   * @param bundleIds - the bundle id or ids to load\n   * @param onProgress - Optional function that is called when progress on asset loading is made.\n   * The function is passed a single parameter, `progress`, which represents the percentage (0.0 - 1.0)\n   * of the assets loaded. Do not use this function to detect when assets are complete and available,\n   * instead use the Promise returned by this function.\n   * @returns all the bundles assets or a hash of assets for each bundle specified\n   */\n  async loadBundle(bundleIds, onProgress) {\n    if (!this._initialized) {\n      await this.init();\n    }\n    let singleAsset = false;\n    if (typeof bundleIds === \"string\") {\n      singleAsset = true;\n      bundleIds = [bundleIds];\n    }\n    const resolveResults = this.resolver.resolveBundle(bundleIds);\n    const out = {};\n    const keys = Object.keys(resolveResults);\n    let count = 0;\n    let total = 0;\n    const _onProgress = () => {\n      onProgress?.(++count / total);\n    };\n    const promises = keys.map((bundleId) => {\n      const resolveResult = resolveResults[bundleId];\n      total += Object.keys(resolveResult).length;\n      return this._mapLoadToResolve(resolveResult, _onProgress).then((resolveResult2) => {\n        out[bundleId] = resolveResult2;\n      });\n    });\n    await Promise.all(promises);\n    return singleAsset ? out[bundleIds[0]] : out;\n  }\n  /**\n   * Initiate a background load of some assets. It will passively begin to load these assets in the background.\n   * So when you actually come to loading them you will get a promise that resolves to the loaded assets immediately\n   *\n   * An example of this might be that you would background load game assets after your initial load.\n   * then when you got to actually load your game screen assets when a player goes to the game - the loading\n   * would already have stared or may even be complete, saving you having to show an interim load bar.\n   * @example\n   * import { Assets } from 'pixi.js';\n   *\n   * Assets.backgroundLoad('bunny.png');\n   *\n   * // later on in your app...\n   * await Assets.loadBundle('bunny.png'); // Will resolve quicker as loading may have completed!\n   * @param urls - the url / urls you want to background load\n   */\n  async backgroundLoad(urls) {\n    if (!this._initialized) {\n      await this.init();\n    }\n    if (typeof urls === \"string\") {\n      urls = [urls];\n    }\n    const resolveResults = this.resolver.resolve(urls);\n    this._backgroundLoader.add(Object.values(resolveResults));\n  }\n  /**\n   * Initiate a background of a bundle, works exactly like backgroundLoad but for bundles.\n   * this can only be used if the loader has been initiated with a manifest\n   * @example\n   * import { Assets } from 'pixi.js';\n   *\n   * await Assets.init({\n   *     manifest: {\n   *         bundles: [\n   *             {\n   *                 name: 'load-screen',\n   *                 assets: [...],\n   *             },\n   *             ...\n   *         ],\n   *     },\n   * });\n   *\n   * Assets.backgroundLoadBundle('load-screen');\n   *\n   * // Later on in your app...\n   * await Assets.loadBundle('load-screen'); // Will resolve quicker as loading may have completed!\n   * @param bundleIds - the bundleId / bundleIds you want to background load\n   */\n  async backgroundLoadBundle(bundleIds) {\n    if (!this._initialized) {\n      await this.init();\n    }\n    if (typeof bundleIds === \"string\") {\n      bundleIds = [bundleIds];\n    }\n    const resolveResults = this.resolver.resolveBundle(bundleIds);\n    Object.values(resolveResults).forEach((resolveResult) => {\n      this._backgroundLoader.add(Object.values(resolveResult));\n    });\n  }\n  /**\n   * Only intended for development purposes.\n   * This will wipe the resolver and caches.\n   * You will need to reinitialize the Asset\n   */\n  reset() {\n    this.resolver.reset();\n    this.loader.reset();\n    this.cache.reset();\n    this._initialized = false;\n  }\n  get(keys) {\n    if (typeof keys === \"string\") {\n      return Cache.get(keys);\n    }\n    const assets = {};\n    for (let i = 0; i < keys.length; i++) {\n      assets[i] = Cache.get(keys[i]);\n    }\n    return assets;\n  }\n  /**\n   * helper function to map resolved assets back to loaded assets\n   * @param resolveResults - the resolve results from the resolver\n   * @param onProgress - the progress callback\n   */\n  async _mapLoadToResolve(resolveResults, onProgress) {\n    const resolveArray = [...new Set(Object.values(resolveResults))];\n    this._backgroundLoader.active = false;\n    const loadedAssets = await this.loader.load(resolveArray, onProgress);\n    this._backgroundLoader.active = true;\n    const out = {};\n    resolveArray.forEach((resolveResult) => {\n      const asset = loadedAssets[resolveResult.src];\n      const keys = [resolveResult.src];\n      if (resolveResult.alias) {\n        keys.push(...resolveResult.alias);\n      }\n      keys.forEach((key) => {\n        out[key] = asset;\n      });\n      Cache.set(keys, asset);\n    });\n    return out;\n  }\n  /**\n   * Unload an asset or assets. As the Assets class is responsible for creating the assets via the `load` function\n   * this will make sure to destroy any assets and release them from memory.\n   * Once unloaded, you will need to load the asset again.\n   *\n   * Use this to help manage assets if you find that you have a large app and you want to free up memory.\n   *\n   * - it's up to you as the developer to make sure that textures are not actively being used when you unload them,\n   * Pixi won't break but you will end up with missing assets. Not a good look for the user!\n   * @example\n   * import { Assets } from 'pixi.js';\n   *\n   * // Load a URL:\n   * const myImageTexture = await Assets.load('http://some.url.com/image.png'); // => returns a texture\n   *\n   * await Assets.unload('http://some.url.com/image.png')\n   *\n   * // myImageTexture will be destroyed now.\n   *\n   * // Unload multiple assets:\n   * const textures = await Assets.unload(['thumper', 'chicko']);\n   * @param urls - the urls to unload\n   */\n  async unload(urls) {\n    if (!this._initialized) {\n      await this.init();\n    }\n    const urlArray = convertToList(urls).map((url) => typeof url !== \"string\" ? url.src : url);\n    const resolveResults = this.resolver.resolve(urlArray);\n    await this._unloadFromResolved(resolveResults);\n  }\n  /**\n   * Bundles are a way to manage multiple assets at once.\n   * this will unload all files in a bundle.\n   *\n   * once a bundle has been unloaded, you need to load it again to have access to the assets.\n   * @example\n   * import { Assets } from 'pixi.js';\n   *\n   * Assets.addBundle({\n   *     'thumper': 'http://some.url.com/thumper.png',\n   * })\n   *\n   * const assets = await Assets.loadBundle('thumper');\n   *\n   * // Now to unload...\n   *\n   * await Assets.unloadBundle('thumper');\n   *\n   * // All assets in the assets object will now have been destroyed and purged from the cache\n   * @param bundleIds - the bundle id or ids to unload\n   */\n  async unloadBundle(bundleIds) {\n    if (!this._initialized) {\n      await this.init();\n    }\n    bundleIds = convertToList(bundleIds);\n    const resolveResults = this.resolver.resolveBundle(bundleIds);\n    const promises = Object.keys(resolveResults).map((bundleId) => this._unloadFromResolved(resolveResults[bundleId]));\n    await Promise.all(promises);\n  }\n  async _unloadFromResolved(resolveResult) {\n    const resolveArray = Object.values(resolveResult);\n    resolveArray.forEach((resolveResult2) => {\n      Cache.remove(resolveResult2.src);\n    });\n    await this.loader.unload(resolveArray);\n  }\n  /**\n   * Detects the supported formats for the browser, and returns an array of supported formats, respecting\n   * the users preferred formats order.\n   * @param options - the options to use when detecting formats\n   * @param options.preferredFormats - the preferred formats to use\n   * @param options.skipDetections - if we should skip the detections altogether\n   * @param options.detections - the detections to use\n   * @returns - the detected formats\n   */\n  async _detectFormats(options) {\n    let formats = [];\n    if (options.preferredFormats) {\n      formats = Array.isArray(options.preferredFormats) ? options.preferredFormats : [options.preferredFormats];\n    }\n    for (const detection of options.detections) {\n      if (options.skipDetections || await detection.test()) {\n        formats = await detection.add(formats);\n      } else if (!options.skipDetections) {\n        formats = await detection.remove(formats);\n      }\n    }\n    formats = formats.filter((format, index) => formats.indexOf(format) === index);\n    return formats;\n  }\n  /** All the detection parsers currently added to the Assets class. */\n  get detections() {\n    return this._detections;\n  }\n  /**\n   * General setter for preferences. This is a helper function to set preferences on all parsers.\n   * @param preferences - the preferences to set\n   */\n  setPreferences(preferences) {\n    this.loader.parsers.forEach((parser) => {\n      if (!parser.config)\n        return;\n      Object.keys(parser.config).filter((key) => key in preferences).forEach((key) => {\n        parser.config[key] = preferences[key];\n      });\n    });\n  }\n}\nconst Assets = new AssetsClass();\nextensions.handleByList(ExtensionType.LoadParser, Assets.loader.parsers).handleByList(ExtensionType.ResolveParser, Assets.resolver.parsers).handleByList(ExtensionType.CacheParser, Assets.cache.parsers).handleByList(ExtensionType.DetectionParser, Assets.detections);\nextensions.add(\n  cacheTextureArray,\n  detectDefaults,\n  detectAvif,\n  detectWebp,\n  detectMp4,\n  detectOgv,\n  detectWebm,\n  loadJson,\n  loadTxt,\n  loadWebFont,\n  loadSvg,\n  loadTextures,\n  loadVideoTextures,\n  loadBitmapFont,\n  bitmapFontCachePlugin,\n  resolveTextureUrl,\n  resolveJsonUrl\n);\nconst assetKeyMap = {\n  loader: ExtensionType.LoadParser,\n  resolver: ExtensionType.ResolveParser,\n  cache: ExtensionType.CacheParser,\n  detection: ExtensionType.DetectionParser\n};\nextensions.handle(ExtensionType.Asset, (extension) => {\n  const ref = extension.ref;\n  Object.entries(assetKeyMap).filter(([key]) => !!ref[key]).forEach(([key, type]) => extensions.add(Object.assign(\n    ref[key],\n    // Allow the function to optionally define it's own\n    // ExtensionMetadata, the use cases here is priority for LoaderParsers\n    { extension: ref[key].extension ?? type }\n  )));\n}, (extension) => {\n  const ref = extension.ref;\n  Object.keys(assetKeyMap).filter((key) => !!ref[key]).forEach((key) => extensions.remove(ref[key]));\n});\n\nexport { Assets, AssetsClass };\n//# sourceMappingURL=Assets.mjs.map\n","var source = \"struct GlobalFilterUniforms {\\n  uInputSize:vec4<f32>,\\n  uInputPixel:vec4<f32>,\\n  uInputClamp:vec4<f32>,\\n  uOutputFrame:vec4<f32>,\\n  uGlobalFrame:vec4<f32>,\\n  uOutputTexture:vec4<f32>,\\n};\\n\\nstruct AlphaUniforms {\\n  uAlpha:f32,\\n};\\n\\n@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;\\n@group(0) @binding(1) var uTexture: texture_2d<f32>;\\n@group(0) @binding(2) var uSampler : sampler;\\n\\n@group(1) @binding(0) var<uniform> alphaUniforms : AlphaUniforms;\\n\\nstruct VSOutput {\\n    @builtin(position) position: vec4<f32>,\\n    @location(0) uv : vec2<f32>\\n  };\\n\\nfn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>\\n{\\n    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;\\n\\n    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;\\n    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;\\n\\n    return vec4(position, 0.0, 1.0);\\n}\\n\\nfn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\\n{\\n    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);\\n}\\n\\nfn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\\n{\\n  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  \\n}\\n\\nfn getSize() -> vec2<f32>\\n{\\n  return gfu.uGlobalFrame.zw;\\n}\\n  \\n@vertex\\nfn mainVertex(\\n  @location(0) aPosition : vec2<f32>, \\n) -> VSOutput {\\n  return VSOutput(\\n   filterVertexPosition(aPosition),\\n   filterTextureCoord(aPosition)\\n  );\\n}\\n\\n@fragment\\nfn mainFragment(\\n  @location(0) uv: vec2<f32>,\\n  @builtin(position) position: vec4<f32>\\n) -> @location(0) vec4<f32> {\\n \\n    var sample = textureSample(uTexture, uSampler, uv);\\n    \\n    return sample * alphaUniforms.uAlpha;\\n}\";\n\nexport { source as default };\n//# sourceMappingURL=alpha.wgsl.mjs.map\n","import { GlProgram } from '../../../rendering/renderers/gl/shader/GlProgram.mjs';\nimport { GpuProgram } from '../../../rendering/renderers/gpu/shader/GpuProgram.mjs';\nimport { UniformGroup } from '../../../rendering/renderers/shared/shader/UniformGroup.mjs';\nimport { Filter } from '../../Filter.mjs';\nimport vertex from '../defaultFilter.vert.mjs';\nimport fragment from './alpha.frag.mjs';\nimport source from './alpha.wgsl.mjs';\n\n\"use strict\";\nconst _AlphaFilter = class _AlphaFilter extends Filter {\n  constructor(options) {\n    options = { ..._AlphaFilter.defaultOptions, ...options };\n    const gpuProgram = GpuProgram.from({\n      vertex: {\n        source,\n        entryPoint: \"mainVertex\"\n      },\n      fragment: {\n        source,\n        entryPoint: \"mainFragment\"\n      }\n    });\n    const glProgram = GlProgram.from({\n      vertex,\n      fragment,\n      name: \"alpha-filter\"\n    });\n    const { alpha, ...rest } = options;\n    const alphaUniforms = new UniformGroup({\n      uAlpha: { value: alpha, type: \"f32\" }\n    });\n    super({\n      ...rest,\n      gpuProgram,\n      glProgram,\n      resources: {\n        alphaUniforms\n      }\n    });\n  }\n  /**\n   * Coefficient for alpha multiplication\n   * @default 1\n   */\n  get alpha() {\n    return this.resources.alphaUniforms.uniforms.uAlpha;\n  }\n  set alpha(value) {\n    this.resources.alphaUniforms.uniforms.uAlpha = value;\n  }\n};\n/** Default filter options */\n_AlphaFilter.defaultOptions = {\n  /** Amount of alpha from 0 to 1, where 0 is transparent */\n  alpha: 1\n};\nlet AlphaFilter = _AlphaFilter;\n\nexport { AlphaFilter };\n//# sourceMappingURL=AlphaFilter.mjs.map\n","var vertex = \"in vec2 aPosition;\\nout vec2 vTextureCoord;\\n\\nuniform vec4 uInputSize;\\nuniform vec4 uOutputFrame;\\nuniform vec4 uOutputTexture;\\n\\nvec4 filterVertexPosition( void )\\n{\\n    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;\\n    \\n    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;\\n    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;\\n\\n    return vec4(position, 0.0, 1.0);\\n}\\n\\nvec2 filterTextureCoord( void )\\n{\\n    return aPosition * (uOutputFrame.zw * uInputSize.zw);\\n}\\n\\nvoid main(void)\\n{\\n    gl_Position = filterVertexPosition();\\n    vTextureCoord = filterTextureCoord();\\n}\\n\";\n\nexport { vertex as default };\n//# sourceMappingURL=defaultFilter.vert.mjs.map\n","var fragment = \"\\nin vec2 vTextureCoord;\\n\\nout vec4 finalColor;\\n\\nuniform float uAlpha;\\nuniform sampler2D uTexture;\\n\\nvoid main()\\n{\\n    finalColor =  texture(uTexture, vTextureCoord) * uAlpha;\\n}\\n\";\n\nexport { fragment as default };\n//# sourceMappingURL=alpha.frag.mjs.map\n","\"use strict\";\nconst GAUSSIAN_VALUES = {\n  5: [0.153388, 0.221461, 0.250301],\n  7: [0.071303, 0.131514, 0.189879, 0.214607],\n  9: [0.028532, 0.067234, 0.124009, 0.179044, 0.20236],\n  11: [93e-4, 0.028002, 0.065984, 0.121703, 0.175713, 0.198596],\n  13: [2406e-6, 9255e-6, 0.027867, 0.065666, 0.121117, 0.174868, 0.197641],\n  15: [489e-6, 2403e-6, 9246e-6, 0.02784, 0.065602, 0.120999, 0.174697, 0.197448]\n};\n\nexport { GAUSSIAN_VALUES };\n//# sourceMappingURL=const.mjs.map\n","import { GAUSSIAN_VALUES } from '../const.mjs';\n\n\"use strict\";\nconst fragTemplate = [\n  \"in vec2 vBlurTexCoords[%size%];\",\n  \"uniform sampler2D uTexture;\",\n  \"out vec4 finalColor;\",\n  \"void main(void)\",\n  \"{\",\n  \"    finalColor = vec4(0.0);\",\n  \"    %blur%\",\n  \"}\"\n].join(\"\\n\");\nfunction generateBlurFragSource(kernelSize) {\n  const kernel = GAUSSIAN_VALUES[kernelSize];\n  const halfLength = kernel.length;\n  let fragSource = fragTemplate;\n  let blurLoop = \"\";\n  const template = \"finalColor += texture(uTexture, vBlurTexCoords[%index%]) * %value%;\";\n  let value;\n  for (let i = 0; i < kernelSize; i++) {\n    let blur = template.replace(\"%index%\", i.toString());\n    value = i;\n    if (i >= halfLength) {\n      value = kernelSize - i - 1;\n    }\n    blur = blur.replace(\"%value%\", kernel[value].toString());\n    blurLoop += blur;\n    blurLoop += \"\\n\";\n  }\n  fragSource = fragSource.replace(\"%blur%\", blurLoop);\n  fragSource = fragSource.replace(\"%size%\", kernelSize.toString());\n  return fragSource;\n}\n\nexport { generateBlurFragSource };\n//# sourceMappingURL=generateBlurFragSource.mjs.map\n","import { GlProgram } from '../../../../rendering/renderers/gl/shader/GlProgram.mjs';\nimport { generateBlurFragSource } from './generateBlurFragSource.mjs';\nimport { generateBlurVertSource } from './generateBlurVertSource.mjs';\n\n\"use strict\";\nfunction generateBlurGlProgram(horizontal, kernelSize) {\n  const vertex = generateBlurVertSource(kernelSize, horizontal);\n  const fragment = generateBlurFragSource(kernelSize);\n  return GlProgram.from({\n    vertex,\n    fragment,\n    name: `blur-${horizontal ? \"horizontal\" : \"vertical\"}-pass-filter`\n  });\n}\n\nexport { generateBlurGlProgram };\n//# sourceMappingURL=generateBlurGlProgram.mjs.map\n","\"use strict\";\nconst vertTemplate = `\n    in vec2 aPosition;\n\n    uniform float uStrength;\n\n    out vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 uInputSize;\n    uniform vec4 uOutputFrame;\n    uniform vec4 uOutputTexture;\n\n    vec4 filterVertexPosition( void )\n{\n    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;\n    \n    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;\n    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;\n\n    return vec4(position, 0.0, 1.0);\n}\n\n    vec2 filterTextureCoord( void )\n    {\n        return aPosition * (uOutputFrame.zw * uInputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        float pixelStrength = uInputSize.%dimension% * uStrength;\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }`;\nfunction generateBlurVertSource(kernelSize, x) {\n  const halfLength = Math.ceil(kernelSize / 2);\n  let vertSource = vertTemplate;\n  let blurLoop = \"\";\n  let template;\n  if (x) {\n    template = \"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * pixelStrength, 0.0);\";\n  } else {\n    template = \"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * pixelStrength);\";\n  }\n  for (let i = 0; i < kernelSize; i++) {\n    let blur = template.replace(\"%index%\", i.toString());\n    blur = blur.replace(\"%sampleIndex%\", `${i - (halfLength - 1)}.0`);\n    blurLoop += blur;\n    blurLoop += \"\\n\";\n  }\n  vertSource = vertSource.replace(\"%blur%\", blurLoop);\n  vertSource = vertSource.replace(\"%size%\", kernelSize.toString());\n  vertSource = vertSource.replace(\"%dimension%\", x ? \"z\" : \"w\");\n  return vertSource;\n}\n\nexport { generateBlurVertSource };\n//# sourceMappingURL=generateBlurVertSource.mjs.map\n","import { TexturePool } from '../../../rendering/renderers/shared/texture/TexturePool.mjs';\nimport { RendererType } from '../../../rendering/renderers/types.mjs';\nimport { Filter } from '../../Filter.mjs';\nimport { generateBlurGlProgram } from './gl/generateBlurGlProgram.mjs';\nimport { generateBlurProgram } from './gpu/generateBlurProgram.mjs';\n\n\"use strict\";\nconst _BlurFilterPass = class _BlurFilterPass extends Filter {\n  /**\n   * @param options\n   * @param options.horizontal - Do pass along the x-axis (`true`) or y-axis (`false`).\n   * @param options.strength - The strength of the blur filter.\n   * @param options.quality - The quality of the blur filter.\n   * @param options.kernelSize - The kernelSize of the blur filter.Options: 5, 7, 9, 11, 13, 15.\n   */\n  constructor(options) {\n    options = { ..._BlurFilterPass.defaultOptions, ...options };\n    const glProgram = generateBlurGlProgram(options.horizontal, options.kernelSize);\n    const gpuProgram = generateBlurProgram(options.horizontal, options.kernelSize);\n    super({\n      glProgram,\n      gpuProgram,\n      resources: {\n        blurUniforms: {\n          uStrength: { value: 0, type: \"f32\" }\n        }\n      },\n      ...options\n    });\n    this.horizontal = options.horizontal;\n    this._quality = 0;\n    this.quality = options.quality;\n    this.blur = options.strength;\n    this._uniforms = this.resources.blurUniforms.uniforms;\n  }\n  /**\n   * Applies the filter.\n   * @param filterManager - The manager.\n   * @param input - The input target.\n   * @param output - The output target.\n   * @param clearMode - How to clear\n   */\n  apply(filterManager, input, output, clearMode) {\n    this._uniforms.uStrength = this.strength / this.passes;\n    if (this.passes === 1) {\n      filterManager.applyFilter(this, input, output, clearMode);\n    } else {\n      const tempTexture = TexturePool.getSameSizeTexture(input);\n      let flip = input;\n      let flop = tempTexture;\n      this._state.blend = false;\n      for (let i = 0; i < this.passes - 1; i++) {\n        filterManager.applyFilter(this, flip, flop, filterManager.renderer.type === RendererType.WEBGPU);\n        const temp = flop;\n        flop = flip;\n        flip = temp;\n      }\n      this._state.blend = true;\n      filterManager.applyFilter(this, flip, output, clearMode);\n      TexturePool.returnTexture(tempTexture);\n    }\n  }\n  /**\n   * Sets the strength of both the blur.\n   * @default 16\n   */\n  get blur() {\n    return this.strength;\n  }\n  set blur(value) {\n    this.padding = 1 + Math.abs(value) * 2;\n    this.strength = value;\n  }\n  /**\n   * Sets the quality of the blur by modifying the number of passes. More passes means higher\n   * quality blurring but the lower the performance.\n   * @default 4\n   */\n  get quality() {\n    return this._quality;\n  }\n  set quality(value) {\n    this._quality = value;\n    this.passes = value;\n  }\n};\n/** Default blur filter pass options */\n_BlurFilterPass.defaultOptions = {\n  /** The strength of the blur filter. */\n  strength: 8,\n  /** The quality of the blur filter. */\n  quality: 4,\n  /** The kernelSize of the blur filter.Options: 5, 7, 9, 11, 13, 15. */\n  kernelSize: 5\n};\nlet BlurFilterPass = _BlurFilterPass;\n\nexport { BlurFilterPass };\n//# sourceMappingURL=BlurFilterPass.mjs.map\n","import { GpuProgram } from '../../../../rendering/renderers/gpu/shader/GpuProgram.mjs';\nimport { GAUSSIAN_VALUES } from '../const.mjs';\nimport source from './blur-template.wgsl.mjs';\n\n\"use strict\";\nfunction generateBlurProgram(horizontal, kernelSize) {\n  const kernel = GAUSSIAN_VALUES[kernelSize];\n  const halfLength = kernel.length;\n  const blurStructSource = [];\n  const blurOutSource = [];\n  const blurSamplingSource = [];\n  for (let i = 0; i < kernelSize; i++) {\n    blurStructSource[i] = `@location(${i}) offset${i}: vec2<f32>,`;\n    if (horizontal) {\n      blurOutSource[i] = `filteredCord + vec2(${i - halfLength + 1} * strength, 0.0),`;\n    } else {\n      blurOutSource[i] = `filteredCord + vec2(0.0, ${i - halfLength + 1} * strength),`;\n    }\n    const kernelIndex = i < halfLength ? i : kernelSize - i - 1;\n    const kernelValue = kernel[kernelIndex].toString();\n    blurSamplingSource[i] = `finalColor += textureSample(uTexture, uSampler, offset${i}) * ${kernelValue};`;\n  }\n  const blurStruct = blurStructSource.join(\"\\n\");\n  const blurOut = blurOutSource.join(\"\\n\");\n  const blurSampling = blurSamplingSource.join(\"\\n\");\n  const finalSource = source.replace(\"%blur-struct%\", blurStruct).replace(\"%blur-vertex-out%\", blurOut).replace(\"%blur-fragment-in%\", blurStruct).replace(\"%blur-sampling%\", blurSampling);\n  return GpuProgram.from({\n    vertex: {\n      source: finalSource,\n      entryPoint: \"mainVertex\"\n    },\n    fragment: {\n      source: finalSource,\n      entryPoint: \"mainFragment\"\n    }\n  });\n}\n\nexport { generateBlurProgram };\n//# sourceMappingURL=generateBlurProgram.mjs.map\n","var source = \"\\n\\nstruct GlobalFilterUniforms {\\n  uInputSize:vec4<f32>,\\n  uInputPixel:vec4<f32>,\\n  uInputClamp:vec4<f32>,\\n  uOutputFrame:vec4<f32>,\\n  uGlobalFrame:vec4<f32>,\\n  uOutputTexture:vec4<f32>,\\n};\\n\\nstruct BlurUniforms {\\n  uStrength:f32,\\n};\\n\\n@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;\\n@group(0) @binding(1) var uTexture: texture_2d<f32>;\\n@group(0) @binding(2) var uSampler : sampler;\\n\\n@group(1) @binding(0) var<uniform> blurUniforms : BlurUniforms;\\n\\n\\nstruct VSOutput {\\n    @builtin(position) position: vec4<f32>,\\n    %blur-struct%\\n  };\\n\\nfn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>\\n{\\n    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;\\n\\n    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;\\n    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;\\n\\n    return vec4(position, 0.0, 1.0);\\n}\\n\\nfn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\\n{\\n    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);\\n}\\n\\nfn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\\n{\\n  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  \\n}\\n\\nfn getSize() -> vec2<f32>\\n{\\n  return gfu.uGlobalFrame.zw;\\n}\\n\\n\\n@vertex\\nfn mainVertex(\\n  @location(0) aPosition : vec2<f32>, \\n) -> VSOutput {\\n\\n  let filteredCord = filterTextureCoord(aPosition);\\n\\n  let strength = gfu.uInputSize.w * blurUniforms.uStrength;\\n\\n  return VSOutput(\\n   filterVertexPosition(aPosition),\\n    %blur-vertex-out%\\n  );\\n}\\n\\n@fragment\\nfn mainFragment(\\n  @builtin(position) position: vec4<f32>,\\n  %blur-fragment-in%\\n) -> @location(0) vec4<f32> {\\n\\n    var   finalColor = vec4(0.0);\\n\\n    %blur-sampling%\\n\\n    return finalColor;\\n}\";\n\nexport { source as default };\n//# sourceMappingURL=blur-template.wgsl.mjs.map\n","import { TexturePool } from '../../../rendering/renderers/shared/texture/TexturePool.mjs';\nimport { RendererType } from '../../../rendering/renderers/types.mjs';\nimport { deprecation, v8_0_0 } from '../../../utils/logging/deprecation.mjs';\nimport { Filter } from '../../Filter.mjs';\nimport { BlurFilterPass } from './BlurFilterPass.mjs';\n\n\"use strict\";\nclass BlurFilter extends Filter {\n  constructor(...args) {\n    let options = args[0] ?? {};\n    if (typeof options === \"number\") {\n      deprecation(v8_0_0, \"BlurFilter constructor params are now options object. See params: { strength, quality, resolution, kernelSize }\");\n      options = { strength: options };\n      if (args[1])\n        options.quality = args[1];\n      if (args[2])\n        options.resolution = args[2];\n      if (args[3])\n        options.kernelSize = args[3];\n    }\n    options = { ...BlurFilterPass.defaultOptions, ...options };\n    const { strength, quality, ...rest } = options;\n    super({\n      ...rest,\n      compatibleRenderers: RendererType.BOTH,\n      resources: {}\n    });\n    this._repeatEdgePixels = false;\n    this.blurXFilter = new BlurFilterPass({ horizontal: false, ...options });\n    this.blurYFilter = new BlurFilterPass({ horizontal: true, ...options });\n    this.quality = quality;\n    this.blur = strength;\n    this.repeatEdgePixels = false;\n  }\n  /**\n   * Applies the filter.\n   * @param filterManager - The manager.\n   * @param input - The input target.\n   * @param output - The output target.\n   * @param clearMode - How to clear\n   */\n  apply(filterManager, input, output, clearMode) {\n    const xStrength = Math.abs(this.blurXFilter.strength);\n    const yStrength = Math.abs(this.blurYFilter.strength);\n    if (xStrength && yStrength) {\n      const tempTexture = TexturePool.getSameSizeTexture(input);\n      this.blurXFilter.blendMode = \"normal\";\n      this.blurXFilter.apply(filterManager, input, tempTexture, true);\n      this.blurYFilter.blendMode = this.blendMode;\n      this.blurYFilter.apply(filterManager, tempTexture, output, clearMode);\n      TexturePool.returnTexture(tempTexture);\n    } else if (yStrength) {\n      this.blurYFilter.blendMode = this.blendMode;\n      this.blurYFilter.apply(filterManager, input, output, clearMode);\n    } else {\n      this.blurXFilter.blendMode = this.blendMode;\n      this.blurXFilter.apply(filterManager, input, output, clearMode);\n    }\n  }\n  updatePadding() {\n    if (this._repeatEdgePixels) {\n      this.padding = 0;\n    } else {\n      this.padding = Math.max(Math.abs(this.blurXFilter.blur), Math.abs(this.blurYFilter.blur)) * 2;\n    }\n  }\n  /**\n   * Sets the strength of both the blurX and blurY properties simultaneously\n   * @default 2\n   */\n  get blur() {\n    return this.blurXFilter.blur;\n  }\n  set blur(value) {\n    this.blurXFilter.blur = this.blurYFilter.blur = value;\n    this.updatePadding();\n  }\n  /**\n   * Sets the number of passes for blur. More passes means higher quality bluring.\n   * @default 1\n   */\n  get quality() {\n    return this.blurXFilter.quality;\n  }\n  set quality(value) {\n    this.blurXFilter.quality = this.blurYFilter.quality = value;\n  }\n  /**\n   * Sets the strength of the blurX property\n   * @default 2\n   */\n  get blurX() {\n    return this.blurXFilter.blur;\n  }\n  set blurX(value) {\n    this.blurXFilter.blur = value;\n    this.updatePadding();\n  }\n  /**\n   * Sets the strength of the blurY property\n   * @default 2\n   */\n  get blurY() {\n    return this.blurYFilter.blur;\n  }\n  set blurY(value) {\n    this.blurYFilter.blur = value;\n    this.updatePadding();\n  }\n  /**\n   * If set to true the edge of the target will be clamped\n   * @default false\n   */\n  get repeatEdgePixels() {\n    return this._repeatEdgePixels;\n  }\n  set repeatEdgePixels(value) {\n    this._repeatEdgePixels = value;\n    this.updatePadding();\n  }\n}\n/** Default blur filter options */\nBlurFilter.defaultOptions = {\n  /** The strength of the blur filter. */\n  strength: 8,\n  /** The quality of the blur filter. */\n  quality: 4,\n  /** The kernelSize of the blur filter.Options: 5, 7, 9, 11, 13, 15. */\n  kernelSize: 5\n};\n\nexport { BlurFilter };\n//# sourceMappingURL=BlurFilter.mjs.map\n","import { Texture } from '../../rendering/renderers/shared/texture/Texture.mjs';\nimport { UPDATE_PRIORITY } from '../../ticker/const.mjs';\nimport { Ticker } from '../../ticker/Ticker.mjs';\nimport { Sprite } from '../sprite/Sprite.mjs';\n\n\"use strict\";\nclass AnimatedSprite extends Sprite {\n  /**\n   * @param textures - An array of {@link Texture} or frame\n   *  objects that make up the animation.\n   * @param {boolean} [autoUpdate=true] - Whether to use Ticker.shared to auto update animation time.\n   */\n  constructor(textures, autoUpdate = true) {\n    super(textures[0] instanceof Texture ? textures[0] : textures[0].texture);\n    this._textures = null;\n    this._durations = null;\n    this._autoUpdate = autoUpdate;\n    this._isConnectedToTicker = false;\n    this.animationSpeed = 1;\n    this.loop = true;\n    this.updateAnchor = false;\n    this.onComplete = null;\n    this.onFrameChange = null;\n    this.onLoop = null;\n    this._currentTime = 0;\n    this._playing = false;\n    this._previousFrame = null;\n    this.textures = textures;\n  }\n  /** Stops the AnimatedSprite. */\n  stop() {\n    if (!this._playing) {\n      return;\n    }\n    this._playing = false;\n    if (this._autoUpdate && this._isConnectedToTicker) {\n      Ticker.shared.remove(this.update, this);\n      this._isConnectedToTicker = false;\n    }\n  }\n  /** Plays the AnimatedSprite. */\n  play() {\n    if (this._playing) {\n      return;\n    }\n    this._playing = true;\n    if (this._autoUpdate && !this._isConnectedToTicker) {\n      Ticker.shared.add(this.update, this, UPDATE_PRIORITY.HIGH);\n      this._isConnectedToTicker = true;\n    }\n  }\n  /**\n   * Stops the AnimatedSprite and goes to a specific frame.\n   * @param frameNumber - Frame index to stop at.\n   */\n  gotoAndStop(frameNumber) {\n    this.stop();\n    this.currentFrame = frameNumber;\n  }\n  /**\n   * Goes to a specific frame and begins playing the AnimatedSprite.\n   * @param frameNumber - Frame index to start at.\n   */\n  gotoAndPlay(frameNumber) {\n    this.currentFrame = frameNumber;\n    this.play();\n  }\n  /**\n   * Updates the object transform for rendering.\n   * @param ticker - the ticker to use to update the object.\n   */\n  update(ticker) {\n    if (!this._playing) {\n      return;\n    }\n    const deltaTime = ticker.deltaTime;\n    const elapsed = this.animationSpeed * deltaTime;\n    const previousFrame = this.currentFrame;\n    if (this._durations !== null) {\n      let lag = this._currentTime % 1 * this._durations[this.currentFrame];\n      lag += elapsed / 60 * 1e3;\n      while (lag < 0) {\n        this._currentTime--;\n        lag += this._durations[this.currentFrame];\n      }\n      const sign = Math.sign(this.animationSpeed * deltaTime);\n      this._currentTime = Math.floor(this._currentTime);\n      while (lag >= this._durations[this.currentFrame]) {\n        lag -= this._durations[this.currentFrame] * sign;\n        this._currentTime += sign;\n      }\n      this._currentTime += lag / this._durations[this.currentFrame];\n    } else {\n      this._currentTime += elapsed;\n    }\n    if (this._currentTime < 0 && !this.loop) {\n      this.gotoAndStop(0);\n      if (this.onComplete) {\n        this.onComplete();\n      }\n    } else if (this._currentTime >= this._textures.length && !this.loop) {\n      this.gotoAndStop(this._textures.length - 1);\n      if (this.onComplete) {\n        this.onComplete();\n      }\n    } else if (previousFrame !== this.currentFrame) {\n      if (this.loop && this.onLoop) {\n        if (this.animationSpeed > 0 && this.currentFrame < previousFrame || this.animationSpeed < 0 && this.currentFrame > previousFrame) {\n          this.onLoop();\n        }\n      }\n      this._updateTexture();\n    }\n  }\n  /** Updates the displayed texture to match the current frame index. */\n  _updateTexture() {\n    const currentFrame = this.currentFrame;\n    if (this._previousFrame === currentFrame) {\n      return;\n    }\n    this._previousFrame = currentFrame;\n    this.texture = this._textures[currentFrame];\n    if (this.updateAnchor) {\n      this.anchor.copyFrom(this.texture.defaultAnchor);\n    }\n    if (this.onFrameChange) {\n      this.onFrameChange(this.currentFrame);\n    }\n  }\n  /** Stops the AnimatedSprite and destroys it. */\n  destroy() {\n    this.stop();\n    super.destroy();\n    this.onComplete = null;\n    this.onFrameChange = null;\n    this.onLoop = null;\n  }\n  /**\n   * A short hand way of creating an AnimatedSprite from an array of frame ids.\n   * @param frames - The array of frames ids the AnimatedSprite will use as its texture frames.\n   * @returns - The new animated sprite with the specified frames.\n   */\n  static fromFrames(frames) {\n    const textures = [];\n    for (let i = 0; i < frames.length; ++i) {\n      textures.push(Texture.from(frames[i]));\n    }\n    return new AnimatedSprite(textures);\n  }\n  /**\n   * A short hand way of creating an AnimatedSprite from an array of image ids.\n   * @param images - The array of image urls the AnimatedSprite will use as its texture frames.\n   * @returns The new animate sprite with the specified images as frames.\n   */\n  static fromImages(images) {\n    const textures = [];\n    for (let i = 0; i < images.length; ++i) {\n      textures.push(Texture.from(images[i]));\n    }\n    return new AnimatedSprite(textures);\n  }\n  /**\n   * The total number of frames in the AnimatedSprite. This is the same as number of textures\n   * assigned to the AnimatedSprite.\n   * @readonly\n   * @default 0\n   */\n  get totalFrames() {\n    return this._textures.length;\n  }\n  /** The array of textures used for this AnimatedSprite. */\n  get textures() {\n    return this._textures;\n  }\n  set textures(value) {\n    if (value[0] instanceof Texture) {\n      this._textures = value;\n      this._durations = null;\n    } else {\n      this._textures = [];\n      this._durations = [];\n      for (let i = 0; i < value.length; i++) {\n        this._textures.push(value[i].texture);\n        this._durations.push(value[i].time);\n      }\n    }\n    this._previousFrame = null;\n    this.gotoAndStop(0);\n    this._updateTexture();\n  }\n  /** The AnimatedSprite's current frame index. */\n  get currentFrame() {\n    let currentFrame = Math.floor(this._currentTime) % this._textures.length;\n    if (currentFrame < 0) {\n      currentFrame += this._textures.length;\n    }\n    return currentFrame;\n  }\n  set currentFrame(value) {\n    if (value < 0 || value > this.totalFrames - 1) {\n      throw new Error(`[AnimatedSprite]: Invalid frame index value ${value}, expected to be between 0 and totalFrames ${this.totalFrames}.`);\n    }\n    const previousFrame = this.currentFrame;\n    this._currentTime = value;\n    if (previousFrame !== this.currentFrame) {\n      this._updateTexture();\n    }\n  }\n  /**\n   * Indicates if the AnimatedSprite is currently playing.\n   * @readonly\n   */\n  get playing() {\n    return this._playing;\n  }\n  /** Whether to use Ticker.shared to auto update animation time. */\n  get autoUpdate() {\n    return this._autoUpdate;\n  }\n  set autoUpdate(value) {\n    if (value !== this._autoUpdate) {\n      this._autoUpdate = value;\n      if (!this._autoUpdate && this._isConnectedToTicker) {\n        Ticker.shared.remove(this.update, this);\n        this._isConnectedToTicker = false;\n      } else if (this._autoUpdate && !this._isConnectedToTicker && this._playing) {\n        Ticker.shared.add(this.update, this);\n        this._isConnectedToTicker = true;\n      }\n    }\n  }\n}\n\nexport { AnimatedSprite };\n//# sourceMappingURL=AnimatedSprite.mjs.map\n","import { ObservablePoint } from '../../maths/point/ObservablePoint.mjs';\nimport { deprecation, v8_0_0 } from '../../utils/logging/deprecation.mjs';\nimport { Bounds } from '../container/bounds/Bounds.mjs';\nimport { Container } from '../container/Container.mjs';\n\n\"use strict\";\nclass AbstractText extends Container {\n  constructor(options, styleClass) {\n    const { text, resolution, style, anchor, width, height, roundPixels, ...rest } = options;\n    super({\n      ...rest\n    });\n    this.batched = true;\n    this._resolution = null;\n    this._autoResolution = true;\n    this._didTextUpdate = true;\n    this._roundPixels = 0;\n    this._bounds = new Bounds();\n    this._boundsDirty = true;\n    this._styleClass = styleClass;\n    this.text = text ?? \"\";\n    this.style = style;\n    this.resolution = resolution ?? null;\n    this.allowChildren = false;\n    this._anchor = new ObservablePoint(\n      {\n        _onUpdate: () => {\n          this.onViewUpdate();\n        }\n      }\n    );\n    if (anchor)\n      this.anchor = anchor;\n    this.roundPixels = roundPixels ?? false;\n    if (width !== void 0)\n      this.width = width;\n    if (height !== void 0)\n      this.height = height;\n  }\n  /**\n   * The anchor sets the origin point of the text.\n   * The default is `(0,0)`, this means the text's origin is the top left.\n   *\n   * Setting the anchor to `(0.5,0.5)` means the text's origin is centered.\n   *\n   * Setting the anchor to `(1,1)` would mean the text's origin point will be the bottom right corner.\n   *\n   * If you pass only single parameter, it will set both x and y to the same value as shown in the example below.\n   * @example\n   * import { Text } from 'pixi.js';\n   *\n   * const text = new Text('hello world');\n   * text.anchor.set(0.5); // This will set the origin to center. (0.5) is same as (0.5, 0.5).\n   */\n  get anchor() {\n    return this._anchor;\n  }\n  set anchor(value) {\n    typeof value === \"number\" ? this._anchor.set(value) : this._anchor.copyFrom(value);\n  }\n  /**\n   *  Whether or not to round the x/y position of the text.\n   * @type {boolean}\n   */\n  get roundPixels() {\n    return !!this._roundPixels;\n  }\n  set roundPixels(value) {\n    this._roundPixels = value ? 1 : 0;\n  }\n  /** Set the copy for the text object. To split a line you can use '\\n'. */\n  set text(value) {\n    value = value.toString();\n    if (this._text === value)\n      return;\n    this._text = value;\n    this.onViewUpdate();\n  }\n  get text() {\n    return this._text;\n  }\n  /**\n   * The resolution / device pixel ratio of the canvas.\n   * @default 1\n   */\n  set resolution(value) {\n    this._autoResolution = value === null;\n    this._resolution = value;\n    this.onViewUpdate();\n  }\n  get resolution() {\n    return this._resolution;\n  }\n  get style() {\n    return this._style;\n  }\n  /**\n   * Set the style of the text.\n   *\n   * Set up an event listener to listen for changes on the style object and mark the text as dirty.\n   *\n   * If setting the `style` can also be partial {@link AnyTextStyleOptions}.\n   * @type {\n   * text.TextStyle |\n   * Partial<text.TextStyle> |\n   * text.TextStyleOptions |\n   * text.HTMLTextStyle |\n   * Partial<text.HTMLTextStyle> |\n   * text.HTMLTextStyleOptions\n   * }\n   */\n  set style(style) {\n    style = style || {};\n    this._style?.off(\"update\", this.onViewUpdate, this);\n    if (style instanceof this._styleClass) {\n      this._style = style;\n    } else {\n      this._style = new this._styleClass(style);\n    }\n    this._style.on(\"update\", this.onViewUpdate, this);\n    this.onViewUpdate();\n  }\n  /**\n   * The local bounds of the Text.\n   * @type {rendering.Bounds}\n   */\n  get bounds() {\n    if (this._boundsDirty) {\n      this._updateBounds();\n      this._boundsDirty = false;\n    }\n    return this._bounds;\n  }\n  /** The width of the sprite, setting this will actually modify the scale to achieve the value set. */\n  get width() {\n    return Math.abs(this.scale.x) * this.bounds.width;\n  }\n  set width(value) {\n    this._setWidth(value, this.bounds.width);\n  }\n  /** The height of the sprite, setting this will actually modify the scale to achieve the value set. */\n  get height() {\n    return Math.abs(this.scale.y) * this.bounds.height;\n  }\n  set height(value) {\n    this._setHeight(value, this.bounds.height);\n  }\n  /**\n   * Retrieves the size of the Text as a [Size]{@link Size} object.\n   * This is faster than get the width and height separately.\n   * @param out - Optional object to store the size in.\n   * @returns - The size of the Text.\n   */\n  getSize(out) {\n    if (!out) {\n      out = {};\n    }\n    out.width = Math.abs(this.scale.x) * this.bounds.width;\n    out.height = Math.abs(this.scale.y) * this.bounds.height;\n    return out;\n  }\n  /**\n   * Sets the size of the Text to the specified width and height.\n   * This is faster than setting the width and height separately.\n   * @param value - This can be either a number or a [Size]{@link Size} object.\n   * @param height - The height to set. Defaults to the value of `width` if not provided.\n   */\n  setSize(value, height) {\n    let convertedWidth;\n    let convertedHeight;\n    if (typeof value !== \"object\") {\n      convertedWidth = value;\n      convertedHeight = height ?? value;\n    } else {\n      convertedWidth = value.width;\n      convertedHeight = value.height ?? value.width;\n    }\n    if (convertedWidth !== void 0) {\n      this._setWidth(convertedWidth, this.bounds.width);\n    }\n    if (convertedHeight !== void 0) {\n      this._setHeight(convertedHeight, this.bounds.height);\n    }\n  }\n  /**\n   * Adds the bounds of this text to the bounds object.\n   * @param bounds - The output bounds object.\n   */\n  addBounds(bounds) {\n    const _bounds = this.bounds;\n    bounds.addFrame(\n      _bounds.minX,\n      _bounds.minY,\n      _bounds.maxX,\n      _bounds.maxY\n    );\n  }\n  /**\n   * Checks if the text contains the given point.\n   * @param point - The point to check\n   */\n  containsPoint(point) {\n    const width = this.bounds.width;\n    const height = this.bounds.height;\n    const x1 = -width * this.anchor.x;\n    let y1 = 0;\n    if (point.x >= x1 && point.x <= x1 + width) {\n      y1 = -height * this.anchor.y;\n      if (point.y >= y1 && point.y <= y1 + height)\n        return true;\n    }\n    return false;\n  }\n  onViewUpdate() {\n    this._didChangeId += 1 << 12;\n    this._boundsDirty = true;\n    if (this.didViewUpdate)\n      return;\n    this.didViewUpdate = true;\n    this._didTextUpdate = true;\n    const renderGroup = this.renderGroup || this.parentRenderGroup;\n    if (renderGroup) {\n      renderGroup.onChildViewUpdate(this);\n    }\n  }\n  _getKey() {\n    return `${this.text}:${this._style.styleKey}:${this._resolution}`;\n  }\n  /**\n   * Destroys this text renderable and optionally its style texture.\n   * @param options - Options parameter. A boolean will act as if all options\n   *  have been set to that value\n   * @param {boolean} [options.texture=false] - Should it destroy the texture of the text style\n   * @param {boolean} [options.textureSource=false] - Should it destroy the textureSource of the text style\n   * @param {boolean} [options.style=false] - Should it destroy the style of the text\n   */\n  destroy(options = false) {\n    super.destroy(options);\n    this.owner = null;\n    this._bounds = null;\n    this._anchor = null;\n    if (typeof options === \"boolean\" ? options : options?.style) {\n      this._style.destroy(options);\n    }\n    this._style = null;\n    this._text = null;\n  }\n}\nfunction ensureOptions(args, name) {\n  let options = args[0] ?? {};\n  if (typeof options === \"string\" || args[1]) {\n    deprecation(v8_0_0, `use new ${name}({ text: \"hi!\", style }) instead`);\n    options = {\n      text: options,\n      style: args[1]\n    };\n  }\n  return options;\n}\n\nexport { AbstractText, ensureOptions };\n//# sourceMappingURL=AbstractText.mjs.map\n","import { AbstractText, ensureOptions } from './AbstractText.mjs';\nimport { CanvasTextMetrics } from './canvas/CanvasTextMetrics.mjs';\nimport { TextStyle } from './TextStyle.mjs';\n\n\"use strict\";\nclass Text extends AbstractText {\n  constructor(...args) {\n    const options = ensureOptions(args, \"Text\");\n    super(options, TextStyle);\n    this.renderPipeId = \"text\";\n  }\n  _updateBounds() {\n    const bounds = this._bounds;\n    const anchor = this._anchor;\n    const canvasMeasurement = CanvasTextMetrics.measureText(\n      this._text,\n      this._style\n    );\n    const { width, height } = canvasMeasurement;\n    bounds.minX = -anchor._x * width;\n    bounds.maxX = bounds.minX + width;\n    bounds.minY = -anchor._y * height;\n    bounds.maxY = bounds.minY + height;\n  }\n}\n\nexport { Text };\n//# sourceMappingURL=Text.mjs.map\n","import { browserExt } from './environment-browser/browserExt.mjs';\nimport { webworkerExt } from './environment-webworker/webworkerExt.mjs';\nimport { extensions } from './extensions/Extensions.mjs';\nexport { ExtensionType, normalizeExtensionPriority } from './extensions/Extensions.mjs';\nimport './rendering/init.mjs';\nimport './spritesheet/init.mjs';\nimport './accessibility/index.mjs';\nimport './advanced-blend-modes/index.mjs';\nimport './app/index.mjs';\nimport './assets/index.mjs';\nimport './color/index.mjs';\nimport './compressed-textures/index.mjs';\nimport './culling/index.mjs';\nimport './environment/index.mjs';\nimport './environment-browser/index.mjs';\nimport './environment-webworker/index.mjs';\nimport './events/index.mjs';\nimport './extensions/index.mjs';\nimport './filters/index.mjs';\nimport './maths/index.mjs';\nimport './prepare/index.mjs';\nimport './rendering/index.mjs';\nimport './scene/index.mjs';\nimport './spritesheet/index.mjs';\nimport './ticker/index.mjs';\nimport './utils/index.mjs';\nexport { AccessibilitySystem } from './accessibility/AccessibilitySystem.mjs';\nexport { accessibilityTarget } from './accessibility/accessibilityTarget.mjs';\nexport { ColorBlend } from './advanced-blend-modes/ColorBlend.mjs';\nexport { ColorBurnBlend } from './advanced-blend-modes/ColorBurnBlend.mjs';\nexport { ColorDodgeBlend } from './advanced-blend-modes/ColorDodgeBlend.mjs';\nexport { DarkenBlend } from './advanced-blend-modes/DarkenBlend.mjs';\nexport { DifferenceBlend } from './advanced-blend-modes/DifferenceBlend.mjs';\nexport { DivideBlend } from './advanced-blend-modes/DivideBlend.mjs';\nexport { ExclusionBlend } from './advanced-blend-modes/ExclusionBlend.mjs';\nexport { HardLightBlend } from './advanced-blend-modes/HardLightBlend.mjs';\nexport { HardMixBlend } from './advanced-blend-modes/HardMixBlend.mjs';\nexport { LightenBlend } from './advanced-blend-modes/LightenBlend.mjs';\nexport { LinearBurnBlend } from './advanced-blend-modes/LinearBurnBlend.mjs';\nexport { LinearDodgeBlend } from './advanced-blend-modes/LinearDodgeBlend.mjs';\nexport { LinearLightBlend } from './advanced-blend-modes/LinearLightBlend.mjs';\nexport { LuminosityBlend } from './advanced-blend-modes/LuminosityBlend.mjs';\nexport { NegationBlend } from './advanced-blend-modes/NegationBlend.mjs';\nexport { OverlayBlend } from './advanced-blend-modes/OverlayBlend.mjs';\nexport { PinLightBlend } from './advanced-blend-modes/PinLightBlend.mjs';\nexport { SaturationBlend } from './advanced-blend-modes/SaturationBlend.mjs';\nexport { SoftLightBlend } from './advanced-blend-modes/SoftLightBlend.mjs';\nexport { SubtractBlend } from './advanced-blend-modes/SubtractBlend.mjs';\nexport { VividLightBlend } from './advanced-blend-modes/VividLightBlend.mjs';\nexport { Application } from './app/Application.mjs';\nexport { ResizePlugin } from './app/ResizePlugin.mjs';\nexport { TickerPlugin } from './app/TickerPlugin.mjs';\nexport { Assets, AssetsClass } from './assets/Assets.mjs';\nexport { BackgroundLoader } from './assets/BackgroundLoader.mjs';\nexport { Cache } from './assets/cache/Cache.mjs';\nexport { cacheTextureArray } from './assets/cache/parsers/cacheTextureArray.mjs';\nexport { detectAvif } from './assets/detections/parsers/detectAvif.mjs';\nexport { detectDefaults } from './assets/detections/parsers/detectDefaults.mjs';\nexport { detectMp4 } from './assets/detections/parsers/detectMp4.mjs';\nexport { detectOgv } from './assets/detections/parsers/detectOgv.mjs';\nexport { detectWebm } from './assets/detections/parsers/detectWebm.mjs';\nexport { detectWebp } from './assets/detections/parsers/detectWebp.mjs';\nexport { testImageFormat } from './assets/detections/utils/testImageFormat.mjs';\nexport { testVideoFormat } from './assets/detections/utils/testVideoFormat.mjs';\nexport { Loader } from './assets/loader/Loader.mjs';\nexport { LoaderParserPriority } from './assets/loader/parsers/LoaderParser.mjs';\nexport { loadJson } from './assets/loader/parsers/loadJson.mjs';\nexport { loadTxt } from './assets/loader/parsers/loadTxt.mjs';\nexport { getFontFamilyName, loadWebFont } from './assets/loader/parsers/loadWebFont.mjs';\nexport { loadSvg } from './assets/loader/parsers/textures/loadSVG.mjs';\nexport { loadImageBitmap, loadTextures } from './assets/loader/parsers/textures/loadTextures.mjs';\nexport { crossOrigin, determineCrossOrigin, loadVideoTextures, preloadVideo } from './assets/loader/parsers/textures/loadVideoTextures.mjs';\nexport { createTexture } from './assets/loader/parsers/textures/utils/createTexture.mjs';\nexport { WorkerManager } from './assets/loader/workers/WorkerManager.mjs';\nexport { resolveJsonUrl } from './assets/resolver/parsers/resolveJsonUrl.mjs';\nexport { resolveTextureUrl } from './assets/resolver/parsers/resolveTextureUrl.mjs';\nexport { Resolver, getUrlExtension } from './assets/resolver/Resolver.mjs';\nexport { checkDataUrl } from './assets/utils/checkDataUrl.mjs';\nexport { checkExtension } from './assets/utils/checkExtension.mjs';\nexport { convertToList } from './assets/utils/convertToList.mjs';\nexport { copySearchParams } from './assets/utils/copySearchParams.mjs';\nexport { createStringVariations } from './assets/utils/createStringVariations.mjs';\nexport { isSingleItem } from './assets/utils/isSingleItem.mjs';\nexport { Color } from './color/Color.mjs';\nexport { detectBasis } from './compressed-textures/basis/detectBasis.mjs';\nexport { loadBasis } from './compressed-textures/basis/loadBasis.mjs';\nexport { createLevelBuffers } from './compressed-textures/basis/utils/createLevelBuffers.mjs';\nexport { gpuFormatToBasisTranscoderFormat } from './compressed-textures/basis/utils/gpuFormatToBasisTranscoderFormat.mjs';\nexport { basisTranscoderUrls, setBasisTranscoderPath } from './compressed-textures/basis/utils/setBasisTranscoderPath.mjs';\nexport { loadBasisOnWorker } from './compressed-textures/basis/worker/loadBasisOnWorker.mjs';\nexport { D3D10_RESOURCE_DIMENSION, D3DFMT, DDS, DXGI_FORMAT, DXGI_TO_TEXTURE_FORMAT, FOURCC_TO_TEXTURE_FORMAT, TEXTURE_FORMAT_BLOCK_SIZE } from './compressed-textures/dds/const.mjs';\nexport { loadDDS } from './compressed-textures/dds/loadDDS.mjs';\nexport { parseDDS } from './compressed-textures/dds/parseDDS.mjs';\nexport { loadKTX } from './compressed-textures/ktx/loadKTX.mjs';\nexport { parseKTX } from './compressed-textures/ktx/parseKTX.mjs';\nexport { GL_INTERNAL_FORMAT, KTX } from './compressed-textures/ktx2/const.mjs';\nexport { loadKTX2 } from './compressed-textures/ktx2/loadKTX2.mjs';\nexport { convertFormatIfRequired } from './compressed-textures/ktx2/utils/convertFormatIfRequired.mjs';\nexport { createLevelBuffersFromKTX } from './compressed-textures/ktx2/utils/createLevelBuffersFromKTX.mjs';\nexport { getTextureFormatFromKTXTexture } from './compressed-textures/ktx2/utils/getTextureFormatFromKTXTexture.mjs';\nexport { glFormatToGPUFormat } from './compressed-textures/ktx2/utils/glFormatToGPUFormat.mjs';\nexport { gpuFormatToKTXBasisTranscoderFormat } from './compressed-textures/ktx2/utils/gpuFormatToKTXBasisTranscoderFormat.mjs';\nexport { ktxTranscoderUrls, setKTXTranscoderPath } from './compressed-textures/ktx2/utils/setKTXTranscoderPath.mjs';\nexport { vkFormatToGPUFormat } from './compressed-textures/ktx2/utils/vkFormatToGPUFormat.mjs';\nexport { loadKTX2onWorker } from './compressed-textures/ktx2/worker/loadKTX2onWorker.mjs';\nexport { detectCompressed } from './compressed-textures/shared/detectCompressed.mjs';\nexport { resolveCompressedTextureUrl, validFormats } from './compressed-textures/shared/resolveCompressedTextureUrl.mjs';\nexport { Culler } from './culling/Culler.mjs';\nexport { CullerPlugin } from './culling/CullerPlugin.mjs';\nexport { cullingMixin } from './culling/cullingMixin.mjs';\nexport { DOMAdapter } from './environment/adapter.mjs';\nexport { autoDetectEnvironment, loadEnvironmentExtensions } from './environment/autoDetectEnvironment.mjs';\nexport { BrowserAdapter } from './environment-browser/BrowserAdapter.mjs';\nexport { WebWorkerAdapter } from './environment-webworker/WebWorkerAdapter.mjs';\nexport { EventBoundary } from './events/EventBoundary.mjs';\nexport { EventSystem } from './events/EventSystem.mjs';\nexport { EventsTicker } from './events/EventTicker.mjs';\nexport { FederatedEvent } from './events/FederatedEvent.mjs';\nexport { FederatedContainer } from './events/FederatedEventTarget.mjs';\nexport { FederatedMouseEvent } from './events/FederatedMouseEvent.mjs';\nexport { FederatedPointerEvent } from './events/FederatedPointerEvent.mjs';\nexport { FederatedWheelEvent } from './events/FederatedWheelEvent.mjs';\nexport { default as blendTemplateFrag } from './filters/blend-modes/blend-template.frag.mjs';\nexport { default as blendTemplateVert } from './filters/blend-modes/blend-template.vert.mjs';\nexport { default as blendTemplateWgsl } from './filters/blend-modes/blend-template.wgsl.mjs';\nexport { default as hslWgsl } from './filters/blend-modes/hsl.wgsl.mjs';\nexport { default as alphaFrag } from './filters/defaults/alpha/alpha.frag.mjs';\nexport { default as alphaWgsl } from './filters/defaults/alpha/alpha.wgsl.mjs';\nexport { default as blurTemplateWgsl } from './filters/defaults/blur/gpu/blur-template.wgsl.mjs';\nexport { default as colorMatrixFilterFrag } from './filters/defaults/color-matrix/colorMatrixFilter.frag.mjs';\nexport { default as colorMatrixFilterWgsl } from './filters/defaults/color-matrix/colorMatrixFilter.wgsl.mjs';\nexport { default as defaultFilterVert } from './filters/defaults/defaultFilter.vert.mjs';\nexport { default as displacementFrag } from './filters/defaults/displacement/displacement.frag.mjs';\nexport { default as displacementVert } from './filters/defaults/displacement/displacement.vert.mjs';\nexport { default as displacementWgsl } from './filters/defaults/displacement/displacement.wgsl.mjs';\nexport { default as noiseFrag } from './filters/defaults/noise/noise.frag.mjs';\nexport { default as noiseWgsl } from './filters/defaults/noise/noise.wgsl.mjs';\nexport { default as maskFrag } from './filters/mask/mask.frag.mjs';\nexport { default as maskVert } from './filters/mask/mask.vert.mjs';\nexport { default as maskWgsl } from './filters/mask/mask.wgsl.mjs';\nexport { BlendModeFilter } from './filters/blend-modes/BlendModeFilter.mjs';\nexport { hslgl } from './filters/blend-modes/hls/GLhls.mjs';\nexport { hslgpu } from './filters/blend-modes/hls/GPUhls.mjs';\nexport { AlphaFilter } from './filters/defaults/alpha/AlphaFilter.mjs';\nexport { BlurFilter } from './filters/defaults/blur/BlurFilter.mjs';\nexport { BlurFilterPass } from './filters/defaults/blur/BlurFilterPass.mjs';\nexport { GAUSSIAN_VALUES } from './filters/defaults/blur/const.mjs';\nexport { generateBlurFragSource } from './filters/defaults/blur/gl/generateBlurFragSource.mjs';\nexport { generateBlurGlProgram } from './filters/defaults/blur/gl/generateBlurGlProgram.mjs';\nexport { generateBlurVertSource } from './filters/defaults/blur/gl/generateBlurVertSource.mjs';\nexport { generateBlurProgram } from './filters/defaults/blur/gpu/generateBlurProgram.mjs';\nexport { ColorMatrixFilter } from './filters/defaults/color-matrix/ColorMatrixFilter.mjs';\nexport { DisplacementFilter } from './filters/defaults/displacement/DisplacementFilter.mjs';\nexport { NoiseFilter } from './filters/defaults/noise/NoiseFilter.mjs';\nexport { Filter } from './filters/Filter.mjs';\nexport { FilterEffect } from './filters/FilterEffect.mjs';\nexport { FilterPipe } from './filters/FilterPipe.mjs';\nexport { FilterSystem } from './filters/FilterSystem.mjs';\nexport { MaskFilter } from './filters/mask/MaskFilter.mjs';\nexport { groupD8 } from './maths/matrix/groupD8.mjs';\nexport { Matrix } from './maths/matrix/Matrix.mjs';\nexport { DEG_TO_RAD, PI_2, RAD_TO_DEG } from './maths/misc/const.mjs';\nexport { isPow2, log2, nextPow2 } from './maths/misc/pow2.mjs';\nexport { squaredDistanceToLineSegment } from './maths/misc/squaredDistanceToLineSegment.mjs';\nexport { ObservablePoint } from './maths/point/ObservablePoint.mjs';\nexport { Point } from './maths/point/Point.mjs';\nexport { pointInTriangle } from './maths/point/pointInTriangle.mjs';\nexport { Circle } from './maths/shapes/Circle.mjs';\nexport { Ellipse } from './maths/shapes/Ellipse.mjs';\nexport { Polygon } from './maths/shapes/Polygon.mjs';\nexport { Rectangle } from './maths/shapes/Rectangle.mjs';\nexport { RoundedRectangle } from './maths/shapes/RoundedRectangle.mjs';\nexport { Triangle } from './maths/shapes/Triangle.mjs';\nexport { PrepareBase } from './prepare/PrepareBase.mjs';\nexport { PrepareQueue } from './prepare/PrepareQueue.mjs';\nexport { PrepareSystem } from './prepare/PrepareSystem.mjs';\nexport { PrepareUpload } from './prepare/PrepareUpload.mjs';\nexport { GlBatchAdaptor } from './rendering/batcher/gl/GlBatchAdaptor.mjs';\nexport { checkMaxIfStatementsInShader } from './rendering/batcher/gl/utils/checkMaxIfStatementsInShader.mjs';\nexport { getMaxTexturesPerBatch } from './rendering/batcher/gl/utils/maxRecommendedTextures.mjs';\nexport { generateGPULayout } from './rendering/batcher/gpu/generateGPULayout.mjs';\nexport { generateLayout } from './rendering/batcher/gpu/generateLayout.mjs';\nexport { getTextureBatchBindGroup } from './rendering/batcher/gpu/getTextureBatchBindGroup.mjs';\nexport { GpuBatchAdaptor } from './rendering/batcher/gpu/GpuBatchAdaptor.mjs';\nexport { Batch, Batcher } from './rendering/batcher/shared/Batcher.mjs';\nexport { BatcherPipe } from './rendering/batcher/shared/BatcherPipe.mjs';\nexport { BatchGeometry } from './rendering/batcher/shared/BatchGeometry.mjs';\nexport { BatchTextureArray } from './rendering/batcher/shared/BatchTextureArray.mjs';\nexport { compileHighShaderGlProgram, compileHighShaderGpuProgram } from './rendering/high-shader/compileHighShaderToProgram.mjs';\nexport { compileHighShader, compileHighShaderGl } from './rendering/high-shader/compiler/compileHighShader.mjs';\nexport { addBits } from './rendering/high-shader/compiler/utils/addBits.mjs';\nexport { compileHooks, findHooksRx } from './rendering/high-shader/compiler/utils/compileHooks.mjs';\nexport { compileInputs } from './rendering/high-shader/compiler/utils/compileInputs.mjs';\nexport { compileOutputs } from './rendering/high-shader/compiler/utils/compileOutputs.mjs';\nexport { formatShader } from './rendering/high-shader/compiler/utils/formatShader.mjs';\nexport { injectBits } from './rendering/high-shader/compiler/utils/injectBits.mjs';\nexport { fragmentGPUTemplate, fragmentGlTemplate, vertexGPUTemplate, vertexGlTemplate } from './rendering/high-shader/defaultProgramTemplate.mjs';\nexport { colorBit, colorBitGl } from './rendering/high-shader/shader-bits/colorBit.mjs';\nexport { generateTextureBatchBit, generateTextureBatchBitGl } from './rendering/high-shader/shader-bits/generateTextureBatchBit.mjs';\nexport { globalUniformsBit, globalUniformsBitGl, globalUniformsUBOBitGl } from './rendering/high-shader/shader-bits/globalUniformsBit.mjs';\nexport { localUniformBit, localUniformBitGl, localUniformBitGroup2 } from './rendering/high-shader/shader-bits/localUniformBit.mjs';\nexport { roundPixelsBit, roundPixelsBitGl } from './rendering/high-shader/shader-bits/roundPixelsBit.mjs';\nexport { textureBit, textureBitGl } from './rendering/high-shader/shader-bits/textureBit.mjs';\nexport { AlphaMask } from './rendering/mask/alpha/AlphaMask.mjs';\nexport { AlphaMaskPipe } from './rendering/mask/alpha/AlphaMaskPipe.mjs';\nexport { ColorMask } from './rendering/mask/color/ColorMask.mjs';\nexport { ColorMaskPipe } from './rendering/mask/color/ColorMaskPipe.mjs';\nexport { MaskEffectManager, MaskEffectManagerClass } from './rendering/mask/MaskEffectManager.mjs';\nexport { ScissorMask } from './rendering/mask/scissor/ScissorMask.mjs';\nexport { StencilMask } from './rendering/mask/stencil/StencilMask.mjs';\nexport { StencilMaskPipe } from './rendering/mask/stencil/StencilMaskPipe.mjs';\nexport { addMaskBounds } from './rendering/mask/utils/addMaskBounds.mjs';\nexport { addMaskLocalBounds, getMatrixRelativeToParent } from './rendering/mask/utils/addMaskLocalBounds.mjs';\nexport { autoDetectRenderer } from './rendering/renderers/autoDetectRenderer.mjs';\nexport { BUFFER_TYPE } from './rendering/renderers/gl/buffer/const.mjs';\nexport { GlBuffer } from './rendering/renderers/gl/buffer/GlBuffer.mjs';\nexport { GlBufferSystem } from './rendering/renderers/gl/buffer/GlBufferSystem.mjs';\nexport { CLEAR } from './rendering/renderers/gl/const.mjs';\nexport { GlContextSystem } from './rendering/renderers/gl/context/GlContextSystem.mjs';\nexport { GlGeometrySystem } from './rendering/renderers/gl/geometry/GlGeometrySystem.mjs';\nexport { getGlTypeFromFormat } from './rendering/renderers/gl/geometry/utils/getGlTypeFromFormat.mjs';\nexport { GlBackBufferSystem } from './rendering/renderers/gl/GlBackBufferSystem.mjs';\nexport { GlColorMaskSystem } from './rendering/renderers/gl/GlColorMaskSystem.mjs';\nexport { GlEncoderSystem } from './rendering/renderers/gl/GlEncoderSystem.mjs';\nexport { GlRenderTarget } from './rendering/renderers/gl/GlRenderTarget.mjs';\nexport { GlStencilSystem } from './rendering/renderers/gl/GlStencilSystem.mjs';\nexport { GlUboSystem } from './rendering/renderers/gl/GlUboSystem.mjs';\nexport { GlRenderTargetAdaptor } from './rendering/renderers/gl/renderTarget/GlRenderTargetAdaptor.mjs';\nexport { GlRenderTargetSystem } from './rendering/renderers/gl/renderTarget/GlRenderTargetSystem.mjs';\nexport { generateShaderSyncCode } from './rendering/renderers/gl/shader/GenerateShaderSyncCode.mjs';\nexport { getBatchSamplersUniformGroup } from './rendering/renderers/gl/shader/getBatchSamplersUniformGroup.mjs';\nexport { GlProgram } from './rendering/renderers/gl/shader/GlProgram.mjs';\nexport { GlProgramData, IGLUniformData } from './rendering/renderers/gl/shader/GlProgramData.mjs';\nexport { GlShaderSystem } from './rendering/renderers/gl/shader/GlShaderSystem.mjs';\nexport { GlUniformGroupSystem } from './rendering/renderers/gl/shader/GlUniformGroupSystem.mjs';\nexport { migrateFragmentFromV7toV8 } from './rendering/renderers/gl/shader/migrateFragmentFromV7toV8.mjs';\nexport { compileShader } from './rendering/renderers/gl/shader/program/compileShader.mjs';\nexport { defaultValue } from './rendering/renderers/gl/shader/program/defaultValue.mjs';\nexport { ensureAttributes } from './rendering/renderers/gl/shader/program/ensureAttributes.mjs';\nexport { extractAttributesFromGlProgram } from './rendering/renderers/gl/shader/program/extractAttributesFromGlProgram.mjs';\nexport { generateProgram } from './rendering/renderers/gl/shader/program/generateProgram.mjs';\nexport { getMaxFragmentPrecision } from './rendering/renderers/gl/shader/program/getMaxFragmentPrecision.mjs';\nexport { getTestContext } from './rendering/renderers/gl/shader/program/getTestContext.mjs';\nexport { getUboData } from './rendering/renderers/gl/shader/program/getUboData.mjs';\nexport { getUniformData } from './rendering/renderers/gl/shader/program/getUniformData.mjs';\nexport { logProgramError } from './rendering/renderers/gl/shader/program/logProgramError.mjs';\nexport { mapSize } from './rendering/renderers/gl/shader/program/mapSize.mjs';\nexport { mapGlToVertexFormat, mapType } from './rendering/renderers/gl/shader/program/mapType.mjs';\nexport { addProgramDefines } from './rendering/renderers/gl/shader/program/preprocessors/addProgramDefines.mjs';\nexport { ensurePrecision } from './rendering/renderers/gl/shader/program/preprocessors/ensurePrecision.mjs';\nexport { insertVersion } from './rendering/renderers/gl/shader/program/preprocessors/insertVersion.mjs';\nexport { setProgramName } from './rendering/renderers/gl/shader/program/preprocessors/setProgramName.mjs';\nexport { stripVersion } from './rendering/renderers/gl/shader/program/preprocessors/stripVersion.mjs';\nexport { WGSL_TO_STD40_SIZE, createUboElementsSTD40 } from './rendering/renderers/gl/shader/utils/createUboElementsSTD40.mjs';\nexport { createUboSyncFunctionSTD40 } from './rendering/renderers/gl/shader/utils/createUboSyncSTD40.mjs';\nexport { generateArraySyncSTD40 } from './rendering/renderers/gl/shader/utils/generateArraySyncSTD40.mjs';\nexport { generateUniformsSync } from './rendering/renderers/gl/shader/utils/generateUniformsSync.mjs';\nexport { UNIFORM_TO_ARRAY_SETTERS, UNIFORM_TO_SINGLE_SETTERS } from './rendering/renderers/gl/shader/utils/generateUniformsSyncTypes.mjs';\nexport { GlStateSystem } from './rendering/renderers/gl/state/GlStateSystem.mjs';\nexport { mapWebGLBlendModesToPixi } from './rendering/renderers/gl/state/mapWebGLBlendModesToPixi.mjs';\nexport { GL_FORMATS, GL_TARGETS, GL_TYPES, GL_WRAP_MODES } from './rendering/renderers/gl/texture/const.mjs';\nexport { GlTexture } from './rendering/renderers/gl/texture/GlTexture.mjs';\nexport { GlTextureSystem } from './rendering/renderers/gl/texture/GlTextureSystem.mjs';\nexport { glUploadBufferImageResource } from './rendering/renderers/gl/texture/uploaders/glUploadBufferImageResource.mjs';\nexport { glUploadCompressedTextureResource } from './rendering/renderers/gl/texture/uploaders/glUploadCompressedTextureResource.mjs';\nexport { glUploadImageResource } from './rendering/renderers/gl/texture/uploaders/glUploadImageResource.mjs';\nexport { glUploadVideoResource } from './rendering/renderers/gl/texture/uploaders/glUploadVideoResource.mjs';\nexport { applyStyleParams } from './rendering/renderers/gl/texture/utils/applyStyleParams.mjs';\nexport { getSupportedGlCompressedTextureFormats } from './rendering/renderers/gl/texture/utils/getSupportedGlCompressedTextureFormats.mjs';\nexport { mapFormatToGlFormat } from './rendering/renderers/gl/texture/utils/mapFormatToGlFormat.mjs';\nexport { mapFormatToGlInternalFormat } from './rendering/renderers/gl/texture/utils/mapFormatToGlInternalFormat.mjs';\nexport { mapFormatToGlType } from './rendering/renderers/gl/texture/utils/mapFormatToGlType.mjs';\nexport { compareModeToGlCompare, mipmapScaleModeToGlFilter, scaleModeToGlFilter, wrapModeToGlAddress } from './rendering/renderers/gl/texture/utils/pixiToGlMaps.mjs';\nexport { unpremultiplyAlpha } from './rendering/renderers/gl/texture/utils/unpremultiplyAlpha.mjs';\nexport { WebGLRenderer } from './rendering/renderers/gl/WebGLRenderer.mjs';\nexport { BindGroupSystem } from './rendering/renderers/gpu/BindGroupSystem.mjs';\nexport { GpuBufferSystem } from './rendering/renderers/gpu/buffer/GpuBufferSystem.mjs';\nexport { GpuReadBuffer } from './rendering/renderers/gpu/buffer/GpuReadBuffer.mjs';\nexport { UboBatch } from './rendering/renderers/gpu/buffer/UboBatch.mjs';\nexport { GpuColorMaskSystem } from './rendering/renderers/gpu/GpuColorMaskSystem.mjs';\nexport { GpuDeviceSystem } from './rendering/renderers/gpu/GpuDeviceSystem.mjs';\nexport { GpuEncoderSystem } from './rendering/renderers/gpu/GpuEncoderSystem.mjs';\nexport { GpuStencilSystem } from './rendering/renderers/gpu/GpuStencilSystem.mjs';\nexport { GpuUboSystem } from './rendering/renderers/gpu/GpuUboSystem.mjs';\nexport { GpuUniformBatchPipe } from './rendering/renderers/gpu/GpuUniformBatchPipe.mjs';\nexport { PipelineSystem } from './rendering/renderers/gpu/pipeline/PipelineSystem.mjs';\nexport { calculateProjection } from './rendering/renderers/gpu/renderTarget/calculateProjection.mjs';\nexport { GpuRenderTarget } from './rendering/renderers/gpu/renderTarget/GpuRenderTarget.mjs';\nexport { GpuRenderTargetAdaptor } from './rendering/renderers/gpu/renderTarget/GpuRenderTargetAdaptor.mjs';\nexport { GpuRenderTargetSystem } from './rendering/renderers/gpu/renderTarget/GpuRenderTargetSystem.mjs';\nexport { BindGroup } from './rendering/renderers/gpu/shader/BindGroup.mjs';\nexport { GpuProgram } from './rendering/renderers/gpu/shader/GpuProgram.mjs';\nexport { GpuShaderSystem } from './rendering/renderers/gpu/shader/GpuShaderSystem.mjs';\nexport { WGSL_ALIGN_SIZE_DATA, createUboElementsWGSL } from './rendering/renderers/gpu/shader/utils/createUboElementsWGSL.mjs';\nexport { createUboSyncFunctionWGSL } from './rendering/renderers/gpu/shader/utils/createUboSyncFunctionWGSL.mjs';\nexport { extractAttributesFromGpuProgram } from './rendering/renderers/gpu/shader/utils/extractAttributesFromGpuProgram.mjs';\nexport { extractStructAndGroups } from './rendering/renderers/gpu/shader/utils/extractStructAndGroups.mjs';\nexport { generateArraySyncWGSL } from './rendering/renderers/gpu/shader/utils/generateArraySyncWGSL.mjs';\nexport { generateGpuLayoutGroups } from './rendering/renderers/gpu/shader/utils/generateGpuLayoutGroups.mjs';\nexport { generateLayoutHash } from './rendering/renderers/gpu/shader/utils/generateLayoutHash.mjs';\nexport { removeStructAndGroupDuplicates } from './rendering/renderers/gpu/shader/utils/removeStructAndGroupDuplicates.mjs';\nexport { GpuBlendModesToPixi } from './rendering/renderers/gpu/state/GpuBlendModesToPixi.mjs';\nexport { GpuStateSystem } from './rendering/renderers/gpu/state/GpuStateSystem.mjs';\nexport { GpuStencilModesToPixi } from './rendering/renderers/gpu/state/GpuStencilModesToPixi.mjs';\nexport { GpuTextureSystem } from './rendering/renderers/gpu/texture/GpuTextureSystem.mjs';\nexport { gpuUploadBufferImageResource } from './rendering/renderers/gpu/texture/uploaders/gpuUploadBufferImageResource.mjs';\nexport { blockDataMap, gpuUploadCompressedTextureResource } from './rendering/renderers/gpu/texture/uploaders/gpuUploadCompressedTextureResource.mjs';\nexport { gpuUploadImageResource } from './rendering/renderers/gpu/texture/uploaders/gpuUploadImageSource.mjs';\nexport { gpuUploadVideoResource } from './rendering/renderers/gpu/texture/uploaders/gpuUploadVideoSource.mjs';\nexport { getSupportedGPUCompressedTextureFormats } from './rendering/renderers/gpu/texture/utils/getSupportedGPUCompressedTextureFormats.mjs';\nexport { GpuMipmapGenerator } from './rendering/renderers/gpu/texture/utils/GpuMipmapGenerator.mjs';\nexport { WebGPURenderer } from './rendering/renderers/gpu/WebGPURenderer.mjs';\nexport { BackgroundSystem } from './rendering/renderers/shared/background/BackgroundSystem.mjs';\nexport { BlendModePipe } from './rendering/renderers/shared/blendModes/BlendModePipe.mjs';\nexport { Buffer } from './rendering/renderers/shared/buffer/Buffer.mjs';\nexport { BufferResource } from './rendering/renderers/shared/buffer/BufferResource.mjs';\nexport { BufferUsage } from './rendering/renderers/shared/buffer/const.mjs';\nexport { fastCopy } from './rendering/renderers/shared/buffer/utils/fastCopy.mjs';\nexport { ExtractSystem } from './rendering/renderers/shared/extract/ExtractSystem.mjs';\nexport { GenerateTextureSystem } from './rendering/renderers/shared/extract/GenerateTextureSystem.mjs';\nexport { DRAW_MODES } from './rendering/renderers/shared/geometry/const.mjs';\nexport { Geometry } from './rendering/renderers/shared/geometry/Geometry.mjs';\nexport { buildSimpleUvs, buildUvs } from './rendering/renderers/shared/geometry/utils/buildUvs.mjs';\nexport { ensureIsBuffer } from './rendering/renderers/shared/geometry/utils/ensureIsBuffer.mjs';\nexport { getAttributeInfoFromFormat } from './rendering/renderers/shared/geometry/utils/getAttributeInfoFromFormat.mjs';\nexport { getGeometryBounds } from './rendering/renderers/shared/geometry/utils/getGeometryBounds.mjs';\nexport { transformVertices } from './rendering/renderers/shared/geometry/utils/transformVertices.mjs';\nexport { InstructionSet } from './rendering/renderers/shared/instructions/InstructionSet.mjs';\nexport { GlobalUniformSystem } from './rendering/renderers/shared/renderTarget/GlobalUniformSystem.mjs';\nexport { isRenderingToScreen } from './rendering/renderers/shared/renderTarget/isRenderingToScreen.mjs';\nexport { RenderTarget } from './rendering/renderers/shared/renderTarget/RenderTarget.mjs';\nexport { RenderTargetSystem } from './rendering/renderers/shared/renderTarget/RenderTargetSystem.mjs';\nexport { viewportFromFrame } from './rendering/renderers/shared/renderTarget/viewportFromFrame.mjs';\nexport { ShaderStage } from './rendering/renderers/shared/shader/const.mjs';\nexport { Shader } from './rendering/renderers/shared/shader/Shader.mjs';\nexport { UNIFORM_TYPES_MAP, UNIFORM_TYPES_VALUES } from './rendering/renderers/shared/shader/types.mjs';\nexport { UboSystem } from './rendering/renderers/shared/shader/UboSystem.mjs';\nexport { UniformGroup } from './rendering/renderers/shared/shader/UniformGroup.mjs';\nexport { createUboSyncFunction } from './rendering/renderers/shared/shader/utils/createUboSyncFunction.mjs';\nexport { getDefaultUniformValue } from './rendering/renderers/shared/shader/utils/getDefaultUniformValue.mjs';\nexport { uboSyncFunctionsSTD40, uboSyncFunctionsWGSL } from './rendering/renderers/shared/shader/utils/uboSyncFunctions.mjs';\nexport { uniformParsers } from './rendering/renderers/shared/shader/utils/uniformParsers.mjs';\nexport { HelloSystem } from './rendering/renderers/shared/startup/HelloSystem.mjs';\nexport { BLEND_TO_NPM, STENCIL_MODES } from './rendering/renderers/shared/state/const.mjs';\nexport { getAdjustedBlendModeBlend } from './rendering/renderers/shared/state/getAdjustedBlendModeBlend.mjs';\nexport { State } from './rendering/renderers/shared/state/State.mjs';\nexport { AbstractRenderer } from './rendering/renderers/shared/system/AbstractRenderer.mjs';\nexport { SharedRenderPipes, SharedSystems } from './rendering/renderers/shared/system/SharedSystems.mjs';\nexport { SystemRunner } from './rendering/renderers/shared/system/SystemRunner.mjs';\nexport { CanvasPool, CanvasPoolClass } from './rendering/renderers/shared/texture/CanvasPool.mjs';\nexport { DEPRECATED_SCALE_MODES, DEPRECATED_WRAP_MODES, MSAA_QUALITY, SCALE_MODES, WRAP_MODES } from './rendering/renderers/shared/texture/const.mjs';\nexport { RenderTexture } from './rendering/renderers/shared/texture/RenderTexture.mjs';\nexport { BufferImageSource } from './rendering/renderers/shared/texture/sources/BufferImageSource.mjs';\nexport { CanvasSource } from './rendering/renderers/shared/texture/sources/CanvasSource.mjs';\nexport { CompressedSource } from './rendering/renderers/shared/texture/sources/CompressedSource.mjs';\nexport { ImageSource } from './rendering/renderers/shared/texture/sources/ImageSource.mjs';\nexport { TextureSource } from './rendering/renderers/shared/texture/sources/TextureSource.mjs';\nexport { VideoSource } from './rendering/renderers/shared/texture/sources/VideoSource.mjs';\nexport { Texture } from './rendering/renderers/shared/texture/Texture.mjs';\nexport { TextureGCSystem } from './rendering/renderers/shared/texture/TextureGCSystem.mjs';\nexport { TextureMatrix } from './rendering/renderers/shared/texture/TextureMatrix.mjs';\nexport { TexturePool, TexturePoolClass } from './rendering/renderers/shared/texture/TexturePool.mjs';\nexport { TextureStyle } from './rendering/renderers/shared/texture/TextureStyle.mjs';\nexport { TextureUvs } from './rendering/renderers/shared/texture/TextureUvs.mjs';\nexport { generateUID } from './rendering/renderers/shared/texture/utils/generateUID.mjs';\nexport { getCanvasTexture, hasCachedCanvasTexture } from './rendering/renderers/shared/texture/utils/getCanvasTexture.mjs';\nexport { getSupportedCompressedTextureFormats } from './rendering/renderers/shared/texture/utils/getSupportedCompressedTextureFormats.mjs';\nexport { getSupportedTextureFormats, nonCompressedFormats } from './rendering/renderers/shared/texture/utils/getSupportedTextureFormats.mjs';\nexport { autoDetectSource, resourceToTexture, textureFrom } from './rendering/renderers/shared/texture/utils/textureFrom.mjs';\nexport { createIdFromString } from './rendering/renderers/shared/utils/createIdFromString.mjs';\nexport { parseFunctionBody } from './rendering/renderers/shared/utils/parseFunctionBody.mjs';\nexport { ViewSystem } from './rendering/renderers/shared/view/ViewSystem.mjs';\nexport { RendererType } from './rendering/renderers/types.mjs';\nexport { Bounds } from './scene/container/bounds/Bounds.mjs';\nexport { _getGlobalBoundsRecursive, getFastGlobalBounds } from './scene/container/bounds/getFastGlobalBounds.mjs';\nexport { _getGlobalBounds, getGlobalBounds, updateTransformBackwards } from './scene/container/bounds/getGlobalBounds.mjs';\nexport { getLocalBounds, getParent } from './scene/container/bounds/getLocalBounds.mjs';\nexport { getGlobalRenderableBounds } from './scene/container/bounds/getRenderableBounds.mjs';\nexport { boundsPool, matrixPool } from './scene/container/bounds/utils/matrixAndBoundsPool.mjs';\nexport { childrenHelperMixin } from './scene/container/container-mixins/childrenHelperMixin.mjs';\nexport { effectsMixin } from './scene/container/container-mixins/effectsMixin.mjs';\nexport { findMixin } from './scene/container/container-mixins/findMixin.mjs';\nexport { measureMixin } from './scene/container/container-mixins/measureMixin.mjs';\nexport { onRenderMixin } from './scene/container/container-mixins/onRenderMixin.mjs';\nexport { sortMixin } from './scene/container/container-mixins/sortMixin.mjs';\nexport { toLocalGlobalMixin } from './scene/container/container-mixins/toLocalGlobalMixin.mjs';\nexport { Container, UPDATE_BLEND, UPDATE_COLOR, UPDATE_TRANSFORM, UPDATE_VISIBLE } from './scene/container/Container.mjs';\nexport { CustomRenderPipe } from './scene/container/CustomRenderPipe.mjs';\nexport { RenderContainer } from './scene/container/RenderContainer.mjs';\nexport { RenderGroup } from './scene/container/RenderGroup.mjs';\nexport { RenderGroupPipe } from './scene/container/RenderGroupPipe.mjs';\nexport { RenderGroupSystem } from './scene/container/RenderGroupSystem.mjs';\nexport { assignWithIgnore } from './scene/container/utils/assignWithIgnore.mjs';\nexport { buildInstructions, collectAllRenderables } from './scene/container/utils/buildInstructions.mjs';\nexport { checkChildrenDidChange } from './scene/container/utils/checkChildrenDidChange.mjs';\nexport { collectRenderGroups } from './scene/container/utils/collectRenderGroups.mjs';\nexport { definedProps } from './scene/container/utils/definedProps.mjs';\nexport { executeInstructions } from './scene/container/utils/executeInstructions.mjs';\nexport { mixColors, mixStandardAnd32BitColors } from './scene/container/utils/mixColors.mjs';\nexport { mixHexColors } from './scene/container/utils/mixHexColors.mjs';\nexport { multiplyHexColors } from './scene/container/utils/multiplyHexColors.mjs';\nexport { updateLocalTransform } from './scene/container/utils/updateLocalTransform.mjs';\nexport { updateRenderGroupTransform, updateRenderGroupTransforms, updateTransformAndChildren } from './scene/container/utils/updateRenderGroupTransforms.mjs';\nexport { updateWorldTransform } from './scene/container/utils/updateWorldTransform.mjs';\nexport { validateRenderables } from './scene/container/utils/validateRenderables.mjs';\nexport { GlGraphicsAdaptor } from './scene/graphics/gl/GlGraphicsAdaptor.mjs';\nexport { color32BitToUniform, colorToUniform } from './scene/graphics/gpu/colorToUniform.mjs';\nexport { GpuGraphicsAdaptor } from './scene/graphics/gpu/GpuGraphicsAdaptor.mjs';\nexport { BatchableGraphics } from './scene/graphics/shared/BatchableGraphics.mjs';\nexport { buildAdaptiveBezier } from './scene/graphics/shared/buildCommands/buildAdaptiveBezier.mjs';\nexport { buildAdaptiveQuadratic } from './scene/graphics/shared/buildCommands/buildAdaptiveQuadratic.mjs';\nexport { buildArc } from './scene/graphics/shared/buildCommands/buildArc.mjs';\nexport { buildArcTo } from './scene/graphics/shared/buildCommands/buildArcTo.mjs';\nexport { buildArcToSvg } from './scene/graphics/shared/buildCommands/buildArcToSvg.mjs';\nexport { buildCircle, buildEllipse, buildRoundedRectangle } from './scene/graphics/shared/buildCommands/buildCircle.mjs';\nexport { buildLine } from './scene/graphics/shared/buildCommands/buildLine.mjs';\nexport { buildPolygon } from './scene/graphics/shared/buildCommands/buildPolygon.mjs';\nexport { buildRectangle } from './scene/graphics/shared/buildCommands/buildRectangle.mjs';\nexport { buildTriangle } from './scene/graphics/shared/buildCommands/buildTriangle.mjs';\nexport { closePointEps, curveEps } from './scene/graphics/shared/const.mjs';\nexport { FillGradient } from './scene/graphics/shared/fill/FillGradient.mjs';\nexport { FillPattern } from './scene/graphics/shared/fill/FillPattern.mjs';\nexport { Graphics } from './scene/graphics/shared/Graphics.mjs';\nexport { GraphicsContext } from './scene/graphics/shared/GraphicsContext.mjs';\nexport { GpuGraphicsContext, GraphicsContextRenderData, GraphicsContextSystem } from './scene/graphics/shared/GraphicsContextSystem.mjs';\nexport { GraphicsPipe } from './scene/graphics/shared/GraphicsPipe.mjs';\nexport { GraphicsPath } from './scene/graphics/shared/path/GraphicsPath.mjs';\nexport { roundedShapeArc, roundedShapeQuadraticCurve } from './scene/graphics/shared/path/roundShape.mjs';\nexport { ShapePath } from './scene/graphics/shared/path/ShapePath.mjs';\nexport { SVGParser } from './scene/graphics/shared/svg/SVGParser.mjs';\nexport { SVGToGraphicsPath } from './scene/graphics/shared/svg/SVGToGraphicsPath.mjs';\nexport { buildContextBatches, shapeBuilders } from './scene/graphics/shared/utils/buildContextBatches.mjs';\nexport { buildGeometryFromPath } from './scene/graphics/shared/utils/buildGeometryFromPath.mjs';\nexport { toFillStyle, toStrokeStyle } from './scene/graphics/shared/utils/convertFillInputToFillStyle.mjs';\nexport { getOrientationOfPoints } from './scene/graphics/shared/utils/getOrientationOfPoints.mjs';\nexport { triangulateWithHoles } from './scene/graphics/shared/utils/triangulateWithHoles.mjs';\nexport { MeshPlane } from './scene/mesh-plane/MeshPlane.mjs';\nexport { PlaneGeometry } from './scene/mesh-plane/PlaneGeometry.mjs';\nexport { MeshRope } from './scene/mesh-simple/MeshRope.mjs';\nexport { MeshSimple } from './scene/mesh-simple/MeshSimple.mjs';\nexport { RopeGeometry } from './scene/mesh-simple/RopeGeometry.mjs';\nexport { GlMeshAdaptor } from './scene/mesh/gl/GlMeshAdaptor.mjs';\nexport { GpuMeshAdapter } from './scene/mesh/gpu/GpuMeshAdapter.mjs';\nexport { BatchableMesh } from './scene/mesh/shared/BatchableMesh.mjs';\nexport { getTextureDefaultMatrix } from './scene/mesh/shared/getTextureDefaultMatrix.mjs';\nexport { Mesh } from './scene/mesh/shared/Mesh.mjs';\nexport { MeshGeometry } from './scene/mesh/shared/MeshGeometry.mjs';\nexport { MeshPipe } from './scene/mesh/shared/MeshPipe.mjs';\nexport { AnimatedSprite } from './scene/sprite-animated/AnimatedSprite.mjs';\nexport { NineSliceGeometry } from './scene/sprite-nine-slice/NineSliceGeometry.mjs';\nexport { NineSlicePlane, NineSliceSprite } from './scene/sprite-nine-slice/NineSliceSprite.mjs';\nexport { NineSliceSpritePipe } from './scene/sprite-nine-slice/NineSliceSpritePipe.mjs';\nexport { tilingBit, tilingBitGl } from './scene/sprite-tiling/shader/tilingBit.mjs';\nexport { TilingSpriteShader } from './scene/sprite-tiling/shader/TilingSpriteShader.mjs';\nexport { TilingSprite } from './scene/sprite-tiling/TilingSprite.mjs';\nexport { TilingSpritePipe } from './scene/sprite-tiling/TilingSpritePipe.mjs';\nexport { applyMatrix } from './scene/sprite-tiling/utils/applyMatrix.mjs';\nexport { QuadGeometry } from './scene/sprite-tiling/utils/QuadGeometry.mjs';\nexport { setPositions } from './scene/sprite-tiling/utils/setPositions.mjs';\nexport { setUvs } from './scene/sprite-tiling/utils/setUvs.mjs';\nexport { BatchableSprite } from './scene/sprite/BatchableSprite.mjs';\nexport { Sprite } from './scene/sprite/Sprite.mjs';\nexport { SpritePipe } from './scene/sprite/SpritePipe.mjs';\nexport { AbstractBitmapFont } from './scene/text-bitmap/AbstractBitmapFont.mjs';\nexport { bitmapFontTextParser } from './scene/text-bitmap/asset/bitmapFontTextParser.mjs';\nexport { bitmapFontXMLParser } from './scene/text-bitmap/asset/bitmapFontXMLParser.mjs';\nexport { bitmapFontXMLStringParser } from './scene/text-bitmap/asset/bitmapFontXMLStringParser.mjs';\nexport { bitmapFontCachePlugin, loadBitmapFont } from './scene/text-bitmap/asset/loadBitmapFont.mjs';\nexport { BitmapFont } from './scene/text-bitmap/BitmapFont.mjs';\nexport { BitmapFontManager } from './scene/text-bitmap/BitmapFontManager.mjs';\nexport { BitmapText } from './scene/text-bitmap/BitmapText.mjs';\nexport { BitmapTextPipe } from './scene/text-bitmap/BitmapTextPipe.mjs';\nexport { DynamicBitmapFont } from './scene/text-bitmap/DynamicBitmapFont.mjs';\nexport { getBitmapTextLayout } from './scene/text-bitmap/utils/getBitmapTextLayout.mjs';\nexport { resolveCharacters } from './scene/text-bitmap/utils/resolveCharacters.mjs';\nexport { HTMLText } from './scene/text-html/HTMLText.mjs';\nexport { HTMLTextPipe } from './scene/text-html/HTMLTextPipe.mjs';\nexport { HTMLTextRenderData, nssvg, nsxhtml } from './scene/text-html/HTMLTextRenderData.mjs';\nexport { HTMLTextStyle } from './scene/text-html/HtmlTextStyle.mjs';\nexport { HTMLTextSystem } from './scene/text-html/HTMLTextSystem.mjs';\nexport { extractFontFamilies } from './scene/text-html/utils/extractFontFamilies.mjs';\nexport { FontStylePromiseCache, getFontCss } from './scene/text-html/utils/getFontCss.mjs';\nexport { getSVGUrl } from './scene/text-html/utils/getSVGUrl.mjs';\nexport { getTemporaryCanvasFromImage } from './scene/text-html/utils/getTemporaryCanvasFromImage.mjs';\nexport { loadFontAsBase64 } from './scene/text-html/utils/loadFontAsBase64.mjs';\nexport { loadFontCSS } from './scene/text-html/utils/loadFontCSS.mjs';\nexport { loadSVGImage } from './scene/text-html/utils/loadSVGImage.mjs';\nexport { measureHtmlText } from './scene/text-html/utils/measureHtmlText.mjs';\nexport { textStyleToCSS } from './scene/text-html/utils/textStyleToCSS.mjs';\nexport { AbstractText, ensureOptions } from './scene/text/AbstractText.mjs';\nexport { CanvasTextMetrics } from './scene/text/canvas/CanvasTextMetrics.mjs';\nexport { CanvasTextPipe } from './scene/text/canvas/CanvasTextPipe.mjs';\nexport { CanvasTextSystem } from './scene/text/canvas/CanvasTextSystem.mjs';\nexport { fontStringFromTextStyle } from './scene/text/canvas/utils/fontStringFromTextStyle.mjs';\nexport { getCanvasFillStyle } from './scene/text/canvas/utils/getCanvasFillStyle.mjs';\nexport { SdfShader } from './scene/text/sdfShader/SdfShader.mjs';\nexport { localUniformMSDFBit, localUniformMSDFBitGl } from './scene/text/sdfShader/shader-bits/localUniformMSDFBit.mjs';\nexport { mSDFBit, mSDFBitGl } from './scene/text/sdfShader/shader-bits/mSDFBit.mjs';\nexport { Text } from './scene/text/Text.mjs';\nexport { TextStyle } from './scene/text/TextStyle.mjs';\nexport { ensureTextStyle } from './scene/text/utils/ensureTextStyle.mjs';\nexport { generateTextStyleKey } from './scene/text/utils/generateTextStyleKey.mjs';\nexport { getPo2TextureFromSource } from './scene/text/utils/getPo2TextureFromSource.mjs';\nexport { Spritesheet } from './spritesheet/Spritesheet.mjs';\nexport { spritesheetAsset } from './spritesheet/spritesheetAsset.mjs';\nexport { UPDATE_PRIORITY } from './ticker/const.mjs';\nexport { Ticker } from './ticker/Ticker.mjs';\nexport { TickerListener } from './ticker/TickerListener.mjs';\nexport { detectVideoAlphaMode } from './utils/browser/detectVideoAlphaMode.mjs';\nexport { isMobile } from './utils/browser/isMobile.mjs';\nexport { isSafari } from './utils/browser/isSafari.mjs';\nexport { isWebGLSupported } from './utils/browser/isWebGLSupported.mjs';\nexport { isWebGPUSupported } from './utils/browser/isWebGPUSupported.mjs';\nexport { unsafeEvalSupported } from './utils/browser/unsafeEvalSupported.mjs';\nexport { getCanvasBoundingBox } from './utils/canvas/getCanvasBoundingBox.mjs';\nexport { DATA_URI } from './utils/const.mjs';\nexport { default as EventEmitter } from 'eventemitter3';\nexport { removeItems } from './utils/data/removeItems.mjs';\nexport { resetUids, uid } from './utils/data/uid.mjs';\nexport { updateQuadBounds } from './utils/data/updateQuadBounds.mjs';\nexport { ViewableBuffer } from './utils/data/ViewableBuffer.mjs';\nexport { ApplicationInitHook, RendererInitHook } from './utils/global/globalHooks.mjs';\nexport { deprecation, v8_0_0 } from './utils/logging/deprecation.mjs';\nexport { logDebugTexture } from './utils/logging/logDebugTexture.mjs';\nexport { logRenderGroupScene, logScene } from './utils/logging/logScene.mjs';\nexport { warn } from './utils/logging/warn.mjs';\nexport { NOOP } from './utils/misc/NOOP.mjs';\nexport { Transform } from './utils/misc/Transform.mjs';\nexport { getResolutionOfUrl } from './utils/network/getResolutionOfUrl.mjs';\nexport { path } from './utils/path.mjs';\nexport { Pool } from './utils/pool/Pool.mjs';\nexport { BigPool, PoolGroupClass } from './utils/pool/PoolGroup.mjs';\nexport { VERSION, sayHello } from './utils/sayHello.mjs';\nexport { default as earcut } from 'earcut';\n\n\"use strict\";\nextensions.add(browserExt, webworkerExt);\n\nexport { browserExt, extensions, webworkerExt };\n//# sourceMappingURL=index.mjs.map\n","import { PI_2 } from '../misc/const.mjs';\nimport { Point } from '../point/Point.mjs';\n\n\"use strict\";\nclass Matrix {\n  /**\n   * @param a - x scale\n   * @param b - y skew\n   * @param c - x skew\n   * @param d - y scale\n   * @param tx - x translation\n   * @param ty - y translation\n   */\n  constructor(a = 1, b = 0, c = 0, d = 1, tx = 0, ty = 0) {\n    /** An array of the current matrix. Only populated when `toArray` is called */\n    this.array = null;\n    this.a = a;\n    this.b = b;\n    this.c = c;\n    this.d = d;\n    this.tx = tx;\n    this.ty = ty;\n  }\n  /**\n   * Creates a Matrix object based on the given array. The Element to Matrix mapping order is as follows:\n   *\n   * a = array[0]\n   * b = array[1]\n   * c = array[3]\n   * d = array[4]\n   * tx = array[2]\n   * ty = array[5]\n   * @param array - The array that the matrix will be populated from.\n   */\n  fromArray(array) {\n    this.a = array[0];\n    this.b = array[1];\n    this.c = array[3];\n    this.d = array[4];\n    this.tx = array[2];\n    this.ty = array[5];\n  }\n  /**\n   * Sets the matrix properties.\n   * @param a - Matrix component\n   * @param b - Matrix component\n   * @param c - Matrix component\n   * @param d - Matrix component\n   * @param tx - Matrix component\n   * @param ty - Matrix component\n   * @returns This matrix. Good for chaining method calls.\n   */\n  set(a, b, c, d, tx, ty) {\n    this.a = a;\n    this.b = b;\n    this.c = c;\n    this.d = d;\n    this.tx = tx;\n    this.ty = ty;\n    return this;\n  }\n  /**\n   * Creates an array from the current Matrix object.\n   * @param transpose - Whether we need to transpose the matrix or not\n   * @param [out=new Float32Array(9)] - If provided the array will be assigned to out\n   * @returns The newly created array which contains the matrix\n   */\n  toArray(transpose, out) {\n    if (!this.array) {\n      this.array = new Float32Array(9);\n    }\n    const array = out || this.array;\n    if (transpose) {\n      array[0] = this.a;\n      array[1] = this.b;\n      array[2] = 0;\n      array[3] = this.c;\n      array[4] = this.d;\n      array[5] = 0;\n      array[6] = this.tx;\n      array[7] = this.ty;\n      array[8] = 1;\n    } else {\n      array[0] = this.a;\n      array[1] = this.c;\n      array[2] = this.tx;\n      array[3] = this.b;\n      array[4] = this.d;\n      array[5] = this.ty;\n      array[6] = 0;\n      array[7] = 0;\n      array[8] = 1;\n    }\n    return array;\n  }\n  /**\n   * Get a new position with the current transformation applied.\n   * Can be used to go from a child's coordinate space to the world coordinate space. (e.g. rendering)\n   * @param pos - The origin\n   * @param {Point} [newPos] - The point that the new position is assigned to (allowed to be same as input)\n   * @returns {Point} The new point, transformed through this matrix\n   */\n  apply(pos, newPos) {\n    newPos = newPos || new Point();\n    const x = pos.x;\n    const y = pos.y;\n    newPos.x = this.a * x + this.c * y + this.tx;\n    newPos.y = this.b * x + this.d * y + this.ty;\n    return newPos;\n  }\n  /**\n   * Get a new position with the inverse of the current transformation applied.\n   * Can be used to go from the world coordinate space to a child's coordinate space. (e.g. input)\n   * @param pos - The origin\n   * @param {Point} [newPos] - The point that the new position is assigned to (allowed to be same as input)\n   * @returns {Point} The new point, inverse-transformed through this matrix\n   */\n  applyInverse(pos, newPos) {\n    newPos = newPos || new Point();\n    const a = this.a;\n    const b = this.b;\n    const c = this.c;\n    const d = this.d;\n    const tx = this.tx;\n    const ty = this.ty;\n    const id = 1 / (a * d + c * -b);\n    const x = pos.x;\n    const y = pos.y;\n    newPos.x = d * id * x + -c * id * y + (ty * c - tx * d) * id;\n    newPos.y = a * id * y + -b * id * x + (-ty * a + tx * b) * id;\n    return newPos;\n  }\n  /**\n   * Translates the matrix on the x and y.\n   * @param x - How much to translate x by\n   * @param y - How much to translate y by\n   * @returns This matrix. Good for chaining method calls.\n   */\n  translate(x, y) {\n    this.tx += x;\n    this.ty += y;\n    return this;\n  }\n  /**\n   * Applies a scale transformation to the matrix.\n   * @param x - The amount to scale horizontally\n   * @param y - The amount to scale vertically\n   * @returns This matrix. Good for chaining method calls.\n   */\n  scale(x, y) {\n    this.a *= x;\n    this.d *= y;\n    this.c *= x;\n    this.b *= y;\n    this.tx *= x;\n    this.ty *= y;\n    return this;\n  }\n  /**\n   * Applies a rotation transformation to the matrix.\n   * @param angle - The angle in radians.\n   * @returns This matrix. Good for chaining method calls.\n   */\n  rotate(angle) {\n    const cos = Math.cos(angle);\n    const sin = Math.sin(angle);\n    const a1 = this.a;\n    const c1 = this.c;\n    const tx1 = this.tx;\n    this.a = a1 * cos - this.b * sin;\n    this.b = a1 * sin + this.b * cos;\n    this.c = c1 * cos - this.d * sin;\n    this.d = c1 * sin + this.d * cos;\n    this.tx = tx1 * cos - this.ty * sin;\n    this.ty = tx1 * sin + this.ty * cos;\n    return this;\n  }\n  /**\n   * Appends the given Matrix to this Matrix.\n   * @param matrix - The matrix to append.\n   * @returns This matrix. Good for chaining method calls.\n   */\n  append(matrix) {\n    const a1 = this.a;\n    const b1 = this.b;\n    const c1 = this.c;\n    const d1 = this.d;\n    this.a = matrix.a * a1 + matrix.b * c1;\n    this.b = matrix.a * b1 + matrix.b * d1;\n    this.c = matrix.c * a1 + matrix.d * c1;\n    this.d = matrix.c * b1 + matrix.d * d1;\n    this.tx = matrix.tx * a1 + matrix.ty * c1 + this.tx;\n    this.ty = matrix.tx * b1 + matrix.ty * d1 + this.ty;\n    return this;\n  }\n  /**\n   * Appends two matrix's and sets the result to this matrix. AB = A * B\n   * @param a - The matrix to append.\n   * @param b - The matrix to append.\n   * @returns This matrix. Good for chaining method calls.\n   */\n  appendFrom(a, b) {\n    const a1 = a.a;\n    const b1 = a.b;\n    const c1 = a.c;\n    const d1 = a.d;\n    const tx = a.tx;\n    const ty = a.ty;\n    const a2 = b.a;\n    const b2 = b.b;\n    const c2 = b.c;\n    const d2 = b.d;\n    this.a = a1 * a2 + b1 * c2;\n    this.b = a1 * b2 + b1 * d2;\n    this.c = c1 * a2 + d1 * c2;\n    this.d = c1 * b2 + d1 * d2;\n    this.tx = tx * a2 + ty * c2 + b.tx;\n    this.ty = tx * b2 + ty * d2 + b.ty;\n    return this;\n  }\n  /**\n   * Sets the matrix based on all the available properties\n   * @param x - Position on the x axis\n   * @param y - Position on the y axis\n   * @param pivotX - Pivot on the x axis\n   * @param pivotY - Pivot on the y axis\n   * @param scaleX - Scale on the x axis\n   * @param scaleY - Scale on the y axis\n   * @param rotation - Rotation in radians\n   * @param skewX - Skew on the x axis\n   * @param skewY - Skew on the y axis\n   * @returns This matrix. Good for chaining method calls.\n   */\n  setTransform(x, y, pivotX, pivotY, scaleX, scaleY, rotation, skewX, skewY) {\n    this.a = Math.cos(rotation + skewY) * scaleX;\n    this.b = Math.sin(rotation + skewY) * scaleX;\n    this.c = -Math.sin(rotation - skewX) * scaleY;\n    this.d = Math.cos(rotation - skewX) * scaleY;\n    this.tx = x - (pivotX * this.a + pivotY * this.c);\n    this.ty = y - (pivotX * this.b + pivotY * this.d);\n    return this;\n  }\n  /**\n   * Prepends the given Matrix to this Matrix.\n   * @param matrix - The matrix to prepend\n   * @returns This matrix. Good for chaining method calls.\n   */\n  prepend(matrix) {\n    const tx1 = this.tx;\n    if (matrix.a !== 1 || matrix.b !== 0 || matrix.c !== 0 || matrix.d !== 1) {\n      const a1 = this.a;\n      const c1 = this.c;\n      this.a = a1 * matrix.a + this.b * matrix.c;\n      this.b = a1 * matrix.b + this.b * matrix.d;\n      this.c = c1 * matrix.a + this.d * matrix.c;\n      this.d = c1 * matrix.b + this.d * matrix.d;\n    }\n    this.tx = tx1 * matrix.a + this.ty * matrix.c + matrix.tx;\n    this.ty = tx1 * matrix.b + this.ty * matrix.d + matrix.ty;\n    return this;\n  }\n  /**\n   * Decomposes the matrix (x, y, scaleX, scaleY, and rotation) and sets the properties on to a transform.\n   * @param transform - The transform to apply the properties to.\n   * @returns The transform with the newly applied properties\n   */\n  decompose(transform) {\n    const a = this.a;\n    const b = this.b;\n    const c = this.c;\n    const d = this.d;\n    const pivot = transform.pivot;\n    const skewX = -Math.atan2(-c, d);\n    const skewY = Math.atan2(b, a);\n    const delta = Math.abs(skewX + skewY);\n    if (delta < 1e-5 || Math.abs(PI_2 - delta) < 1e-5) {\n      transform.rotation = skewY;\n      transform.skew.x = transform.skew.y = 0;\n    } else {\n      transform.rotation = 0;\n      transform.skew.x = skewX;\n      transform.skew.y = skewY;\n    }\n    transform.scale.x = Math.sqrt(a * a + b * b);\n    transform.scale.y = Math.sqrt(c * c + d * d);\n    transform.position.x = this.tx + (pivot.x * a + pivot.y * c);\n    transform.position.y = this.ty + (pivot.x * b + pivot.y * d);\n    return transform;\n  }\n  /**\n   * Inverts this matrix\n   * @returns This matrix. Good for chaining method calls.\n   */\n  invert() {\n    const a1 = this.a;\n    const b1 = this.b;\n    const c1 = this.c;\n    const d1 = this.d;\n    const tx1 = this.tx;\n    const n = a1 * d1 - b1 * c1;\n    this.a = d1 / n;\n    this.b = -b1 / n;\n    this.c = -c1 / n;\n    this.d = a1 / n;\n    this.tx = (c1 * this.ty - d1 * tx1) / n;\n    this.ty = -(a1 * this.ty - b1 * tx1) / n;\n    return this;\n  }\n  /** Checks if this matrix is an identity matrix */\n  isIdentity() {\n    return this.a === 1 && this.b === 0 && this.c === 0 && this.d === 1 && this.tx === 0 && this.ty === 0;\n  }\n  /**\n   * Resets this Matrix to an identity (default) matrix.\n   * @returns This matrix. Good for chaining method calls.\n   */\n  identity() {\n    this.a = 1;\n    this.b = 0;\n    this.c = 0;\n    this.d = 1;\n    this.tx = 0;\n    this.ty = 0;\n    return this;\n  }\n  /**\n   * Creates a new Matrix object with the same values as this one.\n   * @returns A copy of this matrix. Good for chaining method calls.\n   */\n  clone() {\n    const matrix = new Matrix();\n    matrix.a = this.a;\n    matrix.b = this.b;\n    matrix.c = this.c;\n    matrix.d = this.d;\n    matrix.tx = this.tx;\n    matrix.ty = this.ty;\n    return matrix;\n  }\n  /**\n   * Changes the values of the given matrix to be the same as the ones in this matrix\n   * @param matrix - The matrix to copy to.\n   * @returns The matrix given in parameter with its values updated.\n   */\n  copyTo(matrix) {\n    matrix.a = this.a;\n    matrix.b = this.b;\n    matrix.c = this.c;\n    matrix.d = this.d;\n    matrix.tx = this.tx;\n    matrix.ty = this.ty;\n    return matrix;\n  }\n  /**\n   * Changes the values of the matrix to be the same as the ones in given matrix\n   * @param matrix - The matrix to copy from.\n   * @returns this\n   */\n  copyFrom(matrix) {\n    this.a = matrix.a;\n    this.b = matrix.b;\n    this.c = matrix.c;\n    this.d = matrix.d;\n    this.tx = matrix.tx;\n    this.ty = matrix.ty;\n    return this;\n  }\n  /**\n   * check to see if two matrices are the same\n   * @param matrix - The matrix to compare to.\n   */\n  equals(matrix) {\n    return matrix.a === this.a && matrix.b === this.b && matrix.c === this.c && matrix.d === this.d && matrix.tx === this.tx && matrix.ty === this.ty;\n  }\n  toString() {\n    return `[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`;\n  }\n  /**\n   * A default (identity) matrix.\n   *\n   * This is a shared object, if you want to modify it consider creating a new `Matrix`\n   * @readonly\n   */\n  static get IDENTITY() {\n    return identityMatrix.identity();\n  }\n  /**\n   * A static Matrix that can be used to avoid creating new objects.\n   * Will always ensure the matrix is reset to identity when requested.\n   * Use this object for fast but temporary calculations, as it may be mutated later on.\n   * This is a different object to the `IDENTITY` object and so can be modified without changing `IDENTITY`.\n   * @readonly\n   */\n  static get shared() {\n    return tempMatrix.identity();\n  }\n}\nconst tempMatrix = new Matrix();\nconst identityMatrix = new Matrix();\n\nexport { Matrix };\n//# sourceMappingURL=Matrix.mjs.map\n","\"use strict\";\nconst PI_2 = Math.PI * 2;\nconst RAD_TO_DEG = 180 / Math.PI;\nconst DEG_TO_RAD = Math.PI / 180;\n\nexport { DEG_TO_RAD, PI_2, RAD_TO_DEG };\n//# sourceMappingURL=const.mjs.map\n","\"use strict\";\nfunction nextPow2(v) {\n  v += v === 0 ? 1 : 0;\n  --v;\n  v |= v >>> 1;\n  v |= v >>> 2;\n  v |= v >>> 4;\n  v |= v >>> 8;\n  v |= v >>> 16;\n  return v + 1;\n}\nfunction isPow2(v) {\n  return !(v & v - 1) && !!v;\n}\nfunction log2(v) {\n  let r = (v > 65535 ? 1 : 0) << 4;\n  v >>>= r;\n  let shift = (v > 255 ? 1 : 0) << 3;\n  v >>>= shift;\n  r |= shift;\n  shift = (v > 15 ? 1 : 0) << 2;\n  v >>>= shift;\n  r |= shift;\n  shift = (v > 3 ? 1 : 0) << 1;\n  v >>>= shift;\n  r |= shift;\n  return r | v >> 1;\n}\n\nexport { isPow2, log2, nextPow2 };\n//# sourceMappingURL=pow2.mjs.map\n","\"use strict\";\nclass ObservablePoint {\n  /**\n   * Creates a new `ObservablePoint`\n   * @param observer - Observer to pass to listen for change events.\n   * @param {number} [x=0] - position of the point on the x axis\n   * @param {number} [y=0] - position of the point on the y axis\n   */\n  constructor(observer, x, y) {\n    this._x = x || 0;\n    this._y = y || 0;\n    this._observer = observer;\n  }\n  /**\n   * Creates a clone of this point.\n   * @param observer - Optional observer to pass to the new observable point.\n   * @returns a copy of this observable point\n   */\n  clone(observer) {\n    return new ObservablePoint(observer ?? this._observer, this._x, this._y);\n  }\n  /**\n   * Sets the point to a new `x` and `y` position.\n   * If `y` is omitted, both `x` and `y` will be set to `x`.\n   * @param {number} [x=0] - position of the point on the x axis\n   * @param {number} [y=x] - position of the point on the y axis\n   * @returns The observable point instance itself\n   */\n  set(x = 0, y = x) {\n    if (this._x !== x || this._y !== y) {\n      this._x = x;\n      this._y = y;\n      this._observer._onUpdate(this);\n    }\n    return this;\n  }\n  /**\n   * Copies x and y from the given point (`p`)\n   * @param p - The point to copy from. Can be any of type that is or extends `PointData`\n   * @returns The observable point instance itself\n   */\n  copyFrom(p) {\n    if (this._x !== p.x || this._y !== p.y) {\n      this._x = p.x;\n      this._y = p.y;\n      this._observer._onUpdate(this);\n    }\n    return this;\n  }\n  /**\n   * Copies this point's x and y into that of the given point (`p`)\n   * @param p - The point to copy to. Can be any of type that is or extends `PointData`\n   * @returns The point (`p`) with values updated\n   */\n  copyTo(p) {\n    p.set(this._x, this._y);\n    return p;\n  }\n  /**\n   * Accepts another point (`p`) and returns `true` if the given point is equal to this point\n   * @param p - The point to check\n   * @returns Returns `true` if both `x` and `y` are equal\n   */\n  equals(p) {\n    return p.x === this._x && p.y === this._y;\n  }\n  toString() {\n    return `[pixi.js/math:ObservablePoint x=${0} y=${0} scope=${this._observer}]`;\n  }\n  /** Position of the observable point on the x axis. */\n  get x() {\n    return this._x;\n  }\n  set x(value) {\n    if (this._x !== value) {\n      this._x = value;\n      this._observer._onUpdate(this);\n    }\n  }\n  /** Position of the observable point on the y axis. */\n  get y() {\n    return this._y;\n  }\n  set y(value) {\n    if (this._y !== value) {\n      this._y = value;\n      this._observer._onUpdate(this);\n    }\n  }\n}\n\nexport { ObservablePoint };\n//# sourceMappingURL=ObservablePoint.mjs.map\n","\"use strict\";\nclass Point {\n  /**\n   * Creates a new `Point`\n   * @param {number} [x=0] - position of the point on the x axis\n   * @param {number} [y=0] - position of the point on the y axis\n   */\n  constructor(x = 0, y = 0) {\n    /** Position of the point on the x axis */\n    this.x = 0;\n    /** Position of the point on the y axis */\n    this.y = 0;\n    this.x = x;\n    this.y = y;\n  }\n  /**\n   * Creates a clone of this point\n   * @returns A clone of this point\n   */\n  clone() {\n    return new Point(this.x, this.y);\n  }\n  /**\n   * Copies `x` and `y` from the given point into this point\n   * @param p - The point to copy from\n   * @returns The point instance itself\n   */\n  copyFrom(p) {\n    this.set(p.x, p.y);\n    return this;\n  }\n  /**\n   * Copies this point's x and y into the given point (`p`).\n   * @param p - The point to copy to. Can be any of type that is or extends `PointData`\n   * @returns The point (`p`) with values updated\n   */\n  copyTo(p) {\n    p.set(this.x, this.y);\n    return p;\n  }\n  /**\n   * Accepts another point (`p`) and returns `true` if the given point is equal to this point\n   * @param p - The point to check\n   * @returns Returns `true` if both `x` and `y` are equal\n   */\n  equals(p) {\n    return p.x === this.x && p.y === this.y;\n  }\n  /**\n   * Sets the point to a new `x` and `y` position.\n   * If `y` is omitted, both `x` and `y` will be set to `x`.\n   * @param {number} [x=0] - position of the point on the `x` axis\n   * @param {number} [y=x] - position of the point on the `y` axis\n   * @returns The point instance itself\n   */\n  set(x = 0, y = x) {\n    this.x = x;\n    this.y = y;\n    return this;\n  }\n  toString() {\n    return `[pixi.js/math:Point x=${this.x} y=${this.y}]`;\n  }\n  /**\n   * A static Point object with `x` and `y` values of `0`. Can be used to avoid creating new objects multiple times.\n   * @readonly\n   */\n  static get shared() {\n    tempPoint.x = 0;\n    tempPoint.y = 0;\n    return tempPoint;\n  }\n}\nconst tempPoint = new Point();\n\nexport { Point };\n//# sourceMappingURL=Point.mjs.map\n","import { Point } from '../point/Point.mjs';\n\n\"use strict\";\nconst tempPoints = [new Point(), new Point(), new Point(), new Point()];\nclass Rectangle {\n  /**\n   * @param x - The X coordinate of the upper-left corner of the rectangle\n   * @param y - The Y coordinate of the upper-left corner of the rectangle\n   * @param width - The overall width of the rectangle\n   * @param height - The overall height of the rectangle\n   */\n  constructor(x = 0, y = 0, width = 0, height = 0) {\n    /**\n     * The type of the object, mainly used to avoid `instanceof` checks\n     * @default 'rectangle'\n     */\n    this.type = \"rectangle\";\n    this.x = Number(x);\n    this.y = Number(y);\n    this.width = Number(width);\n    this.height = Number(height);\n  }\n  /** Returns the left edge of the rectangle. */\n  get left() {\n    return this.x;\n  }\n  /** Returns the right edge of the rectangle. */\n  get right() {\n    return this.x + this.width;\n  }\n  /** Returns the top edge of the rectangle. */\n  get top() {\n    return this.y;\n  }\n  /** Returns the bottom edge of the rectangle. */\n  get bottom() {\n    return this.y + this.height;\n  }\n  /** Determines whether the Rectangle is empty. */\n  isEmpty() {\n    return this.left === this.right || this.top === this.bottom;\n  }\n  /** A constant empty rectangle. This is a new object every time the property is accessed */\n  static get EMPTY() {\n    return new Rectangle(0, 0, 0, 0);\n  }\n  /**\n   * Creates a clone of this Rectangle\n   * @returns a copy of the rectangle\n   */\n  clone() {\n    return new Rectangle(this.x, this.y, this.width, this.height);\n  }\n  /**\n   * Converts a Bounds object to a Rectangle object.\n   * @param bounds - The bounds to copy and convert to a rectangle.\n   * @returns Returns itself.\n   */\n  copyFromBounds(bounds) {\n    this.x = bounds.minX;\n    this.y = bounds.minY;\n    this.width = bounds.maxX - bounds.minX;\n    this.height = bounds.maxY - bounds.minY;\n    return this;\n  }\n  /**\n   * Copies another rectangle to this one.\n   * @param rectangle - The rectangle to copy from.\n   * @returns Returns itself.\n   */\n  copyFrom(rectangle) {\n    this.x = rectangle.x;\n    this.y = rectangle.y;\n    this.width = rectangle.width;\n    this.height = rectangle.height;\n    return this;\n  }\n  /**\n   * Copies this rectangle to another one.\n   * @param rectangle - The rectangle to copy to.\n   * @returns Returns given parameter.\n   */\n  copyTo(rectangle) {\n    rectangle.copyFrom(this);\n    return rectangle;\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this Rectangle\n   * @param x - The X coordinate of the point to test\n   * @param y - The Y coordinate of the point to test\n   * @returns Whether the x/y coordinates are within this Rectangle\n   */\n  contains(x, y) {\n    if (this.width <= 0 || this.height <= 0) {\n      return false;\n    }\n    if (x >= this.x && x < this.x + this.width) {\n      if (y >= this.y && y < this.y + this.height) {\n        return true;\n      }\n    }\n    return false;\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this rectangle including the stroke.\n   * @param x - The X coordinate of the point to test\n   * @param y - The Y coordinate of the point to test\n   * @param strokeWidth - The width of the line to check\n   * @returns Whether the x/y coordinates are within this rectangle\n   */\n  strokeContains(x, y, strokeWidth) {\n    const { width, height } = this;\n    if (width <= 0 || height <= 0)\n      return false;\n    const _x = this.x;\n    const _y = this.y;\n    const outerLeft = _x - strokeWidth / 2;\n    const outerRight = _x + width + strokeWidth / 2;\n    const outerTop = _y - strokeWidth / 2;\n    const outerBottom = _y + height + strokeWidth / 2;\n    const innerLeft = _x + strokeWidth / 2;\n    const innerRight = _x + width - strokeWidth / 2;\n    const innerTop = _y + strokeWidth / 2;\n    const innerBottom = _y + height - strokeWidth / 2;\n    return x >= outerLeft && x <= outerRight && y >= outerTop && y <= outerBottom && !(x > innerLeft && x < innerRight && y > innerTop && y < innerBottom);\n  }\n  /**\n   * Determines whether the `other` Rectangle transformed by `transform` intersects with `this` Rectangle object.\n   * Returns true only if the area of the intersection is >0, this means that Rectangles\n   * sharing a side are not overlapping. Another side effect is that an arealess rectangle\n   * (width or height equal to zero) can't intersect any other rectangle.\n   * @param {Rectangle} other - The Rectangle to intersect with `this`.\n   * @param {Matrix} transform - The transformation matrix of `other`.\n   * @returns {boolean} A value of `true` if the transformed `other` Rectangle intersects with `this`; otherwise `false`.\n   */\n  intersects(other, transform) {\n    if (!transform) {\n      const x02 = this.x < other.x ? other.x : this.x;\n      const x12 = this.right > other.right ? other.right : this.right;\n      if (x12 <= x02) {\n        return false;\n      }\n      const y02 = this.y < other.y ? other.y : this.y;\n      const y12 = this.bottom > other.bottom ? other.bottom : this.bottom;\n      return y12 > y02;\n    }\n    const x0 = this.left;\n    const x1 = this.right;\n    const y0 = this.top;\n    const y1 = this.bottom;\n    if (x1 <= x0 || y1 <= y0) {\n      return false;\n    }\n    const lt = tempPoints[0].set(other.left, other.top);\n    const lb = tempPoints[1].set(other.left, other.bottom);\n    const rt = tempPoints[2].set(other.right, other.top);\n    const rb = tempPoints[3].set(other.right, other.bottom);\n    if (rt.x <= lt.x || lb.y <= lt.y) {\n      return false;\n    }\n    const s = Math.sign(transform.a * transform.d - transform.b * transform.c);\n    if (s === 0) {\n      return false;\n    }\n    transform.apply(lt, lt);\n    transform.apply(lb, lb);\n    transform.apply(rt, rt);\n    transform.apply(rb, rb);\n    if (Math.max(lt.x, lb.x, rt.x, rb.x) <= x0 || Math.min(lt.x, lb.x, rt.x, rb.x) >= x1 || Math.max(lt.y, lb.y, rt.y, rb.y) <= y0 || Math.min(lt.y, lb.y, rt.y, rb.y) >= y1) {\n      return false;\n    }\n    const nx = s * (lb.y - lt.y);\n    const ny = s * (lt.x - lb.x);\n    const n00 = nx * x0 + ny * y0;\n    const n10 = nx * x1 + ny * y0;\n    const n01 = nx * x0 + ny * y1;\n    const n11 = nx * x1 + ny * y1;\n    if (Math.max(n00, n10, n01, n11) <= nx * lt.x + ny * lt.y || Math.min(n00, n10, n01, n11) >= nx * rb.x + ny * rb.y) {\n      return false;\n    }\n    const mx = s * (lt.y - rt.y);\n    const my = s * (rt.x - lt.x);\n    const m00 = mx * x0 + my * y0;\n    const m10 = mx * x1 + my * y0;\n    const m01 = mx * x0 + my * y1;\n    const m11 = mx * x1 + my * y1;\n    if (Math.max(m00, m10, m01, m11) <= mx * lt.x + my * lt.y || Math.min(m00, m10, m01, m11) >= mx * rb.x + my * rb.y) {\n      return false;\n    }\n    return true;\n  }\n  /**\n   * Pads the rectangle making it grow in all directions.\n   * If paddingY is omitted, both paddingX and paddingY will be set to paddingX.\n   * @param paddingX - The horizontal padding amount.\n   * @param paddingY - The vertical padding amount.\n   * @returns Returns itself.\n   */\n  pad(paddingX = 0, paddingY = paddingX) {\n    this.x -= paddingX;\n    this.y -= paddingY;\n    this.width += paddingX * 2;\n    this.height += paddingY * 2;\n    return this;\n  }\n  /**\n   * Fits this rectangle around the passed one.\n   * @param rectangle - The rectangle to fit.\n   * @returns Returns itself.\n   */\n  fit(rectangle) {\n    const x1 = Math.max(this.x, rectangle.x);\n    const x2 = Math.min(this.x + this.width, rectangle.x + rectangle.width);\n    const y1 = Math.max(this.y, rectangle.y);\n    const y2 = Math.min(this.y + this.height, rectangle.y + rectangle.height);\n    this.x = x1;\n    this.width = Math.max(x2 - x1, 0);\n    this.y = y1;\n    this.height = Math.max(y2 - y1, 0);\n    return this;\n  }\n  /**\n   * Enlarges rectangle that way its corners lie on grid\n   * @param resolution - resolution\n   * @param eps - precision\n   * @returns Returns itself.\n   */\n  ceil(resolution = 1, eps = 1e-3) {\n    const x2 = Math.ceil((this.x + this.width - eps) * resolution) / resolution;\n    const y2 = Math.ceil((this.y + this.height - eps) * resolution) / resolution;\n    this.x = Math.floor((this.x + eps) * resolution) / resolution;\n    this.y = Math.floor((this.y + eps) * resolution) / resolution;\n    this.width = x2 - this.x;\n    this.height = y2 - this.y;\n    return this;\n  }\n  /**\n   * Enlarges this rectangle to include the passed rectangle.\n   * @param rectangle - The rectangle to include.\n   * @returns Returns itself.\n   */\n  enlarge(rectangle) {\n    const x1 = Math.min(this.x, rectangle.x);\n    const x2 = Math.max(this.x + this.width, rectangle.x + rectangle.width);\n    const y1 = Math.min(this.y, rectangle.y);\n    const y2 = Math.max(this.y + this.height, rectangle.y + rectangle.height);\n    this.x = x1;\n    this.width = x2 - x1;\n    this.y = y1;\n    this.height = y2 - y1;\n    return this;\n  }\n  /**\n   * Returns the framing rectangle of the rectangle as a Rectangle object\n   * @param out - optional rectangle to store the result\n   * @returns The framing rectangle\n   */\n  getBounds(out) {\n    out = out || new Rectangle();\n    out.copyFrom(this);\n    return out;\n  }\n  toString() {\n    return `[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`;\n  }\n}\n\nexport { Rectangle };\n//# sourceMappingURL=Rectangle.mjs.map\n","\"use strict\";\nconst fragTemplate = [\n  \"precision mediump float;\",\n  \"void main(void){\",\n  \"float test = 0.1;\",\n  \"%forloop%\",\n  \"gl_FragColor = vec4(0.0);\",\n  \"}\"\n].join(\"\\n\");\nfunction generateIfTestSrc(maxIfs) {\n  let src = \"\";\n  for (let i = 0; i < maxIfs; ++i) {\n    if (i > 0) {\n      src += \"\\nelse \";\n    }\n    if (i < maxIfs - 1) {\n      src += `if(test == ${i}.0){}`;\n    }\n  }\n  return src;\n}\nfunction checkMaxIfStatementsInShader(maxIfs, gl) {\n  if (maxIfs === 0) {\n    throw new Error(\"Invalid value of `0` passed to `checkMaxIfStatementsInShader`\");\n  }\n  const shader = gl.createShader(gl.FRAGMENT_SHADER);\n  while (true) {\n    const fragmentSrc = fragTemplate.replace(/%forloop%/gi, generateIfTestSrc(maxIfs));\n    gl.shaderSource(shader, fragmentSrc);\n    gl.compileShader(shader);\n    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n      maxIfs = maxIfs / 2 | 0;\n    } else {\n      break;\n    }\n  }\n  return maxIfs;\n}\n\nexport { checkMaxIfStatementsInShader };\n//# sourceMappingURL=checkMaxIfStatementsInShader.mjs.map\n","import { getTestContext } from '../../../renderers/gl/shader/program/getTestContext.mjs';\nimport { checkMaxIfStatementsInShader } from './checkMaxIfStatementsInShader.mjs';\n\n\"use strict\";\nlet maxTexturesPerBatchCache = null;\nfunction getMaxTexturesPerBatch() {\n  if (maxTexturesPerBatchCache)\n    return maxTexturesPerBatchCache;\n  const gl = getTestContext();\n  maxTexturesPerBatchCache = gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS);\n  maxTexturesPerBatchCache = checkMaxIfStatementsInShader(\n    maxTexturesPerBatchCache,\n    gl\n  );\n  return maxTexturesPerBatchCache;\n}\n\nexport { getMaxTexturesPerBatch };\n//# sourceMappingURL=maxRecommendedTextures.mjs.map\n","import { BindGroup } from '../../renderers/gpu/shader/BindGroup.mjs';\nimport { Texture } from '../../renderers/shared/texture/Texture.mjs';\nimport { getMaxTexturesPerBatch } from '../gl/utils/maxRecommendedTextures.mjs';\n\n\"use strict\";\nconst cachedGroups = {};\nfunction getTextureBatchBindGroup(textures, size) {\n  let uid = 0;\n  for (let i = 0; i < size; i++) {\n    uid = uid * 31 + textures[i].uid >>> 0;\n  }\n  return cachedGroups[uid] || generateTextureBatchBindGroup(textures, uid);\n}\nlet maxTextures = 0;\nfunction generateTextureBatchBindGroup(textures, key) {\n  const bindGroupResources = {};\n  let bindIndex = 0;\n  if (!maxTextures)\n    maxTextures = getMaxTexturesPerBatch();\n  for (let i = 0; i < maxTextures; i++) {\n    const texture = i < textures.length ? textures[i] : Texture.EMPTY.source;\n    bindGroupResources[bindIndex++] = texture.source;\n    bindGroupResources[bindIndex++] = texture.style;\n  }\n  const bindGroup = new BindGroup(bindGroupResources);\n  cachedGroups[key] = bindGroup;\n  return bindGroup;\n}\n\nexport { getTextureBatchBindGroup };\n//# sourceMappingURL=getTextureBatchBindGroup.mjs.map\n","import { Buffer } from '../../renderers/shared/buffer/Buffer.mjs';\nimport { BufferUsage } from '../../renderers/shared/buffer/const.mjs';\nimport { Geometry } from '../../renderers/shared/geometry/Geometry.mjs';\n\n\"use strict\";\nconst placeHolderBufferData = new Float32Array(1);\nconst placeHolderIndexData = new Uint32Array(1);\nclass BatchGeometry extends Geometry {\n  constructor() {\n    const vertexSize = 6;\n    const attributeBuffer = new Buffer({\n      data: placeHolderBufferData,\n      label: \"attribute-batch-buffer\",\n      usage: BufferUsage.VERTEX | BufferUsage.COPY_DST,\n      shrinkToFit: false\n    });\n    const indexBuffer = new Buffer({\n      data: placeHolderIndexData,\n      label: \"index-batch-buffer\",\n      usage: BufferUsage.INDEX | BufferUsage.COPY_DST,\n      // | BufferUsage.STATIC,\n      shrinkToFit: false\n    });\n    const stride = vertexSize * 4;\n    super({\n      attributes: {\n        aPosition: {\n          buffer: attributeBuffer,\n          format: \"float32x2\",\n          stride,\n          offset: 0,\n          location: 1\n        },\n        aUV: {\n          buffer: attributeBuffer,\n          format: \"float32x2\",\n          stride,\n          offset: 2 * 4,\n          location: 3\n        },\n        aColor: {\n          buffer: attributeBuffer,\n          format: \"unorm8x4\",\n          stride,\n          offset: 4 * 4,\n          location: 0\n        },\n        aTextureIdAndRound: {\n          buffer: attributeBuffer,\n          format: \"uint16x2\",\n          stride,\n          offset: 5 * 4,\n          location: 2\n        }\n      },\n      indexBuffer\n    });\n  }\n}\n\nexport { BatchGeometry };\n//# sourceMappingURL=BatchGeometry.mjs.map\n","\"use strict\";\nclass ViewableBuffer {\n  constructor(sizeOrBuffer) {\n    if (typeof sizeOrBuffer === \"number\") {\n      this.rawBinaryData = new ArrayBuffer(sizeOrBuffer);\n    } else if (sizeOrBuffer instanceof Uint8Array) {\n      this.rawBinaryData = sizeOrBuffer.buffer;\n    } else {\n      this.rawBinaryData = sizeOrBuffer;\n    }\n    this.uint32View = new Uint32Array(this.rawBinaryData);\n    this.float32View = new Float32Array(this.rawBinaryData);\n    this.size = this.rawBinaryData.byteLength;\n  }\n  /** View on the raw binary data as a `Int8Array`. */\n  get int8View() {\n    if (!this._int8View) {\n      this._int8View = new Int8Array(this.rawBinaryData);\n    }\n    return this._int8View;\n  }\n  /** View on the raw binary data as a `Uint8Array`. */\n  get uint8View() {\n    if (!this._uint8View) {\n      this._uint8View = new Uint8Array(this.rawBinaryData);\n    }\n    return this._uint8View;\n  }\n  /**  View on the raw binary data as a `Int16Array`. */\n  get int16View() {\n    if (!this._int16View) {\n      this._int16View = new Int16Array(this.rawBinaryData);\n    }\n    return this._int16View;\n  }\n  /** View on the raw binary data as a `Int32Array`. */\n  get int32View() {\n    if (!this._int32View) {\n      this._int32View = new Int32Array(this.rawBinaryData);\n    }\n    return this._int32View;\n  }\n  /** View on the raw binary data as a `Float64Array`. */\n  get float64View() {\n    if (!this._float64Array) {\n      this._float64Array = new Float64Array(this.rawBinaryData);\n    }\n    return this._float64Array;\n  }\n  /** View on the raw binary data as a `BigUint64Array`. */\n  get bigUint64View() {\n    if (!this._bigUint64Array) {\n      this._bigUint64Array = new BigUint64Array(this.rawBinaryData);\n    }\n    return this._bigUint64Array;\n  }\n  /**\n   * Returns the view of the given type.\n   * @param type - One of `int8`, `uint8`, `int16`,\n   *    `uint16`, `int32`, `uint32`, and `float32`.\n   * @returns - typed array of given type\n   */\n  view(type) {\n    return this[`${type}View`];\n  }\n  /** Destroys all buffer references. Do not use after calling this. */\n  destroy() {\n    this.rawBinaryData = null;\n    this._int8View = null;\n    this._uint8View = null;\n    this._int16View = null;\n    this.uint16View = null;\n    this._int32View = null;\n    this.uint32View = null;\n    this.float32View = null;\n  }\n  /**\n   * Returns the size of the given type in bytes.\n   * @param type - One of `int8`, `uint8`, `int16`,\n   *   `uint16`, `int32`, `uint32`, and `float32`.\n   * @returns - size of the type in bytes\n   */\n  static sizeOf(type) {\n    switch (type) {\n      case \"int8\":\n      case \"uint8\":\n        return 1;\n      case \"int16\":\n      case \"uint16\":\n        return 2;\n      case \"int32\":\n      case \"uint32\":\n      case \"float32\":\n        return 4;\n      default:\n        throw new Error(`${type} isn't a valid view type`);\n    }\n  }\n}\n\nexport { ViewableBuffer };\n//# sourceMappingURL=ViewableBuffer.mjs.map\n","\"use strict\";\nclass BatchTextureArray {\n  constructor() {\n    /** Respective locations for textures. */\n    this.ids = /* @__PURE__ */ Object.create(null);\n    this.textures = [];\n    this.count = 0;\n  }\n  /** Clear the textures and their locations. */\n  clear() {\n    for (let i = 0; i < this.count; i++) {\n      const t = this.textures[i];\n      this.textures[i] = null;\n      this.ids[t.uid] = null;\n    }\n    this.count = 0;\n  }\n}\n\nexport { BatchTextureArray };\n//# sourceMappingURL=BatchTextureArray.mjs.map\n","import { uid } from '../../../utils/data/uid.mjs';\nimport { ViewableBuffer } from '../../../utils/data/ViewableBuffer.mjs';\nimport { fastCopy } from '../../renderers/shared/buffer/utils/fastCopy.mjs';\nimport { getAdjustedBlendModeBlend } from '../../renderers/shared/state/getAdjustedBlendModeBlend.mjs';\nimport { getMaxTexturesPerBatch } from '../gl/utils/maxRecommendedTextures.mjs';\nimport { BatchTextureArray } from './BatchTextureArray.mjs';\n\n\"use strict\";\nclass Batch {\n  constructor() {\n    this.renderPipeId = \"batch\";\n    this.action = \"startBatch\";\n    // TODO - eventually this could be useful for flagging batches as dirty and then only rebuilding those ones\n    // public elementStart = 0;\n    // public elementSize = 0;\n    // for drawing..\n    this.start = 0;\n    this.size = 0;\n    this.blendMode = \"normal\";\n    this.canBundle = true;\n  }\n  destroy() {\n    this.textures = null;\n    this.gpuBindGroup = null;\n    this.bindGroup = null;\n    this.batcher = null;\n  }\n}\nlet BATCH_TICK = 0;\nconst _Batcher = class _Batcher {\n  constructor(options = {}) {\n    this.uid = uid(\"batcher\");\n    this.dirty = true;\n    this.batchIndex = 0;\n    this.batches = [];\n    // specifics.\n    this._vertexSize = 6;\n    this._elements = [];\n    this._batchPool = [];\n    this._batchPoolIndex = 0;\n    this._textureBatchPool = [];\n    this._textureBatchPoolIndex = 0;\n    options = { ..._Batcher.defaultOptions, ...options };\n    const { vertexSize, indexSize } = options;\n    this.attributeBuffer = new ViewableBuffer(vertexSize * this._vertexSize * 4);\n    this.indexBuffer = new Uint16Array(indexSize);\n    this._maxTextures = getMaxTexturesPerBatch();\n  }\n  begin() {\n    this.batchIndex = 0;\n    this.elementSize = 0;\n    this.elementStart = 0;\n    this.indexSize = 0;\n    this.attributeSize = 0;\n    this._batchPoolIndex = 0;\n    this._textureBatchPoolIndex = 0;\n    this._batchIndexStart = 0;\n    this._batchIndexSize = 0;\n    this.dirty = true;\n  }\n  add(batchableObject) {\n    this._elements[this.elementSize++] = batchableObject;\n    batchableObject.indexStart = this.indexSize;\n    batchableObject.location = this.attributeSize;\n    batchableObject.batcher = this;\n    this.indexSize += batchableObject.indexSize;\n    this.attributeSize += batchableObject.vertexSize * this._vertexSize;\n  }\n  checkAndUpdateTexture(batchableObject, texture) {\n    const textureId = batchableObject.batch.textures.ids[texture._source.uid];\n    if (!textureId && textureId !== 0)\n      return false;\n    batchableObject.textureId = textureId;\n    batchableObject.texture = texture;\n    return true;\n  }\n  updateElement(batchableObject) {\n    this.dirty = true;\n    batchableObject.packAttributes(\n      this.attributeBuffer.float32View,\n      this.attributeBuffer.uint32View,\n      batchableObject.location,\n      batchableObject.textureId\n    );\n  }\n  /**\n   * breaks the batcher. This happens when a batch gets too big,\n   * or we need to switch to a different type of rendering (a filter for example)\n   * @param instructionSet\n   */\n  break(instructionSet) {\n    var _a, _b, _c, _d, _e, _f, _g, _h;\n    const elements = this._elements;\n    let textureBatch = (_a = this._textureBatchPool)[_b = this._textureBatchPoolIndex++] || (_a[_b] = new BatchTextureArray());\n    textureBatch.clear();\n    if (!elements[this.elementStart])\n      return;\n    const firstElement = elements[this.elementStart];\n    let blendMode = getAdjustedBlendModeBlend(firstElement.blendMode, firstElement.texture._source);\n    if (this.attributeSize * 4 > this.attributeBuffer.size) {\n      this._resizeAttributeBuffer(this.attributeSize * 4);\n    }\n    if (this.indexSize > this.indexBuffer.length) {\n      this._resizeIndexBuffer(this.indexSize);\n    }\n    const f32 = this.attributeBuffer.float32View;\n    const u32 = this.attributeBuffer.uint32View;\n    const iBuffer = this.indexBuffer;\n    let size = this._batchIndexSize;\n    let start = this._batchIndexStart;\n    let action = \"startBatch\";\n    let batch = (_c = this._batchPool)[_d = this._batchPoolIndex++] || (_c[_d] = new Batch());\n    const maxTextures = this._maxTextures;\n    for (let i = this.elementStart; i < this.elementSize; ++i) {\n      const element = elements[i];\n      elements[i] = null;\n      const texture = element.texture;\n      const source = texture._source;\n      const adjustedBlendMode = getAdjustedBlendModeBlend(element.blendMode, source);\n      const blendModeChange = blendMode !== adjustedBlendMode;\n      if (source._batchTick === BATCH_TICK && !blendModeChange) {\n        element.textureId = source._textureBindLocation;\n        size += element.indexSize;\n        element.packAttributes(f32, u32, element.location, element.textureId);\n        element.packIndex(iBuffer, element.indexStart, element.location / this._vertexSize);\n        element.batch = batch;\n        continue;\n      }\n      source._batchTick = BATCH_TICK;\n      if (textureBatch.count >= maxTextures || blendModeChange) {\n        this._finishBatch(\n          batch,\n          start,\n          size - start,\n          textureBatch,\n          blendMode,\n          instructionSet,\n          action\n        );\n        action = \"renderBatch\";\n        start = size;\n        blendMode = adjustedBlendMode;\n        textureBatch = (_e = this._textureBatchPool)[_f = this._textureBatchPoolIndex++] || (_e[_f] = new BatchTextureArray());\n        textureBatch.clear();\n        batch = (_g = this._batchPool)[_h = this._batchPoolIndex++] || (_g[_h] = new Batch());\n        ++BATCH_TICK;\n      }\n      element.textureId = source._textureBindLocation = textureBatch.count;\n      textureBatch.ids[source.uid] = textureBatch.count;\n      textureBatch.textures[textureBatch.count++] = source;\n      element.batch = batch;\n      size += element.indexSize;\n      element.packAttributes(f32, u32, element.location, element.textureId);\n      element.packIndex(iBuffer, element.indexStart, element.location / this._vertexSize);\n    }\n    if (textureBatch.count > 0) {\n      this._finishBatch(\n        batch,\n        start,\n        size - start,\n        textureBatch,\n        blendMode,\n        instructionSet,\n        action\n      );\n      start = size;\n      ++BATCH_TICK;\n    }\n    this.elementStart = this.elementSize;\n    this._batchIndexStart = start;\n    this._batchIndexSize = size;\n  }\n  _finishBatch(batch, indexStart, indexSize, textureBatch, blendMode, instructionSet, action) {\n    batch.gpuBindGroup = null;\n    batch.bindGroup = null;\n    batch.action = action;\n    batch.batcher = this;\n    batch.textures = textureBatch;\n    batch.blendMode = blendMode;\n    batch.start = indexStart;\n    batch.size = indexSize;\n    ++BATCH_TICK;\n    instructionSet.add(batch);\n  }\n  finish(instructionSet) {\n    this.break(instructionSet);\n  }\n  /**\n   * Resizes the attribute buffer to the given size (1 = 1 float32)\n   * @param size - the size in vertices to ensure (not bytes!)\n   */\n  ensureAttributeBuffer(size) {\n    if (size * 4 <= this.attributeBuffer.size)\n      return;\n    this._resizeAttributeBuffer(size * 4);\n  }\n  /**\n   * Resizes the index buffer to the given size (1 = 1 float32)\n   * @param size - the size in vertices to ensure (not bytes!)\n   */\n  ensureIndexBuffer(size) {\n    if (size <= this.indexBuffer.length)\n      return;\n    this._resizeIndexBuffer(size);\n  }\n  _resizeAttributeBuffer(size) {\n    const newSize = Math.max(size, this.attributeBuffer.size * 2);\n    const newArrayBuffer = new ViewableBuffer(newSize);\n    fastCopy(this.attributeBuffer.rawBinaryData, newArrayBuffer.rawBinaryData);\n    this.attributeBuffer = newArrayBuffer;\n  }\n  _resizeIndexBuffer(size) {\n    const indexBuffer = this.indexBuffer;\n    let newSize = Math.max(size, indexBuffer.length * 1.5);\n    newSize += newSize % 2;\n    const newIndexBuffer = newSize > 65535 ? new Uint32Array(newSize) : new Uint16Array(newSize);\n    if (newIndexBuffer.BYTES_PER_ELEMENT !== indexBuffer.BYTES_PER_ELEMENT) {\n      for (let i = 0; i < indexBuffer.length; i++) {\n        newIndexBuffer[i] = indexBuffer[i];\n      }\n    } else {\n      fastCopy(indexBuffer.buffer, newIndexBuffer.buffer);\n    }\n    this.indexBuffer = newIndexBuffer;\n  }\n  destroy() {\n    for (let i = 0; i < this.batches.length; i++) {\n      this.batches[i].destroy();\n    }\n    this.batches = null;\n    for (let i = 0; i < this._elements.length; i++) {\n      this._elements[i].batch = null;\n    }\n    this._elements = null;\n    this.indexBuffer = null;\n    this.attributeBuffer.destroy();\n    this.attributeBuffer = null;\n  }\n};\n_Batcher.defaultOptions = {\n  vertexSize: 4,\n  indexSize: 6\n};\nlet Batcher = _Batcher;\n\nexport { Batch, Batcher };\n//# sourceMappingURL=Batcher.mjs.map\n","import { Bounds } from '../../../scene/container/bounds/Bounds.mjs';\nimport { getGlobalBounds } from '../../../scene/container/bounds/getGlobalBounds.mjs';\n\n\"use strict\";\nconst tempBounds = new Bounds();\nfunction addMaskBounds(mask, bounds, skipUpdateTransform) {\n  const boundsToMask = tempBounds;\n  mask.measurable = true;\n  getGlobalBounds(mask, skipUpdateTransform, boundsToMask);\n  bounds.addBoundsMask(boundsToMask);\n  mask.measurable = false;\n}\n\nexport { addMaskBounds };\n//# sourceMappingURL=addMaskBounds.mjs.map\n","import { getLocalBounds } from '../../../scene/container/bounds/getLocalBounds.mjs';\nimport { boundsPool, matrixPool } from '../../../scene/container/bounds/utils/matrixAndBoundsPool.mjs';\nimport { warn } from '../../../utils/logging/warn.mjs';\n\n\"use strict\";\nfunction addMaskLocalBounds(mask, bounds, localRoot) {\n  const boundsToMask = boundsPool.get();\n  mask.measurable = true;\n  const tempMatrix = matrixPool.get().identity();\n  const relativeMask = getMatrixRelativeToParent(mask, localRoot, tempMatrix);\n  getLocalBounds(mask, boundsToMask, relativeMask);\n  mask.measurable = false;\n  bounds.addBoundsMask(boundsToMask);\n  matrixPool.return(tempMatrix);\n  boundsPool.return(boundsToMask);\n}\nfunction getMatrixRelativeToParent(target, root, matrix) {\n  if (!target) {\n    warn(\"Mask bounds, renderable is not inside the root container\");\n    return matrix;\n  }\n  if (target !== root) {\n    getMatrixRelativeToParent(target.parent, root, matrix);\n    target.updateLocalTransform();\n    matrix.append(target.localTransform);\n  }\n  return matrix;\n}\n\nexport { addMaskLocalBounds, getMatrixRelativeToParent };\n//# sourceMappingURL=addMaskLocalBounds.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { Sprite } from '../../../scene/sprite/Sprite.mjs';\nimport { addMaskBounds } from '../utils/addMaskBounds.mjs';\nimport { addMaskLocalBounds } from '../utils/addMaskLocalBounds.mjs';\n\n\"use strict\";\nclass AlphaMask {\n  constructor(options) {\n    this.priority = 0;\n    this.pipe = \"alphaMask\";\n    if (options?.mask) {\n      this.init(options.mask);\n    }\n  }\n  init(mask) {\n    this.mask = mask;\n    this.renderMaskToTexture = !(mask instanceof Sprite);\n    this.mask.renderable = this.renderMaskToTexture;\n    this.mask.includeInBuild = !this.renderMaskToTexture;\n    this.mask.measurable = false;\n  }\n  reset() {\n    this.mask.measurable = true;\n    this.mask = null;\n  }\n  addBounds(bounds, skipUpdateTransform) {\n    addMaskBounds(this.mask, bounds, skipUpdateTransform);\n  }\n  addLocalBounds(bounds, localRoot) {\n    addMaskLocalBounds(this.mask, bounds, localRoot);\n  }\n  containsPoint(point, hitTestFn) {\n    const mask = this.mask;\n    return hitTestFn(mask, point);\n  }\n  destroy() {\n    this.reset();\n  }\n  static test(mask) {\n    return mask instanceof Sprite;\n  }\n}\nAlphaMask.extension = ExtensionType.MaskEffect;\n\nexport { AlphaMask };\n//# sourceMappingURL=AlphaMask.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\n\n\"use strict\";\nclass ColorMask {\n  constructor(options) {\n    this.priority = 0;\n    this.pipe = \"colorMask\";\n    if (options?.mask) {\n      this.init(options.mask);\n    }\n  }\n  init(mask) {\n    this.mask = mask;\n  }\n  destroy() {\n  }\n  static test(mask) {\n    return typeof mask === \"number\";\n  }\n}\nColorMask.extension = ExtensionType.MaskEffect;\n\nexport { ColorMask };\n//# sourceMappingURL=ColorMask.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { Container } from '../../../scene/container/Container.mjs';\nimport { addMaskBounds } from '../utils/addMaskBounds.mjs';\nimport { addMaskLocalBounds } from '../utils/addMaskLocalBounds.mjs';\n\n\"use strict\";\nclass StencilMask {\n  constructor(options) {\n    this.priority = 0;\n    this.pipe = \"stencilMask\";\n    if (options?.mask) {\n      this.init(options.mask);\n    }\n  }\n  init(mask) {\n    this.mask = mask;\n    this.mask.includeInBuild = false;\n    this.mask.measurable = false;\n  }\n  reset() {\n    this.mask.measurable = true;\n    this.mask.includeInBuild = true;\n    this.mask = null;\n  }\n  addBounds(bounds, skipUpdateTransform) {\n    addMaskBounds(this.mask, bounds, skipUpdateTransform);\n  }\n  addLocalBounds(bounds, localRoot) {\n    addMaskLocalBounds(this.mask, bounds, localRoot);\n  }\n  containsPoint(point, hitTestFn) {\n    const mask = this.mask;\n    return hitTestFn(mask, point);\n  }\n  destroy() {\n    this.reset();\n  }\n  static test(mask) {\n    return mask instanceof Container;\n  }\n}\nStencilMask.extension = ExtensionType.MaskEffect;\n\nexport { StencilMask };\n//# sourceMappingURL=StencilMask.mjs.map\n","import { extensions } from '../extensions/Extensions.mjs';\nimport { AlphaMask } from './mask/alpha/AlphaMask.mjs';\nimport { ColorMask } from './mask/color/ColorMask.mjs';\nimport { StencilMask } from './mask/stencil/StencilMask.mjs';\nimport { BufferImageSource } from './renderers/shared/texture/sources/BufferImageSource.mjs';\nimport { CanvasSource } from './renderers/shared/texture/sources/CanvasSource.mjs';\nimport { ImageSource } from './renderers/shared/texture/sources/ImageSource.mjs';\nimport { VideoSource } from './renderers/shared/texture/sources/VideoSource.mjs';\nimport './renderers/shared/texture/utils/textureFrom.mjs';\nimport './mask/MaskEffectManager.mjs';\n\n\"use strict\";\nextensions.add(AlphaMask, ColorMask, StencilMask, VideoSource, ImageSource, CanvasSource, BufferImageSource);\n//# sourceMappingURL=init.mjs.map\n","\"use strict\";\nvar CLEAR = /* @__PURE__ */ ((CLEAR2) => {\n  CLEAR2[CLEAR2[\"NONE\"] = 0] = \"NONE\";\n  CLEAR2[CLEAR2[\"COLOR\"] = 16384] = \"COLOR\";\n  CLEAR2[CLEAR2[\"STENCIL\"] = 1024] = \"STENCIL\";\n  CLEAR2[CLEAR2[\"DEPTH\"] = 256] = \"DEPTH\";\n  CLEAR2[CLEAR2[\"COLOR_DEPTH\"] = 16640] = \"COLOR_DEPTH\";\n  CLEAR2[CLEAR2[\"COLOR_STENCIL\"] = 17408] = \"COLOR_STENCIL\";\n  CLEAR2[CLEAR2[\"DEPTH_STENCIL\"] = 1280] = \"DEPTH_STENCIL\";\n  CLEAR2[CLEAR2[\"ALL\"] = 17664] = \"ALL\";\n  return CLEAR2;\n})(CLEAR || {});\n\nexport { CLEAR };\n//# sourceMappingURL=const.mjs.map\n","import { getTestContext } from './getTestContext.mjs';\n\n\"use strict\";\nlet maxFragmentPrecision;\nfunction getMaxFragmentPrecision() {\n  if (!maxFragmentPrecision) {\n    maxFragmentPrecision = \"mediump\";\n    const gl = getTestContext();\n    if (gl) {\n      if (gl.getShaderPrecisionFormat) {\n        const shaderFragment = gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.HIGH_FLOAT);\n        maxFragmentPrecision = shaderFragment.precision ? \"highp\" : \"mediump\";\n      }\n    }\n  }\n  return maxFragmentPrecision;\n}\n\nexport { getMaxFragmentPrecision };\n//# sourceMappingURL=getMaxFragmentPrecision.mjs.map\n","\"use strict\";\nconst fragmentNameCache = {};\nconst VertexNameCache = {};\nfunction setProgramName(src, { name = `pixi-program` }, isFragment = true) {\n  name = name.replace(/\\s+/g, \"-\");\n  name += isFragment ? \"-fragment\" : \"-vertex\";\n  const nameCache = isFragment ? fragmentNameCache : VertexNameCache;\n  if (nameCache[name]) {\n    nameCache[name]++;\n    name += `-${nameCache[name]}`;\n  } else {\n    nameCache[name] = 1;\n  }\n  if (src.indexOf(\"#define SHADER_NAME\") !== -1)\n    return src;\n  const shaderName = `#define SHADER_NAME ${name}`;\n  return `${shaderName}\n${src}`;\n}\n\nexport { setProgramName };\n//# sourceMappingURL=setProgramName.mjs.map\n","import { createIdFromString } from '../../shared/utils/createIdFromString.mjs';\nimport { getMaxFragmentPrecision } from './program/getMaxFragmentPrecision.mjs';\nimport { addProgramDefines } from './program/preprocessors/addProgramDefines.mjs';\nimport { ensurePrecision } from './program/preprocessors/ensurePrecision.mjs';\nimport { insertVersion } from './program/preprocessors/insertVersion.mjs';\nimport { setProgramName } from './program/preprocessors/setProgramName.mjs';\nimport { stripVersion } from './program/preprocessors/stripVersion.mjs';\n\n\"use strict\";\nconst processes = {\n  // strips any version headers..\n  stripVersion,\n  // adds precision string if not already present\n  ensurePrecision,\n  // add some defines if WebGL1 to make it more compatible with WebGL2 shaders\n  addProgramDefines,\n  // add the program name to the shader\n  setProgramName,\n  // add the version string to the shader header\n  insertVersion\n};\nconst programCache = /* @__PURE__ */ Object.create(null);\nconst _GlProgram = class _GlProgram {\n  /**\n   * Creates a shiny new GlProgram. Used by WebGL renderer.\n   * @param options - The options for the program.\n   */\n  constructor(options) {\n    options = { ..._GlProgram.defaultOptions, ...options };\n    const isES300 = options.fragment.indexOf(\"#version 300 es\") !== -1;\n    const preprocessorOptions = {\n      stripVersion: isES300,\n      ensurePrecision: {\n        requestedFragmentPrecision: options.preferredFragmentPrecision,\n        requestedVertexPrecision: options.preferredVertexPrecision,\n        maxSupportedVertexPrecision: \"highp\",\n        maxSupportedFragmentPrecision: getMaxFragmentPrecision()\n      },\n      setProgramName: {\n        name: options.name\n      },\n      addProgramDefines: isES300,\n      insertVersion: isES300\n    };\n    let fragment = options.fragment;\n    let vertex = options.vertex;\n    Object.keys(processes).forEach((processKey) => {\n      const processOptions = preprocessorOptions[processKey];\n      fragment = processes[processKey](fragment, processOptions, true);\n      vertex = processes[processKey](vertex, processOptions, false);\n    });\n    this.fragment = fragment;\n    this.vertex = vertex;\n    this._key = createIdFromString(`${this.vertex}:${this.fragment}`, \"gl-program\");\n  }\n  /** destroys the program */\n  destroy() {\n    this.fragment = null;\n    this.vertex = null;\n    this._attributeData = null;\n    this._uniformData = null;\n    this._uniformBlockData = null;\n    this.transformFeedbackVaryings = null;\n  }\n  /**\n   * Helper function that creates a program for a given source.\n   * It will check the program cache if the program has already been created.\n   * If it has that one will be returned, if not a new one will be created and cached.\n   * @param options - The options for the program.\n   * @returns A program using the same source\n   */\n  static from(options) {\n    const key = `${options.vertex}:${options.fragment}`;\n    if (!programCache[key]) {\n      programCache[key] = new _GlProgram(options);\n    }\n    return programCache[key];\n  }\n};\n/** The default options used by the program. */\n_GlProgram.defaultOptions = {\n  preferredVertexPrecision: \"highp\",\n  preferredFragmentPrecision: \"mediump\"\n};\nlet GlProgram = _GlProgram;\n\nexport { GlProgram };\n//# sourceMappingURL=GlProgram.mjs.map\n","\"use strict\";\nfunction stripVersion(src, isES300) {\n  if (!isES300)\n    return src;\n  return src.replace(\"#version 300 es\", \"\");\n}\n\nexport { stripVersion };\n//# sourceMappingURL=stripVersion.mjs.map\n","\"use strict\";\nfunction ensurePrecision(src, options, isFragment) {\n  const maxSupportedPrecision = isFragment ? options.maxSupportedFragmentPrecision : options.maxSupportedVertexPrecision;\n  if (src.substring(0, 9) !== \"precision\") {\n    let precision = isFragment ? options.requestedFragmentPrecision : options.requestedVertexPrecision;\n    if (precision === \"highp\" && maxSupportedPrecision !== \"highp\") {\n      precision = \"mediump\";\n    }\n    return `precision ${precision} float;\n${src}`;\n  } else if (maxSupportedPrecision !== \"highp\" && src.substring(0, 15) === \"precision highp\") {\n    return src.replace(\"precision highp\", \"precision mediump\");\n  }\n  return src;\n}\n\nexport { ensurePrecision };\n//# sourceMappingURL=ensurePrecision.mjs.map\n","\"use strict\";\nfunction addProgramDefines(src, isES300, isFragment) {\n  if (isES300)\n    return src;\n  if (isFragment) {\n    src = src.replace(\"out vec4 finalColor;\", \"\");\n    return `\n        \n        #ifdef GL_ES // This checks if it is WebGL1\n        #define in varying\n        #define finalColor gl_FragColor\n        #define texture texture2D\n        #endif\n        ${src}\n        `;\n  }\n  return `\n        \n        #ifdef GL_ES // This checks if it is WebGL1\n        #define in attribute\n        #define out varying\n        #endif\n        ${src}\n        `;\n}\n\nexport { addProgramDefines };\n//# sourceMappingURL=addProgramDefines.mjs.map\n","\"use strict\";\nfunction insertVersion(src, isES300) {\n  if (!isES300)\n    return src;\n  return `#version 300 es\n${src}`;\n}\n\nexport { insertVersion };\n//# sourceMappingURL=insertVersion.mjs.map\n","import { DOMAdapter } from '../../../../../environment/adapter.mjs';\n\n\"use strict\";\nlet context;\nfunction getTestContext() {\n  if (!context || context?.isContextLost()) {\n    const canvas = DOMAdapter.get().createCanvas();\n    context = canvas.getContext(\"webgl\", {});\n  }\n  return context;\n}\n\nexport { getTestContext };\n//# sourceMappingURL=getTestContext.mjs.map\n","\"use strict\";\nclass BindGroup {\n  /**\n   * Create a new instance eof the Bind Group.\n   * @param resources - The resources that are bound together for use by a shader.\n   */\n  constructor(resources) {\n    /** The resources that are bound together for use by a shader. */\n    this.resources = /* @__PURE__ */ Object.create(null);\n    this._dirty = true;\n    let index = 0;\n    for (const i in resources) {\n      const resource = resources[i];\n      this.setResource(resource, index++);\n    }\n    this._updateKey();\n  }\n  /**\n   * Updates the key if its flagged as dirty. This is used internally to\n   * match this bind group to a WebGPU BindGroup.\n   * @internal\n   * @ignore\n   */\n  _updateKey() {\n    if (!this._dirty)\n      return;\n    this._dirty = false;\n    const keyParts = [];\n    let index = 0;\n    for (const i in this.resources) {\n      keyParts[index++] = this.resources[i]._resourceId;\n    }\n    this._key = keyParts.join(\"|\");\n  }\n  /**\n   * Set a resource at a given index. this function will\n   * ensure that listeners will be removed from the current resource\n   * and added to the new resource.\n   * @param resource - The resource to set.\n   * @param index - The index to set the resource at.\n   */\n  setResource(resource, index) {\n    const currentResource = this.resources[index];\n    if (resource === currentResource)\n      return;\n    if (currentResource) {\n      resource.off?.(\"change\", this.onResourceChange, this);\n    }\n    resource.on?.(\"change\", this.onResourceChange, this);\n    this.resources[index] = resource;\n    this._dirty = true;\n  }\n  /**\n   * Returns the resource at the current specified index.\n   * @param index - The index of the resource to get.\n   * @returns - The resource at the specified index.\n   */\n  getResource(index) {\n    return this.resources[index];\n  }\n  /**\n   * Used internally to 'touch' each resource, to ensure that the GC\n   * knows that all resources in this bind group are still being used.\n   * @param tick - The current tick.\n   * @internal\n   * @ignore\n   */\n  _touch(tick) {\n    const resources = this.resources;\n    for (const i in resources) {\n      resources[i]._touched = tick;\n    }\n  }\n  /** Destroys this bind group and removes all listeners. */\n  destroy() {\n    const resources = this.resources;\n    for (const i in resources) {\n      const resource = resources[i];\n      resource.off?.(\"change\", this.onResourceChange, this);\n    }\n    this.resources = null;\n  }\n  onResourceChange(resource) {\n    this._dirty = true;\n    if (resource.destroyed) {\n      const resources = this.resources;\n      for (const i in resources) {\n        if (resources[i] === resource) {\n          resources[i] = null;\n        }\n      }\n    } else {\n      this._updateKey();\n    }\n  }\n}\n\nexport { BindGroup };\n//# sourceMappingURL=BindGroup.mjs.map\n","import { getAttributeInfoFromFormat } from '../../../shared/geometry/utils/getAttributeInfoFromFormat.mjs';\n\n\"use strict\";\nconst WGSL_TO_VERTEX_TYPES = {\n  f32: \"float32\",\n  \"vec2<f32>\": \"float32x2\",\n  \"vec3<f32>\": \"float32x3\",\n  \"vec4<f32>\": \"float32x4\",\n  vec2f: \"float32x2\",\n  vec3f: \"float32x3\",\n  vec4f: \"float32x4\",\n  i32: \"sint32\",\n  \"vec2<i32>\": \"sint32x2\",\n  \"vec3<i32>\": \"sint32x3\",\n  \"vec4<i32>\": \"sint32x4\",\n  u32: \"uint32\",\n  \"vec2<u32>\": \"uint32x2\",\n  \"vec3<u32>\": \"uint32x3\",\n  \"vec4<u32>\": \"uint32x4\",\n  bool: \"uint32\",\n  \"vec2<bool>\": \"uint32x2\",\n  \"vec3<bool>\": \"uint32x3\",\n  \"vec4<bool>\": \"uint32x4\"\n};\nfunction extractAttributesFromGpuProgram({ source, entryPoint }) {\n  const results = {};\n  const mainVertStart = source.indexOf(`fn ${entryPoint}`);\n  if (mainVertStart !== -1) {\n    const arrowFunctionStart = source.indexOf(\"->\", mainVertStart);\n    if (arrowFunctionStart !== -1) {\n      const functionArgsSubstring = source.substring(mainVertStart, arrowFunctionStart);\n      const inputsRegex = /@location\\((\\d+)\\)\\s+([a-zA-Z0-9_]+)\\s*:\\s*([a-zA-Z0-9_<>]+)(?:,|\\s|$)/g;\n      let match;\n      while ((match = inputsRegex.exec(functionArgsSubstring)) !== null) {\n        const format = WGSL_TO_VERTEX_TYPES[match[3]] ?? \"float32\";\n        results[match[2]] = {\n          location: parseInt(match[1], 10),\n          format,\n          stride: getAttributeInfoFromFormat(format).stride,\n          offset: 0,\n          instance: false,\n          start: 0\n        };\n      }\n    }\n  }\n  return results;\n}\n\nexport { extractAttributesFromGpuProgram };\n//# sourceMappingURL=extractAttributesFromGpuProgram.mjs.map\n","\"use strict\";\nfunction extractStructAndGroups(wgsl) {\n  const linePattern = /(^|[^/])@(group|binding)\\(\\d+\\)[^;]+;/g;\n  const groupPattern = /@group\\((\\d+)\\)/;\n  const bindingPattern = /@binding\\((\\d+)\\)/;\n  const namePattern = /var(<[^>]+>)? (\\w+)/;\n  const typePattern = /:\\s*(\\w+)/;\n  const structPattern = /struct\\s+(\\w+)\\s*{([^}]+)}/g;\n  const structMemberPattern = /(\\w+)\\s*:\\s*([\\w\\<\\>]+)/g;\n  const structName = /struct\\s+(\\w+)/;\n  const groups = wgsl.match(linePattern)?.map((item) => ({\n    group: parseInt(item.match(groupPattern)[1], 10),\n    binding: parseInt(item.match(bindingPattern)[1], 10),\n    name: item.match(namePattern)[2],\n    isUniform: item.match(namePattern)[1] === \"<uniform>\",\n    type: item.match(typePattern)[1]\n  }));\n  if (!groups) {\n    return {\n      groups: [],\n      structs: []\n    };\n  }\n  const structs = wgsl.match(structPattern)?.map((struct) => {\n    const name = struct.match(structName)[1];\n    const members = struct.match(structMemberPattern).reduce((acc, member) => {\n      const [name2, type] = member.split(\":\");\n      acc[name2.trim()] = type.trim();\n      return acc;\n    }, {});\n    if (!members) {\n      return null;\n    }\n    return { name, members };\n  }).filter(({ name }) => groups.some((group) => group.type === name)) ?? [];\n  return {\n    groups,\n    structs\n  };\n}\n\nexport { extractStructAndGroups };\n//# sourceMappingURL=extractStructAndGroups.mjs.map\n","\"use strict\";\nvar ShaderStage = /* @__PURE__ */ ((ShaderStage2) => {\n  ShaderStage2[ShaderStage2[\"VERTEX\"] = 1] = \"VERTEX\";\n  ShaderStage2[ShaderStage2[\"FRAGMENT\"] = 2] = \"FRAGMENT\";\n  ShaderStage2[ShaderStage2[\"COMPUTE\"] = 4] = \"COMPUTE\";\n  return ShaderStage2;\n})(ShaderStage || {});\n\nexport { ShaderStage };\n//# sourceMappingURL=const.mjs.map\n","import { createIdFromString } from '../../shared/utils/createIdFromString.mjs';\nimport { extractAttributesFromGpuProgram } from './utils/extractAttributesFromGpuProgram.mjs';\nimport { extractStructAndGroups } from './utils/extractStructAndGroups.mjs';\nimport { generateGpuLayoutGroups } from './utils/generateGpuLayoutGroups.mjs';\nimport { generateLayoutHash } from './utils/generateLayoutHash.mjs';\nimport { removeStructAndGroupDuplicates } from './utils/removeStructAndGroupDuplicates.mjs';\n\n\"use strict\";\nconst programCache = /* @__PURE__ */ Object.create(null);\nclass GpuProgram {\n  /**\n   * Create a new GpuProgram\n   * @param options - The options for the gpu program\n   */\n  constructor(options) {\n    /**\n     * @internal\n     * @ignore\n     */\n    this._layoutKey = 0;\n    const { fragment, vertex, layout, gpuLayout, name } = options;\n    this.name = name;\n    this.fragment = fragment;\n    this.vertex = vertex;\n    if (fragment.source === vertex.source) {\n      const structsAndGroups = extractStructAndGroups(fragment.source);\n      this.structsAndGroups = structsAndGroups;\n    } else {\n      const vertexStructsAndGroups = extractStructAndGroups(vertex.source);\n      const fragmentStructsAndGroups = extractStructAndGroups(fragment.source);\n      this.structsAndGroups = removeStructAndGroupDuplicates(vertexStructsAndGroups, fragmentStructsAndGroups);\n    }\n    this.layout = layout ?? generateLayoutHash(this.structsAndGroups);\n    this.gpuLayout = gpuLayout ?? generateGpuLayoutGroups(this.structsAndGroups);\n    this.autoAssignGlobalUniforms = !!(this.layout[0]?.globalUniforms !== void 0);\n    this.autoAssignLocalUniforms = !!(this.layout[1]?.localUniforms !== void 0);\n    this._generateProgramKey();\n  }\n  // TODO maker this pure\n  _generateProgramKey() {\n    const { vertex, fragment } = this;\n    const bigKey = vertex.source + fragment.source + vertex.entryPoint + fragment.entryPoint;\n    this._layoutKey = createIdFromString(bigKey, \"program\");\n  }\n  get attributeData() {\n    this._attributeData ?? (this._attributeData = extractAttributesFromGpuProgram(this.vertex));\n    return this._attributeData;\n  }\n  /** destroys the program */\n  destroy() {\n    this.gpuLayout = null;\n    this.layout = null;\n    this.structsAndGroups = null;\n    this.fragment = null;\n    this.vertex = null;\n  }\n  /**\n   * Helper function that creates a program for a given source.\n   * It will check the program cache if the program has already been created.\n   * If it has that one will be returned, if not a new one will be created and cached.\n   * @param options - The options for the program.\n   * @returns A program using the same source\n   */\n  static from(options) {\n    const key = `${options.vertex.source}:${options.fragment.source}:${options.fragment.entryPoint}:${options.vertex.entryPoint}`;\n    if (!programCache[key]) {\n      programCache[key] = new GpuProgram(options);\n    }\n    return programCache[key];\n  }\n}\n\nexport { GpuProgram };\n//# sourceMappingURL=GpuProgram.mjs.map\n","\"use strict\";\nfunction removeStructAndGroupDuplicates(vertexStructsAndGroups, fragmentStructsAndGroups) {\n  const structNameSet = /* @__PURE__ */ new Set();\n  const dupeGroupKeySet = /* @__PURE__ */ new Set();\n  const structs = [...vertexStructsAndGroups.structs, ...fragmentStructsAndGroups.structs].filter((struct) => {\n    if (structNameSet.has(struct.name)) {\n      return false;\n    }\n    structNameSet.add(struct.name);\n    return true;\n  });\n  const groups = [...vertexStructsAndGroups.groups, ...fragmentStructsAndGroups.groups].filter((group) => {\n    const key = `${group.name}-${group.binding}`;\n    if (dupeGroupKeySet.has(key)) {\n      return false;\n    }\n    dupeGroupKeySet.add(key);\n    return true;\n  });\n  return { structs, groups };\n}\n\nexport { removeStructAndGroupDuplicates };\n//# sourceMappingURL=removeStructAndGroupDuplicates.mjs.map\n","\"use strict\";\nfunction generateLayoutHash({ groups }) {\n  const layout = [];\n  for (let i = 0; i < groups.length; i++) {\n    const group = groups[i];\n    if (!layout[group.group]) {\n      layout[group.group] = {};\n    }\n    layout[group.group][group.name] = group.binding;\n  }\n  return layout;\n}\n\nexport { generateLayoutHash };\n//# sourceMappingURL=generateLayoutHash.mjs.map\n","import { ShaderStage } from '../../../shared/shader/const.mjs';\n\n\"use strict\";\nfunction generateGpuLayoutGroups({ groups }) {\n  const layout = [];\n  for (let i = 0; i < groups.length; i++) {\n    const group = groups[i];\n    if (!layout[group.group]) {\n      layout[group.group] = [];\n    }\n    if (group.isUniform) {\n      layout[group.group].push({\n        binding: group.binding,\n        visibility: ShaderStage.VERTEX | ShaderStage.FRAGMENT,\n        buffer: {\n          type: \"uniform\"\n        }\n      });\n    } else if (group.type === \"sampler\") {\n      layout[group.group].push({\n        binding: group.binding,\n        visibility: ShaderStage.FRAGMENT,\n        sampler: {\n          type: \"filtering\"\n        }\n      });\n    } else if (group.type === \"texture_2d\") {\n      layout[group.group].push({\n        binding: group.binding,\n        visibility: ShaderStage.FRAGMENT,\n        texture: {\n          sampleType: \"float\",\n          viewDimension: \"2d\",\n          multisampled: false\n        }\n      });\n    }\n  }\n  return layout;\n}\n\nexport { generateGpuLayoutGroups };\n//# sourceMappingURL=generateGpuLayoutGroups.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { uid } from '../../../../utils/data/uid.mjs';\nimport { BufferUsage } from './const.mjs';\n\n\"use strict\";\nclass Buffer extends EventEmitter {\n  /**\n   * Creates a new Buffer with the given options\n   * @param options - the options for the buffer\n   */\n  constructor(options) {\n    let { data, size } = options;\n    const { usage, label, shrinkToFit } = options;\n    super();\n    /**\n     * emits when the underlying buffer has changed shape (i.e. resized)\n     * letting the renderer know that it needs to discard the old buffer on the GPU and create a new one\n     * @event change\n     */\n    /**\n     * emits when the underlying buffer data has been updated. letting the renderer know\n     * that it needs to update the buffer on the GPU\n     * @event update\n     */\n    /**\n     * emits when the buffer is destroyed. letting the renderer know that it needs to destroy the buffer on the GPU\n     * @event destroy\n     */\n    /**\n     * a unique id for this uniform group used through the renderer\n     * @internal\n     * @ignore\n     */\n    this.uid = uid(\"buffer\");\n    /**\n     * a resource type, used to identify how to handle it when its in a bind group / shader resource\n     * @internal\n     * @ignore\n     */\n    this._resourceType = \"buffer\";\n    /**\n     * the resource id used internally by the renderer to build bind group keys\n     * @internal\n     * @ignore\n     */\n    this._resourceId = uid(\"resource\");\n    /**\n     * used internally to know if a uniform group was used in the last render pass\n     * @internal\n     * @ignore\n     */\n    this._touched = 0;\n    /**\n     * @internal\n     * @ignore\n     */\n    this._updateID = 1;\n    /**\n     * should the GPU buffer be shrunk when the data becomes smaller?\n     * changing this will cause the buffer to be destroyed and a new one created on the GPU\n     * this can be expensive, especially if the buffer is already big enough!\n     * setting this to false will prevent the buffer from being shrunk. This will yield better performance\n     * if you are constantly setting data that is changing size often.\n     * @default true\n     */\n    this.shrinkToFit = true;\n    /**\n     * Has the buffer been destroyed?\n     * @readonly\n     */\n    this.destroyed = false;\n    if (data instanceof Array) {\n      data = new Float32Array(data);\n    }\n    this._data = data;\n    size = size ?? data?.byteLength;\n    const mappedAtCreation = !!data;\n    this.descriptor = {\n      size,\n      usage,\n      mappedAtCreation,\n      label\n    };\n    this.shrinkToFit = shrinkToFit ?? true;\n  }\n  /** the data in the buffer */\n  get data() {\n    return this._data;\n  }\n  set data(value) {\n    this.setDataWithSize(value, value.length, true);\n  }\n  /** whether the buffer is static or not */\n  get static() {\n    return !!(this.descriptor.usage & BufferUsage.STATIC);\n  }\n  set static(value) {\n    if (value) {\n      this.descriptor.usage |= BufferUsage.STATIC;\n    } else {\n      this.descriptor.usage &= ~BufferUsage.STATIC;\n    }\n  }\n  /**\n   * Sets the data in the buffer to the given value. This will immediately update the buffer on the GPU.\n   * If you only want to update a subset of the buffer, you can pass in the size of the data.\n   * @param value - the data to set\n   * @param size - the size of the data in bytes\n   * @param syncGPU - should the buffer be updated on the GPU immediately?\n   */\n  setDataWithSize(value, size, syncGPU) {\n    this._updateID++;\n    this._updateSize = size * value.BYTES_PER_ELEMENT;\n    if (this._data === value) {\n      if (syncGPU)\n        this.emit(\"update\", this);\n      return;\n    }\n    const oldData = this._data;\n    this._data = value;\n    if (oldData.length !== value.length) {\n      if (!this.shrinkToFit && value.byteLength < oldData.byteLength) {\n        if (syncGPU)\n          this.emit(\"update\", this);\n      } else {\n        this.descriptor.size = value.byteLength;\n        this._resourceId = uid(\"resource\");\n        this.emit(\"change\", this);\n      }\n      return;\n    }\n    if (syncGPU)\n      this.emit(\"update\", this);\n  }\n  /**\n   * updates the buffer on the GPU to reflect the data in the buffer.\n   * By default it will update the entire buffer. If you only want to update a subset of the buffer,\n   * you can pass in the size of the buffer to update.\n   * @param sizeInBytes - the new size of the buffer in bytes\n   */\n  update(sizeInBytes) {\n    this._updateSize = sizeInBytes ?? this._updateSize;\n    this._updateID++;\n    this.emit(\"update\", this);\n  }\n  /** Destroys the buffer */\n  destroy() {\n    this.destroyed = true;\n    this.emit(\"destroy\", this);\n    this.emit(\"change\", this);\n    this._data = null;\n    this.descriptor = null;\n    this.removeAllListeners();\n  }\n}\n\nexport { Buffer };\n//# sourceMappingURL=Buffer.mjs.map\n","\"use strict\";\nvar BufferUsage = /* @__PURE__ */ ((BufferUsage2) => {\n  BufferUsage2[BufferUsage2[\"MAP_READ\"] = 1] = \"MAP_READ\";\n  BufferUsage2[BufferUsage2[\"MAP_WRITE\"] = 2] = \"MAP_WRITE\";\n  BufferUsage2[BufferUsage2[\"COPY_SRC\"] = 4] = \"COPY_SRC\";\n  BufferUsage2[BufferUsage2[\"COPY_DST\"] = 8] = \"COPY_DST\";\n  BufferUsage2[BufferUsage2[\"INDEX\"] = 16] = \"INDEX\";\n  BufferUsage2[BufferUsage2[\"VERTEX\"] = 32] = \"VERTEX\";\n  BufferUsage2[BufferUsage2[\"UNIFORM\"] = 64] = \"UNIFORM\";\n  BufferUsage2[BufferUsage2[\"STORAGE\"] = 128] = \"STORAGE\";\n  BufferUsage2[BufferUsage2[\"INDIRECT\"] = 256] = \"INDIRECT\";\n  BufferUsage2[BufferUsage2[\"QUERY_RESOLVE\"] = 512] = \"QUERY_RESOLVE\";\n  BufferUsage2[BufferUsage2[\"STATIC\"] = 1024] = \"STATIC\";\n  return BufferUsage2;\n})(BufferUsage || {});\n\nexport { BufferUsage };\n//# sourceMappingURL=const.mjs.map\n","\"use strict\";\nfunction fastCopy(sourceBuffer, destinationBuffer) {\n  const lengthDouble = sourceBuffer.byteLength / 8 | 0;\n  const sourceFloat64View = new Float64Array(sourceBuffer, 0, lengthDouble);\n  const destinationFloat64View = new Float64Array(destinationBuffer, 0, lengthDouble);\n  destinationFloat64View.set(sourceFloat64View);\n  const remainingBytes = sourceBuffer.byteLength - lengthDouble * 8;\n  if (remainingBytes > 0) {\n    const sourceUint8View = new Uint8Array(sourceBuffer, lengthDouble * 8, remainingBytes);\n    const destinationUint8View = new Uint8Array(destinationBuffer, lengthDouble * 8, remainingBytes);\n    destinationUint8View.set(sourceUint8View);\n  }\n}\n\nexport { fastCopy };\n//# sourceMappingURL=fastCopy.mjs.map\n","import { Buffer } from '../../buffer/Buffer.mjs';\nimport { BufferUsage } from '../../buffer/const.mjs';\n\n\"use strict\";\nfunction ensureIsBuffer(buffer, index) {\n  if (!(buffer instanceof Buffer)) {\n    let usage = index ? BufferUsage.INDEX : BufferUsage.VERTEX;\n    if (buffer instanceof Array) {\n      if (index) {\n        buffer = new Uint32Array(buffer);\n        usage = BufferUsage.INDEX | BufferUsage.COPY_DST;\n      } else {\n        buffer = new Float32Array(buffer);\n        usage = BufferUsage.VERTEX | BufferUsage.COPY_DST;\n      }\n    }\n    buffer = new Buffer({\n      data: buffer,\n      label: index ? \"index-mesh-buffer\" : \"vertex-mesh-buffer\",\n      usage\n    });\n  }\n  return buffer;\n}\n\nexport { ensureIsBuffer };\n//# sourceMappingURL=ensureIsBuffer.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { Bounds } from '../../../../scene/container/bounds/Bounds.mjs';\nimport { uid } from '../../../../utils/data/uid.mjs';\nimport { Buffer } from '../buffer/Buffer.mjs';\nimport { ensureIsBuffer } from './utils/ensureIsBuffer.mjs';\nimport { getGeometryBounds } from './utils/getGeometryBounds.mjs';\n\n\"use strict\";\nfunction ensureIsAttribute(attribute) {\n  if (attribute instanceof Buffer || Array.isArray(attribute) || attribute.BYTES_PER_ELEMENT) {\n    attribute = {\n      buffer: attribute\n    };\n  }\n  attribute.buffer = ensureIsBuffer(attribute.buffer, false);\n  return attribute;\n}\nclass Geometry extends EventEmitter {\n  /**\n   * Create a new instance of a geometry\n   * @param options - The options for the geometry.\n   */\n  constructor(options) {\n    const { attributes, indexBuffer, topology } = options;\n    super();\n    /** The unique id of the geometry. */\n    this.uid = uid(\"geometry\");\n    /**\n     * the layout key will be generated by WebGPU all geometries that have the same structure\n     * will have the same layout key. This is used to cache the pipeline layout\n     * @internal\n     * @ignore\n     */\n    this._layoutKey = 0;\n    /** the instance count of the geometry to draw */\n    this.instanceCount = 1;\n    this._bounds = new Bounds();\n    this._boundsDirty = true;\n    this.attributes = attributes;\n    this.buffers = [];\n    this.instanceCount = options.instanceCount || 1;\n    for (const i in attributes) {\n      const attribute = attributes[i] = ensureIsAttribute(attributes[i]);\n      const bufferIndex = this.buffers.indexOf(attribute.buffer);\n      if (bufferIndex === -1) {\n        this.buffers.push(attribute.buffer);\n        attribute.buffer.on(\"update\", this.onBufferUpdate, this);\n        attribute.buffer.on(\"change\", this.onBufferUpdate, this);\n      }\n    }\n    if (indexBuffer) {\n      this.indexBuffer = ensureIsBuffer(indexBuffer, true);\n      this.buffers.push(this.indexBuffer);\n    }\n    this.topology = topology || \"triangle-list\";\n  }\n  onBufferUpdate() {\n    this._boundsDirty = true;\n    this.emit(\"update\", this);\n  }\n  /**\n   * Returns the requested attribute.\n   * @param id - The name of the attribute required\n   * @returns - The attribute requested.\n   */\n  getAttribute(id) {\n    return this.attributes[id];\n  }\n  /**\n   * Returns the index buffer\n   * @returns - The index buffer.\n   */\n  getIndex() {\n    return this.indexBuffer;\n  }\n  /**\n   * Returns the requested buffer.\n   * @param id - The name of the buffer required.\n   * @returns - The buffer requested.\n   */\n  getBuffer(id) {\n    return this.getAttribute(id).buffer;\n  }\n  /**\n   * Used to figure out how many vertices there are in this geometry\n   * @returns the number of vertices in the geometry\n   */\n  getSize() {\n    for (const i in this.attributes) {\n      const attribute = this.attributes[i];\n      const buffer = attribute.buffer;\n      return buffer.data.length / (attribute.stride / 4 || attribute.size);\n    }\n    return 0;\n  }\n  /** Returns the bounds of the geometry. */\n  get bounds() {\n    if (!this._boundsDirty)\n      return this._bounds;\n    this._boundsDirty = false;\n    return getGeometryBounds(this, \"aPosition\", this._bounds);\n  }\n  /**\n   * destroys the geometry.\n   * @param destroyBuffers - destroy the buffers associated with this geometry\n   */\n  destroy(destroyBuffers = false) {\n    this.emit(\"destroy\", this);\n    this.removeAllListeners();\n    if (destroyBuffers) {\n      this.buffers.forEach((buffer) => buffer.destroy());\n    }\n    this.attributes = null;\n    this.buffers = null;\n    this.indexBuffer = null;\n    this._bounds = null;\n  }\n}\n\nexport { Geometry };\n//# sourceMappingURL=Geometry.mjs.map\n","\"use strict\";\nfunction getGeometryBounds(geometry, attributeId, bounds) {\n  const attribute = geometry.getAttribute(attributeId);\n  if (!attribute) {\n    bounds.minX = 0;\n    bounds.minY = 0;\n    bounds.maxX = 0;\n    bounds.maxY = 0;\n    return bounds;\n  }\n  const data = attribute.buffer.data;\n  let minX = Infinity;\n  let minY = Infinity;\n  let maxX = -Infinity;\n  let maxY = -Infinity;\n  const byteSize = data.BYTES_PER_ELEMENT;\n  const offset = (attribute.offset || 0) / byteSize;\n  const stride = (attribute.stride || 2 * 4) / byteSize;\n  for (let i = offset; i < data.length; i += stride) {\n    const x = data[i];\n    const y = data[i + 1];\n    if (x > maxX)\n      maxX = x;\n    if (y > maxY)\n      maxY = y;\n    if (x < minX)\n      minX = x;\n    if (y < minY)\n      minY = y;\n  }\n  bounds.minX = minX;\n  bounds.minY = minY;\n  bounds.maxX = maxX;\n  bounds.maxY = maxY;\n  return bounds;\n}\n\nexport { getGeometryBounds };\n//# sourceMappingURL=getGeometryBounds.mjs.map\n","\"use strict\";\nconst attributeFormatData = {\n  uint8x2: { size: 2, stride: 2, normalised: false },\n  uint8x4: { size: 4, stride: 4, normalised: false },\n  sint8x2: { size: 2, stride: 2, normalised: false },\n  sint8x4: { size: 4, stride: 4, normalised: false },\n  unorm8x2: { size: 2, stride: 2, normalised: true },\n  unorm8x4: { size: 4, stride: 4, normalised: true },\n  snorm8x2: { size: 2, stride: 2, normalised: true },\n  snorm8x4: { size: 4, stride: 4, normalised: true },\n  uint16x2: { size: 2, stride: 4, normalised: false },\n  uint16x4: { size: 4, stride: 8, normalised: false },\n  sint16x2: { size: 2, stride: 4, normalised: false },\n  sint16x4: { size: 4, stride: 8, normalised: false },\n  unorm16x2: { size: 2, stride: 4, normalised: true },\n  unorm16x4: { size: 4, stride: 8, normalised: true },\n  snorm16x2: { size: 2, stride: 4, normalised: true },\n  snorm16x4: { size: 4, stride: 8, normalised: true },\n  float16x2: { size: 2, stride: 4, normalised: false },\n  float16x4: { size: 4, stride: 8, normalised: false },\n  float32: { size: 1, stride: 4, normalised: false },\n  float32x2: { size: 2, stride: 8, normalised: false },\n  float32x3: { size: 3, stride: 12, normalised: false },\n  float32x4: { size: 4, stride: 16, normalised: false },\n  uint32: { size: 1, stride: 4, normalised: false },\n  uint32x2: { size: 2, stride: 8, normalised: false },\n  uint32x3: { size: 3, stride: 12, normalised: false },\n  uint32x4: { size: 4, stride: 16, normalised: false },\n  sint32: { size: 1, stride: 4, normalised: false },\n  sint32x2: { size: 2, stride: 8, normalised: false },\n  sint32x3: { size: 3, stride: 12, normalised: false },\n  sint32x4: { size: 4, stride: 16, normalised: false }\n};\nfunction getAttributeInfoFromFormat(format) {\n  return attributeFormatData[format] ?? attributeFormatData.float32;\n}\n\nexport { getAttributeInfoFromFormat };\n//# sourceMappingURL=getAttributeInfoFromFormat.mjs.map\n","import { uid } from '../../../../utils/data/uid.mjs';\n\n\"use strict\";\nclass InstructionSet {\n  constructor() {\n    /** a unique id for this instruction set used through the renderer */\n    this.uid = uid(\"instructionSet\");\n    /** the array of instructions */\n    this.instructions = [];\n    /** the actual size of the array (any instructions passed this should be ignored) */\n    this.instructionSize = 0;\n  }\n  /** reset the instruction set so it can be reused set size back to 0 */\n  reset() {\n    this.instructionSize = 0;\n  }\n  /**\n   * Add an instruction to the set\n   * @param instruction - add an instruction to the set\n   */\n  add(instruction) {\n    this.instructions[this.instructionSize++] = instruction;\n  }\n  /**\n   * Log the instructions to the console (for debugging)\n   * @internal\n   * @ignore\n   */\n  log() {\n    this.instructions.length = this.instructionSize;\n    console.table(this.instructions, [\"type\", \"action\"]);\n  }\n}\n\nexport { InstructionSet };\n//# sourceMappingURL=InstructionSet.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { GlProgram } from '../../gl/shader/GlProgram.mjs';\nimport { BindGroup } from '../../gpu/shader/BindGroup.mjs';\nimport { GpuProgram } from '../../gpu/shader/GpuProgram.mjs';\nimport { RendererType } from '../../types.mjs';\nimport { UniformGroup } from './UniformGroup.mjs';\n\n\"use strict\";\nclass Shader extends EventEmitter {\n  constructor(options) {\n    super();\n    /**\n     * A record of the uniform groups and resources used by the shader.\n     * This is used by WebGL renderer to sync uniform data.\n     * @internal\n     * @ignore\n     */\n    this._uniformBindMap = /* @__PURE__ */ Object.create(null);\n    this._ownedBindGroups = [];\n    let {\n      gpuProgram,\n      glProgram,\n      groups,\n      resources,\n      compatibleRenderers,\n      groupMap\n    } = options;\n    this.gpuProgram = gpuProgram;\n    this.glProgram = glProgram;\n    if (compatibleRenderers === void 0) {\n      compatibleRenderers = 0;\n      if (gpuProgram)\n        compatibleRenderers |= RendererType.WEBGPU;\n      if (glProgram)\n        compatibleRenderers |= RendererType.WEBGL;\n    }\n    this.compatibleRenderers = compatibleRenderers;\n    const nameHash = {};\n    if (!resources && !groups) {\n      resources = {};\n    }\n    if (resources && groups) {\n      throw new Error(\"[Shader] Cannot have both resources and groups\");\n    } else if (!gpuProgram && groups && !groupMap) {\n      throw new Error(\"[Shader] No group map or WebGPU shader provided - consider using resources instead.\");\n    } else if (!gpuProgram && groups && groupMap) {\n      for (const i in groupMap) {\n        for (const j in groupMap[i]) {\n          const uniformName = groupMap[i][j];\n          nameHash[uniformName] = {\n            group: i,\n            binding: j,\n            name: uniformName\n          };\n        }\n      }\n    } else if (gpuProgram && groups && !groupMap) {\n      const groupData = gpuProgram.structsAndGroups.groups;\n      groupMap = {};\n      groupData.forEach((data) => {\n        groupMap[data.group] = groupMap[data.group] || {};\n        groupMap[data.group][data.binding] = data.name;\n        nameHash[data.name] = data;\n      });\n    } else if (resources) {\n      groups = {};\n      groupMap = {};\n      if (gpuProgram) {\n        const groupData = gpuProgram.structsAndGroups.groups;\n        groupData.forEach((data) => {\n          groupMap[data.group] = groupMap[data.group] || {};\n          groupMap[data.group][data.binding] = data.name;\n          nameHash[data.name] = data;\n        });\n      }\n      let bindTick = 0;\n      for (const i in resources) {\n        if (nameHash[i])\n          continue;\n        if (!groups[99]) {\n          groups[99] = new BindGroup();\n          this._ownedBindGroups.push(groups[99]);\n        }\n        nameHash[i] = { group: 99, binding: bindTick, name: i };\n        groupMap[99] = groupMap[99] || {};\n        groupMap[99][bindTick] = i;\n        bindTick++;\n      }\n      for (const i in resources) {\n        const name = i;\n        let value = resources[i];\n        if (!value.source && !value._resourceType) {\n          value = new UniformGroup(value);\n        }\n        const data = nameHash[name];\n        if (data) {\n          if (!groups[data.group]) {\n            groups[data.group] = new BindGroup();\n            this._ownedBindGroups.push(groups[data.group]);\n          }\n          groups[data.group].setResource(value, data.binding);\n        }\n      }\n    }\n    this.groups = groups;\n    this._uniformBindMap = groupMap;\n    this.resources = this._buildResourceAccessor(groups, nameHash);\n  }\n  /**\n   * Sometimes a resource group will be provided later (for example global uniforms)\n   * In such cases, this method can be used to let the shader know about the group.\n   * @param name - the name of the resource group\n   * @param groupIndex - the index of the group (should match the webGPU shader group location)\n   * @param bindIndex - the index of the bind point (should match the webGPU shader bind point)\n   */\n  addResource(name, groupIndex, bindIndex) {\n    var _a, _b;\n    (_a = this._uniformBindMap)[groupIndex] || (_a[groupIndex] = {});\n    (_b = this._uniformBindMap[groupIndex])[bindIndex] || (_b[bindIndex] = name);\n    if (!this.groups[groupIndex]) {\n      this.groups[groupIndex] = new BindGroup();\n      this._ownedBindGroups.push(this.groups[groupIndex]);\n    }\n  }\n  _buildResourceAccessor(groups, nameHash) {\n    const uniformsOut = {};\n    for (const i in nameHash) {\n      const data = nameHash[i];\n      Object.defineProperty(uniformsOut, data.name, {\n        get() {\n          return groups[data.group].getResource(data.binding);\n        },\n        set(value) {\n          groups[data.group].setResource(value, data.binding);\n        }\n      });\n    }\n    return uniformsOut;\n  }\n  /**\n   * Use to destroy the shader when its not longer needed.\n   * It will destroy the resources and remove listeners.\n   * @param destroyPrograms - if the programs should be destroyed as well.\n   * Make sure its not being used by other shaders!\n   */\n  destroy(destroyPrograms = false) {\n    this.emit(\"destroy\", this);\n    if (destroyPrograms) {\n      this.gpuProgram?.destroy();\n      this.glProgram?.destroy();\n    }\n    this.gpuProgram = null;\n    this.glProgram = null;\n    this.removeAllListeners();\n    this._uniformBindMap = null;\n    this._ownedBindGroups.forEach((bindGroup) => {\n      bindGroup.destroy();\n    });\n    this._ownedBindGroups = null;\n    this.resources = null;\n    this.groups = null;\n  }\n  static from(options) {\n    const { gpu, gl, ...rest } = options;\n    let gpuProgram;\n    let glProgram;\n    if (gpu) {\n      gpuProgram = GpuProgram.from(gpu);\n    }\n    if (gl) {\n      glProgram = GlProgram.from(gl);\n    }\n    return new Shader({\n      gpuProgram,\n      glProgram,\n      ...rest\n    });\n  }\n}\n\nexport { Shader };\n//# sourceMappingURL=Shader.mjs.map\n","\"use strict\";\nconst UNIFORM_TYPES_VALUES = [\n  \"f32\",\n  \"i32\",\n  \"vec2<f32>\",\n  \"vec3<f32>\",\n  \"vec4<f32>\",\n  \"mat2x2<f32>\",\n  \"mat3x3<f32>\",\n  \"mat4x4<f32>\",\n  \"mat3x2<f32>\",\n  \"mat4x2<f32>\",\n  \"mat2x3<f32>\",\n  \"mat4x3<f32>\",\n  \"mat2x4<f32>\",\n  \"mat3x4<f32>\"\n];\nconst UNIFORM_TYPES_MAP = UNIFORM_TYPES_VALUES.reduce((acc, type) => {\n  acc[type] = true;\n  return acc;\n}, {});\n\nexport { UNIFORM_TYPES_MAP, UNIFORM_TYPES_VALUES };\n//# sourceMappingURL=types.mjs.map\n","\"use strict\";\nfunction getDefaultUniformValue(type, size) {\n  switch (type) {\n    case \"f32\":\n      return 0;\n    case \"vec2<f32>\":\n      return new Float32Array(2 * size);\n    case \"vec3<f32>\":\n      return new Float32Array(3 * size);\n    case \"vec4<f32>\":\n      return new Float32Array(4 * size);\n    case \"mat2x2<f32>\":\n      return new Float32Array([\n        1,\n        0,\n        0,\n        1\n      ]);\n    case \"mat3x3<f32>\":\n      return new Float32Array([\n        1,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        1\n      ]);\n    case \"mat4x4<f32>\":\n      return new Float32Array([\n        1,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n  }\n  return null;\n}\n\nexport { getDefaultUniformValue };\n//# sourceMappingURL=getDefaultUniformValue.mjs.map\n","import { uid } from '../../../../utils/data/uid.mjs';\nimport { createIdFromString } from '../utils/createIdFromString.mjs';\nimport { UNIFORM_TYPES_MAP, UNIFORM_TYPES_VALUES } from './types.mjs';\nimport { getDefaultUniformValue } from './utils/getDefaultUniformValue.mjs';\n\n\"use strict\";\nconst _UniformGroup = class _UniformGroup {\n  /**\n   * Create a new Uniform group\n   * @param uniformStructures - The structures of the uniform group\n   * @param options - The optional parameters of this uniform group\n   */\n  constructor(uniformStructures, options) {\n    /** used internally to know if a uniform group was used in the last render pass */\n    this._touched = 0;\n    /** a unique id for this uniform group used through the renderer */\n    this.uid = uid(\"uniform\");\n    /** a resource type, used to identify how to handle it when its in a bind group / shader resource */\n    this._resourceType = \"uniformGroup\";\n    /** the resource id used internally by the renderer to build bind group keys */\n    this._resourceId = uid(\"resource\");\n    /** used ito identify if this is a uniform group */\n    this.isUniformGroup = true;\n    /**\n     * used to flag if this Uniform groups data is different from what it has stored in its buffer / on the GPU\n     * @internal\n     * @ignore\n     */\n    this._dirtyId = 0;\n    // implementing the interface - UniformGroup are not destroyed\n    this.destroyed = false;\n    options = { ..._UniformGroup.defaultOptions, ...options };\n    this.uniformStructures = uniformStructures;\n    const uniforms = {};\n    for (const i in uniformStructures) {\n      const uniformData = uniformStructures[i];\n      uniformData.name = i;\n      uniformData.size = uniformData.size ?? 1;\n      if (!UNIFORM_TYPES_MAP[uniformData.type]) {\n        throw new Error(`Uniform type ${uniformData.type} is not supported. Supported uniform types are: ${UNIFORM_TYPES_VALUES.join(\", \")}`);\n      }\n      uniformData.value ?? (uniformData.value = getDefaultUniformValue(uniformData.type, uniformData.size));\n      uniforms[i] = uniformData.value;\n    }\n    this.uniforms = uniforms;\n    this._dirtyId = 1;\n    this.ubo = options.ubo;\n    this.isStatic = options.isStatic;\n    this._signature = createIdFromString(Object.keys(uniforms).map(\n      (i) => `${i}-${uniformStructures[i].type}`\n    ).join(\"-\"), \"uniform-group\");\n  }\n  /** Call this if you want the uniform groups data to be uploaded to the GPU only useful if `isStatic` is true. */\n  update() {\n    this._dirtyId++;\n  }\n};\n/** The default options used by the uniform group. */\n_UniformGroup.defaultOptions = {\n  /** if true the UniformGroup is handled as an Uniform buffer object. */\n  ubo: false,\n  /** if true, then you are responsible for when the data is uploaded to the GPU by calling `update()` */\n  isStatic: false\n};\nlet UniformGroup = _UniformGroup;\n\nexport { UniformGroup };\n//# sourceMappingURL=UniformGroup.mjs.map\n","\"use strict\";\nconst blendModeIds = {\n  normal: 0,\n  add: 1,\n  multiply: 2,\n  screen: 3,\n  overlay: 4,\n  erase: 5,\n  \"normal-npm\": 6,\n  \"add-npm\": 7,\n  \"screen-npm\": 8\n};\nconst BLEND = 0;\nconst OFFSET = 1;\nconst CULLING = 2;\nconst DEPTH_TEST = 3;\nconst WINDING = 4;\nconst DEPTH_MASK = 5;\nconst _State = class _State {\n  constructor() {\n    this.data = 0;\n    this.blendMode = \"normal\";\n    this.polygonOffset = 0;\n    this.blend = true;\n    this.depthMask = true;\n  }\n  /**\n   * Activates blending of the computed fragment color values.\n   * @default true\n   */\n  get blend() {\n    return !!(this.data & 1 << BLEND);\n  }\n  set blend(value) {\n    if (!!(this.data & 1 << BLEND) !== value) {\n      this.data ^= 1 << BLEND;\n    }\n  }\n  /**\n   * Activates adding an offset to depth values of polygon's fragments\n   * @default false\n   */\n  get offsets() {\n    return !!(this.data & 1 << OFFSET);\n  }\n  set offsets(value) {\n    if (!!(this.data & 1 << OFFSET) !== value) {\n      this.data ^= 1 << OFFSET;\n    }\n  }\n  /** The culling settings for this state none - No culling back - Back face culling front - Front face culling */\n  set cullMode(value) {\n    if (value === \"none\") {\n      this.culling = false;\n      return;\n    }\n    this.culling = true;\n    this.clockwiseFrontFace = value === \"front\";\n  }\n  get cullMode() {\n    if (!this.culling) {\n      return \"none\";\n    }\n    return this.clockwiseFrontFace ? \"front\" : \"back\";\n  }\n  /**\n   * Activates culling of polygons.\n   * @default false\n   */\n  get culling() {\n    return !!(this.data & 1 << CULLING);\n  }\n  set culling(value) {\n    if (!!(this.data & 1 << CULLING) !== value) {\n      this.data ^= 1 << CULLING;\n    }\n  }\n  /**\n   * Activates depth comparisons and updates to the depth buffer.\n   * @default false\n   */\n  get depthTest() {\n    return !!(this.data & 1 << DEPTH_TEST);\n  }\n  set depthTest(value) {\n    if (!!(this.data & 1 << DEPTH_TEST) !== value) {\n      this.data ^= 1 << DEPTH_TEST;\n    }\n  }\n  /**\n   * Enables or disables writing to the depth buffer.\n   * @default true\n   */\n  get depthMask() {\n    return !!(this.data & 1 << DEPTH_MASK);\n  }\n  set depthMask(value) {\n    if (!!(this.data & 1 << DEPTH_MASK) !== value) {\n      this.data ^= 1 << DEPTH_MASK;\n    }\n  }\n  /**\n   * Specifies whether or not front or back-facing polygons can be culled.\n   * @default false\n   */\n  get clockwiseFrontFace() {\n    return !!(this.data & 1 << WINDING);\n  }\n  set clockwiseFrontFace(value) {\n    if (!!(this.data & 1 << WINDING) !== value) {\n      this.data ^= 1 << WINDING;\n    }\n  }\n  /**\n   * The blend mode to be applied when this state is set. Apply a value of `normal` to reset the blend mode.\n   * Setting this mode to anything other than NO_BLEND will automatically switch blending on.\n   * @default 'normal'\n   */\n  get blendMode() {\n    return this._blendMode;\n  }\n  set blendMode(value) {\n    this.blend = value !== \"none\";\n    this._blendMode = value;\n    this._blendModeId = blendModeIds[value] || 0;\n  }\n  /**\n   * The polygon offset. Setting this property to anything other than 0 will automatically enable polygon offset fill.\n   * @default 0\n   */\n  get polygonOffset() {\n    return this._polygonOffset;\n  }\n  set polygonOffset(value) {\n    this.offsets = !!value;\n    this._polygonOffset = value;\n  }\n  toString() {\n    return `[pixi.js/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`;\n  }\n  /**\n   * A quickly getting an instance of a State that is configured for 2d rendering.\n   * @returns a new State with values set for 2d rendering\n   */\n  static for2d() {\n    const state = new _State();\n    state.depthTest = false;\n    state.blend = true;\n    return state;\n  }\n};\n_State.default2d = _State.for2d();\nlet State = _State;\n\nexport { State };\n//# sourceMappingURL=State.mjs.map\n","\"use strict\";\nconst BLEND_TO_NPM = {\n  normal: \"normal-npm\",\n  add: \"add-npm\",\n  screen: \"screen-npm\"\n};\nvar STENCIL_MODES = /* @__PURE__ */ ((STENCIL_MODES2) => {\n  STENCIL_MODES2[STENCIL_MODES2[\"DISABLED\"] = 0] = \"DISABLED\";\n  STENCIL_MODES2[STENCIL_MODES2[\"RENDERING_MASK_ADD\"] = 1] = \"RENDERING_MASK_ADD\";\n  STENCIL_MODES2[STENCIL_MODES2[\"MASK_ACTIVE\"] = 2] = \"MASK_ACTIVE\";\n  STENCIL_MODES2[STENCIL_MODES2[\"RENDERING_MASK_REMOVE\"] = 3] = \"RENDERING_MASK_REMOVE\";\n  STENCIL_MODES2[STENCIL_MODES2[\"NONE\"] = 4] = \"NONE\";\n  return STENCIL_MODES2;\n})(STENCIL_MODES || {});\n\nexport { BLEND_TO_NPM, STENCIL_MODES };\n//# sourceMappingURL=const.mjs.map\n","import { BLEND_TO_NPM } from './const.mjs';\n\n\"use strict\";\nfunction getAdjustedBlendModeBlend(blendMode, textureSource) {\n  if (textureSource.alphaMode === \"no-premultiply-alpha\") {\n    return BLEND_TO_NPM[blendMode] || blendMode;\n  }\n  return blendMode;\n}\n\nexport { getAdjustedBlendModeBlend };\n//# sourceMappingURL=getAdjustedBlendModeBlend.mjs.map\n","import { extensions, ExtensionType } from '../extensions/Extensions.mjs';\n\n\"use strict\";\nconst environments = [];\nextensions.handleByNamedList(ExtensionType.Environment, environments);\nasync function loadEnvironmentExtensions(skip) {\n  if (skip)\n    return;\n  for (let i = 0; i < environments.length; i++) {\n    const env = environments[i];\n    if (env.value.test()) {\n      await env.value.load();\n      return;\n    }\n  }\n}\nasync function autoDetectEnvironment(add) {\n  return loadEnvironmentExtensions(!add);\n}\n\nexport { autoDetectEnvironment, loadEnvironmentExtensions };\n//# sourceMappingURL=autoDetectEnvironment.mjs.map\n","import { Color } from '../../../../color/Color.mjs';\nimport { loadEnvironmentExtensions } from '../../../../environment/autoDetectEnvironment.mjs';\nimport { Container } from '../../../../scene/container/Container.mjs';\nimport { unsafeEvalSupported } from '../../../../utils/browser/unsafeEvalSupported.mjs';\nimport { deprecation, v8_0_0 } from '../../../../utils/logging/deprecation.mjs';\nimport '../../../../utils/utils.mjs';\nimport { CLEAR } from '../../gl/const.mjs';\nimport { SystemRunner } from './SystemRunner.mjs';\nimport EventEmitter from 'eventemitter3';\n\n\"use strict\";\nconst defaultRunners = [\n  \"init\",\n  \"destroy\",\n  \"contextChange\",\n  \"resolutionChange\",\n  \"reset\",\n  \"renderEnd\",\n  \"renderStart\",\n  \"render\",\n  \"update\",\n  \"postrender\",\n  \"prerender\"\n];\nconst _AbstractRenderer = class _AbstractRenderer extends EventEmitter {\n  /**\n   * Set up a system with a collection of SystemClasses and runners.\n   * Systems are attached dynamically to this class when added.\n   * @param config - the config for the system manager\n   */\n  constructor(config) {\n    super();\n    this.runners = /* @__PURE__ */ Object.create(null);\n    this.renderPipes = /* @__PURE__ */ Object.create(null);\n    this._initOptions = {};\n    this._systemsHash = /* @__PURE__ */ Object.create(null);\n    this.type = config.type;\n    this.name = config.name;\n    this.config = config;\n    const combinedRunners = [...defaultRunners, ...this.config.runners ?? []];\n    this._addRunners(...combinedRunners);\n    this._unsafeEvalCheck();\n  }\n  /**\n   * Initialize the renderer.\n   * @param options - The options to use to create the renderer.\n   */\n  async init(options = {}) {\n    const skip = options.skipExtensionImports === true ? true : options.manageImports === false;\n    await loadEnvironmentExtensions(skip);\n    this._addSystems(this.config.systems);\n    this._addPipes(this.config.renderPipes, this.config.renderPipeAdaptors);\n    for (const systemName in this._systemsHash) {\n      const system = this._systemsHash[systemName];\n      const defaultSystemOptions = system.constructor.defaultOptions;\n      options = { ...defaultSystemOptions, ...options };\n    }\n    options = { ..._AbstractRenderer.defaultOptions, ...options };\n    this._roundPixels = options.roundPixels ? 1 : 0;\n    for (let i = 0; i < this.runners.init.items.length; i++) {\n      await this.runners.init.items[i].init(options);\n    }\n    this._initOptions = options;\n  }\n  render(args, deprecated) {\n    let options = args;\n    if (options instanceof Container) {\n      options = { container: options };\n      if (deprecated) {\n        deprecation(v8_0_0, \"passing a second argument is deprecated, please use render options instead\");\n        options.target = deprecated.renderTexture;\n      }\n    }\n    options.target || (options.target = this.view.renderTarget);\n    if (options.target === this.view.renderTarget) {\n      this._lastObjectRendered = options.container;\n      options.clearColor = this.background.colorRgba;\n    }\n    if (options.clearColor) {\n      const isRGBAArray = Array.isArray(options.clearColor) && options.clearColor.length === 4;\n      options.clearColor = isRGBAArray ? options.clearColor : Color.shared.setValue(options.clearColor).toArray();\n    }\n    if (!options.transform) {\n      options.container.updateLocalTransform();\n      options.transform = options.container.localTransform;\n    }\n    this.runners.prerender.emit(options);\n    this.runners.renderStart.emit(options);\n    this.runners.render.emit(options);\n    this.runners.renderEnd.emit(options);\n    this.runners.postrender.emit(options);\n  }\n  /**\n   * Resizes the WebGL view to the specified width and height.\n   * @param desiredScreenWidth - The desired width of the screen.\n   * @param desiredScreenHeight - The desired height of the screen.\n   * @param resolution - The resolution / device pixel ratio of the renderer.\n   */\n  resize(desiredScreenWidth, desiredScreenHeight, resolution) {\n    this.view.resize(desiredScreenWidth, desiredScreenHeight, resolution);\n    this.emit(\"resize\", this.view.screen.width, this.view.screen.height);\n  }\n  clear(options = {}) {\n    const renderer = this;\n    options.target || (options.target = renderer.renderTarget.renderTarget);\n    options.clearColor || (options.clearColor = this.background.colorRgba);\n    options.clear ?? (options.clear = CLEAR.ALL);\n    const { clear, clearColor, target } = options;\n    Color.shared.setValue(clearColor ?? this.background.colorRgba);\n    renderer.renderTarget.clear(target, clear, Color.shared.toArray());\n  }\n  /** The resolution / device pixel ratio of the renderer. */\n  get resolution() {\n    return this.view.resolution;\n  }\n  set resolution(value) {\n    this.view.resolution = value;\n    this.runners.resolutionChange.emit(value);\n  }\n  /**\n   * Same as view.width, actual number of pixels in the canvas by horizontal.\n   * @member {number}\n   * @readonly\n   * @default 800\n   */\n  get width() {\n    return this.view.texture.frame.width;\n  }\n  /**\n   * Same as view.height, actual number of pixels in the canvas by vertical.\n   * @default 600\n   */\n  get height() {\n    return this.view.texture.frame.height;\n  }\n  // NOTE: this was `view` in v7\n  /**\n   * The canvas element that everything is drawn to.\n   * @type {environment.ICanvas}\n   */\n  get canvas() {\n    return this.view.canvas;\n  }\n  /**\n   * the last object rendered by the renderer. Useful for other plugins like interaction managers\n   * @readonly\n   */\n  get lastObjectRendered() {\n    return this._lastObjectRendered;\n  }\n  /**\n   * Flag if we are rendering to the screen vs renderTexture\n   * @readonly\n   * @default true\n   */\n  get renderingToScreen() {\n    const renderer = this;\n    return renderer.renderTarget.renderingToScreen;\n  }\n  /**\n   * Measurements of the screen. (0, 0, screenWidth, screenHeight).\n   *\n   * Its safe to use as filterArea or hitArea for the whole stage.\n   */\n  get screen() {\n    return this.view.screen;\n  }\n  /**\n   * Create a bunch of runners based of a collection of ids\n   * @param runnerIds - the runner ids to add\n   */\n  _addRunners(...runnerIds) {\n    runnerIds.forEach((runnerId) => {\n      this.runners[runnerId] = new SystemRunner(runnerId);\n    });\n  }\n  _addSystems(systems) {\n    let i;\n    for (i in systems) {\n      const val = systems[i];\n      this._addSystem(val.value, val.name);\n    }\n  }\n  /**\n   * Add a new system to the renderer.\n   * @param ClassRef - Class reference\n   * @param name - Property name for system, if not specified\n   *        will use a static `name` property on the class itself. This\n   *        name will be assigned as s property on the Renderer so make\n   *        sure it doesn't collide with properties on Renderer.\n   * @returns Return instance of renderer\n   */\n  _addSystem(ClassRef, name) {\n    const system = new ClassRef(this);\n    if (this[name]) {\n      throw new Error(`Whoops! The name \"${name}\" is already in use`);\n    }\n    this[name] = system;\n    this._systemsHash[name] = system;\n    for (const i in this.runners) {\n      this.runners[i].add(system);\n    }\n    return this;\n  }\n  _addPipes(pipes, pipeAdaptors) {\n    const adaptors = pipeAdaptors.reduce((acc, adaptor) => {\n      acc[adaptor.name] = adaptor.value;\n      return acc;\n    }, {});\n    pipes.forEach((pipe) => {\n      const PipeClass = pipe.value;\n      const name = pipe.name;\n      const Adaptor = adaptors[name];\n      this.renderPipes[name] = new PipeClass(\n        this,\n        Adaptor ? new Adaptor() : null\n      );\n    });\n  }\n  destroy(options = false) {\n    this.runners.destroy.items.reverse();\n    this.runners.destroy.emit(options);\n    Object.values(this.runners).forEach((runner) => {\n      runner.destroy();\n    });\n    this._systemsHash = null;\n    this.renderPipes = null;\n  }\n  /**\n   * Generate a texture from a container.\n   * @param options - options or container target to use when generating the texture\n   * @returns a texture\n   */\n  generateTexture(options) {\n    return this.textureGenerator.generateTexture(options);\n  }\n  /**\n   * Whether the renderer will round coordinates to whole pixels when rendering.\n   * Can be overridden on a per scene item basis.\n   */\n  get roundPixels() {\n    return !!this._roundPixels;\n  }\n  /**\n   * Overridable function by `pixi.js/unsafe-eval` to silence\n   * throwing an error if platform doesn't support unsafe-evals.\n   * @private\n   * @ignore\n   */\n  _unsafeEvalCheck() {\n    if (!unsafeEvalSupported()) {\n      throw new Error(\"Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.\");\n    }\n  }\n};\n/** The default options for the renderer. */\n_AbstractRenderer.defaultOptions = {\n  /**\n   * Default resolution / device pixel ratio of the renderer.\n   * @default 1\n   */\n  resolution: 1,\n  /**\n   * Should the `failIfMajorPerformanceCaveat` flag be enabled as a context option used in the `isWebGLSupported`\n   * function. If set to true, a WebGL renderer can fail to be created if the browser thinks there could be\n   * performance issues when using WebGL.\n   *\n   * In PixiJS v6 this has changed from true to false by default, to allow WebGL to work in as many\n   * scenarios as possible. However, some users may have a poor experience, for example, if a user has a gpu or\n   * driver version blacklisted by the\n   * browser.\n   *\n   * If your application requires high performance rendering, you may wish to set this to false.\n   * We recommend one of two options if you decide to set this flag to false:\n   *\n   * 1: Use the Canvas renderer as a fallback in case high performance WebGL is\n   *    not supported.\n   *\n   * 2: Call `isWebGLSupported` (which if found in the utils package) in your code before attempting to create a\n   *    PixiJS renderer, and show an error message to the user if the function returns false, explaining that their\n   *    device & browser combination does not support high performance WebGL.\n   *    This is a much better strategy than trying to create a PixiJS renderer and finding it then fails.\n   * @default false\n   */\n  failIfMajorPerformanceCaveat: false,\n  /**\n   * Should round pixels be forced when rendering?\n   * @default false\n   */\n  roundPixels: false\n};\nlet AbstractRenderer = _AbstractRenderer;\n\nexport { AbstractRenderer };\n//# sourceMappingURL=AbstractRenderer.mjs.map\n","\"use strict\";\nclass SystemRunner {\n  /**\n   * @param name - The function name that will be executed on the listeners added to this Runner.\n   */\n  constructor(name) {\n    this.items = [];\n    this._name = name;\n  }\n  /* eslint-disable jsdoc/require-param, jsdoc/check-param-names */\n  /**\n   * Dispatch/Broadcast Runner to all listeners added to the queue.\n   * @param {...any} params - (optional) parameters to pass to each listener\n   */\n  /*  eslint-enable jsdoc/require-param, jsdoc/check-param-names */\n  emit(a0, a1, a2, a3, a4, a5, a6, a7) {\n    const { name, items } = this;\n    for (let i = 0, len = items.length; i < len; i++) {\n      items[i][name](a0, a1, a2, a3, a4, a5, a6, a7);\n    }\n    return this;\n  }\n  /**\n   * Add a listener to the Runner\n   *\n   * Runners do not need to have scope or functions passed to them.\n   * All that is required is to pass the listening object and ensure that it has contains a function that has the same name\n   * as the name provided to the Runner when it was created.\n   *\n   * Eg A listener passed to this Runner will require a 'complete' function.\n   *\n   * ```\n   * import { Runner } from 'pixi.js';\n   *\n   * const complete = new Runner('complete');\n   * ```\n   *\n   * The scope used will be the object itself.\n   * @param {any} item - The object that will be listening.\n   */\n  add(item) {\n    if (item[this._name]) {\n      this.remove(item);\n      this.items.push(item);\n    }\n    return this;\n  }\n  /**\n   * Remove a single listener from the dispatch queue.\n   * @param {any} item - The listener that you would like to remove.\n   */\n  remove(item) {\n    const index = this.items.indexOf(item);\n    if (index !== -1) {\n      this.items.splice(index, 1);\n    }\n    return this;\n  }\n  /**\n   * Check to see if the listener is already in the Runner\n   * @param {any} item - The listener that you would like to check.\n   */\n  contains(item) {\n    return this.items.indexOf(item) !== -1;\n  }\n  /** Remove all listeners from the Runner */\n  removeAll() {\n    this.items.length = 0;\n    return this;\n  }\n  /** Remove all references, don't use after this. */\n  destroy() {\n    this.removeAll();\n    this.items = null;\n    this._name = null;\n  }\n  /**\n   * `true` if there are no this Runner contains no listeners\n   * @readonly\n   */\n  get empty() {\n    return this.items.length === 0;\n  }\n  /**\n   * The name of the runner.\n   * @readonly\n   */\n  get name() {\n    return this._name;\n  }\n}\n\nexport { SystemRunner };\n//# sourceMappingURL=SystemRunner.mjs.map\n","import { DOMAdapter } from '../../../../environment/adapter.mjs';\nimport { nextPow2 } from '../../../../maths/misc/pow2.mjs';\n\n\"use strict\";\nclass CanvasPoolClass {\n  constructor(canvasOptions) {\n    this._canvasPool = /* @__PURE__ */ Object.create(null);\n    this.canvasOptions = canvasOptions || {};\n    this.enableFullScreen = false;\n  }\n  /**\n   * Creates texture with params that were specified in pool constructor.\n   * @param pixelWidth - Width of texture in pixels.\n   * @param pixelHeight - Height of texture in pixels.\n   */\n  _createCanvasAndContext(pixelWidth, pixelHeight) {\n    const canvas = DOMAdapter.get().createCanvas();\n    canvas.width = pixelWidth;\n    canvas.height = pixelHeight;\n    const context = canvas.getContext(\"2d\");\n    return { canvas, context };\n  }\n  /**\n   * Gets a Power-of-Two render texture or fullScreen texture\n   * @param minWidth - The minimum width of the render texture.\n   * @param minHeight - The minimum height of the render texture.\n   * @param resolution - The resolution of the render texture.\n   * @returns The new render texture.\n   */\n  getOptimalCanvasAndContext(minWidth, minHeight, resolution = 1) {\n    minWidth = Math.ceil(minWidth * resolution - 1e-6);\n    minHeight = Math.ceil(minHeight * resolution - 1e-6);\n    minWidth = nextPow2(minWidth);\n    minHeight = nextPow2(minHeight);\n    const key = (minWidth << 17) + (minHeight << 1);\n    if (!this._canvasPool[key]) {\n      this._canvasPool[key] = [];\n    }\n    let canvasAndContext = this._canvasPool[key].pop();\n    if (!canvasAndContext) {\n      canvasAndContext = this._createCanvasAndContext(minWidth, minHeight);\n    }\n    return canvasAndContext;\n  }\n  /**\n   * Place a render texture back into the pool.\n   * @param canvasAndContext\n   */\n  returnCanvasAndContext(canvasAndContext) {\n    const canvas = canvasAndContext.canvas;\n    const { width, height } = canvas;\n    const key = (width << 17) + (height << 1);\n    this._canvasPool[key].push(canvasAndContext);\n  }\n  clear() {\n    this._canvasPool = {};\n  }\n}\nconst CanvasPool = new CanvasPoolClass();\n\nexport { CanvasPool, CanvasPoolClass };\n//# sourceMappingURL=CanvasPool.mjs.map\n","import { Matrix } from './Matrix.mjs';\n\n\"use strict\";\nconst ux = [1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1, 0, 1];\nconst uy = [0, 1, 1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1];\nconst vx = [0, -1, -1, -1, 0, 1, 1, 1, 0, 1, 1, 1, 0, -1, -1, -1];\nconst vy = [1, 1, 0, -1, -1, -1, 0, 1, -1, -1, 0, 1, 1, 1, 0, -1];\nconst rotationCayley = [];\nconst rotationMatrices = [];\nconst signum = Math.sign;\nfunction init() {\n  for (let i = 0; i < 16; i++) {\n    const row = [];\n    rotationCayley.push(row);\n    for (let j = 0; j < 16; j++) {\n      const _ux = signum(ux[i] * ux[j] + vx[i] * uy[j]);\n      const _uy = signum(uy[i] * ux[j] + vy[i] * uy[j]);\n      const _vx = signum(ux[i] * vx[j] + vx[i] * vy[j]);\n      const _vy = signum(uy[i] * vx[j] + vy[i] * vy[j]);\n      for (let k = 0; k < 16; k++) {\n        if (ux[k] === _ux && uy[k] === _uy && vx[k] === _vx && vy[k] === _vy) {\n          row.push(k);\n          break;\n        }\n      }\n    }\n  }\n  for (let i = 0; i < 16; i++) {\n    const mat = new Matrix();\n    mat.set(ux[i], uy[i], vx[i], vy[i], 0, 0);\n    rotationMatrices.push(mat);\n  }\n}\ninit();\nconst groupD8 = {\n  /**\n   * | Rotation | Direction |\n   * |----------|-----------|\n   * | 0°       | East      |\n   * @memberof maths.groupD8\n   * @constant {GD8Symmetry}\n   */\n  E: 0,\n  /**\n   * | Rotation | Direction |\n   * |----------|-----------|\n   * | 45°↻     | Southeast |\n   * @memberof maths.groupD8\n   * @constant {GD8Symmetry}\n   */\n  SE: 1,\n  /**\n   * | Rotation | Direction |\n   * |----------|-----------|\n   * | 90°↻     | South     |\n   * @memberof maths.groupD8\n   * @constant {GD8Symmetry}\n   */\n  S: 2,\n  /**\n   * | Rotation | Direction |\n   * |----------|-----------|\n   * | 135°↻    | Southwest |\n   * @memberof maths.groupD8\n   * @constant {GD8Symmetry}\n   */\n  SW: 3,\n  /**\n   * | Rotation | Direction |\n   * |----------|-----------|\n   * | 180°     | West      |\n   * @memberof maths.groupD8\n   * @constant {GD8Symmetry}\n   */\n  W: 4,\n  /**\n   * | Rotation    | Direction    |\n   * |-------------|--------------|\n   * | -135°/225°↻ | Northwest    |\n   * @memberof maths.groupD8\n   * @constant {GD8Symmetry}\n   */\n  NW: 5,\n  /**\n   * | Rotation    | Direction    |\n   * |-------------|--------------|\n   * | -90°/270°↻  | North        |\n   * @memberof maths.groupD8\n   * @constant {GD8Symmetry}\n   */\n  N: 6,\n  /**\n   * | Rotation    | Direction    |\n   * |-------------|--------------|\n   * | -45°/315°↻  | Northeast    |\n   * @memberof maths.groupD8\n   * @constant {GD8Symmetry}\n   */\n  NE: 7,\n  /**\n   * Reflection about Y-axis.\n   * @memberof maths.groupD8\n   * @constant {GD8Symmetry}\n   */\n  MIRROR_VERTICAL: 8,\n  /**\n   * Reflection about the main diagonal.\n   * @memberof maths.groupD8\n   * @constant {GD8Symmetry}\n   */\n  MAIN_DIAGONAL: 10,\n  /**\n   * Reflection about X-axis.\n   * @memberof maths.groupD8\n   * @constant {GD8Symmetry}\n   */\n  MIRROR_HORIZONTAL: 12,\n  /**\n   * Reflection about reverse diagonal.\n   * @memberof maths.groupD8\n   * @constant {GD8Symmetry}\n   */\n  REVERSE_DIAGONAL: 14,\n  /**\n   * @memberof maths.groupD8\n   * @param {GD8Symmetry} ind - sprite rotation angle.\n   * @returns {GD8Symmetry} The X-component of the U-axis\n   *    after rotating the axes.\n   */\n  uX: (ind) => ux[ind],\n  /**\n   * @memberof maths.groupD8\n   * @param {GD8Symmetry} ind - sprite rotation angle.\n   * @returns {GD8Symmetry} The Y-component of the U-axis\n   *    after rotating the axes.\n   */\n  uY: (ind) => uy[ind],\n  /**\n   * @memberof maths.groupD8\n   * @param {GD8Symmetry} ind - sprite rotation angle.\n   * @returns {GD8Symmetry} The X-component of the V-axis\n   *    after rotating the axes.\n   */\n  vX: (ind) => vx[ind],\n  /**\n   * @memberof maths.groupD8\n   * @param {GD8Symmetry} ind - sprite rotation angle.\n   * @returns {GD8Symmetry} The Y-component of the V-axis\n   *    after rotating the axes.\n   */\n  vY: (ind) => vy[ind],\n  /**\n   * @memberof maths.groupD8\n   * @param {GD8Symmetry} rotation - symmetry whose opposite\n   *   is needed. Only rotations have opposite symmetries while\n   *   reflections don't.\n   * @returns {GD8Symmetry} The opposite symmetry of `rotation`\n   */\n  inv: (rotation) => {\n    if (rotation & 8) {\n      return rotation & 15;\n    }\n    return -rotation & 7;\n  },\n  /**\n   * Composes the two D8 operations.\n   *\n   * Taking `^` as reflection:\n   *\n   * |       | E=0 | S=2 | W=4 | N=6 | E^=8 | S^=10 | W^=12 | N^=14 |\n   * |-------|-----|-----|-----|-----|------|-------|-------|-------|\n   * | E=0   | E   | S   | W   | N   | E^   | S^    | W^    | N^    |\n   * | S=2   | S   | W   | N   | E   | S^   | W^    | N^    | E^    |\n   * | W=4   | W   | N   | E   | S   | W^   | N^    | E^    | S^    |\n   * | N=6   | N   | E   | S   | W   | N^   | E^    | S^    | W^    |\n   * | E^=8  | E^  | N^  | W^  | S^  | E    | N     | W     | S     |\n   * | S^=10 | S^  | E^  | N^  | W^  | S    | E     | N     | W     |\n   * | W^=12 | W^  | S^  | E^  | N^  | W    | S     | E     | N     |\n   * | N^=14 | N^  | W^  | S^  | E^  | N    | W     | S     | E     |\n   *\n   * [This is a Cayley table]{@link https://en.wikipedia.org/wiki/Cayley_table}\n   * @memberof maths.groupD8\n   * @param {GD8Symmetry} rotationSecond - Second operation, which\n   *   is the row in the above cayley table.\n   * @param {GD8Symmetry} rotationFirst - First operation, which\n   *   is the column in the above cayley table.\n   * @returns {GD8Symmetry} Composed operation\n   */\n  add: (rotationSecond, rotationFirst) => rotationCayley[rotationSecond][rotationFirst],\n  /**\n   * Reverse of `add`.\n   * @memberof maths.groupD8\n   * @param {GD8Symmetry} rotationSecond - Second operation\n   * @param {GD8Symmetry} rotationFirst - First operation\n   * @returns {GD8Symmetry} Result\n   */\n  sub: (rotationSecond, rotationFirst) => rotationCayley[rotationSecond][groupD8.inv(rotationFirst)],\n  /**\n   * Adds 180 degrees to rotation, which is a commutative\n   * operation.\n   * @memberof maths.groupD8\n   * @param {number} rotation - The number to rotate.\n   * @returns {number} Rotated number\n   */\n  rotate180: (rotation) => rotation ^ 4,\n  /**\n   * Checks if the rotation angle is vertical, i.e. south\n   * or north. It doesn't work for reflections.\n   * @memberof maths.groupD8\n   * @param {GD8Symmetry} rotation - The number to check.\n   * @returns {boolean} Whether or not the direction is vertical\n   */\n  isVertical: (rotation) => (rotation & 3) === 2,\n  // rotation % 4 === 2\n  /**\n   * Approximates the vector `V(dx,dy)` into one of the\n   * eight directions provided by `groupD8`.\n   * @memberof maths.groupD8\n   * @param {number} dx - X-component of the vector\n   * @param {number} dy - Y-component of the vector\n   * @returns {GD8Symmetry} Approximation of the vector into\n   *  one of the eight symmetries.\n   */\n  byDirection: (dx, dy) => {\n    if (Math.abs(dx) * 2 <= Math.abs(dy)) {\n      if (dy >= 0) {\n        return groupD8.S;\n      }\n      return groupD8.N;\n    } else if (Math.abs(dy) * 2 <= Math.abs(dx)) {\n      if (dx > 0) {\n        return groupD8.E;\n      }\n      return groupD8.W;\n    } else if (dy > 0) {\n      if (dx > 0) {\n        return groupD8.SE;\n      }\n      return groupD8.SW;\n    } else if (dx > 0) {\n      return groupD8.NE;\n    }\n    return groupD8.NW;\n  },\n  /**\n   * Helps sprite to compensate texture packer rotation.\n   * @memberof maths.groupD8\n   * @param {Matrix} matrix - sprite world matrix\n   * @param {GD8Symmetry} rotation - The rotation factor to use.\n   * @param {number} tx - sprite anchoring\n   * @param {number} ty - sprite anchoring\n   */\n  matrixAppendRotationInv: (matrix, rotation, tx = 0, ty = 0) => {\n    const mat = rotationMatrices[groupD8.inv(rotation)];\n    mat.tx = tx;\n    mat.ty = ty;\n    matrix.append(mat);\n  }\n};\n\nexport { groupD8 };\n//# sourceMappingURL=groupD8.mjs.map\n","\"use strict\";\nconst NOOP = () => {\n};\n\nexport { NOOP };\n//# sourceMappingURL=NOOP.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { groupD8 } from '../../../../maths/matrix/groupD8.mjs';\nimport { Rectangle } from '../../../../maths/shapes/Rectangle.mjs';\nimport { uid } from '../../../../utils/data/uid.mjs';\nimport { deprecation, v8_0_0 } from '../../../../utils/logging/deprecation.mjs';\nimport { NOOP } from '../../../../utils/misc/NOOP.mjs';\nimport { BufferImageSource } from './sources/BufferImageSource.mjs';\nimport { TextureSource } from './sources/TextureSource.mjs';\nimport { TextureMatrix } from './TextureMatrix.mjs';\n\n\"use strict\";\nclass Texture extends EventEmitter {\n  /**\n   * @param {TextureOptions} param0 - Options for the texture\n   */\n  constructor({\n    source,\n    label,\n    frame,\n    orig,\n    trim,\n    defaultAnchor,\n    defaultBorders,\n    rotate,\n    dynamic\n  } = {}) {\n    super();\n    /** unique id for this texture */\n    this.uid = uid(\"texture\");\n    /** A uvs object based on the given frame and the texture source */\n    this.uvs = { x0: 0, y0: 0, x1: 0, y1: 0, x2: 0, y2: 0, x3: 0, y3: 0 };\n    /**\n     * This is the area of the BaseTexture image to actually copy to the Canvas / WebGL when rendering,\n     * irrespective of the actual frame size or placement (which can be influenced by trimmed texture atlases)\n     */\n    this.frame = new Rectangle();\n    /**\n     * Does this Texture have any frame data assigned to it?\n     *\n     * This mode is enabled automatically if no frame was passed inside constructor.\n     *\n     * In this mode texture is subscribed to baseTexture events, and fires `update` on any change.\n     *\n     * Beware, after loading or resize of baseTexture event can fired two times!\n     * If you want more control, subscribe on baseTexture itself.\n     * @example\n     * texture.on('update', () => {});\n     */\n    this.noFrame = false;\n    /**\n     * Set to true if you plan on modifying the uvs of this texture.\n     * When this is the case, sprites and other objects using the texture will\n     * make sure to listen for changes to the uvs and update their vertices accordingly.\n     */\n    this.dynamic = false;\n    /** is it a texture? yes! used for type checking */\n    this.isTexture = true;\n    this.label = label;\n    this.source = source?.source ?? new TextureSource();\n    this.noFrame = !frame;\n    if (frame) {\n      this.frame.copyFrom(frame);\n    } else {\n      const { width, height } = this._source;\n      this.frame.width = width;\n      this.frame.height = height;\n    }\n    this.orig = orig || this.frame;\n    this.trim = trim;\n    this.rotate = rotate ?? 0;\n    this.defaultAnchor = defaultAnchor;\n    this.defaultBorders = defaultBorders;\n    this.destroyed = false;\n    this.dynamic = dynamic || false;\n    this.updateUvs();\n  }\n  set source(value) {\n    if (this._source) {\n      this._source.off(\"resize\", this.update, this);\n    }\n    this._source = value;\n    value.on(\"resize\", this.update, this);\n    this.emit(\"update\", this);\n  }\n  /** the underlying source of the texture (equivalent of baseTexture in v7) */\n  get source() {\n    return this._source;\n  }\n  /** returns a TextureMatrix instance for this texture. By default, that object is not created because its heavy. */\n  get textureMatrix() {\n    if (!this._textureMatrix) {\n      this._textureMatrix = new TextureMatrix(this);\n    }\n    return this._textureMatrix;\n  }\n  /** The width of the Texture in pixels. */\n  get width() {\n    return this.orig.width;\n  }\n  /** The height of the Texture in pixels. */\n  get height() {\n    return this.orig.height;\n  }\n  /** Call this function when you have modified the frame of this texture. */\n  updateUvs() {\n    const { uvs, frame } = this;\n    const { width, height } = this._source;\n    const nX = frame.x / width;\n    const nY = frame.y / height;\n    const nW = frame.width / width;\n    const nH = frame.height / height;\n    let rotate = this.rotate;\n    if (rotate) {\n      const w2 = nW / 2;\n      const h2 = nH / 2;\n      const cX = nX + w2;\n      const cY = nY + h2;\n      rotate = groupD8.add(rotate, groupD8.NW);\n      uvs.x0 = cX + w2 * groupD8.uX(rotate);\n      uvs.y0 = cY + h2 * groupD8.uY(rotate);\n      rotate = groupD8.add(rotate, 2);\n      uvs.x1 = cX + w2 * groupD8.uX(rotate);\n      uvs.y1 = cY + h2 * groupD8.uY(rotate);\n      rotate = groupD8.add(rotate, 2);\n      uvs.x2 = cX + w2 * groupD8.uX(rotate);\n      uvs.y2 = cY + h2 * groupD8.uY(rotate);\n      rotate = groupD8.add(rotate, 2);\n      uvs.x3 = cX + w2 * groupD8.uX(rotate);\n      uvs.y3 = cY + h2 * groupD8.uY(rotate);\n    } else {\n      uvs.x0 = nX;\n      uvs.y0 = nY;\n      uvs.x1 = nX + nW;\n      uvs.y1 = nY;\n      uvs.x2 = nX + nW;\n      uvs.y2 = nY + nH;\n      uvs.x3 = nX;\n      uvs.y3 = nY + nH;\n    }\n  }\n  /**\n   * Destroys this texture\n   * @param destroySource - Destroy the source when the texture is destroyed.\n   */\n  destroy(destroySource = false) {\n    if (this._source) {\n      if (destroySource) {\n        this._source.destroy();\n        this._source = null;\n      }\n    }\n    this._textureMatrix = null;\n    this.destroyed = true;\n    this.emit(\"destroy\", this);\n    this.removeAllListeners();\n  }\n  /** call this if you have modified the `texture outside` of the constructor */\n  update() {\n    if (this.noFrame) {\n      this.frame.width = this._source.width;\n      this.frame.height = this._source.height;\n    }\n    this.updateUvs();\n    this.emit(\"update\", this);\n  }\n  /** @deprecated since 8.0.0 */\n  get baseTexture() {\n    deprecation(v8_0_0, \"Texture.baseTexture is now Texture.source\");\n    return this._source;\n  }\n}\nTexture.EMPTY = new Texture({\n  label: \"EMPTY\",\n  source: new TextureSource({\n    label: \"EMPTY\"\n  })\n});\nTexture.EMPTY.destroy = NOOP;\nTexture.WHITE = new Texture({\n  source: new BufferImageSource({\n    resource: new Uint8Array([255, 255, 255, 255]),\n    width: 1,\n    height: 1,\n    alphaMode: \"premultiply-alpha-on-upload\",\n    label: \"WHITE\"\n  }),\n  label: \"WHITE\"\n});\nTexture.WHITE.destroy = NOOP;\n\nexport { Texture };\n//# sourceMappingURL=Texture.mjs.map\n","import { Matrix } from '../../../../maths/matrix/Matrix.mjs';\n\n\"use strict\";\nconst tempMat = new Matrix();\nclass TextureMatrix {\n  /**\n   * @param texture - observed texture\n   * @param clampMargin - Changes frame clamping, 0.5 by default. Use -0.5 for extra border.\n   */\n  constructor(texture, clampMargin) {\n    this.mapCoord = new Matrix();\n    this.uClampFrame = new Float32Array(4);\n    this.uClampOffset = new Float32Array(2);\n    this._textureID = -1;\n    this._updateID = 0;\n    this.clampOffset = 0;\n    if (typeof clampMargin === \"undefined\") {\n      this.clampMargin = texture.width < 10 ? 0 : 0.5;\n    } else {\n      this.clampMargin = clampMargin;\n    }\n    this.isSimple = false;\n    this.texture = texture;\n  }\n  /** Texture property. */\n  get texture() {\n    return this._texture;\n  }\n  set texture(value) {\n    if (this.texture === value)\n      return;\n    this._texture?.removeListener(\"update\", this.update, this);\n    this._texture = value;\n    this._texture.addListener(\"update\", this.update, this);\n    this.update();\n  }\n  /**\n   * Multiplies uvs array to transform\n   * @param uvs - mesh uvs\n   * @param [out=uvs] - output\n   * @returns - output\n   */\n  multiplyUvs(uvs, out) {\n    if (out === void 0) {\n      out = uvs;\n    }\n    const mat = this.mapCoord;\n    for (let i = 0; i < uvs.length; i += 2) {\n      const x = uvs[i];\n      const y = uvs[i + 1];\n      out[i] = x * mat.a + y * mat.c + mat.tx;\n      out[i + 1] = x * mat.b + y * mat.d + mat.ty;\n    }\n    return out;\n  }\n  /**\n   * Updates matrices if texture was changed\n   * @returns - whether or not it was updated\n   */\n  update() {\n    const tex = this._texture;\n    this._updateID++;\n    const uvs = tex.uvs;\n    this.mapCoord.set(uvs.x1 - uvs.x0, uvs.y1 - uvs.y0, uvs.x3 - uvs.x0, uvs.y3 - uvs.y0, uvs.x0, uvs.y0);\n    const orig = tex.orig;\n    const trim = tex.trim;\n    if (trim) {\n      tempMat.set(\n        orig.width / trim.width,\n        0,\n        0,\n        orig.height / trim.height,\n        -trim.x / trim.width,\n        -trim.y / trim.height\n      );\n      this.mapCoord.append(tempMat);\n    }\n    const texBase = tex.source;\n    const frame = this.uClampFrame;\n    const margin = this.clampMargin / texBase._resolution;\n    const offset = this.clampOffset;\n    frame[0] = (tex.frame.x + margin + offset) / texBase.width;\n    frame[1] = (tex.frame.y + margin + offset) / texBase.height;\n    frame[2] = (tex.frame.x + tex.frame.width - margin + offset) / texBase.width;\n    frame[3] = (tex.frame.y + tex.frame.height - margin + offset) / texBase.height;\n    this.uClampOffset[0] = offset / texBase.pixelWidth;\n    this.uClampOffset[1] = offset / texBase.pixelHeight;\n    this.isSimple = tex.frame.width === texBase.width && tex.frame.height === texBase.height && tex.rotate === 0;\n    return true;\n  }\n}\n\nexport { TextureMatrix };\n//# sourceMappingURL=TextureMatrix.mjs.map\n","import { nextPow2 } from '../../../../maths/misc/pow2.mjs';\nimport { TextureSource } from './sources/TextureSource.mjs';\nimport { Texture } from './Texture.mjs';\n\n\"use strict\";\nlet count = 0;\nclass TexturePoolClass {\n  /**\n   * @param textureOptions - options that will be passed to BaseRenderTexture constructor\n   * @param {SCALE_MODE} [textureOptions.scaleMode] - See {@link SCALE_MODE} for possible values.\n   */\n  constructor(textureOptions) {\n    this._poolKeyHash = /* @__PURE__ */ Object.create(null);\n    this._texturePool = {};\n    this.textureOptions = textureOptions || {};\n    this.enableFullScreen = false;\n  }\n  /**\n   * Creates texture with params that were specified in pool constructor.\n   * @param pixelWidth - Width of texture in pixels.\n   * @param pixelHeight - Height of texture in pixels.\n   * @param antialias\n   */\n  createTexture(pixelWidth, pixelHeight, antialias) {\n    const textureSource = new TextureSource({\n      ...this.textureOptions,\n      width: pixelWidth,\n      height: pixelHeight,\n      resolution: 1,\n      antialias,\n      autoGarbageCollect: true\n    });\n    return new Texture({\n      source: textureSource,\n      label: `texturePool_${count++}`\n    });\n  }\n  /**\n   * Gets a Power-of-Two render texture or fullScreen texture\n   * @param frameWidth - The minimum width of the render texture.\n   * @param frameHeight - The minimum height of the render texture.\n   * @param resolution - The resolution of the render texture.\n   * @param antialias\n   * @returns The new render texture.\n   */\n  getOptimalTexture(frameWidth, frameHeight, resolution = 1, antialias) {\n    let po2Width = Math.ceil(frameWidth * resolution - 1e-6);\n    let po2Height = Math.ceil(frameHeight * resolution - 1e-6);\n    po2Width = nextPow2(po2Width);\n    po2Height = nextPow2(po2Height);\n    const key = (po2Width << 17) + (po2Height << 1) + (antialias ? 1 : 0);\n    if (!this._texturePool[key]) {\n      this._texturePool[key] = [];\n    }\n    let texture = this._texturePool[key].pop();\n    if (!texture) {\n      texture = this.createTexture(po2Width, po2Height, antialias);\n    }\n    texture.source._resolution = resolution;\n    texture.source.width = po2Width / resolution;\n    texture.source.height = po2Height / resolution;\n    texture.source.pixelWidth = po2Width;\n    texture.source.pixelHeight = po2Height;\n    texture.frame.x = 0;\n    texture.frame.y = 0;\n    texture.frame.width = frameWidth;\n    texture.frame.height = frameHeight;\n    texture.updateUvs();\n    this._poolKeyHash[texture.uid] = key;\n    return texture;\n  }\n  /**\n   * Gets extra texture of the same size as input renderTexture\n   * @param texture - The texture to check what size it is.\n   * @param antialias - Whether to use antialias.\n   * @returns A texture that is a power of two\n   */\n  getSameSizeTexture(texture, antialias = false) {\n    const source = texture.source;\n    return this.getOptimalTexture(texture.width, texture.height, source._resolution, antialias);\n  }\n  /**\n   * Place a render texture back into the pool.\n   * @param renderTexture - The renderTexture to free\n   */\n  returnTexture(renderTexture) {\n    const key = this._poolKeyHash[renderTexture.uid];\n    this._texturePool[key].push(renderTexture);\n  }\n  /**\n   * Clears the pool.\n   * @param destroyTextures - Destroy all stored textures.\n   */\n  clear(destroyTextures) {\n    destroyTextures = destroyTextures !== false;\n    if (destroyTextures) {\n      for (const i in this._texturePool) {\n        const textures = this._texturePool[i];\n        if (textures) {\n          for (let j = 0; j < textures.length; j++) {\n            textures[j].destroy(true);\n          }\n        }\n      }\n    }\n    this._texturePool = {};\n  }\n}\nconst TexturePool = new TexturePoolClass();\n\nexport { TexturePool, TexturePoolClass };\n//# sourceMappingURL=TexturePool.mjs.map\n","import { ExtensionType } from '../../../../../extensions/Extensions.mjs';\nimport { TextureSource } from './TextureSource.mjs';\n\n\"use strict\";\nclass BufferImageSource extends TextureSource {\n  constructor(options) {\n    const buffer = options.resource || new Float32Array(options.width * options.height * 4);\n    let format = options.format;\n    if (!format) {\n      if (buffer instanceof Float32Array) {\n        format = \"rgba32float\";\n      } else if (buffer instanceof Int32Array) {\n        format = \"rgba32uint\";\n      } else if (buffer instanceof Uint32Array) {\n        format = \"rgba32uint\";\n      } else if (buffer instanceof Int16Array) {\n        format = \"rgba16uint\";\n      } else if (buffer instanceof Uint16Array) {\n        format = \"rgba16uint\";\n      } else if (buffer instanceof Int8Array) {\n        format = \"bgra8unorm\";\n      } else {\n        format = \"bgra8unorm\";\n      }\n    }\n    super({\n      ...options,\n      resource: buffer,\n      format\n    });\n    this.uploadMethodId = \"buffer\";\n  }\n  static test(resource) {\n    return resource instanceof Int8Array || resource instanceof Uint8Array || resource instanceof Uint8ClampedArray || resource instanceof Int16Array || resource instanceof Uint16Array || resource instanceof Int32Array || resource instanceof Uint32Array || resource instanceof Float32Array;\n  }\n}\nBufferImageSource.extension = ExtensionType.TextureSource;\n\nexport { BufferImageSource };\n//# sourceMappingURL=BufferImageSource.mjs.map\n","import { DOMAdapter } from '../../../../../environment/adapter.mjs';\nimport { ExtensionType } from '../../../../../extensions/Extensions.mjs';\nimport { TextureSource } from './TextureSource.mjs';\n\n\"use strict\";\nclass CanvasSource extends TextureSource {\n  constructor(options) {\n    if (!options.resource) {\n      options.resource = DOMAdapter.get().createCanvas();\n    }\n    if (!options.width) {\n      options.width = options.resource.width;\n      if (!options.autoDensity) {\n        options.width /= options.resolution;\n      }\n    }\n    if (!options.height) {\n      options.height = options.resource.height;\n      if (!options.autoDensity) {\n        options.height /= options.resolution;\n      }\n    }\n    super(options);\n    this.uploadMethodId = \"image\";\n    this.autoDensity = options.autoDensity;\n    const canvas = options.resource;\n    if (this.pixelWidth !== canvas.width || this.pixelWidth !== canvas.height) {\n      this.resizeCanvas();\n    }\n    this.transparent = !!options.transparent;\n  }\n  resizeCanvas() {\n    if (this.autoDensity) {\n      this.resource.style.width = `${this.width}px`;\n      this.resource.style.height = `${this.height}px`;\n    }\n    if (this.resource.width !== this.pixelWidth || this.resource.height !== this.pixelHeight) {\n      this.resource.width = this.pixelWidth;\n      this.resource.height = this.pixelHeight;\n    }\n  }\n  resize(width = this.width, height = this.height, resolution = this._resolution) {\n    const didResize = super.resize(width, height, resolution);\n    if (didResize) {\n      this.resizeCanvas();\n    }\n    return didResize;\n  }\n  static test(resource) {\n    return globalThis.HTMLCanvasElement && resource instanceof HTMLCanvasElement || globalThis.OffscreenCanvas && resource instanceof OffscreenCanvas;\n  }\n}\nCanvasSource.extension = ExtensionType.TextureSource;\n\nexport { CanvasSource };\n//# sourceMappingURL=CanvasSource.mjs.map\n","import { DOMAdapter } from '../../../../../environment/adapter.mjs';\nimport { ExtensionType } from '../../../../../extensions/Extensions.mjs';\nimport { warn } from '../../../../../utils/logging/warn.mjs';\nimport { TextureSource } from './TextureSource.mjs';\n\n\"use strict\";\nclass ImageSource extends TextureSource {\n  constructor(options) {\n    if (options.resource && (globalThis.HTMLImageElement && options.resource instanceof HTMLImageElement)) {\n      const canvas = DOMAdapter.get().createCanvas(options.resource.width, options.resource.height);\n      const context = canvas.getContext(\"2d\");\n      context.drawImage(options.resource, 0, 0);\n      options.resource = canvas;\n      warn(\"ImageSource: Image element passed, converting to canvas. Use CanvasSource instead.\");\n    }\n    super(options);\n    this.uploadMethodId = \"image\";\n    this.autoGarbageCollect = true;\n  }\n  static test(resource) {\n    return globalThis.HTMLImageElement && resource instanceof HTMLImageElement || typeof ImageBitmap !== \"undefined\" && resource instanceof ImageBitmap;\n  }\n}\nImageSource.extension = ExtensionType.TextureSource;\n\nexport { ImageSource };\n//# sourceMappingURL=ImageSource.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { uid } from '../../../../utils/data/uid.mjs';\nimport { deprecation, v8_0_0 } from '../../../../utils/logging/deprecation.mjs';\n\n\"use strict\";\nconst idHash = /* @__PURE__ */ Object.create(null);\nfunction createResourceIdFromString(value) {\n  const id = idHash[value];\n  if (id === void 0) {\n    idHash[value] = uid(\"resource\");\n  }\n  return id;\n}\nconst _TextureStyle = class _TextureStyle extends EventEmitter {\n  /**\n   * @param options - options for the style\n   */\n  constructor(options = {}) {\n    super();\n    this._resourceType = \"textureSampler\";\n    this._touched = 0;\n    /**\n     * Specifies the maximum anisotropy value clamp used by the sampler.\n     * Note: Most implementations support {@link GPUSamplerDescriptor#maxAnisotropy} values in range\n     * between 1 and 16, inclusive. The used value of {@link GPUSamplerDescriptor#maxAnisotropy} will\n     * be clamped to the maximum value that the platform supports.\n     * @internal\n     * @ignore\n     */\n    this._maxAnisotropy = 1;\n    /**\n     * Has the style been destroyed?\n     * @readonly\n     */\n    this.destroyed = false;\n    options = { ..._TextureStyle.defaultOptions, ...options };\n    this.addressMode = options.addressMode;\n    this.addressModeU = options.addressModeU ?? this.addressModeU;\n    this.addressModeV = options.addressModeV ?? this.addressModeV;\n    this.addressModeW = options.addressModeW ?? this.addressModeW;\n    this.scaleMode = options.scaleMode;\n    this.magFilter = options.magFilter ?? this.magFilter;\n    this.minFilter = options.minFilter ?? this.minFilter;\n    this.mipmapFilter = options.mipmapFilter ?? this.mipmapFilter;\n    this.lodMinClamp = options.lodMinClamp;\n    this.lodMaxClamp = options.lodMaxClamp;\n    this.compare = options.compare;\n    this.maxAnisotropy = options.maxAnisotropy ?? 1;\n  }\n  set addressMode(value) {\n    this.addressModeU = value;\n    this.addressModeV = value;\n    this.addressModeW = value;\n  }\n  /** setting this will set wrapModeU,wrapModeV and wrapModeW all at once! */\n  get addressMode() {\n    return this.addressModeU;\n  }\n  set wrapMode(value) {\n    deprecation(v8_0_0, \"TextureStyle.wrapMode is now TextureStyle.addressMode\");\n    this.addressMode = value;\n  }\n  get wrapMode() {\n    return this.addressMode;\n  }\n  set scaleMode(value) {\n    this.magFilter = value;\n    this.minFilter = value;\n    this.mipmapFilter = value;\n  }\n  /** setting this will set magFilter,minFilter and mipmapFilter all at once!  */\n  get scaleMode() {\n    return this.magFilter;\n  }\n  /** Specifies the maximum anisotropy value clamp used by the sampler. */\n  set maxAnisotropy(value) {\n    this._maxAnisotropy = Math.min(value, 16);\n    if (this._maxAnisotropy > 1) {\n      this.scaleMode = \"linear\";\n    }\n  }\n  get maxAnisotropy() {\n    return this._maxAnisotropy;\n  }\n  // TODO - move this to WebGL?\n  get _resourceId() {\n    return this._sharedResourceId || this._generateResourceId();\n  }\n  update() {\n    this.emit(\"change\", this);\n    this._sharedResourceId = null;\n  }\n  _generateResourceId() {\n    const bigKey = `${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;\n    this._sharedResourceId = createResourceIdFromString(bigKey);\n    return this._resourceId;\n  }\n  /** Destroys the style */\n  destroy() {\n    this.destroyed = true;\n    this.emit(\"destroy\", this);\n    this.emit(\"change\", this);\n    this.removeAllListeners();\n  }\n};\n/** default options for the style */\n_TextureStyle.defaultOptions = {\n  addressMode: \"clamp-to-edge\",\n  scaleMode: \"linear\"\n};\nlet TextureStyle = _TextureStyle;\n\nexport { TextureStyle };\n//# sourceMappingURL=TextureStyle.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { isPow2 } from '../../../../../maths/misc/pow2.mjs';\nimport { definedProps } from '../../../../../scene/container/utils/definedProps.mjs';\nimport { uid } from '../../../../../utils/data/uid.mjs';\nimport { TextureStyle } from '../TextureStyle.mjs';\n\n\"use strict\";\nconst _TextureSource = class _TextureSource extends EventEmitter {\n  /**\n   * @param options - options for creating a new TextureSource\n   */\n  constructor(options = {}) {\n    super();\n    this.options = options;\n    /** unique id for this Texture source */\n    this.uid = uid(\"textureSource\");\n    /**\n     * The resource type used by this TextureSource. This is used by the bind groups to determine\n     * how to handle this resource.\n     * @ignore\n     * @internal\n     */\n    this._resourceType = \"textureSource\";\n    /**\n     * i unique resource id, used by the bind group systems.\n     * This can change if the texture is resized or its resource changes\n     */\n    this._resourceId = uid(\"resource\");\n    /**\n     * this is how the backends know how to upload this texture to the GPU\n     * It changes depending on the resource type. Classes that extend TextureSource\n     * should override this property.\n     * @ignore\n     * @internal\n     */\n    this.uploadMethodId = \"unknown\";\n    // dimensions\n    this._resolution = 1;\n    /** the pixel width of this texture source. This is the REAL pure number, not accounting resolution */\n    this.pixelWidth = 1;\n    /** the pixel height of this texture source. This is the REAL pure number, not accounting resolution */\n    this.pixelHeight = 1;\n    /**\n     * the width of this texture source, accounting for resolution\n     * eg pixelWidth 200, resolution 2, then width will be 100\n     */\n    this.width = 1;\n    /**\n     * the height of this texture source, accounting for resolution\n     * eg pixelHeight 200, resolution 2, then height will be 100\n     */\n    this.height = 1;\n    /**\n     * The number of samples of a multisample texture. This is always 1 for non-multisample textures.\n     * To enable multisample for a texture, set antialias to true\n     * @internal\n     * @ignore\n     */\n    this.sampleCount = 1;\n    /** The number of mip levels to generate for this texture. this is  overridden if autoGenerateMipmaps is true */\n    this.mipLevelCount = 1;\n    /**\n     * Should we auto generate mipmaps for this texture? This will automatically generate mipmaps\n     * for this texture when uploading to the GPU. Mipmapped textures take up more memory, but\n     * can look better when scaled down.\n     *\n     * For performance reasons, it is recommended to NOT use this with RenderTextures, as they are often updated every frame.\n     * If you do, make sure to call `updateMipmaps` after you update the texture.\n     */\n    this.autoGenerateMipmaps = false;\n    /** the format that the texture data has */\n    this.format = \"rgba8unorm\";\n    /** how many dimensions does this texture have? currently v8 only supports 2d */\n    this.dimension = \"2d\";\n    /**\n     * Only really affects RenderTextures.\n     * Should we use antialiasing for this texture. It will look better, but may impact performance as a\n     * Blit operation will be required to resolve the texture.\n     */\n    this.antialias = false;\n    /**\n     * Used by automatic texture Garbage Collection, stores last GC tick when it was bound\n     * @protected\n     */\n    this._touched = 0;\n    /**\n     * Used by the batcher to build texture batches. faster to have the variable here!\n     * @protected\n     */\n    this._batchTick = -1;\n    /**\n     * A temporary batch location for the texture batching. Here for performance reasons only!\n     * @protected\n     */\n    this._textureBindLocation = -1;\n    options = { ..._TextureSource.defaultOptions, ...options };\n    this.label = options.label ?? \"\";\n    this.resource = options.resource;\n    this.autoGarbageCollect = options.autoGarbageCollect;\n    this._resolution = options.resolution;\n    if (options.width) {\n      this.pixelWidth = options.width * this._resolution;\n    } else {\n      this.pixelWidth = this.resource ? this.resourceWidth ?? 1 : 1;\n    }\n    if (options.height) {\n      this.pixelHeight = options.height * this._resolution;\n    } else {\n      this.pixelHeight = this.resource ? this.resourceHeight ?? 1 : 1;\n    }\n    this.width = this.pixelWidth / this._resolution;\n    this.height = this.pixelHeight / this._resolution;\n    this.format = options.format;\n    this.dimension = options.dimensions;\n    this.mipLevelCount = options.mipLevelCount;\n    this.autoGenerateMipmaps = options.autoGenerateMipmaps;\n    this.sampleCount = options.sampleCount;\n    this.antialias = options.antialias;\n    this.alphaMode = options.alphaMode;\n    this.style = new TextureStyle(definedProps(options));\n    this.destroyed = false;\n    this._refreshPOT();\n  }\n  /** returns itself */\n  get source() {\n    return this;\n  }\n  /** the style of the texture */\n  get style() {\n    return this._style;\n  }\n  set style(value) {\n    if (this.style === value)\n      return;\n    this._style?.off(\"change\", this._onStyleChange, this);\n    this._style = value;\n    this._style?.on(\"change\", this._onStyleChange, this);\n    this._onStyleChange();\n  }\n  /** setting this will set wrapModeU,wrapModeV and wrapModeW all at once! */\n  get addressMode() {\n    return this._style.addressMode;\n  }\n  set addressMode(value) {\n    this._style.addressMode = value;\n  }\n  /** setting this will set wrapModeU,wrapModeV and wrapModeW all at once! */\n  get repeatMode() {\n    return this._style.addressMode;\n  }\n  set repeatMode(value) {\n    this._style.addressMode = value;\n  }\n  /** Specifies the sampling behavior when the sample footprint is smaller than or equal to one texel. */\n  get magFilter() {\n    return this._style.magFilter;\n  }\n  set magFilter(value) {\n    this._style.magFilter = value;\n  }\n  /** Specifies the sampling behavior when the sample footprint is larger than one texel. */\n  get minFilter() {\n    return this._style.minFilter;\n  }\n  set minFilter(value) {\n    this._style.minFilter = value;\n  }\n  /** Specifies behavior for sampling between mipmap levels. */\n  get mipmapFilter() {\n    return this._style.mipmapFilter;\n  }\n  set mipmapFilter(value) {\n    this._style.mipmapFilter = value;\n  }\n  /** Specifies the minimum and maximum levels of detail, respectively, used internally when sampling a texture. */\n  get lodMinClamp() {\n    return this._style.lodMinClamp;\n  }\n  set lodMinClamp(value) {\n    this._style.lodMinClamp = value;\n  }\n  /** Specifies the minimum and maximum levels of detail, respectively, used internally when sampling a texture. */\n  get lodMaxClamp() {\n    return this._style.lodMaxClamp;\n  }\n  set lodMaxClamp(value) {\n    this._style.lodMaxClamp = value;\n  }\n  _onStyleChange() {\n    this.emit(\"styleChange\", this);\n  }\n  /** call this if you have modified the texture outside of the constructor */\n  update() {\n    if (this.resource) {\n      const resolution = this._resolution;\n      const didResize = this.resize(this.resourceWidth / resolution, this.resourceHeight / resolution);\n      if (didResize)\n        return;\n    }\n    this.emit(\"update\", this);\n  }\n  /** Destroys this texture source */\n  destroy() {\n    this.destroyed = true;\n    this.emit(\"destroy\", this);\n    this.emit(\"change\", this);\n    if (this._style) {\n      this._style.destroy();\n      this._style = null;\n    }\n    this.uploadMethodId = null;\n    this.resource = null;\n    this.removeAllListeners();\n  }\n  /**\n   * This will unload the Texture source from the GPU. This will free up the GPU memory\n   * As soon as it is required fore rendering, it will be re-uploaded.\n   */\n  unload() {\n    this._resourceId = uid(\"resource\");\n    this.emit(\"change\", this);\n    this.emit(\"unload\", this);\n  }\n  /** the width of the resource. This is the REAL pure number, not accounting resolution   */\n  get resourceWidth() {\n    const { resource } = this;\n    return resource.naturalWidth || resource.videoWidth || resource.displayWidth || resource.width;\n  }\n  /** the height of the resource. This is the REAL pure number, not accounting resolution */\n  get resourceHeight() {\n    const { resource } = this;\n    return resource.naturalHeight || resource.videoHeight || resource.displayHeight || resource.height;\n  }\n  /**\n   * the resolution of the texture. Changing this number, will not change the number of pixels in the actual texture\n   * but will the size of the texture when rendered.\n   *\n   * changing the resolution of this texture to 2 for example will make it appear twice as small when rendered (as pixel\n   * density will have increased)\n   */\n  get resolution() {\n    return this._resolution;\n  }\n  set resolution(resolution) {\n    if (this._resolution === resolution)\n      return;\n    this._resolution = resolution;\n    this.width = this.pixelWidth / resolution;\n    this.height = this.pixelHeight / resolution;\n  }\n  /**\n   * Resize the texture, this is handy if you want to use the texture as a render texture\n   * @param width - the new width of the texture\n   * @param height - the new height of the texture\n   * @param resolution - the new resolution of the texture\n   * @returns - if the texture was resized\n   */\n  resize(width, height, resolution) {\n    resolution = resolution || this._resolution;\n    width = width || this.width;\n    height = height || this.height;\n    const newPixelWidth = Math.round(width * resolution);\n    const newPixelHeight = Math.round(height * resolution);\n    this.width = newPixelWidth / resolution;\n    this.height = newPixelHeight / resolution;\n    this._resolution = resolution;\n    if (this.pixelWidth === newPixelWidth && this.pixelHeight === newPixelHeight) {\n      return false;\n    }\n    this._refreshPOT();\n    this.pixelWidth = newPixelWidth;\n    this.pixelHeight = newPixelHeight;\n    this.emit(\"resize\", this);\n    this._resourceId = uid(\"resource\");\n    this.emit(\"change\", this);\n    return true;\n  }\n  /**\n   * Lets the renderer know that this texture has been updated and its mipmaps should be re-generated.\n   * This is only important for RenderTexture instances, as standard Texture instances will have their\n   * mipmaps generated on upload. You should call this method after you make any change to the texture\n   *\n   * The reason for this is is can be quite expensive to update mipmaps for a texture. So by default,\n   * We want you, the developer to specify when this action should happen.\n   *\n   * Generally you don't want to have mipmaps generated on Render targets that are changed every frame,\n   */\n  updateMipmaps() {\n    if (this.autoGenerateMipmaps && this.mipLevelCount > 1) {\n      this.emit(\"updateMipmaps\", this);\n    }\n  }\n  set wrapMode(value) {\n    this._style.wrapMode = value;\n  }\n  get wrapMode() {\n    return this._style.wrapMode;\n  }\n  set scaleMode(value) {\n    this._style.scaleMode = value;\n  }\n  /** setting this will set magFilter,minFilter and mipmapFilter all at once!  */\n  get scaleMode() {\n    return this._style.scaleMode;\n  }\n  /**\n   * Refresh check for isPowerOfTwo texture based on size\n   * @private\n   */\n  _refreshPOT() {\n    this.isPowerOfTwo = isPow2(this.pixelWidth) && isPow2(this.pixelHeight);\n  }\n  static test(_resource) {\n    throw new Error(\"Unimplemented\");\n  }\n};\n/** The default options used when creating a new TextureSource. override these to add your own defaults */\n_TextureSource.defaultOptions = {\n  resolution: 1,\n  format: \"bgra8unorm\",\n  alphaMode: \"premultiply-alpha-on-upload\",\n  dimensions: \"2d\",\n  mipLevelCount: 1,\n  autoGenerateMipmaps: false,\n  sampleCount: 1,\n  antialias: false,\n  autoGarbageCollect: false\n};\nlet TextureSource = _TextureSource;\n\nexport { TextureSource };\n//# sourceMappingURL=TextureSource.mjs.map\n","\"use strict\";\nfunction definedProps(obj) {\n  const result = {};\n  for (const key in obj) {\n    if (obj[key] !== void 0) {\n      result[key] = obj[key];\n    }\n  }\n  return result;\n}\n\nexport { definedProps };\n//# sourceMappingURL=definedProps.mjs.map\n","import { ExtensionType } from '../../../../../extensions/Extensions.mjs';\nimport { Ticker } from '../../../../../ticker/Ticker.mjs';\nimport { detectVideoAlphaMode } from '../../../../../utils/browser/detectVideoAlphaMode.mjs';\nimport { TextureSource } from './TextureSource.mjs';\n\n\"use strict\";\nconst _VideoSource = class _VideoSource extends TextureSource {\n  constructor(options) {\n    super(options);\n    // Public\n    /** Whether or not the video is ready to play. */\n    this.isReady = false;\n    /** The upload method for this texture. */\n    this.uploadMethodId = \"video\";\n    options = {\n      ..._VideoSource.defaultOptions,\n      ...options\n    };\n    this._autoUpdate = true;\n    this._isConnectedToTicker = false;\n    this._updateFPS = options.updateFPS || 0;\n    this._msToNextUpdate = 0;\n    this.autoPlay = options.autoPlay !== false;\n    this.alphaMode = options.alphaMode ?? \"premultiply-alpha-on-upload\";\n    this._videoFrameRequestCallback = this._videoFrameRequestCallback.bind(this);\n    this._videoFrameRequestCallbackHandle = null;\n    this._load = null;\n    this._resolve = null;\n    this._reject = null;\n    this._onCanPlay = this._onCanPlay.bind(this);\n    this._onCanPlayThrough = this._onCanPlayThrough.bind(this);\n    this._onError = this._onError.bind(this);\n    this._onPlayStart = this._onPlayStart.bind(this);\n    this._onPlayStop = this._onPlayStop.bind(this);\n    this._onSeeked = this._onSeeked.bind(this);\n    if (options.autoLoad !== false) {\n      void this.load();\n    }\n  }\n  /** Update the video frame if the source is not destroyed and meets certain conditions. */\n  updateFrame() {\n    if (this.destroyed) {\n      return;\n    }\n    if (this._updateFPS) {\n      const elapsedMS = Ticker.shared.elapsedMS * this.resource.playbackRate;\n      this._msToNextUpdate = Math.floor(this._msToNextUpdate - elapsedMS);\n    }\n    if (!this._updateFPS || this._msToNextUpdate <= 0) {\n      this._msToNextUpdate = this._updateFPS ? Math.floor(1e3 / this._updateFPS) : 0;\n    }\n    if (this.isValid) {\n      this.update();\n    }\n  }\n  /** Callback to update the video frame and potentially request the next frame update. */\n  _videoFrameRequestCallback() {\n    this.updateFrame();\n    if (this.destroyed) {\n      this._videoFrameRequestCallbackHandle = null;\n    } else {\n      this._videoFrameRequestCallbackHandle = this.resource.requestVideoFrameCallback(\n        this._videoFrameRequestCallback\n      );\n    }\n  }\n  /**\n   * Checks if the resource has valid dimensions.\n   * @returns {boolean} True if width and height are set, otherwise false.\n   */\n  get isValid() {\n    return !!this.resource.videoWidth && !!this.resource.videoHeight;\n  }\n  /**\n   * Start preloading the video resource.\n   * @returns {Promise<this>} Handle the validate event\n   */\n  async load() {\n    if (this._load) {\n      return this._load;\n    }\n    const source = this.resource;\n    const options = this.options;\n    if ((source.readyState === source.HAVE_ENOUGH_DATA || source.readyState === source.HAVE_FUTURE_DATA) && source.width && source.height) {\n      source.complete = true;\n    }\n    source.addEventListener(\"play\", this._onPlayStart);\n    source.addEventListener(\"pause\", this._onPlayStop);\n    source.addEventListener(\"seeked\", this._onSeeked);\n    if (!this._isSourceReady()) {\n      if (!options.preload) {\n        source.addEventListener(\"canplay\", this._onCanPlay);\n      }\n      source.addEventListener(\"canplaythrough\", this._onCanPlayThrough);\n      source.addEventListener(\"error\", this._onError, true);\n    } else {\n      this._mediaReady();\n    }\n    this.alphaMode = await detectVideoAlphaMode();\n    this._load = new Promise((resolve, reject) => {\n      if (this.isValid) {\n        resolve(this);\n      } else {\n        this._resolve = resolve;\n        this._reject = reject;\n        if (options.preloadTimeoutMs !== void 0) {\n          this._preloadTimeout = setTimeout(() => {\n            this._onError(new ErrorEvent(`Preload exceeded timeout of ${options.preloadTimeoutMs}ms`));\n          });\n        }\n        source.load();\n      }\n    });\n    return this._load;\n  }\n  /**\n   * Handle video error events.\n   * @param event - The error event\n   */\n  _onError(event) {\n    this.resource.removeEventListener(\"error\", this._onError, true);\n    this.emit(\"error\", event);\n    if (this._reject) {\n      this._reject(event);\n      this._reject = null;\n      this._resolve = null;\n    }\n  }\n  /**\n   * Checks if the underlying source is playing.\n   * @returns True if playing.\n   */\n  _isSourcePlaying() {\n    const source = this.resource;\n    return !source.paused && !source.ended;\n  }\n  /**\n   * Checks if the underlying source is ready for playing.\n   * @returns True if ready.\n   */\n  _isSourceReady() {\n    const source = this.resource;\n    return source.readyState > 2;\n  }\n  /** Runs the update loop when the video is ready to play. */\n  _onPlayStart() {\n    if (!this.isValid) {\n      this._mediaReady();\n    }\n    this._configureAutoUpdate();\n  }\n  /** Stops the update loop when a pause event is triggered. */\n  _onPlayStop() {\n    this._configureAutoUpdate();\n  }\n  /** Handles behavior when the video completes seeking to the current playback position. */\n  _onSeeked() {\n    if (this._autoUpdate && !this._isSourcePlaying()) {\n      this._msToNextUpdate = 0;\n      this.updateFrame();\n      this._msToNextUpdate = 0;\n    }\n  }\n  _onCanPlay() {\n    const source = this.resource;\n    source.removeEventListener(\"canplay\", this._onCanPlay);\n    this._mediaReady();\n  }\n  _onCanPlayThrough() {\n    const source = this.resource;\n    source.removeEventListener(\"canplaythrough\", this._onCanPlay);\n    if (this._preloadTimeout) {\n      clearTimeout(this._preloadTimeout);\n      this._preloadTimeout = void 0;\n    }\n    this._mediaReady();\n  }\n  /** Fired when the video is loaded and ready to play. */\n  _mediaReady() {\n    const source = this.resource;\n    if (this.isValid) {\n      this.isReady = true;\n      this.resize(source.videoWidth, source.videoHeight);\n    }\n    this._msToNextUpdate = 0;\n    this.updateFrame();\n    this._msToNextUpdate = 0;\n    if (this._resolve) {\n      this._resolve(this);\n      this._resolve = null;\n      this._reject = null;\n    }\n    if (this._isSourcePlaying()) {\n      this._onPlayStart();\n    } else if (this.autoPlay) {\n      void this.resource.play();\n    }\n  }\n  /** Cleans up resources and event listeners associated with this texture. */\n  destroy() {\n    this._configureAutoUpdate();\n    const source = this.resource;\n    if (source) {\n      source.removeEventListener(\"play\", this._onPlayStart);\n      source.removeEventListener(\"pause\", this._onPlayStop);\n      source.removeEventListener(\"seeked\", this._onSeeked);\n      source.removeEventListener(\"canplay\", this._onCanPlay);\n      source.removeEventListener(\"canplaythrough\", this._onCanPlayThrough);\n      source.removeEventListener(\"error\", this._onError, true);\n      source.pause();\n      source.src = \"\";\n      source.load();\n    }\n    super.destroy();\n  }\n  /** Should the base texture automatically update itself, set to true by default. */\n  get autoUpdate() {\n    return this._autoUpdate;\n  }\n  set autoUpdate(value) {\n    if (value !== this._autoUpdate) {\n      this._autoUpdate = value;\n      this._configureAutoUpdate();\n    }\n  }\n  /**\n   * How many times a second to update the texture from the video.\n   * Leave at 0 to update at every render.\n   * A lower fps can help performance, as updating the texture at 60fps on a 30ps video may not be efficient.\n   */\n  get updateFPS() {\n    return this._updateFPS;\n  }\n  set updateFPS(value) {\n    if (value !== this._updateFPS) {\n      this._updateFPS = value;\n      this._configureAutoUpdate();\n    }\n  }\n  /**\n   * Configures the updating mechanism based on the current state and settings.\n   *\n   * This method decides between using the browser's native video frame callback or a custom ticker\n   * for updating the video frame. It ensures optimal performance and responsiveness\n   * based on the video's state, playback status, and the desired frames-per-second setting.\n   *\n   * - If `_autoUpdate` is enabled and the video source is playing:\n   *   - It will prefer the native video frame callback if available and no specific FPS is set.\n   *   - Otherwise, it will use a custom ticker for manual updates.\n   * - If `_autoUpdate` is disabled or the video isn't playing, any active update mechanisms are halted.\n   */\n  _configureAutoUpdate() {\n    if (this._autoUpdate && this._isSourcePlaying()) {\n      if (!this._updateFPS && this.resource.requestVideoFrameCallback) {\n        if (this._isConnectedToTicker) {\n          Ticker.shared.remove(this.updateFrame, this);\n          this._isConnectedToTicker = false;\n          this._msToNextUpdate = 0;\n        }\n        if (this._videoFrameRequestCallbackHandle === null) {\n          this._videoFrameRequestCallbackHandle = this.resource.requestVideoFrameCallback(\n            this._videoFrameRequestCallback\n          );\n        }\n      } else {\n        if (this._videoFrameRequestCallbackHandle !== null) {\n          this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle);\n          this._videoFrameRequestCallbackHandle = null;\n        }\n        if (!this._isConnectedToTicker) {\n          Ticker.shared.add(this.updateFrame, this);\n          this._isConnectedToTicker = true;\n          this._msToNextUpdate = 0;\n        }\n      }\n    } else {\n      if (this._videoFrameRequestCallbackHandle !== null) {\n        this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle);\n        this._videoFrameRequestCallbackHandle = null;\n      }\n      if (this._isConnectedToTicker) {\n        Ticker.shared.remove(this.updateFrame, this);\n        this._isConnectedToTicker = false;\n        this._msToNextUpdate = 0;\n      }\n    }\n  }\n  static test(resource) {\n    return globalThis.HTMLVideoElement && resource instanceof HTMLVideoElement || globalThis.VideoFrame && resource instanceof VideoFrame;\n  }\n};\n_VideoSource.extension = ExtensionType.TextureSource;\n/** The default options for video sources. */\n_VideoSource.defaultOptions = {\n  ...TextureSource.defaultOptions,\n  /** If true, the video will start loading immediately. */\n  autoLoad: true,\n  /** If true, the video will start playing as soon as it is loaded. */\n  autoPlay: true,\n  /** The number of times a second to update the texture from the video. Leave at 0 to update at every render. */\n  updateFPS: 0,\n  /** If true, the video will be loaded with the `crossorigin` attribute. */\n  crossorigin: true,\n  /** If true, the video will loop when it ends. */\n  loop: false,\n  /** If true, the video will be muted. */\n  muted: true,\n  /** If true, the video will play inline. */\n  playsinline: true,\n  /** If true, the video will be preloaded. */\n  preload: false\n};\n/**\n * Map of video MIME types that can't be directly derived from file extensions.\n * @readonly\n */\n_VideoSource.MIME_TYPES = {\n  ogv: \"video/ogg\",\n  mov: \"video/quicktime\",\n  m4v: \"video/mp4\"\n};\nlet VideoSource = _VideoSource;\n\nexport { VideoSource };\n//# sourceMappingURL=VideoSource.mjs.map\n","import { Cache } from '../../../../../assets/cache/Cache.mjs';\nimport { extensions, ExtensionType } from '../../../../../extensions/Extensions.mjs';\nimport { TextureSource } from '../sources/TextureSource.mjs';\nimport { Texture } from '../Texture.mjs';\n\n\"use strict\";\nconst sources = [];\nextensions.handleByList(ExtensionType.TextureSource, sources);\nfunction autoDetectSource(options = {}) {\n  return textureSourceFrom(options);\n}\nfunction textureSourceFrom(options = {}) {\n  const hasResource = options && options.resource;\n  const res = hasResource ? options.resource : options;\n  const opts = hasResource ? options : { resource: options };\n  for (let i = 0; i < sources.length; i++) {\n    const Source = sources[i];\n    if (Source.test(res)) {\n      return new Source(opts);\n    }\n  }\n  throw new Error(`Could not find a source type for resource: ${opts.resource}`);\n}\nfunction resourceToTexture(options = {}, skipCache = false) {\n  const hasResource = options && options.resource;\n  const resource = hasResource ? options.resource : options;\n  const opts = hasResource ? options : { resource: options };\n  if (!skipCache && Cache.has(resource)) {\n    return Cache.get(resource);\n  }\n  const texture = new Texture({ source: textureSourceFrom(opts) });\n  texture.on(\"destroy\", () => {\n    if (Cache.has(resource)) {\n      Cache.remove(resource);\n    }\n  });\n  if (!skipCache) {\n    Cache.set(resource, texture);\n  }\n  return texture;\n}\nfunction textureFrom(id, skipCache = false) {\n  if (typeof id === \"string\") {\n    return Cache.get(id);\n  } else if (id instanceof TextureSource) {\n    return new Texture({ source: id });\n  }\n  return resourceToTexture(id, skipCache);\n}\nTexture.from = textureFrom;\nTextureSource.from = textureSourceFrom;\n\nexport { autoDetectSource, resourceToTexture, textureFrom };\n//# sourceMappingURL=textureFrom.mjs.map\n","\"use strict\";\nconst idCounts = /* @__PURE__ */ Object.create(null);\nconst idHash = /* @__PURE__ */ Object.create(null);\nfunction createIdFromString(value, groupId) {\n  let id = idHash[value];\n  if (id === void 0) {\n    if (idCounts[groupId] === void 0) {\n      idCounts[groupId] = 1;\n    }\n    idHash[value] = id = idCounts[groupId]++;\n  }\n  return id;\n}\n\nexport { createIdFromString };\n//# sourceMappingURL=createIdFromString.mjs.map\n","\"use strict\";\nvar RendererType = /* @__PURE__ */ ((RendererType2) => {\n  RendererType2[RendererType2[\"WEBGL\"] = 1] = \"WEBGL\";\n  RendererType2[RendererType2[\"WEBGPU\"] = 2] = \"WEBGPU\";\n  RendererType2[RendererType2[\"BOTH\"] = 3] = \"BOTH\";\n  return RendererType2;\n})(RendererType || {});\n\nexport { RendererType };\n//# sourceMappingURL=types.mjs.map\n","import { removeItems } from '../../../utils/data/removeItems.mjs';\nimport { deprecation, v8_0_0 } from '../../../utils/logging/deprecation.mjs';\n\n\"use strict\";\nconst childrenHelperMixin = {\n  allowChildren: true,\n  /**\n   * Removes all children from this container that are within the begin and end indexes.\n   * @param beginIndex - The beginning position.\n   * @param endIndex - The ending position. Default value is size of the container.\n   * @returns - List of removed children\n   * @memberof scene.Container#\n   */\n  removeChildren(beginIndex = 0, endIndex) {\n    const end = endIndex ?? this.children.length;\n    const range = end - beginIndex;\n    const removed = [];\n    if (range > 0 && range <= end) {\n      for (let i = end - 1; i >= beginIndex; i--) {\n        const child = this.children[i];\n        if (!child)\n          continue;\n        removed.push(child);\n        child.parent = null;\n      }\n      removeItems(this.children, beginIndex, end);\n      const renderGroup = this.renderGroup || this.parentRenderGroup;\n      if (renderGroup) {\n        renderGroup.removeChildren(removed);\n      }\n      for (let i = 0; i < removed.length; ++i) {\n        this.emit(\"childRemoved\", removed[i], this, i);\n        removed[i].emit(\"removed\", this);\n      }\n      return removed;\n    } else if (range === 0 && this.children.length === 0) {\n      return removed;\n    }\n    throw new RangeError(\"removeChildren: numeric values are outside the acceptable range.\");\n  },\n  /**\n   * Removes a child from the specified index position.\n   * @param index - The index to get the child from\n   * @returns The child that was removed.\n   * @memberof scene.Container#\n   */\n  removeChildAt(index) {\n    const child = this.getChildAt(index);\n    return this.removeChild(child);\n  },\n  /**\n   * Returns the child at the specified index\n   * @param index - The index to get the child at\n   * @returns - The child at the given index, if any.\n   * @memberof scene.Container#\n   */\n  getChildAt(index) {\n    if (index < 0 || index >= this.children.length) {\n      throw new Error(`getChildAt: Index (${index}) does not exist.`);\n    }\n    return this.children[index];\n  },\n  /**\n   * Changes the position of an existing child in the container container\n   * @param child - The child Container instance for which you want to change the index number\n   * @param index - The resulting index number for the child container\n   * @memberof scene.Container#\n   */\n  setChildIndex(child, index) {\n    if (index < 0 || index >= this.children.length) {\n      throw new Error(`The index ${index} supplied is out of bounds ${this.children.length}`);\n    }\n    this.getChildIndex(child);\n    this.addChildAt(child, index);\n  },\n  /**\n   * Returns the index position of a child Container instance\n   * @param child - The Container instance to identify\n   * @returns - The index position of the child container to identify\n   * @memberof scene.Container#\n   */\n  getChildIndex(child) {\n    const index = this.children.indexOf(child);\n    if (index === -1) {\n      throw new Error(\"The supplied Container must be a child of the caller\");\n    }\n    return index;\n  },\n  /**\n   * Adds a child to the container at a specified index. If the index is out of bounds an error will be thrown.\n   * If the child is already in this container, it will be moved to the specified index.\n   * @param {Container} child - The child to add.\n   * @param {number} index - The absolute index where the child will be positioned at the end of the operation.\n   * @returns {Container} The child that was added.\n   * @memberof scene.Container#\n   */\n  addChildAt(child, index) {\n    if (!this.allowChildren) {\n      deprecation(v8_0_0, \"addChildAt: Only Containers will be allowed to add children in v8.0.0\");\n    }\n    const { children } = this;\n    if (index < 0 || index > children.length) {\n      throw new Error(`${child}addChildAt: The index ${index} supplied is out of bounds ${children.length}`);\n    }\n    if (child.parent) {\n      const currentIndex = child.parent.children.indexOf(child);\n      if (child.parent === this && currentIndex === index) {\n        return child;\n      }\n      if (currentIndex !== -1) {\n        child.parent.children.splice(currentIndex, 1);\n      }\n    }\n    if (index === children.length) {\n      children.push(child);\n    } else {\n      children.splice(index, 0, child);\n    }\n    child.parent = this;\n    child.didChange = true;\n    child.didViewUpdate = false;\n    child._updateFlags = 15;\n    const renderGroup = this.renderGroup || this.parentRenderGroup;\n    if (renderGroup) {\n      renderGroup.addChild(child);\n    }\n    if (this.sortableChildren)\n      this.sortDirty = true;\n    this.emit(\"childAdded\", child, this, index);\n    child.emit(\"added\", this);\n    return child;\n  },\n  /**\n   * Swaps the position of 2 Containers within this container.\n   * @param child - First container to swap\n   * @param child2 - Second container to swap\n   */\n  swapChildren(child, child2) {\n    if (child === child2) {\n      return;\n    }\n    const index1 = this.getChildIndex(child);\n    const index2 = this.getChildIndex(child2);\n    this.children[index1] = child2;\n    this.children[index2] = child;\n    const renderGroup = this.renderGroup || this.parentRenderGroup;\n    if (renderGroup) {\n      renderGroup.structureDidChange = true;\n    }\n    this._didChangeId++;\n  },\n  /**\n   * Remove the Container from its parent Container. If the Container has no parent, do nothing.\n   * @memberof scene.Container#\n   */\n  removeFromParent() {\n    this.parent?.removeChild(this);\n  },\n  /**\n   * Reparent the child to this container, keeping the same worldTransform.\n   * @param child - The child to reparent\n   * @returns The first child that was reparented.\n   * @memberof scene.Container#\n   */\n  reparentChild(...child) {\n    if (child.length === 1) {\n      return this.reparentChildAt(child[0], this.children.length);\n    }\n    child.forEach((c) => this.reparentChildAt(c, this.children.length));\n    return child[0];\n  },\n  /**\n   * Reparent the child to this container at the specified index, keeping the same worldTransform.\n   * @param child - The child to reparent\n   * @param index - The index to reparent the child to\n   * @memberof scene.Container#\n   */\n  reparentChildAt(child, index) {\n    if (child.parent === this) {\n      this.setChildIndex(child, index);\n      return child;\n    }\n    const childMat = child.worldTransform.clone();\n    child.removeFromParent();\n    this.addChildAt(child, index);\n    const newMatrix = this.worldTransform.clone();\n    newMatrix.invert();\n    childMat.prepend(newMatrix);\n    child.setFromMatrix(childMat);\n    return child;\n  }\n};\n\nexport { childrenHelperMixin };\n//# sourceMappingURL=childrenHelperMixin.mjs.map\n","import { extensions, ExtensionType } from '../../extensions/Extensions.mjs';\nimport { BigPool } from '../../utils/pool/PoolGroup.mjs';\n\n\"use strict\";\nclass MaskEffectManagerClass {\n  constructor() {\n    /**\n     * @private\n     */\n    this._effectClasses = [];\n    this._tests = [];\n    this._initialized = false;\n  }\n  init() {\n    if (this._initialized)\n      return;\n    this._initialized = true;\n    this._effectClasses.forEach((test) => {\n      this.add({\n        test: test.test,\n        maskClass: test\n      });\n    });\n  }\n  add(test) {\n    this._tests.push(test);\n  }\n  getMaskEffect(item) {\n    if (!this._initialized)\n      this.init();\n    for (let i = 0; i < this._tests.length; i++) {\n      const test = this._tests[i];\n      if (test.test(item)) {\n        return BigPool.get(test.maskClass, item);\n      }\n    }\n    return item;\n  }\n  returnMaskEffect(effect) {\n    BigPool.return(effect);\n  }\n}\nconst MaskEffectManager = new MaskEffectManagerClass();\nextensions.handleByList(ExtensionType.MaskEffect, MaskEffectManager._effectClasses);\n\nexport { MaskEffectManager, MaskEffectManagerClass };\n//# sourceMappingURL=MaskEffectManager.mjs.map\n","import { FilterEffect } from '../../../filters/FilterEffect.mjs';\nimport { MaskEffectManager } from '../../../rendering/mask/MaskEffectManager.mjs';\n\n\"use strict\";\nconst effectsMixin = {\n  _maskEffect: null,\n  _filterEffect: null,\n  /**\n   * @todo Needs docs.\n   * @memberof scene.Container#\n   * @type {Array<Effect>}\n   */\n  effects: [],\n  /**\n   * @todo Needs docs.\n   * @param effect - The effect to add.\n   * @memberof scene.Container#\n   * @ignore\n   */\n  addEffect(effect) {\n    const index = this.effects.indexOf(effect);\n    if (index !== -1)\n      return;\n    this.effects.push(effect);\n    this.effects.sort((a, b) => a.priority - b.priority);\n    const renderGroup = this.renderGroup || this.parentRenderGroup;\n    if (renderGroup) {\n      renderGroup.structureDidChange = true;\n    }\n    this._updateIsSimple();\n  },\n  /**\n   * @todo Needs docs.\n   * @param effect - The effect to remove.\n   * @memberof scene.Container#\n   * @ignore\n   */\n  removeEffect(effect) {\n    const index = this.effects.indexOf(effect);\n    if (index === -1)\n      return;\n    this.effects.splice(index, 1);\n    if (this.parentRenderGroup) {\n      this.parentRenderGroup.structureDidChange = true;\n    }\n    this._updateIsSimple();\n  },\n  set mask(value) {\n    const effect = this._maskEffect;\n    if (effect?.mask === value)\n      return;\n    if (effect) {\n      this.removeEffect(effect);\n      MaskEffectManager.returnMaskEffect(effect);\n      this._maskEffect = null;\n    }\n    if (value === null || value === void 0)\n      return;\n    this._maskEffect = MaskEffectManager.getMaskEffect(value);\n    this.addEffect(this._maskEffect);\n  },\n  /**\n   * Sets a mask for the displayObject. A mask is an object that limits the visibility of an\n   * object to the shape of the mask applied to it. In PixiJS a regular mask must be a\n   * {@link Graphics} or a {@link Sprite} object. This allows for much faster masking in canvas as it\n   * utilities shape clipping. Furthermore, a mask of an object must be in the subtree of its parent.\n   * Otherwise, `getLocalBounds` may calculate incorrect bounds, which makes the container's width and height wrong.\n   * To remove a mask, set this property to `null`.\n   *\n   * For sprite mask both alpha and red channel are used. Black mask is the same as transparent mask.\n   * @example\n   * import { Graphics, Sprite } from 'pixi.js';\n   *\n   * const graphics = new Graphics();\n   * graphics.beginFill(0xFF3300);\n   * graphics.drawRect(50, 250, 100, 100);\n   * graphics.endFill();\n   *\n   * const sprite = new Sprite(texture);\n   * sprite.mask = graphics;\n   * @memberof scene.Container#\n   */\n  get mask() {\n    return this._maskEffect?.mask;\n  },\n  set filters(value) {\n    if (!Array.isArray(value) && value)\n      value = [value];\n    const effect = this._filterEffect || (this._filterEffect = new FilterEffect());\n    value = value;\n    const hasFilters = value?.length > 0;\n    const hadFilters = effect.filters?.length > 0;\n    const didChange = hasFilters !== hadFilters;\n    value = Array.isArray(value) ? value.slice(0) : value;\n    effect.filters = Object.freeze(value);\n    if (didChange) {\n      if (hasFilters) {\n        this.addEffect(effect);\n      } else {\n        this.removeEffect(effect);\n        effect.filters = value ?? null;\n      }\n    }\n  },\n  /**\n   * Sets the filters for the displayObject.\n   * IMPORTANT: This is a WebGL only feature and will be ignored by the canvas renderer.\n   * To remove filters simply set this property to `'null'`.\n   * @memberof scene.Container#\n   */\n  get filters() {\n    return this._filterEffect?.filters;\n  },\n  set filterArea(value) {\n    this._filterEffect || (this._filterEffect = new FilterEffect());\n    this._filterEffect.filterArea = value;\n  },\n  /**\n   * The area the filter is applied to. This is used as more of an optimization\n   * rather than figuring out the dimensions of the displayObject each frame you can set this rectangle.\n   *\n   * Also works as an interaction mask.\n   * @memberof scene.Container#\n   */\n  get filterArea() {\n    return this._filterEffect?.filterArea;\n  }\n};\n\nexport { effectsMixin };\n//# sourceMappingURL=effectsMixin.mjs.map\n","import { deprecation, v8_0_0 } from '../../../utils/logging/deprecation.mjs';\n\n\"use strict\";\nconst findMixin = {\n  /**\n   * The instance label of the object.\n   * @memberof scene.Container#\n   * @member {string} label\n   */\n  label: null,\n  /**\n   * The instance name of the object.\n   * @deprecated since 8.0.0\n   * @see scene.Container#label\n   * @member {string} name\n   * @memberof scene.Container#\n   */\n  get name() {\n    deprecation(v8_0_0, \"Container.name property has been removed, use Container.label instead\");\n    return this.label;\n  },\n  set name(value) {\n    deprecation(v8_0_0, \"Container.name property has been removed, use Container.label instead\");\n    this.label = value;\n  },\n  /**\n   * @method getChildByName\n   * @deprecated since 8.0.0\n   * @param {string} name - Instance name.\n   * @param {boolean}[deep=false] - Whether to search recursively\n   * @returns {Container} The child with the specified name.\n   * @see scene.Container#getChildByLabel\n   * @memberof scene.Container#\n   */\n  getChildByName(name, deep = false) {\n    return this.getChildByLabel(name, deep);\n  },\n  /**\n   * Returns the first child in the container with the specified label.\n   *\n   * Recursive searches are done in a pre-order traversal.\n   * @memberof scene.Container#\n   * @param {string|RegExp} label - Instance label.\n   * @param {boolean}[deep=false] - Whether to search recursively\n   * @returns {Container} The child with the specified label.\n   */\n  getChildByLabel(label, deep = false) {\n    const children = this.children;\n    for (let i = 0; i < children.length; i++) {\n      const child = children[i];\n      if (child.label === label || label instanceof RegExp && label.test(child.label))\n        return child;\n    }\n    if (deep) {\n      for (let i = 0; i < children.length; i++) {\n        const child = children[i];\n        const found = child.getChildByLabel(label, true);\n        if (found) {\n          return found;\n        }\n      }\n    }\n    return null;\n  },\n  /**\n   * Returns all children in the container with the specified label.\n   * @memberof scene.Container#\n   * @param {string|RegExp} label - Instance label.\n   * @param {boolean}[deep=false] - Whether to search recursively\n   * @param {Container[]} [out=[]] - The array to store matching children in.\n   * @returns {Container[]} An array of children with the specified label.\n   */\n  getChildrenByLabel(label, deep = false, out = []) {\n    const children = this.children;\n    for (let i = 0; i < children.length; i++) {\n      const child = children[i];\n      if (child.label === label || label instanceof RegExp && label.test(child.label)) {\n        out.push(child);\n      }\n    }\n    if (deep) {\n      for (let i = 0; i < children.length; i++) {\n        children[i].getChildrenByLabel(label, true, out);\n      }\n    }\n    return out;\n  }\n};\n\nexport { findMixin };\n//# sourceMappingURL=findMixin.mjs.map\n","\"use strict\";\nfunction checkChildrenDidChange(container, previousData) {\n  const children = container.children;\n  for (let i = 0; i < children.length; i++) {\n    const child = children[i];\n    const changeId = (child.uid & 255) << 24 | child._didChangeId & 16777215;\n    if (previousData.data[previousData.index] !== changeId) {\n      previousData.data[previousData.index] = changeId;\n      previousData.didChange = true;\n    }\n    previousData.index++;\n    if (child.children.length) {\n      checkChildrenDidChange(child, previousData);\n    }\n  }\n  return previousData.didChange;\n}\n\nexport { checkChildrenDidChange };\n//# sourceMappingURL=checkChildrenDidChange.mjs.map\n","import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { Bounds } from '../bounds/Bounds.mjs';\nimport { getGlobalBounds } from '../bounds/getGlobalBounds.mjs';\nimport { getLocalBounds } from '../bounds/getLocalBounds.mjs';\nimport { checkChildrenDidChange } from '../utils/checkChildrenDidChange.mjs';\n\n\"use strict\";\nconst tempMatrix = new Matrix();\nconst measureMixin = {\n  _localBoundsCacheId: -1,\n  _localBoundsCacheData: null,\n  _setWidth(value, localWidth) {\n    const sign = Math.sign(this.scale.x) || 1;\n    if (localWidth !== 0) {\n      this.scale.x = value / localWidth * sign;\n    } else {\n      this.scale.x = sign;\n    }\n  },\n  _setHeight(value, localHeight) {\n    const sign = Math.sign(this.scale.y) || 1;\n    if (localHeight !== 0) {\n      this.scale.y = value / localHeight * sign;\n    } else {\n      this.scale.y = sign;\n    }\n  },\n  /**\n   * Retrieves the local bounds of the container as a Bounds object.\n   * @returns - The bounding area.\n   * @memberof scene.Container#\n   */\n  getLocalBounds() {\n    if (!this._localBoundsCacheData) {\n      this._localBoundsCacheData = {\n        data: [],\n        index: 1,\n        didChange: false,\n        localBounds: new Bounds()\n      };\n    }\n    const localBoundsCacheData = this._localBoundsCacheData;\n    localBoundsCacheData.index = 1;\n    localBoundsCacheData.didChange = false;\n    if (localBoundsCacheData.data[0] !== this._didChangeId >> 12) {\n      localBoundsCacheData.didChange = true;\n      localBoundsCacheData.data[0] = this._didChangeId >> 12;\n    }\n    checkChildrenDidChange(this, localBoundsCacheData);\n    if (localBoundsCacheData.didChange) {\n      getLocalBounds(this, localBoundsCacheData.localBounds, tempMatrix);\n    }\n    return localBoundsCacheData.localBounds;\n  },\n  /**\n   * Calculates and returns the (world) bounds of the display object as a [Rectangle]{@link Rectangle}.\n   * @param skipUpdate - Setting to `true` will stop the transforms of the scene graph from\n   *  being updated. This means the calculation returned MAY be out of date BUT will give you a\n   *  nice performance boost.\n   * @param bounds - Optional bounds to store the result of the bounds calculation.\n   * @returns - The minimum axis-aligned rectangle in world space that fits around this object.\n   * @memberof scene.Container#\n   */\n  getBounds(skipUpdate, bounds) {\n    return getGlobalBounds(this, skipUpdate, bounds || new Bounds());\n  }\n};\n\nexport { measureMixin };\n//# sourceMappingURL=measureMixin.mjs.map\n","\"use strict\";\nconst onRenderMixin = {\n  _onRender: null,\n  set onRender(func) {\n    const renderGroup = this.renderGroup || this.parentRenderGroup;\n    if (!func) {\n      if (this._onRender) {\n        renderGroup?.removeOnRender(this);\n      }\n      this._onRender = null;\n      return;\n    }\n    if (!this._onRender) {\n      renderGroup?.addOnRender(this);\n    }\n    this._onRender = func;\n  },\n  /**\n   * This callback is used when the container is rendered. This is where you should add your custom\n   * logic that is needed to be run every frame.\n   *\n   * In v7 many users used `updateTransform` for this, however the way v8 renders objects is different\n   * and \"updateTransform\" is no longer called every frame\n   * @example\n   * const container = new Container();\n   * container.onRender = () => {\n   *    container.rotation += 0.01;\n   * };\n   * @memberof scene.Container#\n   */\n  get onRender() {\n    return this._onRender;\n  }\n};\n\nexport { onRenderMixin };\n//# sourceMappingURL=onRenderMixin.mjs.map\n","\"use strict\";\nconst sortMixin = {\n  _zIndex: 0,\n  /**\n   * Should children be sorted by zIndex at the next render call.\n   *\n   * Will get automatically set to true if a new child is added, or if a child's zIndex changes.\n   * @type {boolean}\n   * @memberof scene.Container#\n   */\n  sortDirty: false,\n  /**\n   * If set to true, the container will sort its children by `zIndex` value\n   * when the next render is called, or manually if `sortChildren()` is called.\n   *\n   * This actually changes the order of elements in the array, so should be treated\n   * as a basic solution that is not performant compared to other solutions,\n   * such as {@link https://github.com/pixijs/layers PixiJS Layers}\n   *\n   * Also be aware of that this may not work nicely with the `addChildAt()` function,\n   * as the `zIndex` sorting may cause the child to automatically sorted to another position.\n   * @type {boolean}\n   * @memberof scene.Container#\n   */\n  sortableChildren: false,\n  /**\n   * The zIndex of the container.\n   *\n   * Setting this value, will automatically set the parent to be sortable. Children will be automatically\n   * sorted by zIndex value; a higher value will mean it will be moved towards the end of the array,\n   * and thus rendered on top of other display objects within the same container.\n   * @see scene.Container#sortableChildren\n   * @memberof scene.Container#\n   */\n  get zIndex() {\n    return this._zIndex;\n  },\n  set zIndex(value) {\n    if (this._zIndex === value)\n      return;\n    this._zIndex = value;\n    this.depthOfChildModified();\n  },\n  depthOfChildModified() {\n    if (this.parent) {\n      this.parent.sortableChildren = true;\n      this.parent.sortDirty = true;\n    }\n    if (this.parentRenderGroup) {\n      this.parentRenderGroup.structureDidChange = true;\n    }\n  },\n  /**\n   * Sorts children by zIndex.\n   * @memberof scene.Container#\n   */\n  sortChildren() {\n    if (!this.sortDirty)\n      return;\n    this.sortDirty = false;\n    this.children.sort(sortChildren);\n  }\n};\nfunction sortChildren(a, b) {\n  return a._zIndex - b._zIndex;\n}\n\nexport { sortMixin };\n//# sourceMappingURL=sortMixin.mjs.map\n","import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { Point } from '../../../maths/point/Point.mjs';\nimport { updateTransformBackwards } from '../bounds/getGlobalBounds.mjs';\n\n\"use strict\";\nconst toLocalGlobalMixin = {\n  /**\n   * Returns the global position of the container.\n   * @param point - The optional point to write the global value to.\n   * @param skipUpdate - Should we skip the update transform.\n   * @returns - The updated point.\n   * @memberof scene.Container#\n   */\n  getGlobalPosition(point = new Point(), skipUpdate = false) {\n    if (this.parent) {\n      this.parent.toGlobal(this._position, point, skipUpdate);\n    } else {\n      point.x = this._position.x;\n      point.y = this._position.y;\n    }\n    return point;\n  },\n  /**\n   * Calculates the global position of the container.\n   * @param position - The world origin to calculate from.\n   * @param point - A Point object in which to store the value, optional\n   *  (otherwise will create a new Point).\n   * @param skipUpdate - Should we skip the update transform.\n   * @returns - A point object representing the position of this object.\n   * @memberof scene.Container#\n   */\n  toGlobal(position, point, skipUpdate = false) {\n    if (!skipUpdate) {\n      this.updateLocalTransform();\n      const globalMatrix = updateTransformBackwards(this, new Matrix());\n      globalMatrix.append(this.localTransform);\n      return globalMatrix.apply(position, point);\n    }\n    return this.worldTransform.apply(position, point);\n  },\n  /**\n   * Calculates the local position of the container relative to another point.\n   * @param position - The world origin to calculate from.\n   * @param from - The Container to calculate the global position from.\n   * @param point - A Point object in which to store the value, optional\n   *  (otherwise will create a new Point).\n   * @param skipUpdate - Should we skip the update transform\n   * @returns - A point object representing the position of this object\n   * @memberof scene.Container#\n   */\n  toLocal(position, from, point, skipUpdate) {\n    if (from) {\n      position = from.toGlobal(position, point, skipUpdate);\n    }\n    if (!skipUpdate) {\n      this.updateLocalTransform();\n      const globalMatrix = updateTransformBackwards(this, new Matrix());\n      globalMatrix.append(this.localTransform);\n      return globalMatrix.applyInverse(position, point);\n    }\n    return this.worldTransform.applyInverse(position, point);\n  }\n};\n\nexport { toLocalGlobalMixin };\n//# sourceMappingURL=toLocalGlobalMixin.mjs.map\n","import { Matrix } from '../../maths/matrix/Matrix.mjs';\nimport { InstructionSet } from '../../rendering/renderers/shared/instructions/InstructionSet.mjs';\n\n\"use strict\";\nclass RenderGroup {\n  constructor() {\n    this.renderPipeId = \"renderGroup\";\n    this.root = null;\n    this.canBundle = false;\n    this.renderGroupParent = null;\n    this.renderGroupChildren = [];\n    this.worldTransform = new Matrix();\n    this.worldColorAlpha = 4294967295;\n    this.worldColor = 16777215;\n    this.worldAlpha = 1;\n    // these updates are transform changes..\n    this.childrenToUpdate = /* @__PURE__ */ Object.create(null);\n    this.updateTick = 0;\n    // these update are renderable changes..\n    this.childrenRenderablesToUpdate = { list: [], index: 0 };\n    // other\n    this.structureDidChange = true;\n    this.instructionSet = new InstructionSet();\n    this._onRenderContainers = [];\n  }\n  init(root) {\n    this.root = root;\n    if (root._onRender)\n      this.addOnRender(root);\n    root.didChange = true;\n    const children = root.children;\n    for (let i = 0; i < children.length; i++) {\n      this.addChild(children[i]);\n    }\n  }\n  reset() {\n    this.renderGroupChildren.length = 0;\n    for (const i in this.childrenToUpdate) {\n      const childrenAtDepth = this.childrenToUpdate[i];\n      childrenAtDepth.list.fill(null);\n      childrenAtDepth.index = 0;\n    }\n    this.childrenRenderablesToUpdate.index = 0;\n    this.childrenRenderablesToUpdate.list.fill(null);\n    this.root = null;\n    this.updateTick = 0;\n    this.structureDidChange = true;\n    this._onRenderContainers.length = 0;\n    this.renderGroupParent = null;\n  }\n  get localTransform() {\n    return this.root.localTransform;\n  }\n  addRenderGroupChild(renderGroupChild) {\n    if (renderGroupChild.renderGroupParent) {\n      renderGroupChild.renderGroupParent._removeRenderGroupChild(renderGroupChild);\n    }\n    renderGroupChild.renderGroupParent = this;\n    this.renderGroupChildren.push(renderGroupChild);\n  }\n  _removeRenderGroupChild(renderGroupChild) {\n    const index = this.renderGroupChildren.indexOf(renderGroupChild);\n    if (index > -1) {\n      this.renderGroupChildren.splice(index, 1);\n    }\n    renderGroupChild.renderGroupParent = null;\n  }\n  addChild(child) {\n    this.structureDidChange = true;\n    child.parentRenderGroup = this;\n    child.updateTick = -1;\n    if (child.parent === this.root) {\n      child.relativeRenderGroupDepth = 1;\n    } else {\n      child.relativeRenderGroupDepth = child.parent.relativeRenderGroupDepth + 1;\n    }\n    child.didChange = true;\n    this.onChildUpdate(child);\n    if (child.renderGroup) {\n      this.addRenderGroupChild(child.renderGroup);\n      return;\n    }\n    if (child._onRender)\n      this.addOnRender(child);\n    const children = child.children;\n    for (let i = 0; i < children.length; i++) {\n      this.addChild(children[i]);\n    }\n  }\n  removeChild(child) {\n    this.structureDidChange = true;\n    if (child._onRender) {\n      if (!child.renderGroup) {\n        this.removeOnRender(child);\n      }\n    }\n    child.parentRenderGroup = null;\n    if (child.renderGroup) {\n      this._removeRenderGroupChild(child.renderGroup);\n      return;\n    }\n    const children = child.children;\n    for (let i = 0; i < children.length; i++) {\n      this.removeChild(children[i]);\n    }\n  }\n  removeChildren(children) {\n    for (let i = 0; i < children.length; i++) {\n      this.removeChild(children[i]);\n    }\n  }\n  onChildUpdate(child) {\n    let childrenToUpdate = this.childrenToUpdate[child.relativeRenderGroupDepth];\n    if (!childrenToUpdate) {\n      childrenToUpdate = this.childrenToUpdate[child.relativeRenderGroupDepth] = {\n        index: 0,\n        list: []\n      };\n    }\n    childrenToUpdate.list[childrenToUpdate.index++] = child;\n  }\n  // SHOULD THIS BE HERE?\n  updateRenderable(container) {\n    if (container.globalDisplayStatus < 7)\n      return;\n    container.didViewUpdate = false;\n    this.instructionSet.renderPipes[container.renderPipeId].updateRenderable(container);\n  }\n  onChildViewUpdate(child) {\n    this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++] = child;\n  }\n  get isRenderable() {\n    return this.root.localDisplayStatus === 7 && this.worldAlpha > 0;\n  }\n  /**\n   * adding a container to the onRender list will make sure the user function\n   * passed in to the user defined 'onRender` callBack\n   * @param container - the container to add to the onRender list\n   */\n  addOnRender(container) {\n    this._onRenderContainers.push(container);\n  }\n  removeOnRender(container) {\n    this._onRenderContainers.splice(this._onRenderContainers.indexOf(container), 1);\n  }\n  runOnRender() {\n    for (let i = 0; i < this._onRenderContainers.length; i++) {\n      this._onRenderContainers[i]._onRender();\n    }\n  }\n  destroy() {\n    this.renderGroupParent = null;\n    this.root = null;\n    this.childrenRenderablesToUpdate = null;\n    this.childrenToUpdate = null;\n    this.renderGroupChildren = null;\n    this._onRenderContainers = null;\n    this.instructionSet = null;\n  }\n  getChildren(out = []) {\n    const children = this.root.children;\n    for (let i = 0; i < children.length; i++) {\n      this._getChildren(children[i], out);\n    }\n    return out;\n  }\n  _getChildren(container, out = []) {\n    out.push(container);\n    if (container.renderGroup)\n      return out;\n    const children = container.children;\n    for (let i = 0; i < children.length; i++) {\n      this._getChildren(children[i], out);\n    }\n    return out;\n  }\n}\n\nexport { RenderGroup };\n//# sourceMappingURL=RenderGroup.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { Color } from '../../color/Color.mjs';\nimport { cullingMixin } from '../../culling/cullingMixin.mjs';\nimport { Matrix } from '../../maths/matrix/Matrix.mjs';\nimport { RAD_TO_DEG, DEG_TO_RAD } from '../../maths/misc/const.mjs';\nimport { ObservablePoint } from '../../maths/point/ObservablePoint.mjs';\nimport { uid } from '../../utils/data/uid.mjs';\nimport { deprecation, v8_0_0 } from '../../utils/logging/deprecation.mjs';\nimport { BigPool } from '../../utils/pool/PoolGroup.mjs';\nimport { childrenHelperMixin } from './container-mixins/childrenHelperMixin.mjs';\nimport { effectsMixin } from './container-mixins/effectsMixin.mjs';\nimport { findMixin } from './container-mixins/findMixin.mjs';\nimport { measureMixin } from './container-mixins/measureMixin.mjs';\nimport { onRenderMixin } from './container-mixins/onRenderMixin.mjs';\nimport { sortMixin } from './container-mixins/sortMixin.mjs';\nimport { toLocalGlobalMixin } from './container-mixins/toLocalGlobalMixin.mjs';\nimport { RenderGroup } from './RenderGroup.mjs';\nimport { assignWithIgnore } from './utils/assignWithIgnore.mjs';\n\n\"use strict\";\nconst defaultSkew = new ObservablePoint(null);\nconst defaultPivot = new ObservablePoint(null);\nconst defaultScale = new ObservablePoint(null, 1, 1);\nconst UPDATE_COLOR = 1;\nconst UPDATE_BLEND = 2;\nconst UPDATE_VISIBLE = 4;\nconst UPDATE_TRANSFORM = 8;\nclass Container extends EventEmitter {\n  constructor(options = {}) {\n    super();\n    /** @private */\n    this.uid = uid(\"renderable\");\n    /** @private */\n    this._updateFlags = 15;\n    // the render group this container owns\n    /** @private */\n    this.renderGroup = null;\n    // the render group this container belongs to\n    /** @private */\n    this.parentRenderGroup = null;\n    // the index of the container in the render group\n    /** @private */\n    this.parentRenderGroupIndex = 0;\n    // set to true if the container has changed. It is reset once the changes have been applied\n    // by the transform system\n    // its here to stop ensure that when things change, only one update gets registers with the transform system\n    /** @private */\n    this.didChange = false;\n    // same as above, but for the renderable\n    /** @private */\n    this.didViewUpdate = false;\n    // how deep is the container relative to its render group..\n    // unless the element is the root render group - it will be relative to its parent\n    /** @private */\n    this.relativeRenderGroupDepth = 0;\n    /**\n     * The array of children of this container.\n     * @readonly\n     */\n    this.children = [];\n    /** The display object container that contains this display object. */\n    this.parent = null;\n    // used internally for changing up the render order.. mainly for masks and filters\n    // TODO setting this should cause a rebuild??\n    /** @private */\n    this.includeInBuild = true;\n    /** @private */\n    this.measurable = true;\n    /** @private */\n    this.isSimple = true;\n    // / /////////////Transform related props//////////////\n    // used by the transform system to check if a container needs to be updated that frame\n    // if the tick matches the current transform system tick, it is not updated again\n    /**\n     * @internal\n     * @ignore\n     */\n    this.updateTick = -1;\n    /**\n     * Current transform of the object based on local factors: position, scale, other stuff.\n     * @readonly\n     */\n    this.localTransform = new Matrix();\n    /**\n     * The relative group transform is a transform relative to the render group it belongs too. It will include all parent\n     * transforms and up to the render group (think of it as kind of like a stage - but the stage can be nested).\n     * If this container is is self a render group matrix will be relative to its parent render group\n     * @readonly\n     */\n    this.relativeGroupTransform = new Matrix();\n    /**\n     * The group transform is a transform relative to the render group it belongs too.\n     * If this container is render group then this will be an identity matrix. other wise it\n     * will be the same as the relativeGroupTransform.\n     * Use this value when actually rendering things to the screen\n     * @readonly\n     */\n    this.groupTransform = this.relativeGroupTransform;\n    /** If the object has been destroyed via destroy(). If true, it should not be used. */\n    this.destroyed = false;\n    // transform data..\n    /**\n     * The coordinate of the object relative to the local coordinates of the parent.\n     * @internal\n     * @ignore\n     */\n    this._position = new ObservablePoint(this, 0, 0);\n    /**\n     * The scale factor of the object.\n     * @internal\n     * @ignore\n     */\n    this._scale = defaultScale;\n    /**\n     * The pivot point of the container that it rotates around.\n     * @internal\n     * @ignore\n     */\n    this._pivot = defaultPivot;\n    /**\n     * The skew amount, on the x and y axis.\n     * @internal\n     * @ignore\n     */\n    this._skew = defaultSkew;\n    /**\n     * The X-coordinate value of the normalized local X axis,\n     * the first column of the local transformation matrix without a scale.\n     * @internal\n     * @ignore\n     */\n    this._cx = 1;\n    /**\n     * The Y-coordinate value of the normalized local X axis,\n     * the first column of the local transformation matrix without a scale.\n     * @internal\n     * @ignore\n     */\n    this._sx = 0;\n    /**\n     * The X-coordinate value of the normalized local Y axis,\n     * the second column of the local transformation matrix without a scale.\n     * @internal\n     * @ignore\n     */\n    this._cy = 0;\n    /**\n     * The Y-coordinate value of the normalized local Y axis,\n     * the second column of the local transformation matrix without a scale.\n     * @internal\n     * @ignore\n     */\n    this._sy = 1;\n    /**\n     * The rotation amount.\n     * @internal\n     * @ignore\n     */\n    this._rotation = 0;\n    // / COLOR related props //////////////\n    // color stored as ABGR\n    this.localColor = 16777215;\n    this.localAlpha = 1;\n    this.groupAlpha = 1;\n    // A\n    this.groupColor = 16777215;\n    // BGR\n    this.groupColorAlpha = 4294967295;\n    // ABGR\n    // / BLEND related props //////////////\n    /**\n     * @internal\n     * @ignore\n     */\n    this.localBlendMode = \"inherit\";\n    /**\n     * @internal\n     * @ignore\n     */\n    this.groupBlendMode = \"normal\";\n    // / VISIBILITY related props //////////////\n    // visibility\n    // 0b11\n    // first bit is visible, second bit is renderable\n    /**\n     * This property holds three bits: culled, visible, renderable\n     * the third bit represents culling (0 = culled, 1 = not culled) 0b100\n     * the second bit represents visibility (0 = not visible, 1 = visible) 0b010\n     * the first bit represents renderable (0 = not renderable, 1 = renderable) 0b001\n     * @internal\n     * @ignore\n     */\n    this.localDisplayStatus = 7;\n    // 0b11 | 0b10 | 0b01 | 0b00\n    /**\n     * @internal\n     * @ignore\n     */\n    this.globalDisplayStatus = 7;\n    /**\n     * A value that increments each time the container is modified\n     * the first 12 bits represent the container changes (eg transform, alpha, visible etc)\n     * the second 12 bits represent:\n     *      - for view changes (eg texture swap, geometry change etc)\n     *      - containers changes (eg children added, removed etc)\n     *\n     *  view          container\n     * [000000000000][00000000000]\n     * @ignore\n     */\n    this._didChangeId = 0;\n    /**\n     * property that tracks if the container transform has changed\n     * @ignore\n     */\n    this._didLocalTransformChangeId = -1;\n    assignWithIgnore(this, options, {\n      children: true,\n      parent: true,\n      effects: true\n    });\n    options.children?.forEach((child) => this.addChild(child));\n    this.effects = [];\n    options.parent?.addChild(this);\n  }\n  /**\n   * Mixes all enumerable properties and methods from a source object to Container.\n   * @param source - The source of properties and methods to mix in.\n   */\n  static mixin(source) {\n    Object.defineProperties(Container.prototype, Object.getOwnPropertyDescriptors(source));\n  }\n  /**\n   * Adds one or more children to the container.\n   *\n   * Multiple items can be added like so: `myContainer.addChild(thingOne, thingTwo, thingThree)`\n   * @param {...Container} children - The Container(s) to add to the container\n   * @returns {Container} - The first child that was added.\n   */\n  addChild(...children) {\n    if (!this.allowChildren) {\n      deprecation(v8_0_0, \"addChild: Only Containers will be allowed to add children in v8.0.0\");\n    }\n    if (children.length > 1) {\n      for (let i = 0; i < children.length; i++) {\n        this.addChild(children[i]);\n      }\n      return children[0];\n    }\n    const child = children[0];\n    if (child.parent === this) {\n      this.children.splice(this.children.indexOf(child), 1);\n      this.children.push(child);\n      if (this.parentRenderGroup) {\n        this.parentRenderGroup.structureDidChange = true;\n      }\n      return child;\n    }\n    if (child.parent) {\n      child.parent.removeChild(child);\n    }\n    this.children.push(child);\n    if (this.sortableChildren)\n      this.sortDirty = true;\n    child.parent = this;\n    child.didChange = true;\n    child.didViewUpdate = false;\n    child._updateFlags = 15;\n    const renderGroup = this.renderGroup || this.parentRenderGroup;\n    if (renderGroup) {\n      renderGroup.addChild(child);\n    }\n    this.emit(\"childAdded\", child, this, this.children.length - 1);\n    child.emit(\"added\", this);\n    this._didChangeId += 1 << 12;\n    if (child._zIndex !== 0) {\n      child.depthOfChildModified();\n    }\n    return child;\n  }\n  /**\n   * Removes one or more children from the container.\n   * @param {...Container} children - The Container(s) to remove\n   * @returns {Container} The first child that was removed.\n   */\n  removeChild(...children) {\n    if (children.length > 1) {\n      for (let i = 0; i < children.length; i++) {\n        this.removeChild(children[i]);\n      }\n      return children[0];\n    }\n    const child = children[0];\n    const index = this.children.indexOf(child);\n    if (index > -1) {\n      this._didChangeId += 1 << 12;\n      this.children.splice(index, 1);\n      if (this.renderGroup) {\n        this.renderGroup.removeChild(child);\n      } else if (this.parentRenderGroup) {\n        this.parentRenderGroup.removeChild(child);\n      }\n      child.parent = null;\n      this.emit(\"childRemoved\", child, this, index);\n      child.emit(\"removed\", this);\n    }\n    return child;\n  }\n  /** @ignore */\n  _onUpdate(point) {\n    if (point) {\n      if (point === this._skew) {\n        this._updateSkew();\n      }\n    }\n    this._didChangeId++;\n    if (this.didChange)\n      return;\n    this.didChange = true;\n    if (this.parentRenderGroup) {\n      this.parentRenderGroup.onChildUpdate(this);\n    }\n  }\n  set isRenderGroup(value) {\n    if (!!this.renderGroup === value)\n      return;\n    if (value) {\n      this.enableRenderGroup();\n    } else {\n      this.disableRenderGroup();\n    }\n  }\n  /**\n   * Returns true if this container is a render group.\n   * This means that it will be rendered as a separate pass, with its own set of instructions\n   */\n  get isRenderGroup() {\n    return !!this.renderGroup;\n  }\n  /**\n   * Calling this enables a render group for this container.\n   * This means it will be rendered as a separate set of instructions.\n   * The transform of the container will also be handled on the GPU rather than the CPU.\n   */\n  enableRenderGroup() {\n    if (this.renderGroup)\n      return;\n    const parentRenderGroup = this.parentRenderGroup;\n    parentRenderGroup?.removeChild(this);\n    this.renderGroup = BigPool.get(RenderGroup, this);\n    this.groupTransform = Matrix.IDENTITY;\n    parentRenderGroup?.addChild(this);\n    this._updateIsSimple();\n  }\n  /** This will disable the render group for this container. */\n  disableRenderGroup() {\n    if (!this.renderGroup)\n      return;\n    const parentRenderGroup = this.parentRenderGroup;\n    parentRenderGroup?.removeChild(this);\n    BigPool.return(this.renderGroup);\n    this.renderGroup = null;\n    this.groupTransform = this.relativeGroupTransform;\n    parentRenderGroup?.addChild(this);\n    this._updateIsSimple();\n  }\n  /** @ignore */\n  _updateIsSimple() {\n    this.isSimple = !this.renderGroup && this.effects.length === 0;\n  }\n  /**\n   * Current transform of the object based on world (parent) factors.\n   * @readonly\n   */\n  get worldTransform() {\n    this._worldTransform || (this._worldTransform = new Matrix());\n    if (this.renderGroup) {\n      this._worldTransform.copyFrom(this.renderGroup.worldTransform);\n    } else if (this.parentRenderGroup) {\n      this._worldTransform.appendFrom(this.relativeGroupTransform, this.parentRenderGroup.worldTransform);\n    }\n    return this._worldTransform;\n  }\n  // / ////// transform related stuff\n  /**\n   * The position of the container on the x axis relative to the local coordinates of the parent.\n   * An alias to position.x\n   */\n  get x() {\n    return this._position.x;\n  }\n  set x(value) {\n    this._position.x = value;\n  }\n  /**\n   * The position of the container on the y axis relative to the local coordinates of the parent.\n   * An alias to position.y\n   */\n  get y() {\n    return this._position.y;\n  }\n  set y(value) {\n    this._position.y = value;\n  }\n  /**\n   * The coordinate of the object relative to the local coordinates of the parent.\n   * @since 4.0.0\n   */\n  get position() {\n    return this._position;\n  }\n  set position(value) {\n    this._position.copyFrom(value);\n  }\n  /**\n   * The rotation of the object in radians.\n   * 'rotation' and 'angle' have the same effect on a display object; rotation is in radians, angle is in degrees.\n   */\n  get rotation() {\n    return this._rotation;\n  }\n  set rotation(value) {\n    if (this._rotation !== value) {\n      this._rotation = value;\n      this._onUpdate(this._skew);\n    }\n  }\n  /**\n   * The angle of the object in degrees.\n   * 'rotation' and 'angle' have the same effect on a display object; rotation is in radians, angle is in degrees.\n   */\n  get angle() {\n    return this.rotation * RAD_TO_DEG;\n  }\n  set angle(value) {\n    this.rotation = value * DEG_TO_RAD;\n  }\n  /**\n   * The center of rotation, scaling, and skewing for this display object in its local space. The `position`\n   * is the projection of `pivot` in the parent's local space.\n   *\n   * By default, the pivot is the origin (0, 0).\n   * @since 4.0.0\n   */\n  get pivot() {\n    if (this._pivot === defaultPivot) {\n      this._pivot = new ObservablePoint(this, 0, 0);\n    }\n    return this._pivot;\n  }\n  set pivot(value) {\n    if (this._pivot === defaultPivot) {\n      this._pivot = new ObservablePoint(this, 0, 0);\n    }\n    typeof value === \"number\" ? this._pivot.set(value) : this._pivot.copyFrom(value);\n  }\n  /**\n   * The skew factor for the object in radians.\n   * @since 4.0.0\n   */\n  get skew() {\n    if (this._skew === defaultSkew) {\n      this._skew = new ObservablePoint(this, 0, 0);\n    }\n    return this._skew;\n  }\n  set skew(value) {\n    if (this._skew === defaultSkew) {\n      this._skew = new ObservablePoint(this, 0, 0);\n    }\n    this._skew.copyFrom(value);\n  }\n  /**\n   * The scale factors of this object along the local coordinate axes.\n   *\n   * The default scale is (1, 1).\n   * @since 4.0.0\n   */\n  get scale() {\n    if (this._scale === defaultScale) {\n      this._scale = new ObservablePoint(this, 1, 1);\n    }\n    return this._scale;\n  }\n  set scale(value) {\n    if (this._scale === defaultScale) {\n      this._scale = new ObservablePoint(this, 0, 0);\n    }\n    typeof value === \"number\" ? this._scale.set(value) : this._scale.copyFrom(value);\n  }\n  /**\n   * The width of the Container, setting this will actually modify the scale to achieve the value set.\n   * @memberof scene.Container#\n   */\n  get width() {\n    return Math.abs(this.scale.x * this.getLocalBounds().width);\n  }\n  set width(value) {\n    const localWidth = this.getLocalBounds().width;\n    this._setWidth(value, localWidth);\n  }\n  /**\n   * The height of the Container, setting this will actually modify the scale to achieve the value set.\n   * @memberof scene.Container#\n   */\n  get height() {\n    return Math.abs(this.scale.y * this.getLocalBounds().height);\n  }\n  set height(value) {\n    const localHeight = this.getLocalBounds().height;\n    this._setHeight(value, localHeight);\n  }\n  /**\n   * Retrieves the size of the container as a [Size]{@link Size} object.\n   * This is faster than get the width and height separately.\n   * @param out - Optional object to store the size in.\n   * @returns - The size of the container.\n   * @memberof scene.Container#\n   */\n  getSize(out) {\n    if (!out) {\n      out = {};\n    }\n    const bounds = this.getLocalBounds();\n    out.width = Math.abs(this.scale.x * bounds.width);\n    out.height = Math.abs(this.scale.y * bounds.height);\n    return out;\n  }\n  /**\n   * Sets the size of the container to the specified width and height.\n   * This is faster than setting the width and height separately.\n   * @param value - This can be either a number or a [Size]{@link Size} object.\n   * @param height - The height to set. Defaults to the value of `width` if not provided.\n   * @memberof scene.Container#\n   */\n  setSize(value, height) {\n    const size = this.getLocalBounds();\n    let convertedWidth;\n    let convertedHeight;\n    if (typeof value !== \"object\") {\n      convertedWidth = value;\n      convertedHeight = height ?? value;\n    } else {\n      convertedWidth = value.width;\n      convertedHeight = value.height ?? value.width;\n    }\n    if (convertedWidth !== void 0) {\n      this._setWidth(convertedWidth, size.width);\n    }\n    if (convertedHeight !== void 0) {\n      this._setHeight(convertedHeight, size.height);\n    }\n  }\n  /** Called when the skew or the rotation changes. */\n  _updateSkew() {\n    const rotation = this._rotation;\n    const skew = this._skew;\n    this._cx = Math.cos(rotation + skew._y);\n    this._sx = Math.sin(rotation + skew._y);\n    this._cy = -Math.sin(rotation - skew._x);\n    this._sy = Math.cos(rotation - skew._x);\n  }\n  /**\n   * Updates the transform properties of the container (accepts partial values).\n   * @param {object} opts - The options for updating the transform.\n   * @param {number} opts.x - The x position of the container.\n   * @param {number} opts.y - The y position of the container.\n   * @param {number} opts.scaleX - The scale factor on the x-axis.\n   * @param {number} opts.scaleY - The scale factor on the y-axis.\n   * @param {number} opts.rotation - The rotation of the container, in radians.\n   * @param {number} opts.skewX - The skew factor on the x-axis.\n   * @param {number} opts.skewY - The skew factor on the y-axis.\n   * @param {number} opts.pivotX - The x coordinate of the pivot point.\n   * @param {number} opts.pivotY - The y coordinate of the pivot point.\n   */\n  updateTransform(opts) {\n    this.position.set(\n      typeof opts.x === \"number\" ? opts.x : this.position.x,\n      typeof opts.y === \"number\" ? opts.y : this.position.y\n    );\n    this.scale.set(\n      typeof opts.scaleX === \"number\" ? opts.scaleX || 1 : this.scale.x,\n      typeof opts.scaleY === \"number\" ? opts.scaleY || 1 : this.scale.y\n    );\n    this.rotation = typeof opts.rotation === \"number\" ? opts.rotation : this.rotation;\n    this.skew.set(\n      typeof opts.skewX === \"number\" ? opts.skewX : this.skew.x,\n      typeof opts.skewY === \"number\" ? opts.skewY : this.skew.y\n    );\n    this.pivot.set(\n      typeof opts.pivotX === \"number\" ? opts.pivotX : this.pivot.x,\n      typeof opts.pivotY === \"number\" ? opts.pivotY : this.pivot.y\n    );\n    return this;\n  }\n  /**\n   * Updates the local transform using the given matrix.\n   * @param matrix - The matrix to use for updating the transform.\n   */\n  setFromMatrix(matrix) {\n    matrix.decompose(this);\n  }\n  /** Updates the local transform. */\n  updateLocalTransform() {\n    const localTransformChangeId = this._didChangeId & 4095;\n    if (this._didLocalTransformChangeId === localTransformChangeId)\n      return;\n    this._didLocalTransformChangeId = localTransformChangeId;\n    const lt = this.localTransform;\n    const scale = this._scale;\n    const pivot = this._pivot;\n    const position = this._position;\n    const sx = scale._x;\n    const sy = scale._y;\n    const px = pivot._x;\n    const py = pivot._y;\n    lt.a = this._cx * sx;\n    lt.b = this._sx * sx;\n    lt.c = this._cy * sy;\n    lt.d = this._sy * sy;\n    lt.tx = position._x - (px * lt.a + py * lt.c);\n    lt.ty = position._y - (px * lt.b + py * lt.d);\n  }\n  // / ///// color related stuff\n  set alpha(value) {\n    if (value === this.localAlpha)\n      return;\n    this.localAlpha = value;\n    this._updateFlags |= UPDATE_COLOR;\n    this._onUpdate();\n  }\n  /** The opacity of the object. */\n  get alpha() {\n    return this.localAlpha;\n  }\n  set tint(value) {\n    const tempColor = Color.shared.setValue(value ?? 16777215);\n    const bgr = tempColor.toBgrNumber();\n    if (bgr === this.localColor)\n      return;\n    this.localColor = bgr;\n    this._updateFlags |= UPDATE_COLOR;\n    this._onUpdate();\n  }\n  /**\n   * The tint applied to the sprite. This is a hex value.\n   *\n   * A value of 0xFFFFFF will remove any tint effect.\n   * @default 0xFFFFFF\n   */\n  get tint() {\n    const bgr = this.localColor;\n    return ((bgr & 255) << 16) + (bgr & 65280) + (bgr >> 16 & 255);\n  }\n  // / //////////////// blend related stuff\n  set blendMode(value) {\n    if (this.localBlendMode === value)\n      return;\n    if (this.parentRenderGroup) {\n      this.parentRenderGroup.structureDidChange = true;\n    }\n    this._updateFlags |= UPDATE_BLEND;\n    this.localBlendMode = value;\n    this._onUpdate();\n  }\n  /**\n   * The blend mode to be applied to the sprite. Apply a value of `'normal'` to reset the blend mode.\n   * @default 'normal'\n   */\n  get blendMode() {\n    return this.localBlendMode;\n  }\n  // / ///////// VISIBILITY / RENDERABLE /////////////////\n  /** The visibility of the object. If false the object will not be drawn, and the transform will not be updated. */\n  get visible() {\n    return !!(this.localDisplayStatus & 2);\n  }\n  set visible(value) {\n    const valueNumber = value ? 2 : 0;\n    if ((this.localDisplayStatus & 2) === valueNumber)\n      return;\n    if (this.parentRenderGroup) {\n      this.parentRenderGroup.structureDidChange = true;\n    }\n    this._updateFlags |= UPDATE_VISIBLE;\n    this.localDisplayStatus ^= 2;\n    this._onUpdate();\n  }\n  /** @ignore */\n  get culled() {\n    return !(this.localDisplayStatus & 4);\n  }\n  /** @ignore */\n  set culled(value) {\n    const valueNumber = value ? 0 : 4;\n    if ((this.localDisplayStatus & 4) === valueNumber)\n      return;\n    if (this.parentRenderGroup) {\n      this.parentRenderGroup.structureDidChange = true;\n    }\n    this._updateFlags |= UPDATE_VISIBLE;\n    this.localDisplayStatus ^= 4;\n    this._onUpdate();\n  }\n  /** Can this object be rendered, if false the object will not be drawn but the transform will still be updated. */\n  get renderable() {\n    return !!(this.localDisplayStatus & 1);\n  }\n  set renderable(value) {\n    const valueNumber = value ? 1 : 0;\n    if ((this.localDisplayStatus & 1) === valueNumber)\n      return;\n    this._updateFlags |= UPDATE_VISIBLE;\n    this.localDisplayStatus ^= 1;\n    if (this.parentRenderGroup) {\n      this.parentRenderGroup.structureDidChange = true;\n    }\n    this._onUpdate();\n  }\n  /** Whether or not the object should be rendered. */\n  get isRenderable() {\n    return this.localDisplayStatus === 7 && this.groupAlpha > 0;\n  }\n  /**\n   * Removes all internal references and listeners as well as removes children from the display list.\n   * Do not use a Container after calling `destroy`.\n   * @param options - Options parameter. A boolean will act as if all options\n   *  have been set to that value\n   * @param {boolean} [options.children=false] - if set to true, all the children will have their destroy\n   *  method called as well. 'options' will be passed on to those calls.\n   * @param {boolean} [options.texture=false] - Only used for children with textures e.g. Sprites. If options.children\n   * is set to true it should destroy the texture of the child sprite\n   * @param {boolean} [options.textureSource=false] - Only used for children with textures e.g. Sprites.\n   * If options.children is set to true it should destroy the texture source of the child sprite\n   * @param {boolean} [options.context=false] - Only used for children with graphicsContexts e.g. Graphics.\n   * If options.children is set to true it should destroy the context of the child graphics\n   */\n  destroy(options = false) {\n    if (this.destroyed)\n      return;\n    this.destroyed = true;\n    const oldChildren = this.removeChildren(0, this.children.length);\n    this.removeFromParent();\n    this.parent = null;\n    this._maskEffect = null;\n    this._filterEffect = null;\n    this.effects = null;\n    this._position = null;\n    this._scale = null;\n    this._pivot = null;\n    this._skew = null;\n    this.emit(\"destroyed\", this);\n    this.removeAllListeners();\n    const destroyChildren = typeof options === \"boolean\" ? options : options?.children;\n    if (destroyChildren) {\n      for (let i = 0; i < oldChildren.length; ++i) {\n        oldChildren[i].destroy(options);\n      }\n    }\n    this.renderGroup?.destroy();\n    this.renderGroup = null;\n  }\n}\nContainer.mixin(childrenHelperMixin);\nContainer.mixin(toLocalGlobalMixin);\nContainer.mixin(onRenderMixin);\nContainer.mixin(measureMixin);\nContainer.mixin(effectsMixin);\nContainer.mixin(findMixin);\nContainer.mixin(sortMixin);\nContainer.mixin(cullingMixin);\n\nexport { Container, UPDATE_BLEND, UPDATE_COLOR, UPDATE_TRANSFORM, UPDATE_VISIBLE };\n//# sourceMappingURL=Container.mjs.map\n","\"use strict\";\nfunction assignWithIgnore(target, options, ignore = {}) {\n  for (const key in options) {\n    if (!ignore[key] && options[key] !== void 0) {\n      target[key] = options[key];\n    }\n  }\n}\n\nexport { assignWithIgnore };\n//# sourceMappingURL=assignWithIgnore.mjs.map\n","\"use strict\";\nconst cullingMixin = {\n  cullArea: null,\n  cullable: false,\n  cullableChildren: true\n};\n\nexport { cullingMixin };\n//# sourceMappingURL=cullingMixin.mjs.map\n","import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { Rectangle } from '../../../maths/shapes/Rectangle.mjs';\n\n\"use strict\";\nconst defaultMatrix = new Matrix();\nclass Bounds {\n  constructor(minX = Infinity, minY = Infinity, maxX = -Infinity, maxY = -Infinity) {\n    /** @default Infinity */\n    this.minX = Infinity;\n    /** @default Infinity */\n    this.minY = Infinity;\n    /** @default -Infinity */\n    this.maxX = -Infinity;\n    /** @default -Infinity */\n    this.maxY = -Infinity;\n    this.matrix = defaultMatrix;\n    this.minX = minX;\n    this.minY = minY;\n    this.maxX = maxX;\n    this.maxY = maxY;\n  }\n  /**\n   * Checks if bounds are empty.\n   * @returns - True if empty.\n   */\n  isEmpty() {\n    return this.minX > this.maxX || this.minY > this.maxY;\n  }\n  /** The bounding rectangle of the bounds. */\n  get rectangle() {\n    if (!this._rectangle) {\n      this._rectangle = new Rectangle();\n    }\n    const rectangle = this._rectangle;\n    if (this.minX > this.maxX || this.minY > this.maxY) {\n      rectangle.x = 0;\n      rectangle.y = 0;\n      rectangle.width = 0;\n      rectangle.height = 0;\n    } else {\n      rectangle.copyFromBounds(this);\n    }\n    return rectangle;\n  }\n  /** Clears the bounds and resets. */\n  clear() {\n    this.minX = Infinity;\n    this.minY = Infinity;\n    this.maxX = -Infinity;\n    this.maxY = -Infinity;\n    this.matrix = defaultMatrix;\n    return this;\n  }\n  /**\n   * Sets the bounds.\n   * @param x0 - left X of frame\n   * @param y0 - top Y of frame\n   * @param x1 - right X of frame\n   * @param y1 - bottom Y of frame\n   */\n  set(x0, y0, x1, y1) {\n    this.minX = x0;\n    this.minY = y0;\n    this.maxX = x1;\n    this.maxY = y1;\n  }\n  /**\n   * Adds sprite frame\n   * @param x0 - left X of frame\n   * @param y0 - top Y of frame\n   * @param x1 - right X of frame\n   * @param y1 - bottom Y of frame\n   * @param matrix\n   */\n  addFrame(x0, y0, x1, y1, matrix) {\n    matrix || (matrix = this.matrix);\n    const a = matrix.a;\n    const b = matrix.b;\n    const c = matrix.c;\n    const d = matrix.d;\n    const tx = matrix.tx;\n    const ty = matrix.ty;\n    let minX = this.minX;\n    let minY = this.minY;\n    let maxX = this.maxX;\n    let maxY = this.maxY;\n    let x = a * x0 + c * y0 + tx;\n    let y = b * x0 + d * y0 + ty;\n    if (x < minX)\n      minX = x;\n    if (y < minY)\n      minY = y;\n    if (x > maxX)\n      maxX = x;\n    if (y > maxY)\n      maxY = y;\n    x = a * x1 + c * y0 + tx;\n    y = b * x1 + d * y0 + ty;\n    if (x < minX)\n      minX = x;\n    if (y < minY)\n      minY = y;\n    if (x > maxX)\n      maxX = x;\n    if (y > maxY)\n      maxY = y;\n    x = a * x0 + c * y1 + tx;\n    y = b * x0 + d * y1 + ty;\n    if (x < minX)\n      minX = x;\n    if (y < minY)\n      minY = y;\n    if (x > maxX)\n      maxX = x;\n    if (y > maxY)\n      maxY = y;\n    x = a * x1 + c * y1 + tx;\n    y = b * x1 + d * y1 + ty;\n    if (x < minX)\n      minX = x;\n    if (y < minY)\n      minY = y;\n    if (x > maxX)\n      maxX = x;\n    if (y > maxY)\n      maxY = y;\n    this.minX = minX;\n    this.minY = minY;\n    this.maxX = maxX;\n    this.maxY = maxY;\n  }\n  /**\n   * Adds a rectangle to the bounds.\n   * @param rect - The rectangle to be added.\n   * @param matrix - The matrix to apply to the bounds.\n   */\n  addRect(rect, matrix) {\n    this.addFrame(rect.x, rect.y, rect.x + rect.width, rect.y + rect.height, matrix);\n  }\n  /**\n   * Adds other {@link Bounds}.\n   * @param bounds - The Bounds to be added\n   * @param matrix\n   */\n  addBounds(bounds, matrix) {\n    this.addFrame(bounds.minX, bounds.minY, bounds.maxX, bounds.maxY, matrix);\n  }\n  /**\n   * Adds other Bounds, masked with Bounds.\n   * @param mask - The Bounds to be added.\n   */\n  addBoundsMask(mask) {\n    this.minX = this.minX > mask.minX ? this.minX : mask.minX;\n    this.minY = this.minY > mask.minY ? this.minY : mask.minY;\n    this.maxX = this.maxX < mask.maxX ? this.maxX : mask.maxX;\n    this.maxY = this.maxY < mask.maxY ? this.maxY : mask.maxY;\n  }\n  /**\n   * Adds other Bounds, multiplied with matrix.\n   * @param matrix - The matrix to apply to the bounds.\n   */\n  applyMatrix(matrix) {\n    const minX = this.minX;\n    const minY = this.minY;\n    const maxX = this.maxX;\n    const maxY = this.maxY;\n    const { a, b, c, d, tx, ty } = matrix;\n    let x = a * minX + c * minY + tx;\n    let y = b * minX + d * minY + ty;\n    this.minX = x;\n    this.minY = y;\n    this.maxX = x;\n    this.maxY = y;\n    x = a * maxX + c * minY + tx;\n    y = b * maxX + d * minY + ty;\n    this.minX = x < this.minX ? x : this.minX;\n    this.minY = y < this.minY ? y : this.minY;\n    this.maxX = x > this.maxX ? x : this.maxX;\n    this.maxY = y > this.maxY ? y : this.maxY;\n    x = a * minX + c * maxY + tx;\n    y = b * minX + d * maxY + ty;\n    this.minX = x < this.minX ? x : this.minX;\n    this.minY = y < this.minY ? y : this.minY;\n    this.maxX = x > this.maxX ? x : this.maxX;\n    this.maxY = y > this.maxY ? y : this.maxY;\n    x = a * maxX + c * maxY + tx;\n    y = b * maxX + d * maxY + ty;\n    this.minX = x < this.minX ? x : this.minX;\n    this.minY = y < this.minY ? y : this.minY;\n    this.maxX = x > this.maxX ? x : this.maxX;\n    this.maxY = y > this.maxY ? y : this.maxY;\n  }\n  /**\n   * Resizes the bounds object to include the given rectangle.\n   * @param rect - The rectangle to be included.\n   */\n  fit(rect) {\n    if (this.minX < rect.left)\n      this.minX = rect.left;\n    if (this.maxX > rect.right)\n      this.maxX = rect.right;\n    if (this.minY < rect.top)\n      this.minY = rect.top;\n    if (this.maxY > rect.bottom)\n      this.maxY = rect.bottom;\n    return this;\n  }\n  /**\n   * Resizes the bounds object to include the given bounds.\n   * @param left - The left value of the bounds.\n   * @param right - The right value of the bounds.\n   * @param top - The top value of the bounds.\n   * @param bottom - The bottom value of the bounds.\n   */\n  fitBounds(left, right, top, bottom) {\n    if (this.minX < left)\n      this.minX = left;\n    if (this.maxX > right)\n      this.maxX = right;\n    if (this.minY < top)\n      this.minY = top;\n    if (this.maxY > bottom)\n      this.maxY = bottom;\n    return this;\n  }\n  /**\n   * Pads bounds object, making it grow in all directions.\n   * If paddingY is omitted, both paddingX and paddingY will be set to paddingX.\n   * @param paddingX - The horizontal padding amount.\n   * @param paddingY - The vertical padding amount.\n   */\n  pad(paddingX, paddingY = paddingX) {\n    this.minX -= paddingX;\n    this.maxX += paddingX;\n    this.minY -= paddingY;\n    this.maxY += paddingY;\n    return this;\n  }\n  /** Ceils the bounds. */\n  ceil() {\n    this.minX = Math.floor(this.minX);\n    this.minY = Math.floor(this.minY);\n    this.maxX = Math.ceil(this.maxX);\n    this.maxY = Math.ceil(this.maxY);\n    return this;\n  }\n  /** Clones the bounds. */\n  clone() {\n    return new Bounds(this.minX, this.minY, this.maxX, this.maxY);\n  }\n  /**\n   * Scales the bounds by the given values\n   * @param x - The X value to scale by.\n   * @param y - The Y value to scale by.\n   */\n  scale(x, y = x) {\n    this.minX *= x;\n    this.minY *= y;\n    this.maxX *= x;\n    this.maxY *= y;\n    return this;\n  }\n  /** the x value of the bounds. */\n  get x() {\n    return this.minX;\n  }\n  set x(value) {\n    const width = this.maxX - this.minX;\n    this.minX = value;\n    this.maxX = value + width;\n  }\n  /** the y value of the bounds. */\n  get y() {\n    return this.minY;\n  }\n  set y(value) {\n    const height = this.maxY - this.minY;\n    this.minY = value;\n    this.maxY = value + height;\n  }\n  /** the width value of the bounds. */\n  get width() {\n    return this.maxX - this.minX;\n  }\n  set width(value) {\n    this.maxX = this.minX + value;\n  }\n  /** the height value of the bounds. */\n  get height() {\n    return this.maxY - this.minY;\n  }\n  set height(value) {\n    this.maxY = this.minY + value;\n  }\n  /** the left value of the bounds. */\n  get left() {\n    return this.minX;\n  }\n  /** the right value of the bounds. */\n  get right() {\n    return this.maxX;\n  }\n  /** the top value of the bounds. */\n  get top() {\n    return this.minY;\n  }\n  /** the bottom value of the bounds. */\n  get bottom() {\n    return this.maxY;\n  }\n  /** Is the bounds positive. */\n  get isPositive() {\n    return this.maxX - this.minX > 0 && this.maxY - this.minY > 0;\n  }\n  get isValid() {\n    return this.minX + this.minY !== Infinity;\n  }\n  /**\n   * Adds screen vertices from array\n   * @param vertexData - calculated vertices\n   * @param beginOffset - begin offset\n   * @param endOffset - end offset, excluded\n   * @param matrix\n   */\n  addVertexData(vertexData, beginOffset, endOffset, matrix) {\n    let minX = this.minX;\n    let minY = this.minY;\n    let maxX = this.maxX;\n    let maxY = this.maxY;\n    matrix || (matrix = this.matrix);\n    const a = matrix.a;\n    const b = matrix.b;\n    const c = matrix.c;\n    const d = matrix.d;\n    const tx = matrix.tx;\n    const ty = matrix.ty;\n    for (let i = beginOffset; i < endOffset; i += 2) {\n      const localX = vertexData[i];\n      const localY = vertexData[i + 1];\n      const x = a * localX + c * localY + tx;\n      const y = b * localX + d * localY + ty;\n      minX = x < minX ? x : minX;\n      minY = y < minY ? y : minY;\n      maxX = x > maxX ? x : maxX;\n      maxY = y > maxY ? y : maxY;\n    }\n    this.minX = minX;\n    this.minY = minY;\n    this.maxX = maxX;\n    this.maxY = maxY;\n  }\n  /**\n   * Checks if the point is contained within the bounds.\n   * @param x - x coordinate\n   * @param y - y coordinate\n   */\n  containsPoint(x, y) {\n    if (this.minX <= x && this.minY <= y && this.maxX >= x && this.maxY >= y) {\n      return true;\n    }\n    return false;\n  }\n  toString() {\n    return `[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`;\n  }\n}\n\nexport { Bounds };\n//# sourceMappingURL=Bounds.mjs.map\n","import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { matrixPool, boundsPool } from './utils/matrixAndBoundsPool.mjs';\n\n\"use strict\";\nfunction getGlobalBounds(target, skipUpdateTransform, bounds) {\n  bounds.clear();\n  let parentTransform;\n  let pooledMatrix;\n  if (target.parent) {\n    if (!skipUpdateTransform) {\n      pooledMatrix = matrixPool.get().identity();\n      parentTransform = updateTransformBackwards(target, pooledMatrix);\n    } else {\n      parentTransform = target.parent.worldTransform;\n    }\n  } else {\n    parentTransform = Matrix.IDENTITY;\n  }\n  _getGlobalBounds(target, bounds, parentTransform, skipUpdateTransform);\n  if (pooledMatrix) {\n    matrixPool.return(pooledMatrix);\n  }\n  if (!bounds.isValid) {\n    bounds.set(0, 0, 0, 0);\n  }\n  return bounds;\n}\nfunction _getGlobalBounds(target, bounds, parentTransform, skipUpdateTransform) {\n  if (!target.visible || !target.measurable)\n    return;\n  let worldTransform;\n  if (!skipUpdateTransform) {\n    target.updateLocalTransform();\n    worldTransform = matrixPool.get();\n    worldTransform.appendFrom(target.localTransform, parentTransform);\n  } else {\n    worldTransform = target.worldTransform;\n  }\n  const parentBounds = bounds;\n  const preserveBounds = !!target.effects.length;\n  if (preserveBounds) {\n    bounds = boundsPool.get().clear();\n  }\n  if (target.boundsArea) {\n    bounds.addRect(target.boundsArea, worldTransform);\n  } else {\n    if (target.addBounds) {\n      bounds.matrix = worldTransform;\n      target.addBounds(bounds);\n    }\n    for (let i = 0; i < target.children.length; i++) {\n      _getGlobalBounds(target.children[i], bounds, worldTransform, skipUpdateTransform);\n    }\n  }\n  if (preserveBounds) {\n    for (let i = 0; i < target.effects.length; i++) {\n      target.effects[i].addBounds?.(bounds);\n    }\n    parentBounds.addBounds(bounds, Matrix.IDENTITY);\n    boundsPool.return(bounds);\n  }\n  if (!skipUpdateTransform) {\n    matrixPool.return(worldTransform);\n  }\n}\nfunction updateTransformBackwards(target, parentTransform) {\n  const parent = target.parent;\n  if (parent) {\n    updateTransformBackwards(parent, parentTransform);\n    parent.updateLocalTransform();\n    parentTransform.append(parent.localTransform);\n  }\n  return parentTransform;\n}\n\nexport { _getGlobalBounds, getGlobalBounds, updateTransformBackwards };\n//# sourceMappingURL=getGlobalBounds.mjs.map\n","import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { warn } from '../../../utils/logging/warn.mjs';\nimport { matrixPool, boundsPool } from './utils/matrixAndBoundsPool.mjs';\n\n\"use strict\";\nfunction getLocalBounds(target, bounds, relativeMatrix) {\n  bounds.clear();\n  relativeMatrix || (relativeMatrix = Matrix.IDENTITY);\n  _getLocalBounds(target, bounds, relativeMatrix, target, true);\n  if (!bounds.isValid) {\n    bounds.set(0, 0, 0, 0);\n  }\n  return bounds;\n}\nfunction _getLocalBounds(target, bounds, parentTransform, rootContainer, isRoot) {\n  let relativeTransform;\n  if (!isRoot) {\n    if (!target.visible || !target.measurable)\n      return;\n    target.updateLocalTransform();\n    const localTransform = target.localTransform;\n    relativeTransform = matrixPool.get();\n    relativeTransform.appendFrom(localTransform, parentTransform);\n  } else {\n    relativeTransform = matrixPool.get();\n    relativeTransform = parentTransform.copyTo(relativeTransform);\n  }\n  const parentBounds = bounds;\n  const preserveBounds = !!target.effects.length;\n  if (preserveBounds) {\n    bounds = boundsPool.get().clear();\n  }\n  if (target.boundsArea) {\n    bounds.addRect(target.boundsArea, relativeTransform);\n  } else {\n    if (target.renderPipeId) {\n      bounds.matrix = relativeTransform;\n      target.addBounds(bounds);\n    }\n    const children = target.children;\n    for (let i = 0; i < children.length; i++) {\n      _getLocalBounds(children[i], bounds, relativeTransform, rootContainer, false);\n    }\n  }\n  if (preserveBounds) {\n    for (let i = 0; i < target.effects.length; i++) {\n      target.effects[i].addLocalBounds?.(bounds, rootContainer);\n    }\n    parentBounds.addBounds(bounds, Matrix.IDENTITY);\n    boundsPool.return(bounds);\n  }\n  matrixPool.return(relativeTransform);\n}\nfunction getParent(target, root, matrix) {\n  const parent = target.parent;\n  if (!parent) {\n    warn(\"Item is not inside the root container\");\n    return;\n  }\n  if (parent !== root) {\n    getParent(parent, root, matrix);\n    parent.updateLocalTransform();\n    matrix.append(parent.localTransform);\n  }\n}\n\nexport { getLocalBounds, getParent };\n//# sourceMappingURL=getLocalBounds.mjs.map\n","import { Matrix } from '../../../../maths/matrix/Matrix.mjs';\nimport { Pool } from '../../../../utils/pool/Pool.mjs';\nimport { Bounds } from '../Bounds.mjs';\n\n\"use strict\";\nconst matrixPool = new Pool(Matrix);\nconst boundsPool = new Pool(Bounds);\n\nexport { boundsPool, matrixPool };\n//# sourceMappingURL=matrixAndBoundsPool.mjs.map\n","import { multiplyHexColors } from '../../container/utils/multiplyHexColors.mjs';\n\n\"use strict\";\nclass BatchableGraphics {\n  constructor() {\n    this.batcher = null;\n    this.batch = null;\n    this.applyTransform = true;\n    this.roundPixels = 0;\n  }\n  get blendMode() {\n    if (this.applyTransform) {\n      return this.renderable.groupBlendMode;\n    }\n    return \"normal\";\n  }\n  packIndex(indexBuffer, index, indicesOffset) {\n    const indices = this.geometryData.indices;\n    for (let i = 0; i < this.indexSize; i++) {\n      indexBuffer[index++] = indices[i + this.indexOffset] + indicesOffset - this.vertexOffset;\n    }\n  }\n  packAttributes(float32View, uint32View, index, textureId) {\n    const geometry = this.geometryData;\n    const graphics = this.renderable;\n    const positions = geometry.vertices;\n    const uvs = geometry.uvs;\n    const offset = this.vertexOffset * 2;\n    const vertSize = (this.vertexOffset + this.vertexSize) * 2;\n    const rgb = this.color;\n    const bgr = rgb >> 16 | rgb & 65280 | (rgb & 255) << 16;\n    if (this.applyTransform) {\n      const argb = multiplyHexColors(bgr, graphics.groupColor) + (this.alpha * graphics.groupAlpha * 255 << 24);\n      const wt = graphics.groupTransform;\n      const textureIdAndRound = textureId << 16 | this.roundPixels & 65535;\n      const a = wt.a;\n      const b = wt.b;\n      const c = wt.c;\n      const d = wt.d;\n      const tx = wt.tx;\n      const ty = wt.ty;\n      for (let i = offset; i < vertSize; i += 2) {\n        const x = positions[i];\n        const y = positions[i + 1];\n        float32View[index] = a * x + c * y + tx;\n        float32View[index + 1] = b * x + d * y + ty;\n        float32View[index + 2] = uvs[i];\n        float32View[index + 3] = uvs[i + 1];\n        uint32View[index + 4] = argb;\n        uint32View[index + 5] = textureIdAndRound;\n        index += 6;\n      }\n    } else {\n      const argb = bgr + (this.alpha * 255 << 24);\n      for (let i = offset; i < vertSize; i += 2) {\n        float32View[index] = positions[i];\n        float32View[index + 1] = positions[i + 1];\n        float32View[index + 2] = uvs[i];\n        float32View[index + 3] = uvs[i + 1];\n        uint32View[index + 4] = argb;\n        uint32View[index + 5] = textureId << 16;\n        index += 6;\n      }\n    }\n  }\n  // TODO rename to vertexSize\n  get vertSize() {\n    return this.vertexSize;\n  }\n  copyTo(gpuBuffer) {\n    gpuBuffer.indexOffset = this.indexOffset;\n    gpuBuffer.indexSize = this.indexSize;\n    gpuBuffer.vertexOffset = this.vertexOffset;\n    gpuBuffer.vertexSize = this.vertexSize;\n    gpuBuffer.color = this.color;\n    gpuBuffer.alpha = this.alpha;\n    gpuBuffer.texture = this.texture;\n    gpuBuffer.geometryData = this.geometryData;\n  }\n  reset() {\n    this.applyTransform = true;\n  }\n}\n\nexport { BatchableGraphics };\n//# sourceMappingURL=BatchableGraphics.mjs.map\n","\"use strict\";\nfunction multiplyHexColors(color1, color2) {\n  if (color1 === 16777215 || !color2)\n    return color2;\n  if (color2 === 16777215 || !color1)\n    return color1;\n  const r1 = color1 >> 16 & 255;\n  const g1 = color1 >> 8 & 255;\n  const b1 = color1 & 255;\n  const r2 = color2 >> 16 & 255;\n  const g2 = color2 >> 8 & 255;\n  const b2 = color2 & 255;\n  const r = r1 * r2 / 255;\n  const g = g1 * g2 / 255;\n  const b = b1 * b2 / 255;\n  return (r << 16) + (g << 8) + b;\n}\n\nexport { multiplyHexColors };\n//# sourceMappingURL=multiplyHexColors.mjs.map\n","import { deprecation, v8_0_0 } from '../../../utils/logging/deprecation.mjs';\nimport { Container } from '../../container/Container.mjs';\nimport { GraphicsContext } from './GraphicsContext.mjs';\n\n\"use strict\";\nclass Graphics extends Container {\n  /**\n   * @param options - Options for the Graphics.\n   */\n  constructor(options) {\n    if (options instanceof GraphicsContext) {\n      options = { context: options };\n    }\n    const { context, roundPixels, ...rest } = options || {};\n    super({\n      label: \"Graphics\",\n      ...rest\n    });\n    this.canBundle = true;\n    this.renderPipeId = \"graphics\";\n    this._roundPixels = 0;\n    if (!context) {\n      this._context = this._ownedContext = new GraphicsContext();\n    } else {\n      this._context = context;\n    }\n    this._context.on(\"update\", this.onViewUpdate, this);\n    this.allowChildren = false;\n    this.roundPixels = roundPixels ?? false;\n  }\n  set context(context) {\n    if (context === this._context)\n      return;\n    this._context.off(\"update\", this.onViewUpdate, this);\n    this._context = context;\n    this._context.on(\"update\", this.onViewUpdate, this);\n    this.onViewUpdate();\n  }\n  get context() {\n    return this._context;\n  }\n  /**\n   * The local bounds of the graphic.\n   * @type {rendering.Bounds}\n   */\n  get bounds() {\n    return this._context.bounds;\n  }\n  /**\n   * Adds the bounds of this object to the bounds object.\n   * @param bounds - The output bounds object.\n   */\n  addBounds(bounds) {\n    bounds.addBounds(this._context.bounds);\n  }\n  /**\n   * Checks if the object contains the given point.\n   * @param point - The point to check\n   */\n  containsPoint(point) {\n    return this._context.containsPoint(point);\n  }\n  /**\n   *  Whether or not to round the x/y position of the graphic.\n   * @type {boolean}\n   */\n  get roundPixels() {\n    return !!this._roundPixels;\n  }\n  set roundPixels(value) {\n    this._roundPixels = value ? 1 : 0;\n  }\n  onViewUpdate() {\n    this._didChangeId += 1 << 12;\n    this._didGraphicsUpdate = true;\n    if (this.didViewUpdate)\n      return;\n    this.didViewUpdate = true;\n    const renderGroup = this.renderGroup || this.parentRenderGroup;\n    if (renderGroup) {\n      renderGroup.onChildViewUpdate(this);\n    }\n  }\n  /**\n   * Destroys this graphics renderable and optionally its context.\n   * @param options - Options parameter. A boolean will act as if all options\n   *\n   * If the context was created by this graphics and `destroy(false)` or `destroy()` is called\n   * then the context will still be destroyed.\n   *\n   * If you want to explicitly not destroy this context that this graphics created,\n   * then you should pass destroy({ context: false })\n   *\n   * If the context was passed in as an argument to the constructor then it will not be destroyed\n   * @param {boolean} [options.texture=false] - Should destroy the texture of the graphics context\n   * @param {boolean} [options.textureSource=false] - Should destroy the texture source of the graphics context\n   * @param {boolean} [options.context=false] - Should destroy the context\n   */\n  destroy(options) {\n    if (this._ownedContext && !options) {\n      this._ownedContext.destroy(options);\n    } else if (options === true || options?.context === true) {\n      this._context.destroy(options);\n    }\n    this._ownedContext = null;\n    this._context = null;\n    super.destroy(options);\n  }\n  _callContextMethod(method, args) {\n    this.context[method](...args);\n    return this;\n  }\n  // --------------------------------------- GraphicsContext methods ---------------------------------------\n  /**\n   * Sets the current fill style of the graphics context. The fill style can be a color, gradient,\n   * pattern, or a more complex style defined by a FillStyle object.\n   * @param {FillInput} args - The fill style to apply. This can be a simple color, a gradient or\n   * pattern object, or a FillStyle or ConvertedFillStyle object.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  setFillStyle(...args) {\n    return this._callContextMethod(\"setFillStyle\", args);\n  }\n  /**\n   * Sets the current stroke style of the graphics context. Similar to fill styles, stroke styles can\n   * encompass colors, gradients, patterns, or more detailed configurations via a StrokeStyle object.\n   * @param {StrokeInput} args - The stroke style to apply. Can be defined as a color, a gradient or pattern,\n   * or a StrokeStyle or ConvertedStrokeStyle object.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  setStrokeStyle(...args) {\n    return this._callContextMethod(\"setStrokeStyle\", args);\n  }\n  fill(...args) {\n    return this._callContextMethod(\"fill\", args);\n  }\n  /**\n   * Strokes the current path with the current stroke style. This method can take an optional\n   * FillStyle parameter to define the stroke's appearance, including its color, width, and other properties.\n   * @param {FillStyle} args - (Optional) The stroke style to apply. Can be defined as a simple color or a more\n   * complex style object. If omitted, uses the current stroke style.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  stroke(...args) {\n    return this._callContextMethod(\"stroke\", args);\n  }\n  texture(...args) {\n    return this._callContextMethod(\"texture\", args);\n  }\n  /**\n   * Resets the current path. Any previous path and its commands are discarded and a new path is\n   * started. This is typically called before beginning a new shape or series of drawing commands.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  beginPath() {\n    return this._callContextMethod(\"beginPath\", []);\n  }\n  /**\n   * Applies a cutout to the last drawn shape. This is used to create holes or complex shapes by\n   * subtracting a path from the previously drawn path. If a hole is not completely in a shape, it will\n   * fail to cut correctly!\n   */\n  cut() {\n    return this._callContextMethod(\"cut\", []);\n  }\n  arc(...args) {\n    return this._callContextMethod(\"arc\", args);\n  }\n  arcTo(...args) {\n    return this._callContextMethod(\"arcTo\", args);\n  }\n  arcToSvg(...args) {\n    return this._callContextMethod(\"arcToSvg\", args);\n  }\n  bezierCurveTo(...args) {\n    return this._callContextMethod(\"bezierCurveTo\", args);\n  }\n  /**\n   * Closes the current path by drawing a straight line back to the start.\n   * If the shape is already closed or there are no points in the path, this method does nothing.\n   * @returns The instance of the current object for chaining.\n   */\n  closePath() {\n    return this._callContextMethod(\"closePath\", []);\n  }\n  ellipse(...args) {\n    return this._callContextMethod(\"ellipse\", args);\n  }\n  circle(...args) {\n    return this._callContextMethod(\"circle\", args);\n  }\n  path(...args) {\n    return this._callContextMethod(\"path\", args);\n  }\n  lineTo(...args) {\n    return this._callContextMethod(\"lineTo\", args);\n  }\n  moveTo(...args) {\n    return this._callContextMethod(\"moveTo\", args);\n  }\n  quadraticCurveTo(...args) {\n    return this._callContextMethod(\"quadraticCurveTo\", args);\n  }\n  rect(...args) {\n    return this._callContextMethod(\"rect\", args);\n  }\n  roundRect(...args) {\n    return this._callContextMethod(\"roundRect\", args);\n  }\n  poly(...args) {\n    return this._callContextMethod(\"poly\", args);\n  }\n  regularPoly(...args) {\n    return this._callContextMethod(\"regularPoly\", args);\n  }\n  roundPoly(...args) {\n    return this._callContextMethod(\"roundPoly\", args);\n  }\n  roundShape(...args) {\n    return this._callContextMethod(\"roundShape\", args);\n  }\n  filletRect(...args) {\n    return this._callContextMethod(\"filletRect\", args);\n  }\n  chamferRect(...args) {\n    return this._callContextMethod(\"chamferRect\", args);\n  }\n  star(...args) {\n    return this._callContextMethod(\"star\", args);\n  }\n  svg(...args) {\n    return this._callContextMethod(\"svg\", args);\n  }\n  restore(...args) {\n    return this._callContextMethod(\"restore\", args);\n  }\n  /** Saves the current graphics state, including transformations, fill styles, and stroke styles, onto a stack. */\n  save() {\n    return this._callContextMethod(\"save\", []);\n  }\n  /**\n   * Returns the current transformation matrix of the graphics context.\n   * @returns The current transformation matrix.\n   */\n  getTransform() {\n    return this.context.getTransform();\n  }\n  /**\n   * Resets the current transformation matrix to the identity matrix, effectively removing\n   * any transformations (rotation, scaling, translation) previously applied.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  resetTransform() {\n    return this._callContextMethod(\"resetTransform\", []);\n  }\n  rotateTransform(...args) {\n    return this._callContextMethod(\"rotate\", args);\n  }\n  scaleTransform(...args) {\n    return this._callContextMethod(\"scale\", args);\n  }\n  setTransform(...args) {\n    return this._callContextMethod(\"setTransform\", args);\n  }\n  transform(...args) {\n    return this._callContextMethod(\"transform\", args);\n  }\n  translateTransform(...args) {\n    return this._callContextMethod(\"translate\", args);\n  }\n  /**\n   * Clears all drawing commands from the graphics context, effectively resetting it. This includes clearing the path,\n   * and optionally resetting transformations to the identity matrix.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  clear() {\n    return this._callContextMethod(\"clear\", []);\n  }\n  /**\n   * The fill style to use.\n   * @type {ConvertedFillStyle}\n   */\n  get fillStyle() {\n    return this._context.fillStyle;\n  }\n  set fillStyle(value) {\n    this._context.fillStyle = value;\n  }\n  /**\n   * The stroke style to use.\n   * @type {ConvertedStrokeStyle}\n   */\n  get strokeStyle() {\n    return this._context.strokeStyle;\n  }\n  set strokeStyle(value) {\n    this._context.strokeStyle = value;\n  }\n  /**\n   * Creates a new Graphics object.\n   * Note that only the context of the object is cloned, not its transform (position,scale,etc)\n   * @param deep - Whether to create a deep clone of the graphics object. If false, the context\n   * will be shared between the two objects (default false). If true, the context will be\n   * cloned (recommended if you need to modify the context in any way).\n   * @returns - A clone of the graphics object\n   */\n  clone(deep = false) {\n    if (deep) {\n      return new Graphics(this._context.clone());\n    }\n    this._ownedContext = null;\n    const clone = new Graphics(this._context);\n    return clone;\n  }\n  // -------- v7 deprecations ---------\n  /**\n   * @param width\n   * @param color\n   * @param alpha\n   * @deprecated since 8.0.0 Use {@link Graphics#setStrokeStyle} instead\n   */\n  lineStyle(width, color, alpha) {\n    deprecation(v8_0_0, \"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.\");\n    const strokeStyle = {};\n    width && (strokeStyle.width = width);\n    color && (strokeStyle.color = color);\n    alpha && (strokeStyle.alpha = alpha);\n    this.context.strokeStyle = strokeStyle;\n    return this;\n  }\n  /**\n   * @param color\n   * @param alpha\n   * @deprecated since 8.0.0 Use {@link Graphics#fill} instead\n   */\n  beginFill(color, alpha) {\n    deprecation(v8_0_0, \"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.\");\n    const fillStyle = {};\n    color && (fillStyle.color = color);\n    alpha && (fillStyle.alpha = alpha);\n    this.context.fillStyle = fillStyle;\n    return this;\n  }\n  /**\n   * @deprecated since 8.0.0 Use {@link Graphics#fill} instead\n   */\n  endFill() {\n    deprecation(v8_0_0, \"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.\");\n    this.context.fill();\n    const strokeStyle = this.context.strokeStyle;\n    if (strokeStyle.width !== GraphicsContext.defaultStrokeStyle.width || strokeStyle.color !== GraphicsContext.defaultStrokeStyle.color || strokeStyle.alpha !== GraphicsContext.defaultStrokeStyle.alpha) {\n      this.context.stroke();\n    }\n    return this;\n  }\n  /**\n   * @param {...any} args\n   * @deprecated since 8.0.0 Use {@link Graphics#circle} instead\n   */\n  drawCircle(...args) {\n    deprecation(v8_0_0, \"Graphics#drawCircle has been renamed to Graphics#circle\");\n    return this._callContextMethod(\"circle\", args);\n  }\n  /**\n   * @param {...any} args\n   * @deprecated since 8.0.0 Use {@link Graphics#ellipse} instead\n   */\n  drawEllipse(...args) {\n    deprecation(v8_0_0, \"Graphics#drawEllipse has been renamed to Graphics#ellipse\");\n    return this._callContextMethod(\"ellipse\", args);\n  }\n  /**\n   * @param {...any} args\n   * @deprecated since 8.0.0 Use {@link Graphics#poly} instead\n   */\n  drawPolygon(...args) {\n    deprecation(v8_0_0, \"Graphics#drawPolygon has been renamed to Graphics#poly\");\n    return this._callContextMethod(\"poly\", args);\n  }\n  /**\n   * @param {...any} args\n   * @deprecated since 8.0.0 Use {@link Graphics#rect} instead\n   */\n  drawRect(...args) {\n    deprecation(v8_0_0, \"Graphics#drawRect has been renamed to Graphics#rect\");\n    return this._callContextMethod(\"rect\", args);\n  }\n  /**\n   * @param {...any} args\n   * @deprecated since 8.0.0 Use {@link Graphics#roundRect} instead\n   */\n  drawRoundedRect(...args) {\n    deprecation(v8_0_0, \"Graphics#drawRoundedRect has been renamed to Graphics#roundRect\");\n    return this._callContextMethod(\"roundRect\", args);\n  }\n  /**\n   * @param {...any} args\n   * @deprecated since 8.0.0 Use {@link Graphics#star} instead\n   */\n  drawStar(...args) {\n    deprecation(v8_0_0, \"Graphics#drawStar has been renamed to Graphics#star\");\n    return this._callContextMethod(\"star\", args);\n  }\n}\n\nexport { Graphics };\n//# sourceMappingURL=Graphics.mjs.map\n","import { Rectangle } from './Rectangle.mjs';\n\n\"use strict\";\nclass Circle {\n  /**\n   * @param x - The X coordinate of the center of this circle\n   * @param y - The Y coordinate of the center of this circle\n   * @param radius - The radius of the circle\n   */\n  constructor(x = 0, y = 0, radius = 0) {\n    /**\n     * The type of the object, mainly used to avoid `instanceof` checks\n     * @default 'circle'\n     */\n    this.type = \"circle\";\n    this.x = x;\n    this.y = y;\n    this.radius = radius;\n  }\n  /**\n   * Creates a clone of this Circle instance\n   * @returns A copy of the Circle\n   */\n  clone() {\n    return new Circle(this.x, this.y, this.radius);\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this circle\n   * @param x - The X coordinate of the point to test\n   * @param y - The Y coordinate of the point to test\n   * @returns Whether the x/y coordinates are within this Circle\n   */\n  contains(x, y) {\n    if (this.radius <= 0)\n      return false;\n    const r2 = this.radius * this.radius;\n    let dx = this.x - x;\n    let dy = this.y - y;\n    dx *= dx;\n    dy *= dy;\n    return dx + dy <= r2;\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this circle including the stroke.\n   * @param x - The X coordinate of the point to test\n   * @param y - The Y coordinate of the point to test\n   * @param width - The width of the line to check\n   * @returns Whether the x/y coordinates are within this Circle\n   */\n  strokeContains(x, y, width) {\n    if (this.radius === 0)\n      return false;\n    const dx = this.x - x;\n    const dy = this.y - y;\n    const r = this.radius;\n    const w2 = width / 2;\n    const distance = Math.sqrt(dx * dx + dy * dy);\n    return distance < r + w2 && distance > r - w2;\n  }\n  /**\n   * Returns the framing rectangle of the circle as a Rectangle object\n   * @param out\n   * @returns The framing rectangle\n   */\n  getBounds(out) {\n    out = out || new Rectangle();\n    out.x = this.x - this.radius;\n    out.y = this.y - this.radius;\n    out.width = this.radius * 2;\n    out.height = this.radius * 2;\n    return out;\n  }\n  /**\n   * Copies another circle to this one.\n   * @param circle - The circle to copy from.\n   * @returns Returns itself.\n   */\n  copyFrom(circle) {\n    this.x = circle.x;\n    this.y = circle.y;\n    this.radius = circle.radius;\n    return this;\n  }\n  /**\n   * Copies this circle to another one.\n   * @param circle - The circle to copy to.\n   * @returns Returns given parameter.\n   */\n  copyTo(circle) {\n    circle.copyFrom(this);\n    return circle;\n  }\n  toString() {\n    return `[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`;\n  }\n}\n\nexport { Circle };\n//# sourceMappingURL=Circle.mjs.map\n","import { Rectangle } from './Rectangle.mjs';\n\n\"use strict\";\nclass Ellipse {\n  /**\n   * @param x - The X coordinate of the center of this ellipse\n   * @param y - The Y coordinate of the center of this ellipse\n   * @param halfWidth - The half width of this ellipse\n   * @param halfHeight - The half height of this ellipse\n   */\n  constructor(x = 0, y = 0, halfWidth = 0, halfHeight = 0) {\n    /**\n     * The type of the object, mainly used to avoid `instanceof` checks\n     * @default 'ellipse'\n     */\n    this.type = \"ellipse\";\n    this.x = x;\n    this.y = y;\n    this.halfWidth = halfWidth;\n    this.halfHeight = halfHeight;\n  }\n  /**\n   * Creates a clone of this Ellipse instance\n   * @returns {Ellipse} A copy of the ellipse\n   */\n  clone() {\n    return new Ellipse(this.x, this.y, this.halfWidth, this.halfHeight);\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this ellipse\n   * @param x - The X coordinate of the point to test\n   * @param y - The Y coordinate of the point to test\n   * @returns Whether the x/y coords are within this ellipse\n   */\n  contains(x, y) {\n    if (this.halfWidth <= 0 || this.halfHeight <= 0) {\n      return false;\n    }\n    let normx = (x - this.x) / this.halfWidth;\n    let normy = (y - this.y) / this.halfHeight;\n    normx *= normx;\n    normy *= normy;\n    return normx + normy <= 1;\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this ellipse including stroke\n   * @param x - The X coordinate of the point to test\n   * @param y - The Y coordinate of the point to test\n   * @param width\n   * @returns Whether the x/y coords are within this ellipse\n   */\n  strokeContains(x, y, width) {\n    const { halfWidth, halfHeight } = this;\n    if (halfWidth <= 0 || halfHeight <= 0) {\n      return false;\n    }\n    const halfStrokeWidth = width / 2;\n    const innerA = halfWidth - halfStrokeWidth;\n    const innerB = halfHeight - halfStrokeWidth;\n    const outerA = halfWidth + halfStrokeWidth;\n    const outerB = halfHeight + halfStrokeWidth;\n    const normalizedX = x - this.x;\n    const normalizedY = y - this.y;\n    const innerEllipse = normalizedX * normalizedX / (innerA * innerA) + normalizedY * normalizedY / (innerB * innerB);\n    const outerEllipse = normalizedX * normalizedX / (outerA * outerA) + normalizedY * normalizedY / (outerB * outerB);\n    return innerEllipse > 1 && outerEllipse <= 1;\n  }\n  /**\n   * Returns the framing rectangle of the ellipse as a Rectangle object\n   * @param out\n   * @returns The framing rectangle\n   */\n  getBounds(out) {\n    out = out || new Rectangle();\n    out.x = this.x - this.halfWidth;\n    out.y = this.y - this.halfHeight;\n    out.width = this.halfWidth * 2;\n    out.height = this.halfHeight * 2;\n    return out;\n  }\n  /**\n   * Copies another ellipse to this one.\n   * @param ellipse - The ellipse to copy from.\n   * @returns Returns itself.\n   */\n  copyFrom(ellipse) {\n    this.x = ellipse.x;\n    this.y = ellipse.y;\n    this.halfWidth = ellipse.halfWidth;\n    this.halfHeight = ellipse.halfHeight;\n    return this;\n  }\n  /**\n   * Copies this ellipse to another one.\n   * @param ellipse - The ellipse to copy to.\n   * @returns Returns given parameter.\n   */\n  copyTo(ellipse) {\n    ellipse.copyFrom(this);\n    return ellipse;\n  }\n  toString() {\n    return `[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`;\n  }\n}\n\nexport { Ellipse };\n//# sourceMappingURL=Ellipse.mjs.map\n","\"use strict\";\nfunction squaredDistanceToLineSegment(x, y, x1, y1, x2, y2) {\n  const a = x - x1;\n  const b = y - y1;\n  const c = x2 - x1;\n  const d = y2 - y1;\n  const dot = a * c + b * d;\n  const lenSq = c * c + d * d;\n  let param = -1;\n  if (lenSq !== 0) {\n    param = dot / lenSq;\n  }\n  let xx;\n  let yy;\n  if (param < 0) {\n    xx = x1;\n    yy = y1;\n  } else if (param > 1) {\n    xx = x2;\n    yy = y2;\n  } else {\n    xx = x1 + param * c;\n    yy = y1 + param * d;\n  }\n  const dx = x - xx;\n  const dy = y - yy;\n  return dx * dx + dy * dy;\n}\n\nexport { squaredDistanceToLineSegment };\n//# sourceMappingURL=squaredDistanceToLineSegment.mjs.map\n","import { squaredDistanceToLineSegment } from '../misc/squaredDistanceToLineSegment.mjs';\nimport { Rectangle } from './Rectangle.mjs';\n\n\"use strict\";\nclass Polygon {\n  /**\n   * @param points - This can be an array of Points\n   *  that form the polygon, a flat array of numbers that will be interpreted as [x,y, x,y, ...], or\n   *  the arguments passed can be all the points of the polygon e.g.\n   *  `new Polygon(new Point(), new Point(), ...)`, or the arguments passed can be flat\n   *  x,y values e.g. `new Polygon(x,y, x,y, x,y, ...)` where `x` and `y` are Numbers.\n   */\n  constructor(...points) {\n    /**\n     * The type of the object, mainly used to avoid `instanceof` checks\n     * @default 'polygon'\n     */\n    this.type = \"polygon\";\n    let flat = Array.isArray(points[0]) ? points[0] : points;\n    if (typeof flat[0] !== \"number\") {\n      const p = [];\n      for (let i = 0, il = flat.length; i < il; i++) {\n        p.push(flat[i].x, flat[i].y);\n      }\n      flat = p;\n    }\n    this.points = flat;\n    this.closePath = true;\n  }\n  /**\n   * Creates a clone of this polygon.\n   * @returns - A copy of the polygon.\n   */\n  clone() {\n    const points = this.points.slice();\n    const polygon = new Polygon(points);\n    polygon.closePath = this.closePath;\n    return polygon;\n  }\n  /**\n   * Checks whether the x and y coordinates passed to this function are contained within this polygon.\n   * @param x - The X coordinate of the point to test.\n   * @param y - The Y coordinate of the point to test.\n   * @returns - Whether the x/y coordinates are within this polygon.\n   */\n  contains(x, y) {\n    let inside = false;\n    const length = this.points.length / 2;\n    for (let i = 0, j = length - 1; i < length; j = i++) {\n      const xi = this.points[i * 2];\n      const yi = this.points[i * 2 + 1];\n      const xj = this.points[j * 2];\n      const yj = this.points[j * 2 + 1];\n      const intersect = yi > y !== yj > y && x < (xj - xi) * ((y - yi) / (yj - yi)) + xi;\n      if (intersect) {\n        inside = !inside;\n      }\n    }\n    return inside;\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this polygon including the stroke.\n   * @param x - The X coordinate of the point to test\n   * @param y - The Y coordinate of the point to test\n   * @param strokeWidth - The width of the line to check\n   * @returns Whether the x/y coordinates are within this polygon\n   */\n  strokeContains(x, y, strokeWidth) {\n    const halfStrokeWidth = strokeWidth / 2;\n    const halfStrokeWidthSqrd = halfStrokeWidth * halfStrokeWidth;\n    const { points } = this;\n    const iterationLength = points.length - (this.closePath ? 0 : 2);\n    for (let i = 0; i < iterationLength; i += 2) {\n      const x1 = points[i];\n      const y1 = points[i + 1];\n      const x2 = points[(i + 2) % points.length];\n      const y2 = points[(i + 3) % points.length];\n      const distanceSqrd = squaredDistanceToLineSegment(x, y, x1, y1, x2, y2);\n      if (distanceSqrd <= halfStrokeWidthSqrd) {\n        return true;\n      }\n    }\n    return false;\n  }\n  /**\n   * Returns the framing rectangle of the polygon as a Rectangle object\n   * @param out - optional rectangle to store the result\n   * @returns The framing rectangle\n   */\n  getBounds(out) {\n    out = out || new Rectangle();\n    const points = this.points;\n    let minX = Infinity;\n    let maxX = -Infinity;\n    let minY = Infinity;\n    let maxY = -Infinity;\n    for (let i = 0, n = points.length; i < n; i += 2) {\n      const x = points[i];\n      const y = points[i + 1];\n      minX = x < minX ? x : minX;\n      maxX = x > maxX ? x : maxX;\n      minY = y < minY ? y : minY;\n      maxY = y > maxY ? y : maxY;\n    }\n    out.x = minX;\n    out.width = maxX - minX;\n    out.y = minY;\n    out.height = maxY - minY;\n    return out;\n  }\n  /**\n   * Copies another polygon to this one.\n   * @param polygon - The polygon to copy from.\n   * @returns Returns itself.\n   */\n  copyFrom(polygon) {\n    this.points = polygon.points.slice();\n    this.closePath = polygon.closePath;\n    return this;\n  }\n  /**\n   * Copies this polygon to another one.\n   * @param polygon - The polygon to copy to.\n   * @returns Returns given parameter.\n   */\n  copyTo(polygon) {\n    polygon.copyFrom(this);\n    return polygon;\n  }\n  toString() {\n    return `[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((pointsDesc, currentPoint) => `${pointsDesc}, ${currentPoint}`, \"\")}]`;\n  }\n  /**\n   * Get the last X coordinate of the polygon\n   * @readonly\n   */\n  get lastX() {\n    return this.points[this.points.length - 2];\n  }\n  /**\n   * Get the last Y coordinate of the polygon\n   * @readonly\n   */\n  get lastY() {\n    return this.points[this.points.length - 1];\n  }\n  /**\n   * Get the first X coordinate of the polygon\n   * @readonly\n   */\n  get x() {\n    return this.points[this.points.length - 2];\n  }\n  /**\n   * Get the first Y coordinate of the polygon\n   * @readonly\n   */\n  get y() {\n    return this.points[this.points.length - 1];\n  }\n}\n\nexport { Polygon };\n//# sourceMappingURL=Polygon.mjs.map\n","import { Rectangle } from './Rectangle.mjs';\n\n\"use strict\";\nconst isCornerWithinStroke = (pX, pY, cornerX, cornerY, radius, halfStrokeWidth) => {\n  const dx = pX - cornerX;\n  const dy = pY - cornerY;\n  const distance = Math.sqrt(dx * dx + dy * dy);\n  return distance >= radius - halfStrokeWidth && distance <= radius + halfStrokeWidth;\n};\nclass RoundedRectangle {\n  /**\n   * @param x - The X coordinate of the upper-left corner of the rounded rectangle\n   * @param y - The Y coordinate of the upper-left corner of the rounded rectangle\n   * @param width - The overall width of this rounded rectangle\n   * @param height - The overall height of this rounded rectangle\n   * @param radius - Controls the radius of the rounded corners\n   */\n  constructor(x = 0, y = 0, width = 0, height = 0, radius = 20) {\n    /**\n     * The type of the object, mainly used to avoid `instanceof` checks\n     * @default 'roundedRectangle'\n     */\n    this.type = \"roundedRectangle\";\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n    this.radius = radius;\n  }\n  /**\n   * Returns the framing rectangle of the rounded rectangle as a Rectangle object\n   * @param out - optional rectangle to store the result\n   * @returns The framing rectangle\n   */\n  getBounds(out) {\n    out = out || new Rectangle();\n    out.x = this.x;\n    out.y = this.y;\n    out.width = this.width;\n    out.height = this.height;\n    return out;\n  }\n  /**\n   * Creates a clone of this Rounded Rectangle.\n   * @returns - A copy of the rounded rectangle.\n   */\n  clone() {\n    return new RoundedRectangle(this.x, this.y, this.width, this.height, this.radius);\n  }\n  /**\n   * Copies another rectangle to this one.\n   * @param rectangle - The rectangle to copy from.\n   * @returns Returns itself.\n   */\n  copyFrom(rectangle) {\n    this.x = rectangle.x;\n    this.y = rectangle.y;\n    this.width = rectangle.width;\n    this.height = rectangle.height;\n    return this;\n  }\n  /**\n   * Copies this rectangle to another one.\n   * @param rectangle - The rectangle to copy to.\n   * @returns Returns given parameter.\n   */\n  copyTo(rectangle) {\n    rectangle.copyFrom(this);\n    return rectangle;\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this Rounded Rectangle\n   * @param x - The X coordinate of the point to test.\n   * @param y - The Y coordinate of the point to test.\n   * @returns - Whether the x/y coordinates are within this Rounded Rectangle.\n   */\n  contains(x, y) {\n    if (this.width <= 0 || this.height <= 0) {\n      return false;\n    }\n    if (x >= this.x && x <= this.x + this.width) {\n      if (y >= this.y && y <= this.y + this.height) {\n        const radius = Math.max(0, Math.min(this.radius, Math.min(this.width, this.height) / 2));\n        if (y >= this.y + radius && y <= this.y + this.height - radius || x >= this.x + radius && x <= this.x + this.width - radius) {\n          return true;\n        }\n        let dx = x - (this.x + radius);\n        let dy = y - (this.y + radius);\n        const radius2 = radius * radius;\n        if (dx * dx + dy * dy <= radius2) {\n          return true;\n        }\n        dx = x - (this.x + this.width - radius);\n        if (dx * dx + dy * dy <= radius2) {\n          return true;\n        }\n        dy = y - (this.y + this.height - radius);\n        if (dx * dx + dy * dy <= radius2) {\n          return true;\n        }\n        dx = x - (this.x + radius);\n        if (dx * dx + dy * dy <= radius2) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this rectangle including the stroke.\n   * @param pX - The X coordinate of the point to test\n   * @param pY - The Y coordinate of the point to test\n   * @param strokeWidth - The width of the line to check\n   * @returns Whether the x/y coordinates are within this rectangle\n   */\n  strokeContains(pX, pY, strokeWidth) {\n    const { x, y, width, height, radius } = this;\n    const halfStrokeWidth = strokeWidth / 2;\n    const innerX = x + radius;\n    const innerY = y + radius;\n    const innerWidth = width - radius * 2;\n    const innerHeight = height - radius * 2;\n    const rightBound = x + width;\n    const bottomBound = y + height;\n    if ((pX >= x - halfStrokeWidth && pX <= x + halfStrokeWidth || pX >= rightBound - halfStrokeWidth && pX <= rightBound + halfStrokeWidth) && pY >= innerY && pY <= innerY + innerHeight) {\n      return true;\n    }\n    if ((pY >= y - halfStrokeWidth && pY <= y + halfStrokeWidth || pY >= bottomBound - halfStrokeWidth && pY <= bottomBound + halfStrokeWidth) && pX >= innerX && pX <= innerX + innerWidth) {\n      return true;\n    }\n    return (\n      // Top-left\n      pX < innerX && pY < innerY && isCornerWithinStroke(pX, pY, innerX, innerY, radius, halfStrokeWidth) || pX > rightBound - radius && pY < innerY && isCornerWithinStroke(pX, pY, rightBound - radius, innerY, radius, halfStrokeWidth) || pX > rightBound - radius && pY > bottomBound - radius && isCornerWithinStroke(pX, pY, rightBound - radius, bottomBound - radius, radius, halfStrokeWidth) || pX < innerX && pY > bottomBound - radius && isCornerWithinStroke(pX, pY, innerX, bottomBound - radius, radius, halfStrokeWidth)\n    );\n  }\n  toString() {\n    return `[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`;\n  }\n}\n\nexport { RoundedRectangle };\n//# sourceMappingURL=RoundedRectangle.mjs.map\n","import { GraphicsContextSystem } from '../GraphicsContextSystem.mjs';\n\n\"use strict\";\nconst RECURSION_LIMIT = 8;\nconst FLT_EPSILON = 11920929e-14;\nconst PATH_DISTANCE_EPSILON = 1;\nconst curveAngleToleranceEpsilon = 0.01;\nconst mAngleTolerance = 0;\nconst mCuspLimit = 0;\nfunction buildAdaptiveBezier(points, sX, sY, cp1x, cp1y, cp2x, cp2y, eX, eY, smoothness) {\n  const scale = 1;\n  const smoothing = Math.min(\n    0.99,\n    // a value of 1.0 actually inverts smoothing, so we cap it at 0.99\n    Math.max(0, smoothness ?? GraphicsContextSystem.defaultOptions.bezierSmoothness)\n  );\n  let distanceTolerance = (PATH_DISTANCE_EPSILON - smoothing) / scale;\n  distanceTolerance *= distanceTolerance;\n  begin(sX, sY, cp1x, cp1y, cp2x, cp2y, eX, eY, points, distanceTolerance);\n  return points;\n}\nfunction begin(sX, sY, cp1x, cp1y, cp2x, cp2y, eX, eY, points, distanceTolerance) {\n  recursive(sX, sY, cp1x, cp1y, cp2x, cp2y, eX, eY, points, distanceTolerance, 0);\n  points.push(eX, eY);\n}\nfunction recursive(x1, y1, x2, y2, x3, y3, x4, y4, points, distanceTolerance, level) {\n  if (level > RECURSION_LIMIT) {\n    return;\n  }\n  const pi = Math.PI;\n  const x12 = (x1 + x2) / 2;\n  const y12 = (y1 + y2) / 2;\n  const x23 = (x2 + x3) / 2;\n  const y23 = (y2 + y3) / 2;\n  const x34 = (x3 + x4) / 2;\n  const y34 = (y3 + y4) / 2;\n  const x123 = (x12 + x23) / 2;\n  const y123 = (y12 + y23) / 2;\n  const x234 = (x23 + x34) / 2;\n  const y234 = (y23 + y34) / 2;\n  const x1234 = (x123 + x234) / 2;\n  const y1234 = (y123 + y234) / 2;\n  if (level > 0) {\n    let dx = x4 - x1;\n    let dy = y4 - y1;\n    const d2 = Math.abs((x2 - x4) * dy - (y2 - y4) * dx);\n    const d3 = Math.abs((x3 - x4) * dy - (y3 - y4) * dx);\n    let da1;\n    let da2;\n    if (d2 > FLT_EPSILON && d3 > FLT_EPSILON) {\n      if ((d2 + d3) * (d2 + d3) <= distanceTolerance * (dx * dx + dy * dy)) {\n        if (mAngleTolerance < curveAngleToleranceEpsilon) {\n          points.push(x1234, y1234);\n          return;\n        }\n        const a23 = Math.atan2(y3 - y2, x3 - x2);\n        da1 = Math.abs(a23 - Math.atan2(y2 - y1, x2 - x1));\n        da2 = Math.abs(Math.atan2(y4 - y3, x4 - x3) - a23);\n        if (da1 >= pi)\n          da1 = 2 * pi - da1;\n        if (da2 >= pi)\n          da2 = 2 * pi - da2;\n        if (da1 + da2 < mAngleTolerance) {\n          points.push(x1234, y1234);\n          return;\n        }\n        if (mCuspLimit !== 0) {\n          if (da1 > mCuspLimit) {\n            points.push(x2, y2);\n            return;\n          }\n          if (da2 > mCuspLimit) {\n            points.push(x3, y3);\n            return;\n          }\n        }\n      }\n    } else if (d2 > FLT_EPSILON) {\n      if (d2 * d2 <= distanceTolerance * (dx * dx + dy * dy)) {\n        if (mAngleTolerance < curveAngleToleranceEpsilon) {\n          points.push(x1234, y1234);\n          return;\n        }\n        da1 = Math.abs(Math.atan2(y3 - y2, x3 - x2) - Math.atan2(y2 - y1, x2 - x1));\n        if (da1 >= pi)\n          da1 = 2 * pi - da1;\n        if (da1 < mAngleTolerance) {\n          points.push(x2, y2);\n          points.push(x3, y3);\n          return;\n        }\n        if (mCuspLimit !== 0) {\n          if (da1 > mCuspLimit) {\n            points.push(x2, y2);\n            return;\n          }\n        }\n      }\n    } else if (d3 > FLT_EPSILON) {\n      if (d3 * d3 <= distanceTolerance * (dx * dx + dy * dy)) {\n        if (mAngleTolerance < curveAngleToleranceEpsilon) {\n          points.push(x1234, y1234);\n          return;\n        }\n        da1 = Math.abs(Math.atan2(y4 - y3, x4 - x3) - Math.atan2(y3 - y2, x3 - x2));\n        if (da1 >= pi)\n          da1 = 2 * pi - da1;\n        if (da1 < mAngleTolerance) {\n          points.push(x2, y2);\n          points.push(x3, y3);\n          return;\n        }\n        if (mCuspLimit !== 0) {\n          if (da1 > mCuspLimit) {\n            points.push(x3, y3);\n            return;\n          }\n        }\n      }\n    } else {\n      dx = x1234 - (x1 + x4) / 2;\n      dy = y1234 - (y1 + y4) / 2;\n      if (dx * dx + dy * dy <= distanceTolerance) {\n        points.push(x1234, y1234);\n        return;\n      }\n    }\n  }\n  recursive(x1, y1, x12, y12, x123, y123, x1234, y1234, points, distanceTolerance, level + 1);\n  recursive(x1234, y1234, x234, y234, x34, y34, x4, y4, points, distanceTolerance, level + 1);\n}\n\nexport { buildAdaptiveBezier };\n//# sourceMappingURL=buildAdaptiveBezier.mjs.map\n","import { GraphicsContextSystem } from '../GraphicsContextSystem.mjs';\n\n\"use strict\";\nconst RECURSION_LIMIT = 8;\nconst FLT_EPSILON = 11920929e-14;\nconst PATH_DISTANCE_EPSILON = 1;\nconst curveAngleToleranceEpsilon = 0.01;\nconst mAngleTolerance = 0;\nfunction buildAdaptiveQuadratic(points, sX, sY, cp1x, cp1y, eX, eY, smoothness) {\n  const scale = 1;\n  const smoothing = Math.min(\n    0.99,\n    // a value of 1.0 actually inverts smoothing, so we cap it at 0.99\n    Math.max(0, smoothness ?? GraphicsContextSystem.defaultOptions.bezierSmoothness)\n  );\n  let distanceTolerance = (PATH_DISTANCE_EPSILON - smoothing) / scale;\n  distanceTolerance *= distanceTolerance;\n  begin(sX, sY, cp1x, cp1y, eX, eY, points, distanceTolerance);\n  return points;\n}\nfunction begin(sX, sY, cp1x, cp1y, eX, eY, points, distanceTolerance) {\n  recursive(points, sX, sY, cp1x, cp1y, eX, eY, distanceTolerance, 0);\n  points.push(eX, eY);\n}\nfunction recursive(points, x1, y1, x2, y2, x3, y3, distanceTolerance, level) {\n  if (level > RECURSION_LIMIT) {\n    return;\n  }\n  const pi = Math.PI;\n  const x12 = (x1 + x2) / 2;\n  const y12 = (y1 + y2) / 2;\n  const x23 = (x2 + x3) / 2;\n  const y23 = (y2 + y3) / 2;\n  const x123 = (x12 + x23) / 2;\n  const y123 = (y12 + y23) / 2;\n  let dx = x3 - x1;\n  let dy = y3 - y1;\n  const d = Math.abs((x2 - x3) * dy - (y2 - y3) * dx);\n  if (d > FLT_EPSILON) {\n    if (d * d <= distanceTolerance * (dx * dx + dy * dy)) {\n      if (mAngleTolerance < curveAngleToleranceEpsilon) {\n        points.push(x123, y123);\n        return;\n      }\n      let da = Math.abs(Math.atan2(y3 - y2, x3 - x2) - Math.atan2(y2 - y1, x2 - x1));\n      if (da >= pi)\n        da = 2 * pi - da;\n      if (da < mAngleTolerance) {\n        points.push(x123, y123);\n        return;\n      }\n    }\n  } else {\n    dx = x123 - (x1 + x3) / 2;\n    dy = y123 - (y1 + y3) / 2;\n    if (dx * dx + dy * dy <= distanceTolerance) {\n      points.push(x123, y123);\n      return;\n    }\n  }\n  recursive(points, x1, y1, x12, y12, x123, y123, distanceTolerance, level + 1);\n  recursive(points, x123, y123, x23, y23, x3, y3, distanceTolerance, level + 1);\n}\n\nexport { buildAdaptiveQuadratic };\n//# sourceMappingURL=buildAdaptiveQuadratic.mjs.map\n","\"use strict\";\nfunction buildArc(points, x, y, radius, start, end, clockwise, steps) {\n  let dist = Math.abs(start - end);\n  if (!clockwise && start > end) {\n    dist = 2 * Math.PI - dist;\n  } else if (clockwise && end > start) {\n    dist = 2 * Math.PI - dist;\n  }\n  steps = steps || Math.max(6, Math.floor(6 * Math.pow(radius, 1 / 3) * (dist / Math.PI)));\n  steps = Math.max(steps, 3);\n  let f = dist / steps;\n  let t = start;\n  f *= clockwise ? -1 : 1;\n  for (let i = 0; i < steps + 1; i++) {\n    const cs = Math.cos(t);\n    const sn = Math.sin(t);\n    const nx = x + cs * radius;\n    const ny = y + sn * radius;\n    points.push(nx, ny);\n    t += f;\n  }\n}\n\nexport { buildArc };\n//# sourceMappingURL=buildArc.mjs.map\n","import { buildAdaptiveBezier } from './buildAdaptiveBezier.mjs';\n\n\"use strict\";\nconst TAU = Math.PI * 2;\nconst out = {\n  centerX: 0,\n  centerY: 0,\n  ang1: 0,\n  ang2: 0\n};\nconst mapToEllipse = ({ x, y }, rx, ry, cosPhi, sinPhi, centerX, centerY, out2) => {\n  x *= rx;\n  y *= ry;\n  const xp = cosPhi * x - sinPhi * y;\n  const yp = sinPhi * x + cosPhi * y;\n  out2.x = xp + centerX;\n  out2.y = yp + centerY;\n  return out2;\n};\nfunction approxUnitArc(ang1, ang2) {\n  const a1 = ang2 === -1.5707963267948966 ? -0.551915024494 : 4 / 3 * Math.tan(ang2 / 4);\n  const a = ang2 === 1.5707963267948966 ? 0.551915024494 : a1;\n  const x1 = Math.cos(ang1);\n  const y1 = Math.sin(ang1);\n  const x2 = Math.cos(ang1 + ang2);\n  const y2 = Math.sin(ang1 + ang2);\n  return [\n    {\n      x: x1 - y1 * a,\n      y: y1 + x1 * a\n    },\n    {\n      x: x2 + y2 * a,\n      y: y2 - x2 * a\n    },\n    {\n      x: x2,\n      y: y2\n    }\n  ];\n}\nconst vectorAngle = (ux, uy, vx, vy) => {\n  const sign = ux * vy - uy * vx < 0 ? -1 : 1;\n  let dot = ux * vx + uy * vy;\n  if (dot > 1) {\n    dot = 1;\n  }\n  if (dot < -1) {\n    dot = -1;\n  }\n  return sign * Math.acos(dot);\n};\nconst getArcCenter = (px, py, cx, cy, rx, ry, largeArcFlag, sweepFlag, sinPhi, cosPhi, pxp, pyp, out2) => {\n  const rxSq = Math.pow(rx, 2);\n  const rySq = Math.pow(ry, 2);\n  const pxpSq = Math.pow(pxp, 2);\n  const pypSq = Math.pow(pyp, 2);\n  let radicant = rxSq * rySq - rxSq * pypSq - rySq * pxpSq;\n  if (radicant < 0) {\n    radicant = 0;\n  }\n  radicant /= rxSq * pypSq + rySq * pxpSq;\n  radicant = Math.sqrt(radicant) * (largeArcFlag === sweepFlag ? -1 : 1);\n  const centerXp = radicant * rx / ry * pyp;\n  const centerYp = radicant * -ry / rx * pxp;\n  const centerX = cosPhi * centerXp - sinPhi * centerYp + (px + cx) / 2;\n  const centerY = sinPhi * centerXp + cosPhi * centerYp + (py + cy) / 2;\n  const vx1 = (pxp - centerXp) / rx;\n  const vy1 = (pyp - centerYp) / ry;\n  const vx2 = (-pxp - centerXp) / rx;\n  const vy2 = (-pyp - centerYp) / ry;\n  const ang1 = vectorAngle(1, 0, vx1, vy1);\n  let ang2 = vectorAngle(vx1, vy1, vx2, vy2);\n  if (sweepFlag === 0 && ang2 > 0) {\n    ang2 -= TAU;\n  }\n  if (sweepFlag === 1 && ang2 < 0) {\n    ang2 += TAU;\n  }\n  out2.centerX = centerX;\n  out2.centerY = centerY;\n  out2.ang1 = ang1;\n  out2.ang2 = ang2;\n};\nfunction buildArcToSvg(points, px, py, cx, cy, rx, ry, xAxisRotation = 0, largeArcFlag = 0, sweepFlag = 0) {\n  if (rx === 0 || ry === 0) {\n    return;\n  }\n  const sinPhi = Math.sin(xAxisRotation * TAU / 360);\n  const cosPhi = Math.cos(xAxisRotation * TAU / 360);\n  const pxp = cosPhi * (px - cx) / 2 + sinPhi * (py - cy) / 2;\n  const pyp = -sinPhi * (px - cx) / 2 + cosPhi * (py - cy) / 2;\n  if (pxp === 0 && pyp === 0) {\n    return;\n  }\n  rx = Math.abs(rx);\n  ry = Math.abs(ry);\n  const lambda = Math.pow(pxp, 2) / Math.pow(rx, 2) + Math.pow(pyp, 2) / Math.pow(ry, 2);\n  if (lambda > 1) {\n    rx *= Math.sqrt(lambda);\n    ry *= Math.sqrt(lambda);\n  }\n  getArcCenter(\n    px,\n    py,\n    cx,\n    cy,\n    rx,\n    ry,\n    largeArcFlag,\n    sweepFlag,\n    sinPhi,\n    cosPhi,\n    pxp,\n    pyp,\n    out\n  );\n  let { ang1, ang2 } = out;\n  const { centerX, centerY } = out;\n  let ratio = Math.abs(ang2) / (TAU / 4);\n  if (Math.abs(1 - ratio) < 1e-7) {\n    ratio = 1;\n  }\n  const segments = Math.max(Math.ceil(ratio), 1);\n  ang2 /= segments;\n  let lastX = points[points.length - 2];\n  let lastY = points[points.length - 1];\n  const outCurvePoint = { x: 0, y: 0 };\n  for (let i = 0; i < segments; i++) {\n    const curve = approxUnitArc(ang1, ang2);\n    const { x: x1, y: y1 } = mapToEllipse(curve[0], rx, ry, cosPhi, sinPhi, centerX, centerY, outCurvePoint);\n    const { x: x2, y: y2 } = mapToEllipse(curve[1], rx, ry, cosPhi, sinPhi, centerX, centerY, outCurvePoint);\n    const { x, y } = mapToEllipse(curve[2], rx, ry, cosPhi, sinPhi, centerX, centerY, outCurvePoint);\n    buildAdaptiveBezier(\n      points,\n      lastX,\n      lastY,\n      x1,\n      y1,\n      x2,\n      y2,\n      x,\n      y\n    );\n    lastX = x;\n    lastY = y;\n    ang1 += ang2;\n  }\n}\n\nexport { buildArcToSvg };\n//# sourceMappingURL=buildArcToSvg.mjs.map\n","import { Circle } from '../../../../maths/shapes/Circle.mjs';\nimport { Ellipse } from '../../../../maths/shapes/Ellipse.mjs';\nimport { Polygon } from '../../../../maths/shapes/Polygon.mjs';\nimport { Rectangle } from '../../../../maths/shapes/Rectangle.mjs';\nimport { RoundedRectangle } from '../../../../maths/shapes/RoundedRectangle.mjs';\nimport { Bounds } from '../../../container/bounds/Bounds.mjs';\nimport { buildAdaptiveBezier } from '../buildCommands/buildAdaptiveBezier.mjs';\nimport { buildAdaptiveQuadratic } from '../buildCommands/buildAdaptiveQuadratic.mjs';\nimport { buildArc } from '../buildCommands/buildArc.mjs';\nimport { buildArcTo } from '../buildCommands/buildArcTo.mjs';\nimport { buildArcToSvg } from '../buildCommands/buildArcToSvg.mjs';\nimport { roundedShapeQuadraticCurve, roundedShapeArc } from './roundShape.mjs';\n\n\"use strict\";\nconst tempRectangle = new Rectangle();\nclass ShapePath {\n  constructor(graphicsPath2D) {\n    /** The list of shape primitives that make up the path. */\n    this.shapePrimitives = [];\n    this._currentPoly = null;\n    this._bounds = new Bounds();\n    this._graphicsPath2D = graphicsPath2D;\n  }\n  /**\n   * Sets the starting point for a new sub-path. Any subsequent drawing commands are considered part of this path.\n   * @param x - The x-coordinate for the starting point.\n   * @param y - The y-coordinate for the starting point.\n   * @returns The instance of the current object for chaining.\n   */\n  moveTo(x, y) {\n    this.startPoly(x, y);\n    return this;\n  }\n  /**\n   * Connects the current point to a new point with a straight line. This method updates the current path.\n   * @param x - The x-coordinate of the new point to connect to.\n   * @param y - The y-coordinate of the new point to connect to.\n   * @returns The instance of the current object for chaining.\n   */\n  lineTo(x, y) {\n    this._ensurePoly();\n    const points = this._currentPoly.points;\n    const fromX = points[points.length - 2];\n    const fromY = points[points.length - 1];\n    if (fromX !== x || fromY !== y) {\n      points.push(x, y);\n    }\n    return this;\n  }\n  /**\n   * Adds an arc to the path. The arc is centered at (x, y)\n   *  position with radius `radius` starting at `startAngle` and ending at `endAngle`.\n   * @param x - The x-coordinate of the arc's center.\n   * @param y - The y-coordinate of the arc's center.\n   * @param radius - The radius of the arc.\n   * @param startAngle - The starting angle of the arc, in radians.\n   * @param endAngle - The ending angle of the arc, in radians.\n   * @param counterclockwise - Specifies whether the arc should be drawn in the anticlockwise direction. False by default.\n   * @returns The instance of the current object for chaining.\n   */\n  arc(x, y, radius, startAngle, endAngle, counterclockwise) {\n    this._ensurePoly(false);\n    const points = this._currentPoly.points;\n    buildArc(points, x, y, radius, startAngle, endAngle, counterclockwise);\n    return this;\n  }\n  /**\n   * Adds an arc to the path with the arc tangent to the line joining two specified points.\n   * The arc radius is specified by `radius`.\n   * @param x1 - The x-coordinate of the first point.\n   * @param y1 - The y-coordinate of the first point.\n   * @param x2 - The x-coordinate of the second point.\n   * @param y2 - The y-coordinate of the second point.\n   * @param radius - The radius of the arc.\n   * @returns The instance of the current object for chaining.\n   */\n  arcTo(x1, y1, x2, y2, radius) {\n    this._ensurePoly();\n    const points = this._currentPoly.points;\n    buildArcTo(points, x1, y1, x2, y2, radius);\n    return this;\n  }\n  /**\n   * Adds an SVG-style arc to the path, allowing for elliptical arcs based on the SVG spec.\n   * @param rx - The x-radius of the ellipse.\n   * @param ry - The y-radius of the ellipse.\n   * @param xAxisRotation - The rotation of the ellipse's x-axis relative\n   * to the x-axis of the coordinate system, in degrees.\n   * @param largeArcFlag - Determines if the arc should be greater than or less than 180 degrees.\n   * @param sweepFlag - Determines if the arc should be swept in a positive angle direction.\n   * @param x - The x-coordinate of the arc's end point.\n   * @param y - The y-coordinate of the arc's end point.\n   * @returns The instance of the current object for chaining.\n   */\n  arcToSvg(rx, ry, xAxisRotation, largeArcFlag, sweepFlag, x, y) {\n    const points = this._currentPoly.points;\n    buildArcToSvg(\n      points,\n      this._currentPoly.lastX,\n      this._currentPoly.lastY,\n      x,\n      y,\n      rx,\n      ry,\n      xAxisRotation,\n      largeArcFlag,\n      sweepFlag\n    );\n    return this;\n  }\n  /**\n   * Adds a cubic Bezier curve to the path.\n   * It requires three points: the first two are control points and the third one is the end point.\n   * The starting point is the last point in the current path.\n   * @param cp1x - The x-coordinate of the first control point.\n   * @param cp1y - The y-coordinate of the first control point.\n   * @param cp2x - The x-coordinate of the second control point.\n   * @param cp2y - The y-coordinate of the second control point.\n   * @param x - The x-coordinate of the end point.\n   * @param y - The y-coordinate of the end point.\n   * @param smoothness - Optional parameter to adjust the smoothness of the curve.\n   * @returns The instance of the current object for chaining.\n   */\n  bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y, smoothness) {\n    this._ensurePoly();\n    const currentPoly = this._currentPoly;\n    buildAdaptiveBezier(\n      this._currentPoly.points,\n      currentPoly.lastX,\n      currentPoly.lastY,\n      cp1x,\n      cp1y,\n      cp2x,\n      cp2y,\n      x,\n      y,\n      smoothness\n    );\n    return this;\n  }\n  /**\n   * Adds a quadratic curve to the path. It requires two points: the control point and the end point.\n   * The starting point is the last point in the current path.\n   * @param cp1x - The x-coordinate of the control point.\n   * @param cp1y - The y-coordinate of the control point.\n   * @param x - The x-coordinate of the end point.\n   * @param y - The y-coordinate of the end point.\n   * @param smoothing - Optional parameter to adjust the smoothness of the curve.\n   * @returns The instance of the current object for chaining.\n   */\n  quadraticCurveTo(cp1x, cp1y, x, y, smoothing) {\n    this._ensurePoly();\n    const currentPoly = this._currentPoly;\n    buildAdaptiveQuadratic(\n      this._currentPoly.points,\n      currentPoly.lastX,\n      currentPoly.lastY,\n      cp1x,\n      cp1y,\n      x,\n      y,\n      smoothing\n    );\n    return this;\n  }\n  /**\n   * Closes the current path by drawing a straight line back to the start.\n   * If the shape is already closed or there are no points in the path, this method does nothing.\n   * @returns The instance of the current object for chaining.\n   */\n  closePath() {\n    this.endPoly(true);\n    return this;\n  }\n  /**\n   * Adds another path to the current path. This method allows for the combination of multiple paths into one.\n   * @param path - The `GraphicsPath` object representing the path to add.\n   * @param transform - An optional `Matrix` object to apply a transformation to the path before adding it.\n   * @returns The instance of the current object for chaining.\n   */\n  addPath(path, transform) {\n    this.endPoly();\n    if (transform && !transform.isIdentity()) {\n      path = path.clone(true);\n      path.transform(transform);\n    }\n    for (let i = 0; i < path.instructions.length; i++) {\n      const instruction = path.instructions[i];\n      this[instruction.action](...instruction.data);\n    }\n    return this;\n  }\n  /**\n   * Finalizes the drawing of the current path. Optionally, it can close the path.\n   * @param closePath - A boolean indicating whether to close the path after finishing. False by default.\n   */\n  finish(closePath = false) {\n    this.endPoly(closePath);\n  }\n  /**\n   * Draws a rectangle shape. This method adds a new rectangle path to the current drawing.\n   * @param x - The x-coordinate of the top-left corner of the rectangle.\n   * @param y - The y-coordinate of the top-left corner of the rectangle.\n   * @param w - The width of the rectangle.\n   * @param h - The height of the rectangle.\n   * @param transform - An optional `Matrix` object to apply a transformation to the rectangle.\n   * @returns The instance of the current object for chaining.\n   */\n  rect(x, y, w, h, transform) {\n    this.drawShape(new Rectangle(x, y, w, h), transform);\n    return this;\n  }\n  /**\n   * Draws a circle shape. This method adds a new circle path to the current drawing.\n   * @param x - The x-coordinate of the center of the circle.\n   * @param y - The y-coordinate of the center of the circle.\n   * @param radius - The radius of the circle.\n   * @param transform - An optional `Matrix` object to apply a transformation to the circle.\n   * @returns The instance of the current object for chaining.\n   */\n  circle(x, y, radius, transform) {\n    this.drawShape(new Circle(x, y, radius), transform);\n    return this;\n  }\n  /**\n   * Draws a polygon shape. This method allows for the creation of complex polygons by specifying a sequence of points.\n   * @param points - An array of numbers, or or an array of PointData objects eg [{x,y}, {x,y}, {x,y}]\n   * representing the x and y coordinates of the polygon's vertices, in sequence.\n   * @param close - A boolean indicating whether to close the polygon path. True by default.\n   * @param transform - An optional `Matrix` object to apply a transformation to the polygon.\n   * @returns The instance of the current object for chaining.\n   */\n  poly(points, close, transform) {\n    const polygon = new Polygon(points);\n    polygon.closePath = close;\n    this.drawShape(polygon, transform);\n    return this;\n  }\n  /**\n   * Draws a regular polygon with a specified number of sides. All sides and angles are equal.\n   * @param x - The x-coordinate of the center of the polygon.\n   * @param y - The y-coordinate of the center of the polygon.\n   * @param radius - The radius of the circumscribed circle of the polygon.\n   * @param sides - The number of sides of the polygon. Must be 3 or more.\n   * @param rotation - The rotation angle of the polygon, in radians. Zero by default.\n   * @param transform - An optional `Matrix` object to apply a transformation to the polygon.\n   * @returns The instance of the current object for chaining.\n   */\n  regularPoly(x, y, radius, sides, rotation = 0, transform) {\n    sides = Math.max(sides | 0, 3);\n    const startAngle = -1 * Math.PI / 2 + rotation;\n    const delta = Math.PI * 2 / sides;\n    const polygon = [];\n    for (let i = 0; i < sides; i++) {\n      const angle = i * delta + startAngle;\n      polygon.push(\n        x + radius * Math.cos(angle),\n        y + radius * Math.sin(angle)\n      );\n    }\n    this.poly(polygon, true, transform);\n    return this;\n  }\n  /**\n   * Draws a polygon with rounded corners.\n   * Similar to `regularPoly` but with the ability to round the corners of the polygon.\n   * @param x - The x-coordinate of the center of the polygon.\n   * @param y - The y-coordinate of the center of the polygon.\n   * @param radius - The radius of the circumscribed circle of the polygon.\n   * @param sides - The number of sides of the polygon. Must be 3 or more.\n   * @param corner - The radius of the rounding of the corners.\n   * @param rotation - The rotation angle of the polygon, in radians. Zero by default.\n   * @param smoothness - Optional parameter to adjust the smoothness of the rounding.\n   * @returns The instance of the current object for chaining.\n   */\n  roundPoly(x, y, radius, sides, corner, rotation = 0, smoothness) {\n    sides = Math.max(sides | 0, 3);\n    if (corner <= 0) {\n      return this.regularPoly(x, y, radius, sides, rotation);\n    }\n    const sideLength = radius * Math.sin(Math.PI / sides) - 1e-3;\n    corner = Math.min(corner, sideLength);\n    const startAngle = -1 * Math.PI / 2 + rotation;\n    const delta = Math.PI * 2 / sides;\n    const internalAngle = (sides - 2) * Math.PI / sides / 2;\n    for (let i = 0; i < sides; i++) {\n      const angle = i * delta + startAngle;\n      const x0 = x + radius * Math.cos(angle);\n      const y0 = y + radius * Math.sin(angle);\n      const a1 = angle + Math.PI + internalAngle;\n      const a2 = angle - Math.PI - internalAngle;\n      const x1 = x0 + corner * Math.cos(a1);\n      const y1 = y0 + corner * Math.sin(a1);\n      const x3 = x0 + corner * Math.cos(a2);\n      const y3 = y0 + corner * Math.sin(a2);\n      if (i === 0) {\n        this.moveTo(x1, y1);\n      } else {\n        this.lineTo(x1, y1);\n      }\n      this.quadraticCurveTo(x0, y0, x3, y3, smoothness);\n    }\n    return this.closePath();\n  }\n  /**\n   * Draws a shape with rounded corners. This function supports custom radius for each corner of the shape.\n   * Optionally, corners can be rounded using a quadratic curve instead of an arc, providing a different aesthetic.\n   * @param points - An array of `RoundedPoint` representing the corners of the shape to draw.\n   * A minimum of 3 points is required.\n   * @param radius - The default radius for the corners.\n   * This radius is applied to all corners unless overridden in `points`.\n   * @param useQuadratic - If set to true, rounded corners are drawn using a quadraticCurve\n   *  method instead of an arc method. Defaults to false.\n   * @param smoothness - Specifies the smoothness of the curve when `useQuadratic` is true.\n   * Higher values make the curve smoother.\n   * @returns The instance of the current object for chaining.\n   */\n  roundShape(points, radius, useQuadratic = false, smoothness) {\n    if (points.length < 3) {\n      return this;\n    }\n    if (useQuadratic) {\n      roundedShapeQuadraticCurve(this, points, radius, smoothness);\n    } else {\n      roundedShapeArc(this, points, radius);\n    }\n    return this.closePath();\n  }\n  /**\n   * Draw Rectangle with fillet corners. This is much like rounded rectangle\n   * however it support negative numbers as well for the corner radius.\n   * @param x - Upper left corner of rect\n   * @param y - Upper right corner of rect\n   * @param width - Width of rect\n   * @param height - Height of rect\n   * @param fillet - accept negative or positive values\n   */\n  filletRect(x, y, width, height, fillet) {\n    if (fillet === 0) {\n      return this.rect(x, y, width, height);\n    }\n    const maxFillet = Math.min(width, height) / 2;\n    const inset = Math.min(maxFillet, Math.max(-maxFillet, fillet));\n    const right = x + width;\n    const bottom = y + height;\n    const dir = inset < 0 ? -inset : 0;\n    const size = Math.abs(inset);\n    return this.moveTo(x, y + size).arcTo(x + dir, y + dir, x + size, y, size).lineTo(right - size, y).arcTo(right - dir, y + dir, right, y + size, size).lineTo(right, bottom - size).arcTo(right - dir, bottom - dir, x + width - size, bottom, size).lineTo(x + size, bottom).arcTo(x + dir, bottom - dir, x, bottom - size, size).closePath();\n  }\n  /**\n   * Draw Rectangle with chamfer corners. These are angled corners.\n   * @param x - Upper left corner of rect\n   * @param y - Upper right corner of rect\n   * @param width - Width of rect\n   * @param height - Height of rect\n   * @param chamfer - non-zero real number, size of corner cutout\n   * @param transform\n   */\n  chamferRect(x, y, width, height, chamfer, transform) {\n    if (chamfer <= 0) {\n      return this.rect(x, y, width, height);\n    }\n    const inset = Math.min(chamfer, Math.min(width, height) / 2);\n    const right = x + width;\n    const bottom = y + height;\n    const points = [\n      x + inset,\n      y,\n      right - inset,\n      y,\n      right,\n      y + inset,\n      right,\n      bottom - inset,\n      right - inset,\n      bottom,\n      x + inset,\n      bottom,\n      x,\n      bottom - inset,\n      x,\n      y + inset\n    ];\n    for (let i = points.length - 1; i >= 2; i -= 2) {\n      if (points[i] === points[i - 2] && points[i - 1] === points[i - 3]) {\n        points.splice(i - 1, 2);\n      }\n    }\n    return this.poly(points, true, transform);\n  }\n  /**\n   * Draws an ellipse at the specified location and with the given x and y radii.\n   * An optional transformation can be applied, allowing for rotation, scaling, and translation.\n   * @param x - The x-coordinate of the center of the ellipse.\n   * @param y - The y-coordinate of the center of the ellipse.\n   * @param radiusX - The horizontal radius of the ellipse.\n   * @param radiusY - The vertical radius of the ellipse.\n   * @param transform - An optional `Matrix` object to apply a transformation to the ellipse. This can include rotations.\n   * @returns The instance of the current object for chaining.\n   */\n  ellipse(x, y, radiusX, radiusY, transform) {\n    this.drawShape(new Ellipse(x, y, radiusX, radiusY), transform);\n    return this;\n  }\n  /**\n   * Draws a rectangle with rounded corners.\n   * The corner radius can be specified to determine how rounded the corners should be.\n   * An optional transformation can be applied, which allows for rotation, scaling, and translation of the rectangle.\n   * @param x - The x-coordinate of the top-left corner of the rectangle.\n   * @param y - The y-coordinate of the top-left corner of the rectangle.\n   * @param w - The width of the rectangle.\n   * @param h - The height of the rectangle.\n   * @param radius - The radius of the rectangle's corners. If not specified, corners will be sharp.\n   * @param transform - An optional `Matrix` object to apply a transformation to the rectangle.\n   * @returns The instance of the current object for chaining.\n   */\n  roundRect(x, y, w, h, radius, transform) {\n    this.drawShape(new RoundedRectangle(x, y, w, h, radius), transform);\n    return this;\n  }\n  /**\n   * Draws a given shape on the canvas.\n   * This is a generic method that can draw any type of shape specified by the `ShapePrimitive` parameter.\n   * An optional transformation matrix can be applied to the shape, allowing for complex transformations.\n   * @param shape - The shape to draw, defined as a `ShapePrimitive` object.\n   * @param matrix - An optional `Matrix` for transforming the shape. This can include rotations,\n   * scaling, and translations.\n   * @returns The instance of the current object for chaining.\n   */\n  drawShape(shape, matrix) {\n    this.endPoly();\n    this.shapePrimitives.push({ shape, transform: matrix });\n    return this;\n  }\n  /**\n   * Starts a new polygon path from the specified starting point.\n   * This method initializes a new polygon or ends the current one if it exists.\n   * @param x - The x-coordinate of the starting point of the new polygon.\n   * @param y - The y-coordinate of the starting point of the new polygon.\n   * @returns The instance of the current object for chaining.\n   */\n  startPoly(x, y) {\n    let currentPoly = this._currentPoly;\n    if (currentPoly) {\n      this.endPoly();\n    }\n    currentPoly = new Polygon();\n    currentPoly.points.push(x, y);\n    this._currentPoly = currentPoly;\n    return this;\n  }\n  /**\n   * Ends the current polygon path. If `closePath` is set to true,\n   * the path is closed by connecting the last point to the first one.\n   * This method finalizes the current polygon and prepares it for drawing or adding to the shape primitives.\n   * @param closePath - A boolean indicating whether to close the polygon by connecting the last point\n   *  back to the starting point. False by default.\n   * @returns The instance of the current object for chaining.\n   */\n  endPoly(closePath = false) {\n    const shape = this._currentPoly;\n    if (shape && shape.points.length > 2) {\n      shape.closePath = closePath;\n      this.shapePrimitives.push({ shape });\n    }\n    this._currentPoly = null;\n    return this;\n  }\n  _ensurePoly(start = true) {\n    if (this._currentPoly)\n      return;\n    this._currentPoly = new Polygon();\n    if (start) {\n      const lastShape = this.shapePrimitives[this.shapePrimitives.length - 1];\n      if (lastShape) {\n        let lx = lastShape.shape.x;\n        let ly = lastShape.shape.y;\n        if (lastShape.transform && !lastShape.transform.isIdentity()) {\n          const t = lastShape.transform;\n          const tempX = lx;\n          lx = t.a * lx + t.c * ly + t.tx;\n          ly = t.b * tempX + t.d * ly + t.ty;\n        }\n        this._currentPoly.points.push(lx, ly);\n      } else {\n        this._currentPoly.points.push(0, 0);\n      }\n    }\n  }\n  /** Builds the path. */\n  buildPath() {\n    const path = this._graphicsPath2D;\n    this.shapePrimitives.length = 0;\n    this._currentPoly = null;\n    for (let i = 0; i < path.instructions.length; i++) {\n      const instruction = path.instructions[i];\n      this[instruction.action](...instruction.data);\n    }\n    this.finish();\n  }\n  /** Gets the bounds of the path. */\n  get bounds() {\n    const bounds = this._bounds;\n    bounds.clear();\n    const shapePrimitives = this.shapePrimitives;\n    for (let i = 0; i < shapePrimitives.length; i++) {\n      const shapePrimitive = shapePrimitives[i];\n      const boundsRect = shapePrimitive.shape.getBounds(tempRectangle);\n      if (shapePrimitive.transform) {\n        bounds.addRect(boundsRect, shapePrimitive.transform);\n      } else {\n        bounds.addRect(boundsRect);\n      }\n    }\n    return bounds;\n  }\n}\n\nexport { ShapePath };\n//# sourceMappingURL=ShapePath.mjs.map\n","import { buildArc } from './buildArc.mjs';\n\n\"use strict\";\nfunction buildArcTo(points, x1, y1, x2, y2, radius) {\n  const fromX = points[points.length - 2];\n  const fromY = points[points.length - 1];\n  const a1 = fromY - y1;\n  const b1 = fromX - x1;\n  const a2 = y2 - y1;\n  const b2 = x2 - x1;\n  const mm = Math.abs(a1 * b2 - b1 * a2);\n  if (mm < 1e-8 || radius === 0) {\n    if (points[points.length - 2] !== x1 || points[points.length - 1] !== y1) {\n      points.push(x1, y1);\n    }\n    return;\n  }\n  const dd = a1 * a1 + b1 * b1;\n  const cc = a2 * a2 + b2 * b2;\n  const tt = a1 * a2 + b1 * b2;\n  const k1 = radius * Math.sqrt(dd) / mm;\n  const k2 = radius * Math.sqrt(cc) / mm;\n  const j1 = k1 * tt / dd;\n  const j2 = k2 * tt / cc;\n  const cx = k1 * b2 + k2 * b1;\n  const cy = k1 * a2 + k2 * a1;\n  const px = b1 * (k2 + j1);\n  const py = a1 * (k2 + j1);\n  const qx = b2 * (k1 + j2);\n  const qy = a2 * (k1 + j2);\n  const startAngle = Math.atan2(py - cy, px - cx);\n  const endAngle = Math.atan2(qy - cy, qx - cx);\n  buildArc(\n    points,\n    cx + x1,\n    cy + y1,\n    radius,\n    startAngle,\n    endAngle,\n    b1 * a2 > b2 * a1\n  );\n}\n\nexport { buildArcTo };\n//# sourceMappingURL=buildArcTo.mjs.map\n","\"use strict\";\nfunction roundedShapeArc(g, points, radius) {\n  const vecFrom = (p, pp) => {\n    const x = pp.x - p.x;\n    const y = pp.y - p.y;\n    const len = Math.sqrt(x * x + y * y);\n    const nx = x / len;\n    const ny = y / len;\n    return { len, nx, ny };\n  };\n  const sharpCorner = (i, p) => {\n    if (i === 0) {\n      g.moveTo(p.x, p.y);\n    } else {\n      g.lineTo(p.x, p.y);\n    }\n  };\n  let p1 = points[points.length - 1];\n  for (let i = 0; i < points.length; i++) {\n    const p2 = points[i % points.length];\n    const pRadius = p2.radius ?? radius;\n    if (pRadius <= 0) {\n      sharpCorner(i, p2);\n      p1 = p2;\n      continue;\n    }\n    const p3 = points[(i + 1) % points.length];\n    const v1 = vecFrom(p2, p1);\n    const v2 = vecFrom(p2, p3);\n    if (v1.len < 1e-4 || v2.len < 1e-4) {\n      sharpCorner(i, p2);\n      p1 = p2;\n      continue;\n    }\n    let angle = Math.asin(v1.nx * v2.ny - v1.ny * v2.nx);\n    let radDirection = 1;\n    let drawDirection = false;\n    if (v1.nx * v2.nx - v1.ny * -v2.ny < 0) {\n      if (angle < 0) {\n        angle = Math.PI + angle;\n      } else {\n        angle = Math.PI - angle;\n        radDirection = -1;\n        drawDirection = true;\n      }\n    } else if (angle > 0) {\n      radDirection = -1;\n      drawDirection = true;\n    }\n    const halfAngle = angle / 2;\n    let cRadius;\n    let lenOut = Math.abs(\n      Math.cos(halfAngle) * pRadius / Math.sin(halfAngle)\n    );\n    if (lenOut > Math.min(v1.len / 2, v2.len / 2)) {\n      lenOut = Math.min(v1.len / 2, v2.len / 2);\n      cRadius = Math.abs(lenOut * Math.sin(halfAngle) / Math.cos(halfAngle));\n    } else {\n      cRadius = pRadius;\n    }\n    const cX = p2.x + v2.nx * lenOut + -v2.ny * cRadius * radDirection;\n    const cY = p2.y + v2.ny * lenOut + v2.nx * cRadius * radDirection;\n    const startAngle = Math.atan2(v1.ny, v1.nx) + Math.PI / 2 * radDirection;\n    const endAngle = Math.atan2(v2.ny, v2.nx) - Math.PI / 2 * radDirection;\n    if (i === 0) {\n      g.moveTo(\n        cX + Math.cos(startAngle) * cRadius,\n        cY + Math.sin(startAngle) * cRadius\n      );\n    }\n    g.arc(cX, cY, cRadius, startAngle, endAngle, drawDirection);\n    p1 = p2;\n  }\n}\nfunction roundedShapeQuadraticCurve(g, points, radius, smoothness) {\n  const distance = (p1, p2) => Math.sqrt((p1.x - p2.x) ** 2 + (p1.y - p2.y) ** 2);\n  const pointLerp = (p1, p2, t) => ({\n    x: p1.x + (p2.x - p1.x) * t,\n    y: p1.y + (p2.y - p1.y) * t\n  });\n  const numPoints = points.length;\n  for (let i = 0; i < numPoints; i++) {\n    const thisPoint = points[(i + 1) % numPoints];\n    const pRadius = thisPoint.radius ?? radius;\n    if (pRadius <= 0) {\n      if (i === 0) {\n        g.moveTo(thisPoint.x, thisPoint.y);\n      } else {\n        g.lineTo(thisPoint.x, thisPoint.y);\n      }\n      continue;\n    }\n    const lastPoint = points[i];\n    const nextPoint = points[(i + 2) % numPoints];\n    const lastEdgeLength = distance(lastPoint, thisPoint);\n    let start;\n    if (lastEdgeLength < 1e-4) {\n      start = thisPoint;\n    } else {\n      const lastOffsetDistance = Math.min(lastEdgeLength / 2, pRadius);\n      start = pointLerp(\n        thisPoint,\n        lastPoint,\n        lastOffsetDistance / lastEdgeLength\n      );\n    }\n    const nextEdgeLength = distance(nextPoint, thisPoint);\n    let end;\n    if (nextEdgeLength < 1e-4) {\n      end = thisPoint;\n    } else {\n      const nextOffsetDistance = Math.min(nextEdgeLength / 2, pRadius);\n      end = pointLerp(\n        thisPoint,\n        nextPoint,\n        nextOffsetDistance / nextEdgeLength\n      );\n    }\n    if (i === 0) {\n      g.moveTo(start.x, start.y);\n    } else {\n      g.lineTo(start.x, start.y);\n    }\n    g.quadraticCurveTo(thisPoint.x, thisPoint.y, end.x, end.y, smoothness);\n  }\n}\n\nexport { roundedShapeArc, roundedShapeQuadraticCurve };\n//# sourceMappingURL=roundShape.mjs.map\n","import { Point } from '../../../../maths/point/Point.mjs';\nimport { uid } from '../../../../utils/data/uid.mjs';\nimport { warn } from '../../../../utils/logging/warn.mjs';\nimport { SVGToGraphicsPath } from '../svg/SVGToGraphicsPath.mjs';\nimport { ShapePath } from './ShapePath.mjs';\n\n\"use strict\";\nclass GraphicsPath {\n  /**\n   * Creates a `GraphicsPath` instance optionally from an SVG path string or an array of `PathInstruction`.\n   * @param instructions - An SVG path string or an array of `PathInstruction` objects.\n   */\n  constructor(instructions) {\n    this.instructions = [];\n    this.uid = uid(\"graphicsPath\");\n    this._dirty = true;\n    if (typeof instructions === \"string\") {\n      SVGToGraphicsPath(instructions, this);\n    } else {\n      this.instructions = instructions?.slice() ?? [];\n    }\n  }\n  /**\n   * Provides access to the internal shape path, ensuring it is up-to-date with the current instructions.\n   * @returns The `ShapePath` instance associated with this `GraphicsPath`.\n   */\n  get shapePath() {\n    if (!this._shapePath) {\n      this._shapePath = new ShapePath(this);\n    }\n    if (this._dirty) {\n      this._dirty = false;\n      this._shapePath.buildPath();\n    }\n    return this._shapePath;\n  }\n  /**\n   * Adds another `GraphicsPath` to this path, optionally applying a transformation.\n   * @param path - The `GraphicsPath` to add.\n   * @param transform - An optional transformation to apply to the added path.\n   * @returns The instance of the current object for chaining.\n   */\n  addPath(path, transform) {\n    path = path.clone();\n    this.instructions.push({ action: \"addPath\", data: [path, transform] });\n    this._dirty = true;\n    return this;\n  }\n  arc(...args) {\n    this.instructions.push({ action: \"arc\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  arcTo(...args) {\n    this.instructions.push({ action: \"arcTo\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  arcToSvg(...args) {\n    this.instructions.push({ action: \"arcToSvg\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  bezierCurveTo(...args) {\n    this.instructions.push({ action: \"bezierCurveTo\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  /**\n   * Adds a cubic Bezier curve to the path.\n   * It requires two points: the second control point and the end point. The first control point is assumed to be\n   * The starting point is the last point in the current path.\n   * @param cp2x - The x-coordinate of the second control point.\n   * @param cp2y - The y-coordinate of the second control point.\n   * @param x - The x-coordinate of the end point.\n   * @param y - The y-coordinate of the end point.\n   * @param smoothness - Optional parameter to adjust the smoothness of the curve.\n   * @returns The instance of the current object for chaining.\n   */\n  bezierCurveToShort(cp2x, cp2y, x, y, smoothness) {\n    const last = this.instructions[this.instructions.length - 1];\n    const lastPoint = this.getLastPoint(Point.shared);\n    let cp1x = 0;\n    let cp1y = 0;\n    if (!last || last.action !== \"bezierCurveTo\") {\n      cp1x = lastPoint.x;\n      cp1y = lastPoint.y;\n    } else {\n      cp1x = last.data[2];\n      cp1y = last.data[3];\n      const currentX = lastPoint.x;\n      const currentY = lastPoint.y;\n      cp1x = currentX + (currentX - cp1x);\n      cp1y = currentY + (currentY - cp1y);\n    }\n    this.instructions.push({ action: \"bezierCurveTo\", data: [cp1x, cp1y, cp2x, cp2y, x, y, smoothness] });\n    this._dirty = true;\n    return this;\n  }\n  /**\n   * Closes the current path by drawing a straight line back to the start.\n   * If the shape is already closed or there are no points in the path, this method does nothing.\n   * @returns The instance of the current object for chaining.\n   */\n  closePath() {\n    this.instructions.push({ action: \"closePath\", data: [] });\n    this._dirty = true;\n    return this;\n  }\n  ellipse(...args) {\n    this.instructions.push({ action: \"ellipse\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  lineTo(...args) {\n    this.instructions.push({ action: \"lineTo\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  moveTo(...args) {\n    this.instructions.push({ action: \"moveTo\", data: args });\n    return this;\n  }\n  quadraticCurveTo(...args) {\n    this.instructions.push({ action: \"quadraticCurveTo\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  /**\n   * Adds a quadratic curve to the path. It uses the previous point as the control point.\n   * @param x - The x-coordinate of the end point.\n   * @param y - The y-coordinate of the end point.\n   * @param smoothness - Optional parameter to adjust the smoothness of the curve.\n   * @returns The instance of the current object for chaining.\n   */\n  quadraticCurveToShort(x, y, smoothness) {\n    const last = this.instructions[this.instructions.length - 1];\n    const lastPoint = this.getLastPoint(Point.shared);\n    let cpx1 = 0;\n    let cpy1 = 0;\n    if (!last || last.action !== \"quadraticCurveTo\") {\n      cpx1 = lastPoint.x;\n      cpy1 = lastPoint.y;\n    } else {\n      cpx1 = last.data[0];\n      cpy1 = last.data[1];\n      const currentX = lastPoint.x;\n      const currentY = lastPoint.y;\n      cpx1 = currentX + (currentX - cpx1);\n      cpy1 = currentY + (currentY - cpy1);\n    }\n    this.instructions.push({ action: \"quadraticCurveTo\", data: [cpx1, cpy1, x, y, smoothness] });\n    this._dirty = true;\n    return this;\n  }\n  /**\n   * Draws a rectangle shape. This method adds a new rectangle path to the current drawing.\n   * @param x - The x-coordinate of the top-left corner of the rectangle.\n   * @param y - The y-coordinate of the top-left corner of the rectangle.\n   * @param w - The width of the rectangle.\n   * @param h - The height of the rectangle.\n   * @param transform - An optional `Matrix` object to apply a transformation to the rectangle.\n   * @returns The instance of the current object for chaining.\n   */\n  rect(x, y, w, h, transform) {\n    this.instructions.push({ action: \"rect\", data: [x, y, w, h, transform] });\n    this._dirty = true;\n    return this;\n  }\n  /**\n   * Draws a circle shape. This method adds a new circle path to the current drawing.\n   * @param x - The x-coordinate of the center of the circle.\n   * @param y - The y-coordinate of the center of the circle.\n   * @param radius - The radius of the circle.\n   * @param transform - An optional `Matrix` object to apply a transformation to the circle.\n   * @returns The instance of the current object for chaining.\n   */\n  circle(x, y, radius, transform) {\n    this.instructions.push({ action: \"circle\", data: [x, y, radius, transform] });\n    this._dirty = true;\n    return this;\n  }\n  roundRect(...args) {\n    this.instructions.push({ action: \"roundRect\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  poly(...args) {\n    this.instructions.push({ action: \"poly\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  regularPoly(...args) {\n    this.instructions.push({ action: \"regularPoly\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  roundPoly(...args) {\n    this.instructions.push({ action: \"roundPoly\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  roundShape(...args) {\n    this.instructions.push({ action: \"roundShape\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  filletRect(...args) {\n    this.instructions.push({ action: \"filletRect\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  chamferRect(...args) {\n    this.instructions.push({ action: \"chamferRect\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  /**\n   * Draws a star shape centered at a specified location. This method allows for the creation\n   *  of stars with a variable number of points, outer radius, optional inner radius, and rotation.\n   * The star is drawn as a closed polygon with alternating outer and inner vertices to create the star's points.\n   * An optional transformation can be applied to scale, rotate, or translate the star as needed.\n   * @param x - The x-coordinate of the center of the star.\n   * @param y - The y-coordinate of the center of the star.\n   * @param points - The number of points of the star.\n   * @param radius - The outer radius of the star (distance from the center to the outer points).\n   * @param innerRadius - Optional. The inner radius of the star\n   * (distance from the center to the inner points between the outer points).\n   * If not provided, defaults to half of the `radius`.\n   * @param rotation - Optional. The rotation of the star in radians, where 0 is aligned with the y-axis.\n   * Defaults to 0, meaning one point is directly upward.\n   * @param transform - An optional `Matrix` object to apply a transformation to the star.\n   * This can include rotations, scaling, and translations.\n   * @returns The instance of the current object for chaining further drawing commands.\n   */\n  // eslint-disable-next-line max-len\n  star(x, y, points, radius, innerRadius, rotation, transform) {\n    innerRadius = innerRadius || radius / 2;\n    const startAngle = -1 * Math.PI / 2 + rotation;\n    const len = points * 2;\n    const delta = Math.PI * 2 / len;\n    const polygon = [];\n    for (let i = 0; i < len; i++) {\n      const r = i % 2 ? innerRadius : radius;\n      const angle = i * delta + startAngle;\n      polygon.push(\n        x + r * Math.cos(angle),\n        y + r * Math.sin(angle)\n      );\n    }\n    this.poly(polygon, true, transform);\n    return this;\n  }\n  /**\n   * Creates a copy of the current `GraphicsPath` instance. This method supports both shallow and deep cloning.\n   * A shallow clone copies the reference of the instructions array, while a deep clone creates a new array and\n   * copies each instruction individually, ensuring that modifications to the instructions of the cloned `GraphicsPath`\n   * do not affect the original `GraphicsPath` and vice versa.\n   * @param deep - A boolean flag indicating whether the clone should be deep.\n   * @returns A new `GraphicsPath` instance that is a clone of the current instance.\n   */\n  clone(deep = false) {\n    const newGraphicsPath2D = new GraphicsPath();\n    if (!deep) {\n      newGraphicsPath2D.instructions = this.instructions.slice();\n    } else {\n      for (let i = 0; i < this.instructions.length; i++) {\n        const instruction = this.instructions[i];\n        newGraphicsPath2D.instructions.push({ action: instruction.action, data: instruction.data.slice() });\n      }\n    }\n    return newGraphicsPath2D;\n  }\n  clear() {\n    this.instructions.length = 0;\n    this._dirty = true;\n    return this;\n  }\n  /**\n   * Applies a transformation matrix to all drawing instructions within the `GraphicsPath`.\n   * This method enables the modification of the path's geometry according to the provided\n   * transformation matrix, which can include translations, rotations, scaling, and skewing.\n   *\n   * Each drawing instruction in the path is updated to reflect the transformation,\n   * ensuring the visual representation of the path is consistent with the applied matrix.\n   *\n   * Note: The transformation is applied directly to the coordinates and control points of the drawing instructions,\n   * not to the path as a whole. This means the transformation's effects are baked into the individual instructions,\n   * allowing for fine-grained control over the path's appearance.\n   * @param matrix - A `Matrix` object representing the transformation to apply.\n   * @returns The instance of the current object for chaining further operations.\n   */\n  transform(matrix) {\n    if (matrix.isIdentity())\n      return this;\n    const a = matrix.a;\n    const b = matrix.b;\n    const c = matrix.c;\n    const d = matrix.d;\n    const tx = matrix.tx;\n    const ty = matrix.ty;\n    let x = 0;\n    let y = 0;\n    let cpx1 = 0;\n    let cpy1 = 0;\n    let cpx2 = 0;\n    let cpy2 = 0;\n    let rx = 0;\n    let ry = 0;\n    for (let i = 0; i < this.instructions.length; i++) {\n      const instruction = this.instructions[i];\n      const data = instruction.data;\n      switch (instruction.action) {\n        case \"moveTo\":\n        case \"lineTo\":\n          x = data[0];\n          y = data[1];\n          data[0] = a * x + c * y + tx;\n          data[1] = b * x + d * y + ty;\n          break;\n        case \"bezierCurveTo\":\n          cpx1 = data[0];\n          cpy1 = data[1];\n          cpx2 = data[2];\n          cpy2 = data[3];\n          x = data[4];\n          y = data[5];\n          data[0] = a * cpx1 + c * cpy1 + tx;\n          data[1] = b * cpx1 + d * cpy1 + ty;\n          data[2] = a * cpx2 + c * cpy2 + tx;\n          data[3] = b * cpx2 + d * cpy2 + ty;\n          data[4] = a * x + c * y + tx;\n          data[5] = b * x + d * y + ty;\n          break;\n        case \"quadraticCurveTo\":\n          cpx1 = data[0];\n          cpy1 = data[1];\n          x = data[2];\n          y = data[3];\n          data[0] = a * cpx1 + c * cpy1 + tx;\n          data[1] = b * cpx1 + d * cpy1 + ty;\n          data[2] = a * x + c * y + tx;\n          data[3] = b * x + d * y + ty;\n          break;\n        case \"arcToSvg\":\n          x = data[5];\n          y = data[6];\n          rx = data[0];\n          ry = data[1];\n          data[0] = a * rx + c * ry;\n          data[1] = b * rx + d * ry;\n          data[5] = a * x + c * y + tx;\n          data[6] = b * x + d * y + ty;\n          break;\n        case \"circle\":\n          data[4] = adjustTransform(data[3], matrix);\n          break;\n        case \"rect\":\n          data[4] = adjustTransform(data[4], matrix);\n          break;\n        case \"ellipse\":\n          data[8] = adjustTransform(data[8], matrix);\n          break;\n        case \"roundRect\":\n          data[5] = adjustTransform(data[5], matrix);\n          break;\n        case \"addPath\":\n          data[0].transform(matrix);\n          break;\n        case \"poly\":\n          data[2] = adjustTransform(data[2], matrix);\n          break;\n        default:\n          warn(\"unknown transform action\", instruction.action);\n          break;\n      }\n    }\n    this._dirty = true;\n    return this;\n  }\n  get bounds() {\n    return this.shapePath.bounds;\n  }\n  /**\n   * Retrieves the last point from the current drawing instructions in the `GraphicsPath`.\n   * This method is useful for operations that depend on the path's current endpoint,\n   * such as connecting subsequent shapes or paths. It supports various drawing instructions,\n   * ensuring the last point's position is accurately determined regardless of the path's complexity.\n   *\n   * If the last instruction is a `closePath`, the method iterates backward through the instructions\n   *  until it finds an actionable instruction that defines a point (e.g., `moveTo`, `lineTo`,\n   * `quadraticCurveTo`, etc.). For compound paths added via `addPath`, it recursively retrieves\n   * the last point from the nested path.\n   * @param out - A `Point` object where the last point's coordinates will be stored.\n   * This object is modified directly to contain the result.\n   * @returns The `Point` object containing the last point's coordinates.\n   */\n  getLastPoint(out) {\n    let index = this.instructions.length - 1;\n    let lastInstruction = this.instructions[index];\n    if (!lastInstruction) {\n      out.x = 0;\n      out.y = 0;\n      return out;\n    }\n    while (lastInstruction.action === \"closePath\") {\n      index--;\n      if (index < 0) {\n        out.x = 0;\n        out.y = 0;\n        return out;\n      }\n      lastInstruction = this.instructions[index];\n    }\n    switch (lastInstruction.action) {\n      case \"moveTo\":\n      case \"lineTo\":\n        out.x = lastInstruction.data[0];\n        out.y = lastInstruction.data[1];\n        break;\n      case \"quadraticCurveTo\":\n        out.x = lastInstruction.data[2];\n        out.y = lastInstruction.data[3];\n        break;\n      case \"bezierCurveTo\":\n        out.x = lastInstruction.data[4];\n        out.y = lastInstruction.data[5];\n        break;\n      case \"arc\":\n      case \"arcToSvg\":\n        out.x = lastInstruction.data[5];\n        out.y = lastInstruction.data[6];\n        break;\n      case \"addPath\":\n        lastInstruction.data[0].getLastPoint(out);\n        break;\n    }\n    return out;\n  }\n}\nfunction adjustTransform(currentMatrix, transform) {\n  if (currentMatrix) {\n    return currentMatrix.prepend(transform);\n  }\n  return transform.clone();\n}\n\nexport { GraphicsPath };\n//# sourceMappingURL=GraphicsPath.mjs.map\n","import parse from 'parse-svg-path';\nimport { warn } from '../../../../utils/logging/warn.mjs';\n\n\"use strict\";\nfunction SVGToGraphicsPath(svgPath, path) {\n  const commands = parse(svgPath);\n  const subpaths = [];\n  let currentSubPath = null;\n  let lastX = 0;\n  let lastY = 0;\n  for (let i = 0; i < commands.length; i++) {\n    const command = commands[i];\n    const type = command[0];\n    const data = command;\n    switch (type) {\n      case \"M\":\n        lastX = data[1];\n        lastY = data[2];\n        path.moveTo(lastX, lastY);\n        break;\n      case \"m\":\n        lastX += data[1];\n        lastY += data[2];\n        path.moveTo(lastX, lastY);\n        break;\n      case \"H\":\n        lastX = data[1];\n        path.lineTo(lastX, lastY);\n        break;\n      case \"h\":\n        lastX += data[1];\n        path.lineTo(lastX, lastY);\n        break;\n      case \"V\":\n        lastY = data[1];\n        path.lineTo(lastX, lastY);\n        break;\n      case \"v\":\n        lastY += data[1];\n        path.lineTo(lastX, lastY);\n        break;\n      case \"L\":\n        lastX = data[1];\n        lastY = data[2];\n        path.lineTo(lastX, lastY);\n        break;\n      case \"l\":\n        lastX += data[1];\n        lastY += data[2];\n        path.lineTo(lastX, lastY);\n        break;\n      case \"C\":\n        lastX = data[5];\n        lastY = data[6];\n        path.bezierCurveTo(\n          data[1],\n          data[2],\n          data[3],\n          data[4],\n          lastX,\n          lastY\n        );\n        break;\n      case \"c\":\n        path.bezierCurveTo(\n          lastX + data[1],\n          lastY + data[2],\n          lastX + data[3],\n          lastY + data[4],\n          lastX + data[5],\n          lastY + data[6]\n        );\n        lastX += data[5];\n        lastY += data[6];\n        break;\n      case \"S\":\n        lastX = data[3];\n        lastY = data[4];\n        path.bezierCurveToShort(\n          data[1],\n          data[2],\n          lastX,\n          lastY\n        );\n        break;\n      case \"s\":\n        path.bezierCurveToShort(\n          lastX + data[1],\n          lastY + data[2],\n          lastX + data[3],\n          lastY + data[4]\n        );\n        lastX += data[3];\n        lastY += data[4];\n        break;\n      case \"Q\":\n        lastX = data[3];\n        lastY = data[4];\n        path.quadraticCurveTo(\n          data[1],\n          data[2],\n          lastX,\n          lastY\n        );\n        break;\n      case \"q\":\n        path.quadraticCurveTo(\n          lastX + data[1],\n          lastY + data[2],\n          lastX + data[3],\n          lastY + data[4]\n        );\n        lastX += data[3];\n        lastY += data[4];\n        break;\n      case \"T\":\n        lastX = data[1];\n        lastY = data[2];\n        path.quadraticCurveToShort(\n          lastX,\n          lastY\n        );\n        break;\n      case \"t\":\n        lastX += data[1];\n        lastY += data[2];\n        path.quadraticCurveToShort(\n          lastX,\n          lastY\n        );\n        break;\n      case \"A\":\n        lastX = data[6];\n        lastY = data[7];\n        path.arcToSvg(\n          data[1],\n          data[2],\n          data[3],\n          data[4],\n          data[5],\n          lastX,\n          lastY\n        );\n        break;\n      case \"a\":\n        lastX += data[6];\n        lastY += data[7];\n        path.arcToSvg(\n          data[1],\n          data[2],\n          data[3],\n          data[4],\n          data[5],\n          lastX,\n          lastY\n        );\n        break;\n      case \"Z\":\n      case \"z\":\n        path.closePath();\n        if (subpaths.length > 0) {\n          currentSubPath = subpaths.pop();\n          if (currentSubPath) {\n            lastX = currentSubPath.startX;\n            lastY = currentSubPath.startY;\n          } else {\n            lastX = 0;\n            lastY = 0;\n          }\n        }\n        currentSubPath = null;\n        break;\n      default:\n        warn(`Unknown SVG path command: ${type}`);\n    }\n    if (type !== \"Z\" && type !== \"z\") {\n      if (currentSubPath === null) {\n        currentSubPath = { startX: lastX, startY: lastY };\n        subpaths.push(currentSubPath);\n      }\n    }\n  }\n  return path;\n}\n\nexport { SVGToGraphicsPath };\n//# sourceMappingURL=SVGToGraphicsPath.mjs.map\n","import { Color } from '../../../../color/Color.mjs';\nimport { GraphicsPath } from '../path/GraphicsPath.mjs';\n\n\"use strict\";\nfunction SVGParser(svg, graphicsContext) {\n  if (typeof svg === \"string\") {\n    const div = document.createElement(\"div\");\n    div.innerHTML = svg.trim();\n    svg = div.querySelector(\"svg\");\n  }\n  const session = {\n    context: graphicsContext,\n    path: new GraphicsPath()\n  };\n  renderChildren(svg, session, null, null);\n  return graphicsContext;\n}\nfunction renderChildren(svg, session, fillStyle, strokeStyle) {\n  const children = svg.children;\n  const { fillStyle: f1, strokeStyle: s1 } = parseStyle(svg);\n  if (f1 && fillStyle) {\n    fillStyle = { ...fillStyle, ...f1 };\n  } else if (f1) {\n    fillStyle = f1;\n  }\n  if (s1 && strokeStyle) {\n    strokeStyle = { ...strokeStyle, ...s1 };\n  } else if (s1) {\n    strokeStyle = s1;\n  }\n  session.context.fillStyle = fillStyle;\n  session.context.strokeStyle = strokeStyle;\n  let x;\n  let y;\n  let x1;\n  let y1;\n  let x2;\n  let y2;\n  let cx;\n  let cy;\n  let r;\n  let rx;\n  let ry;\n  let points;\n  let pointsString;\n  let d;\n  let graphicsPath;\n  let width;\n  let height;\n  switch (svg.nodeName.toLowerCase()) {\n    case \"path\":\n      d = svg.getAttribute(\"d\");\n      graphicsPath = new GraphicsPath(d);\n      session.context.path(graphicsPath);\n      if (fillStyle)\n        session.context.fill();\n      if (strokeStyle)\n        session.context.stroke();\n      break;\n    case \"circle\":\n      cx = parseFloatAttribute(svg, \"cx\", 0);\n      cy = parseFloatAttribute(svg, \"cy\", 0);\n      r = parseFloatAttribute(svg, \"r\", 0);\n      session.context.ellipse(cx, cy, r, r);\n      if (fillStyle)\n        session.context.fill();\n      if (strokeStyle)\n        session.context.stroke();\n      break;\n    case \"rect\":\n      x = parseFloatAttribute(svg, \"x\", 0);\n      y = parseFloatAttribute(svg, \"y\", 0);\n      width = parseFloatAttribute(svg, \"width\", 0);\n      height = parseFloatAttribute(svg, \"height\", 0);\n      rx = parseFloatAttribute(svg, \"rx\", 0);\n      ry = parseFloatAttribute(svg, \"ry\", 0);\n      if (rx || ry) {\n        session.context.roundRect(x, y, width, height, rx || ry);\n      } else {\n        session.context.rect(x, y, width, height);\n      }\n      if (fillStyle)\n        session.context.fill();\n      if (strokeStyle)\n        session.context.stroke();\n      break;\n    case \"ellipse\":\n      cx = parseFloatAttribute(svg, \"cx\", 0);\n      cy = parseFloatAttribute(svg, \"cy\", 0);\n      rx = parseFloatAttribute(svg, \"rx\", 0);\n      ry = parseFloatAttribute(svg, \"ry\", 0);\n      session.context.beginPath();\n      session.context.ellipse(cx, cy, rx, ry);\n      if (fillStyle)\n        session.context.fill();\n      if (strokeStyle)\n        session.context.stroke();\n      break;\n    case \"line\":\n      x1 = parseFloatAttribute(svg, \"x1\", 0);\n      y1 = parseFloatAttribute(svg, \"y1\", 0);\n      x2 = parseFloatAttribute(svg, \"x2\", 0);\n      y2 = parseFloatAttribute(svg, \"y2\", 0);\n      session.context.beginPath();\n      session.context.moveTo(x1, y1);\n      session.context.lineTo(x2, y2);\n      if (strokeStyle)\n        session.context.stroke();\n      break;\n    case \"polygon\":\n      pointsString = svg.getAttribute(\"points\");\n      points = pointsString.match(/\\d+/g).map((n) => parseInt(n, 10));\n      session.context.poly(points, true);\n      if (fillStyle)\n        session.context.fill();\n      if (strokeStyle)\n        session.context.stroke();\n      break;\n    case \"polyline\":\n      pointsString = svg.getAttribute(\"points\");\n      points = pointsString.match(/\\d+/g).map((n) => parseInt(n, 10));\n      session.context.poly(points, false);\n      if (strokeStyle)\n        session.context.stroke();\n      break;\n    case \"g\":\n    case \"svg\":\n      break;\n    default: {\n      console.info(`[SVG parser] <${svg.nodeName}> elements unsupported`);\n      break;\n    }\n  }\n  for (let i = 0; i < children.length; i++) {\n    renderChildren(children[i], session, fillStyle, strokeStyle);\n  }\n}\nfunction parseFloatAttribute(svg, id, defaultValue) {\n  const value = svg.getAttribute(id);\n  return value ? Number(value) : defaultValue;\n}\nfunction parseStyle(svg) {\n  const style = svg.getAttribute(\"style\");\n  const strokeStyle = {};\n  const fillStyle = {};\n  let useFill = false;\n  let useStroke = false;\n  if (style) {\n    const styleParts = style.split(\";\");\n    for (let i = 0; i < styleParts.length; i++) {\n      const stylePart = styleParts[i];\n      const [key, value] = stylePart.split(\":\");\n      switch (key) {\n        case \"stroke\":\n          if (value !== \"none\") {\n            strokeStyle.color = Color.shared.setValue(value).toNumber();\n            useStroke = true;\n          }\n          break;\n        case \"stroke-width\":\n          strokeStyle.width = Number(value);\n          break;\n        case \"fill\":\n          if (value !== \"none\") {\n            useFill = true;\n            fillStyle.color = Color.shared.setValue(value).toNumber();\n          }\n          break;\n        case \"fill-opacity\":\n          fillStyle.alpha = Number(value);\n          break;\n        case \"stroke-opacity\":\n          strokeStyle.alpha = Number(value);\n          break;\n        case \"opacity\":\n          fillStyle.alpha = Number(value);\n          strokeStyle.alpha = Number(value);\n          break;\n      }\n    }\n  } else {\n    const stroke = svg.getAttribute(\"stroke\");\n    if (stroke && stroke !== \"none\") {\n      useStroke = true;\n      strokeStyle.color = Color.shared.setValue(stroke).toNumber();\n      strokeStyle.width = parseFloatAttribute(svg, \"stroke-width\", 1);\n    }\n    const fill = svg.getAttribute(\"fill\");\n    if (fill && fill !== \"none\") {\n      useFill = true;\n      fillStyle.color = Color.shared.setValue(fill).toNumber();\n    }\n  }\n  return {\n    strokeStyle: useStroke ? strokeStyle : null,\n    fillStyle: useFill ? fillStyle : null\n  };\n}\n\nexport { SVGParser };\n//# sourceMappingURL=SVGParser.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { Color } from '../../../color/Color.mjs';\nimport { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { Point } from '../../../maths/point/Point.mjs';\nimport { Texture } from '../../../rendering/renderers/shared/texture/Texture.mjs';\nimport { uid } from '../../../utils/data/uid.mjs';\nimport { deprecation, v8_0_0 } from '../../../utils/logging/deprecation.mjs';\nimport { Bounds } from '../../container/bounds/Bounds.mjs';\nimport { GraphicsPath } from './path/GraphicsPath.mjs';\nimport { SVGParser } from './svg/SVGParser.mjs';\nimport { toFillStyle, toStrokeStyle } from './utils/convertFillInputToFillStyle.mjs';\n\n\"use strict\";\nconst tmpPoint = new Point();\nconst tempMatrix = new Matrix();\nconst _GraphicsContext = class _GraphicsContext extends EventEmitter {\n  constructor() {\n    super(...arguments);\n    this.uid = uid(\"graphicsContext\");\n    this.dirty = true;\n    this.batchMode = \"auto\";\n    this.instructions = [];\n    this._activePath = new GraphicsPath();\n    this._transform = new Matrix();\n    this._fillStyle = { ..._GraphicsContext.defaultFillStyle };\n    this._strokeStyle = { ..._GraphicsContext.defaultStrokeStyle };\n    this._stateStack = [];\n    this._tick = 0;\n    this._bounds = new Bounds();\n    this._boundsDirty = true;\n  }\n  /**\n   * Creates a new GraphicsContext object that is a clone of this instance, copying all properties,\n   * including the current drawing state, transformations, styles, and instructions.\n   * @returns A new GraphicsContext instance with the same properties and state as this one.\n   */\n  clone() {\n    const clone = new _GraphicsContext();\n    clone.batchMode = this.batchMode;\n    clone.instructions = this.instructions.slice();\n    clone._activePath = this._activePath.clone();\n    clone._transform = this._transform.clone();\n    clone._fillStyle = { ...this._fillStyle };\n    clone._strokeStyle = { ...this._strokeStyle };\n    clone._stateStack = this._stateStack.slice();\n    clone._bounds = this._bounds.clone();\n    clone._boundsDirty = true;\n    return clone;\n  }\n  /**\n   * The current fill style of the graphics context. This can be a color, gradient, pattern, or a more complex style defined by a FillStyle object.\n   */\n  get fillStyle() {\n    return this._fillStyle;\n  }\n  set fillStyle(value) {\n    this._fillStyle = toFillStyle(value, _GraphicsContext.defaultFillStyle);\n  }\n  /**\n   * The current stroke style of the graphics context. Similar to fill styles, stroke styles can encompass colors, gradients, patterns, or more detailed configurations via a StrokeStyle object.\n   */\n  get strokeStyle() {\n    return this._strokeStyle;\n  }\n  set strokeStyle(value) {\n    this._strokeStyle = toStrokeStyle(value, _GraphicsContext.defaultStrokeStyle);\n  }\n  /**\n   * Sets the current fill style of the graphics context. The fill style can be a color, gradient,\n   * pattern, or a more complex style defined by a FillStyle object.\n   * @param style - The fill style to apply. This can be a simple color, a gradient or pattern object,\n   *                or a FillStyle or ConvertedFillStyle object.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  setFillStyle(style) {\n    this._fillStyle = toFillStyle(style, _GraphicsContext.defaultFillStyle);\n    return this;\n  }\n  /**\n   * Sets the current stroke style of the graphics context. Similar to fill styles, stroke styles can\n   * encompass colors, gradients, patterns, or more detailed configurations via a StrokeStyle object.\n   * @param style - The stroke style to apply. Can be defined as a color, a gradient or pattern,\n   *                or a StrokeStyle or ConvertedStrokeStyle object.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  setStrokeStyle(style) {\n    this._strokeStyle = toFillStyle(style, _GraphicsContext.defaultStrokeStyle);\n    return this;\n  }\n  texture(texture, tint, dx, dy, dw, dh) {\n    this.instructions.push({\n      action: \"texture\",\n      data: {\n        image: texture,\n        dx: dx || 0,\n        dy: dy || 0,\n        dw: dw || texture.frame.width,\n        dh: dh || texture.frame.height,\n        transform: this._transform.clone(),\n        alpha: this._fillStyle.alpha,\n        style: tint ? Color.shared.setValue(tint).toNumber() : 16777215\n      }\n    });\n    this.onUpdate();\n    return this;\n  }\n  /**\n   * Resets the current path. Any previous path and its commands are discarded and a new path is\n   * started. This is typically called before beginning a new shape or series of drawing commands.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  beginPath() {\n    this._activePath = new GraphicsPath();\n    return this;\n  }\n  fill(style, alpha) {\n    let path;\n    const lastInstruction = this.instructions[this.instructions.length - 1];\n    if (this._tick === 0 && lastInstruction && lastInstruction.action === \"stroke\") {\n      path = lastInstruction.data.path;\n    } else {\n      path = this._activePath.clone();\n    }\n    if (!path)\n      return this;\n    if (style != null) {\n      if (alpha !== void 0 && typeof style === \"number\") {\n        deprecation(v8_0_0, \"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead\");\n        style = { color: style, alpha };\n      }\n      this._fillStyle = toFillStyle(style, _GraphicsContext.defaultFillStyle);\n    }\n    this.instructions.push({\n      action: \"fill\",\n      // TODO copy fill style!\n      data: { style: this.fillStyle, path }\n    });\n    this.onUpdate();\n    this._initNextPathLocation();\n    this._tick = 0;\n    return this;\n  }\n  _initNextPathLocation() {\n    const { x, y } = this._activePath.getLastPoint(Point.shared);\n    this._activePath.clear();\n    this._activePath.moveTo(x, y);\n  }\n  /**\n   * Strokes the current path with the current stroke style. This method can take an optional\n   * FillInput parameter to define the stroke's appearance, including its color, width, and other properties.\n   * @param style - (Optional) The stroke style to apply. Can be defined as a simple color or a more complex style object. If omitted, uses the current stroke style.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  stroke(style) {\n    let path;\n    const lastInstruction = this.instructions[this.instructions.length - 1];\n    if (this._tick === 0 && lastInstruction && lastInstruction.action === \"fill\") {\n      path = lastInstruction.data.path;\n    } else {\n      path = this._activePath.clone();\n    }\n    if (!path)\n      return this;\n    if (style != null) {\n      this._strokeStyle = toStrokeStyle(style, _GraphicsContext.defaultStrokeStyle);\n    }\n    this.instructions.push({\n      action: \"stroke\",\n      // TODO copy fill style!\n      data: { style: this.strokeStyle, path }\n    });\n    this.onUpdate();\n    this._initNextPathLocation();\n    this._tick = 0;\n    return this;\n  }\n  /**\n   * Applies a cutout to the last drawn shape. This is used to create holes or complex shapes by\n   * subtracting a path from the previously drawn path. If a hole is not completely in a shape, it will\n   * fail to cut correctly!\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  cut() {\n    for (let i = 0; i < 2; i++) {\n      const lastInstruction = this.instructions[this.instructions.length - 1 - i];\n      const holePath = this._activePath.clone();\n      if (lastInstruction) {\n        if (lastInstruction.action === \"stroke\" || lastInstruction.action === \"fill\") {\n          if (lastInstruction.data.hole) {\n            lastInstruction.data.hole.addPath(holePath);\n          } else {\n            lastInstruction.data.hole = holePath;\n            break;\n          }\n        }\n      }\n    }\n    this._initNextPathLocation();\n    return this;\n  }\n  /**\n   * Adds an arc to the current path, which is centered at (x, y) with the specified radius,\n   * starting and ending angles, and direction.\n   * @param x - The x-coordinate of the arc's center.\n   * @param y - The y-coordinate of the arc's center.\n   * @param radius - The arc's radius.\n   * @param startAngle - The starting angle, in radians.\n   * @param endAngle - The ending angle, in radians.\n   * @param counterclockwise - (Optional) Specifies whether the arc is drawn counterclockwise (true) or clockwise (false). Defaults to false.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  arc(x, y, radius, startAngle, endAngle, counterclockwise) {\n    this._tick++;\n    const t = this._transform;\n    this._activePath.arc(\n      t.a * x + t.c * y + t.tx,\n      t.b * x + t.d * y + t.ty,\n      radius,\n      startAngle,\n      endAngle,\n      counterclockwise\n    );\n    return this;\n  }\n  /**\n   * Adds an arc to the current path with the given control points and radius, connected to the previous point\n   * by a straight line if necessary.\n   * @param x1 - The x-coordinate of the first control point.\n   * @param y1 - The y-coordinate of the first control point.\n   * @param x2 - The x-coordinate of the second control point.\n   * @param y2 - The y-coordinate of the second control point.\n   * @param radius - The arc's radius.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  arcTo(x1, y1, x2, y2, radius) {\n    this._tick++;\n    const t = this._transform;\n    this._activePath.arcTo(\n      t.a * x1 + t.c * y1 + t.tx,\n      t.b * x1 + t.d * y1 + t.ty,\n      t.a * x2 + t.c * y2 + t.tx,\n      t.b * x2 + t.d * y2 + t.ty,\n      radius\n    );\n    return this;\n  }\n  /**\n   * Adds an SVG-style arc to the path, allowing for elliptical arcs based on the SVG spec.\n   * @param rx - The x-radius of the ellipse.\n   * @param ry - The y-radius of the ellipse.\n   * @param xAxisRotation - The rotation of the ellipse's x-axis relative\n   * to the x-axis of the coordinate system, in degrees.\n   * @param largeArcFlag - Determines if the arc should be greater than or less than 180 degrees.\n   * @param sweepFlag - Determines if the arc should be swept in a positive angle direction.\n   * @param x - The x-coordinate of the arc's end point.\n   * @param y - The y-coordinate of the arc's end point.\n   * @returns The instance of the current object for chaining.\n   */\n  arcToSvg(rx, ry, xAxisRotation, largeArcFlag, sweepFlag, x, y) {\n    this._tick++;\n    const t = this._transform;\n    this._activePath.arcToSvg(\n      rx,\n      ry,\n      xAxisRotation,\n      // should we rotate this with transform??\n      largeArcFlag,\n      sweepFlag,\n      t.a * x + t.c * y + t.tx,\n      t.b * x + t.d * y + t.ty\n    );\n    return this;\n  }\n  /**\n   * Adds a cubic Bezier curve to the path.\n   * It requires three points: the first two are control points and the third one is the end point.\n   * The starting point is the last point in the current path.\n   * @param cp1x - The x-coordinate of the first control point.\n   * @param cp1y - The y-coordinate of the first control point.\n   * @param cp2x - The x-coordinate of the second control point.\n   * @param cp2y - The y-coordinate of the second control point.\n   * @param x - The x-coordinate of the end point.\n   * @param y - The y-coordinate of the end point.\n   * @param smoothness - Optional parameter to adjust the smoothness of the curve.\n   * @returns The instance of the current object for chaining.\n   */\n  bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y, smoothness) {\n    this._tick++;\n    const t = this._transform;\n    this._activePath.bezierCurveTo(\n      t.a * cp1x + t.c * cp1y + t.tx,\n      t.b * cp1x + t.d * cp1y + t.ty,\n      t.a * cp2x + t.c * cp2y + t.tx,\n      t.b * cp2x + t.d * cp2y + t.ty,\n      t.a * x + t.c * y + t.tx,\n      t.b * x + t.d * y + t.ty,\n      smoothness\n    );\n    return this;\n  }\n  /**\n   * Closes the current path by drawing a straight line back to the start.\n   * If the shape is already closed or there are no points in the path, this method does nothing.\n   * @returns The instance of the current object for chaining.\n   */\n  closePath() {\n    this._tick++;\n    this._activePath?.closePath();\n    return this;\n  }\n  /**\n   * Draws an ellipse at the specified location and with the given x and y radii.\n   * An optional transformation can be applied, allowing for rotation, scaling, and translation.\n   * @param x - The x-coordinate of the center of the ellipse.\n   * @param y - The y-coordinate of the center of the ellipse.\n   * @param radiusX - The horizontal radius of the ellipse.\n   * @param radiusY - The vertical radius of the ellipse.\n   * @returns The instance of the current object for chaining.\n   */\n  ellipse(x, y, radiusX, radiusY) {\n    this._tick++;\n    this._activePath.ellipse(x, y, radiusX, radiusY, this._transform.clone());\n    return this;\n  }\n  /**\n   * Draws a circle shape. This method adds a new circle path to the current drawing.\n   * @param x - The x-coordinate of the center of the circle.\n   * @param y - The y-coordinate of the center of the circle.\n   * @param radius - The radius of the circle.\n   * @returns The instance of the current object for chaining.\n   */\n  circle(x, y, radius) {\n    this._tick++;\n    this._activePath.circle(x, y, radius, this._transform.clone());\n    return this;\n  }\n  /**\n   * Adds another `GraphicsPath` to this path, optionally applying a transformation.\n   * @param path - The `GraphicsPath` to add.\n   * @returns The instance of the current object for chaining.\n   */\n  path(path) {\n    this._tick++;\n    this._activePath.addPath(path, this._transform.clone());\n    return this;\n  }\n  /**\n   * Connects the current point to a new point with a straight line. This method updates the current path.\n   * @param x - The x-coordinate of the new point to connect to.\n   * @param y - The y-coordinate of the new point to connect to.\n   * @returns The instance of the current object for chaining.\n   */\n  lineTo(x, y) {\n    this._tick++;\n    const t = this._transform;\n    this._activePath.lineTo(\n      t.a * x + t.c * y + t.tx,\n      t.b * x + t.d * y + t.ty\n    );\n    return this;\n  }\n  /**\n   * Sets the starting point for a new sub-path. Any subsequent drawing commands are considered part of this path.\n   * @param x - The x-coordinate for the starting point.\n   * @param y - The y-coordinate for the starting point.\n   * @returns The instance of the current object for chaining.\n   */\n  moveTo(x, y) {\n    this._tick++;\n    const t = this._transform;\n    const instructions = this._activePath.instructions;\n    const transformedX = t.a * x + t.c * y + t.tx;\n    const transformedY = t.b * x + t.d * y + t.ty;\n    if (instructions.length === 1 && instructions[0].action === \"moveTo\") {\n      instructions[0].data[0] = transformedX;\n      instructions[0].data[1] = transformedY;\n      return this;\n    }\n    this._activePath.moveTo(\n      transformedX,\n      transformedY\n    );\n    return this;\n  }\n  /**\n   * Adds a quadratic curve to the path. It requires two points: the control point and the end point.\n   * The starting point is the last point in the current path.\n   * @param cpx - The x-coordinate of the control point.\n   * @param cpy - The y-coordinate of the control point.\n   * @param x - The x-coordinate of the end point.\n   * @param y - The y-coordinate of the end point.\n   * @param smoothness - Optional parameter to adjust the smoothness of the curve.\n   * @returns The instance of the current object for chaining.\n   */\n  quadraticCurveTo(cpx, cpy, x, y, smoothness) {\n    this._tick++;\n    const t = this._transform;\n    this._activePath.quadraticCurveTo(\n      t.a * cpx + t.c * cpy + t.tx,\n      t.b * cpx + t.d * cpy + t.ty,\n      t.a * x + t.c * y + t.tx,\n      t.b * x + t.d * y + t.ty,\n      smoothness\n    );\n    return this;\n  }\n  /**\n   * Draws a rectangle shape. This method adds a new rectangle path to the current drawing.\n   * @param x - The x-coordinate of the top-left corner of the rectangle.\n   * @param y - The y-coordinate of the top-left corner of the rectangle.\n   * @param w - The width of the rectangle.\n   * @param h - The height of the rectangle.\n   * @returns The instance of the current object for chaining.\n   */\n  rect(x, y, w, h) {\n    this._tick++;\n    this._activePath.rect(x, y, w, h, this._transform.clone());\n    return this;\n  }\n  /**\n   * Draws a rectangle with rounded corners.\n   * The corner radius can be specified to determine how rounded the corners should be.\n   * An optional transformation can be applied, which allows for rotation, scaling, and translation of the rectangle.\n   * @param x - The x-coordinate of the top-left corner of the rectangle.\n   * @param y - The y-coordinate of the top-left corner of the rectangle.\n   * @param w - The width of the rectangle.\n   * @param h - The height of the rectangle.\n   * @param radius - The radius of the rectangle's corners. If not specified, corners will be sharp.\n   * @returns The instance of the current object for chaining.\n   */\n  roundRect(x, y, w, h, radius) {\n    this._tick++;\n    this._activePath.roundRect(x, y, w, h, radius, this._transform.clone());\n    return this;\n  }\n  /**\n   * Draws a polygon shape by specifying a sequence of points. This method allows for the creation of complex polygons,\n   * which can be both open and closed. An optional transformation can be applied, enabling the polygon to be scaled,\n   * rotated, or translated as needed.\n   * @param points - An array of numbers, or an array of PointData objects eg [{x,y}, {x,y}, {x,y}]\n   * representing the x and y coordinates, of the polygon's vertices, in sequence.\n   * @param close - A boolean indicating whether to close the polygon path. True by default.\n   */\n  poly(points, close) {\n    this._tick++;\n    this._activePath.poly(points, close, this._transform.clone());\n    return this;\n  }\n  /**\n   * Draws a regular polygon with a specified number of sides. All sides and angles are equal.\n   * @param x - The x-coordinate of the center of the polygon.\n   * @param y - The y-coordinate of the center of the polygon.\n   * @param radius - The radius of the circumscribed circle of the polygon.\n   * @param sides - The number of sides of the polygon. Must be 3 or more.\n   * @param rotation - The rotation angle of the polygon, in radians. Zero by default.\n   * @param transform - An optional `Matrix` object to apply a transformation to the polygon.\n   * @returns The instance of the current object for chaining.\n   */\n  regularPoly(x, y, radius, sides, rotation = 0, transform) {\n    this._tick++;\n    this._activePath.regularPoly(x, y, radius, sides, rotation, transform);\n    return this;\n  }\n  /**\n   * Draws a polygon with rounded corners.\n   * Similar to `regularPoly` but with the ability to round the corners of the polygon.\n   * @param x - The x-coordinate of the center of the polygon.\n   * @param y - The y-coordinate of the center of the polygon.\n   * @param radius - The radius of the circumscribed circle of the polygon.\n   * @param sides - The number of sides of the polygon. Must be 3 or more.\n   * @param corner - The radius of the rounding of the corners.\n   * @param rotation - The rotation angle of the polygon, in radians. Zero by default.\n   * @returns The instance of the current object for chaining.\n   */\n  roundPoly(x, y, radius, sides, corner, rotation) {\n    this._tick++;\n    this._activePath.roundPoly(x, y, radius, sides, corner, rotation);\n    return this;\n  }\n  /**\n   * Draws a shape with rounded corners. This function supports custom radius for each corner of the shape.\n   * Optionally, corners can be rounded using a quadratic curve instead of an arc, providing a different aesthetic.\n   * @param points - An array of `RoundedPoint` representing the corners of the shape to draw.\n   * A minimum of 3 points is required.\n   * @param radius - The default radius for the corners.\n   * This radius is applied to all corners unless overridden in `points`.\n   * @param useQuadratic - If set to true, rounded corners are drawn using a quadraticCurve\n   *  method instead of an arc method. Defaults to false.\n   * @param smoothness - Specifies the smoothness of the curve when `useQuadratic` is true.\n   * Higher values make the curve smoother.\n   * @returns The instance of the current object for chaining.\n   */\n  roundShape(points, radius, useQuadratic, smoothness) {\n    this._tick++;\n    this._activePath.roundShape(points, radius, useQuadratic, smoothness);\n    return this;\n  }\n  /**\n   * Draw Rectangle with fillet corners. This is much like rounded rectangle\n   * however it support negative numbers as well for the corner radius.\n   * @param x - Upper left corner of rect\n   * @param y - Upper right corner of rect\n   * @param width - Width of rect\n   * @param height - Height of rect\n   * @param fillet - accept negative or positive values\n   */\n  filletRect(x, y, width, height, fillet) {\n    this._tick++;\n    this._activePath.filletRect(x, y, width, height, fillet);\n    return this;\n  }\n  /**\n   * Draw Rectangle with chamfer corners. These are angled corners.\n   * @param x - Upper left corner of rect\n   * @param y - Upper right corner of rect\n   * @param width - Width of rect\n   * @param height - Height of rect\n   * @param chamfer - non-zero real number, size of corner cutout\n   * @param transform\n   */\n  chamferRect(x, y, width, height, chamfer, transform) {\n    this._tick++;\n    this._activePath.chamferRect(x, y, width, height, chamfer, transform);\n    return this;\n  }\n  /**\n   * Draws a star shape centered at a specified location. This method allows for the creation\n   *  of stars with a variable number of points, outer radius, optional inner radius, and rotation.\n   * The star is drawn as a closed polygon with alternating outer and inner vertices to create the star's points.\n   * An optional transformation can be applied to scale, rotate, or translate the star as needed.\n   * @param x - The x-coordinate of the center of the star.\n   * @param y - The y-coordinate of the center of the star.\n   * @param points - The number of points of the star.\n   * @param radius - The outer radius of the star (distance from the center to the outer points).\n   * @param innerRadius - Optional. The inner radius of the star\n   * (distance from the center to the inner points between the outer points).\n   * If not provided, defaults to half of the `radius`.\n   * @param rotation - Optional. The rotation of the star in radians, where 0 is aligned with the y-axis.\n   * Defaults to 0, meaning one point is directly upward.\n   * @returns The instance of the current object for chaining further drawing commands.\n   */\n  star(x, y, points, radius, innerRadius = 0, rotation = 0) {\n    this._tick++;\n    this._activePath.star(x, y, points, radius, innerRadius, rotation, this._transform.clone());\n    return this;\n  }\n  /**\n   * Parses and renders an SVG string into the graphics context. This allows for complex shapes and paths\n   * defined in SVG format to be drawn within the graphics context.\n   * @param svg - The SVG string to be parsed and rendered.\n   */\n  svg(svg) {\n    this._tick++;\n    SVGParser(svg, this);\n    return this;\n  }\n  /**\n   * Restores the most recently saved graphics state by popping the top of the graphics state stack.\n   * This includes transformations, fill styles, and stroke styles.\n   */\n  restore() {\n    const state = this._stateStack.pop();\n    if (state) {\n      this._transform = state.transform;\n      this._fillStyle = state.fillStyle;\n      this._strokeStyle = state.strokeStyle;\n    }\n    return this;\n  }\n  /** Saves the current graphics state, including transformations, fill styles, and stroke styles, onto a stack. */\n  save() {\n    this._stateStack.push({\n      transform: this._transform.clone(),\n      fillStyle: { ...this._fillStyle },\n      strokeStyle: { ...this._strokeStyle }\n    });\n    return this;\n  }\n  /**\n   * Returns the current transformation matrix of the graphics context.\n   * @returns The current transformation matrix.\n   */\n  getTransform() {\n    return this._transform;\n  }\n  /**\n   * Resets the current transformation matrix to the identity matrix, effectively removing any transformations (rotation, scaling, translation) previously applied.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  resetTransform() {\n    this._transform.identity();\n    return this;\n  }\n  /**\n   * Applies a rotation transformation to the graphics context around the current origin.\n   * @param angle - The angle of rotation in radians.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  rotate(angle) {\n    this._transform.rotate(angle);\n    return this;\n  }\n  /**\n   * Applies a scaling transformation to the graphics context, scaling drawings by x horizontally and by y vertically.\n   * @param x - The scale factor in the horizontal direction.\n   * @param y - (Optional) The scale factor in the vertical direction. If not specified, the x value is used for both directions.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  scale(x, y = x) {\n    this._transform.scale(x, y);\n    return this;\n  }\n  setTransform(a, b, c, d, dx, dy) {\n    if (a instanceof Matrix) {\n      this._transform.set(a.a, a.b, a.c, a.d, a.tx, a.ty);\n      return this;\n    }\n    this._transform.set(a, b, c, d, dx, dy);\n    return this;\n  }\n  transform(a, b, c, d, dx, dy) {\n    if (a instanceof Matrix) {\n      this._transform.append(a);\n      return this;\n    }\n    tempMatrix.set(a, b, c, d, dx, dy);\n    this._transform.append(tempMatrix);\n    return this;\n  }\n  /**\n   * Applies a translation transformation to the graphics context, moving the origin by the specified amounts.\n   * @param x - The amount to translate in the horizontal direction.\n   * @param y - (Optional) The amount to translate in the vertical direction. If not specified, the x value is used for both directions.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  translate(x, y = x) {\n    this._transform.translate(x, y);\n    return this;\n  }\n  /**\n   * Clears all drawing commands from the graphics context, effectively resetting it. This includes clearing the path,\n   * and optionally resetting transformations to the identity matrix.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  clear() {\n    this._activePath.clear();\n    this.instructions.length = 0;\n    this.resetTransform();\n    this.onUpdate();\n    return this;\n  }\n  onUpdate() {\n    if (this.dirty)\n      return;\n    this.emit(\"update\", this, 16);\n    this.dirty = true;\n    this._boundsDirty = true;\n  }\n  /** The bounds of the graphic shape. */\n  get bounds() {\n    if (!this._boundsDirty)\n      return this._bounds;\n    const bounds = this._bounds;\n    bounds.clear();\n    for (let i = 0; i < this.instructions.length; i++) {\n      const instruction = this.instructions[i];\n      const action = instruction.action;\n      if (action === \"fill\") {\n        const data = instruction.data;\n        bounds.addBounds(data.path.bounds);\n      } else if (action === \"texture\") {\n        const data = instruction.data;\n        bounds.addFrame(data.dx, data.dy, data.dx + data.dw, data.dy + data.dh, data.transform);\n      }\n      if (action === \"stroke\") {\n        const data = instruction.data;\n        const padding = data.style.width / 2;\n        const _bounds = data.path.bounds;\n        bounds.addFrame(\n          _bounds.minX - padding,\n          _bounds.minY - padding,\n          _bounds.maxX + padding,\n          _bounds.maxY + padding\n        );\n      }\n    }\n    return bounds;\n  }\n  /**\n   * Check to see if a point is contained within this geometry.\n   * @param point - Point to check if it's contained.\n   * @returns {boolean} `true` if the point is contained within geometry.\n   */\n  containsPoint(point) {\n    if (!this.bounds.containsPoint(point.x, point.y))\n      return false;\n    const instructions = this.instructions;\n    let hasHit = false;\n    for (let k = 0; k < instructions.length; k++) {\n      const instruction = instructions[k];\n      const data = instruction.data;\n      const path = data.path;\n      if (!instruction.action || !path)\n        continue;\n      const style = data.style;\n      const shapes = path.shapePath.shapePrimitives;\n      for (let i = 0; i < shapes.length; i++) {\n        const shape = shapes[i].shape;\n        if (!style || !shape)\n          continue;\n        const transform = shapes[i].transform;\n        const transformedPoint = transform ? transform.applyInverse(point, tmpPoint) : point;\n        if (instruction.action === \"fill\") {\n          hasHit = shape.contains(transformedPoint.x, transformedPoint.y);\n        } else {\n          hasHit = shape.strokeContains(transformedPoint.x, transformedPoint.y, style.width);\n        }\n        const holes = data.hole;\n        if (holes) {\n          const holeShapes = holes.shapePath?.shapePrimitives;\n          if (holeShapes) {\n            for (let j = 0; j < holeShapes.length; j++) {\n              if (holeShapes[j].shape.contains(transformedPoint.x, transformedPoint.y)) {\n                hasHit = false;\n              }\n            }\n          }\n        }\n        if (hasHit) {\n          return true;\n        }\n      }\n    }\n    return hasHit;\n  }\n  /**\n   * Destroys the GraphicsData object.\n   * @param options - Options parameter. A boolean will act as if all options\n   *  have been set to that value\n   * @param {boolean} [options.texture=false] - Should it destroy the current texture of the fill/stroke style?\n   * @param {boolean} [options.textureSource=false] - Should it destroy the texture source of the fill/stroke style?\n   */\n  destroy(options = false) {\n    this._stateStack.length = 0;\n    this._transform = null;\n    this.emit(\"destroy\", this);\n    this.removeAllListeners();\n    const destroyTexture = typeof options === \"boolean\" ? options : options?.texture;\n    if (destroyTexture) {\n      const destroyTextureSource = typeof options === \"boolean\" ? options : options?.textureSource;\n      if (this._fillStyle.texture) {\n        this._fillStyle.texture.destroy(destroyTextureSource);\n      }\n      if (this._strokeStyle.texture) {\n        this._strokeStyle.texture.destroy(destroyTextureSource);\n      }\n    }\n    this._fillStyle = null;\n    this._strokeStyle = null;\n    this.instructions = null;\n    this._activePath = null;\n    this._bounds = null;\n    this._stateStack = null;\n    this.customShader = null;\n    this._transform = null;\n  }\n};\n/** The default fill style to use when none is provided. */\n_GraphicsContext.defaultFillStyle = {\n  /** The color to use for the fill. */\n  color: 16777215,\n  /** The alpha value to use for the fill. */\n  alpha: 1,\n  /** The texture to use for the fill. */\n  texture: Texture.WHITE,\n  /** The matrix to apply. */\n  matrix: null,\n  /** The fill pattern to use. */\n  fill: null\n};\n/** The default stroke style to use when none is provided. */\n_GraphicsContext.defaultStrokeStyle = {\n  /** The width of the stroke. */\n  width: 1,\n  /** The color to use for the stroke. */\n  color: 16777215,\n  /** The alpha value to use for the stroke. */\n  alpha: 1,\n  /** The alignment of the stroke. */\n  alignment: 0.5,\n  /** The miter limit to use. */\n  miterLimit: 10,\n  /** The line cap style to use. */\n  cap: \"butt\",\n  /** The line join style to use. */\n  join: \"miter\",\n  /** The texture to use for the fill. */\n  texture: Texture.WHITE,\n  /** The matrix to apply. */\n  matrix: null,\n  /** The fill pattern to use. */\n  fill: null\n};\nlet GraphicsContext = _GraphicsContext;\n\nexport { GraphicsContext };\n//# sourceMappingURL=GraphicsContext.mjs.map\n","\"use strict\";\nfunction transformVertices(vertices, m, offset, stride, size) {\n  const a = m.a;\n  const b = m.b;\n  const c = m.c;\n  const d = m.d;\n  const tx = m.tx;\n  const ty = m.ty;\n  offset = offset || 0;\n  stride = stride || 2;\n  size = size || vertices.length / stride - offset;\n  let index = offset * stride;\n  for (let i = 0; i < size; i++) {\n    const x = vertices[index];\n    const y = vertices[index + 1];\n    vertices[index] = a * x + c * y + tx;\n    vertices[index + 1] = b * x + d * y + ty;\n    index += stride;\n  }\n}\n\nexport { transformVertices };\n//# sourceMappingURL=transformVertices.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\n\n\"use strict\";\nconst buildCircle = {\n  extension: {\n    type: ExtensionType.ShapeBuilder,\n    name: \"circle\"\n  },\n  build(shape, points) {\n    let x;\n    let y;\n    let dx;\n    let dy;\n    let rx;\n    let ry;\n    if (shape.type === \"circle\") {\n      const circle = shape;\n      x = circle.x;\n      y = circle.y;\n      rx = ry = circle.radius;\n      dx = dy = 0;\n    } else if (shape.type === \"ellipse\") {\n      const ellipse = shape;\n      x = ellipse.x;\n      y = ellipse.y;\n      rx = ellipse.halfWidth;\n      ry = ellipse.halfHeight;\n      dx = dy = 0;\n    } else {\n      const roundedRect = shape;\n      const halfWidth = roundedRect.width / 2;\n      const halfHeight = roundedRect.height / 2;\n      x = roundedRect.x + halfWidth;\n      y = roundedRect.y + halfHeight;\n      rx = ry = Math.max(0, Math.min(roundedRect.radius, Math.min(halfWidth, halfHeight)));\n      dx = halfWidth - rx;\n      dy = halfHeight - ry;\n    }\n    if (!(rx >= 0 && ry >= 0 && dx >= 0 && dy >= 0)) {\n      return points;\n    }\n    const n = Math.ceil(2.3 * Math.sqrt(rx + ry));\n    const m = n * 8 + (dx ? 4 : 0) + (dy ? 4 : 0);\n    if (m === 0) {\n      return points;\n    }\n    if (n === 0) {\n      points[0] = points[6] = x + dx;\n      points[1] = points[3] = y + dy;\n      points[2] = points[4] = x - dx;\n      points[5] = points[7] = y - dy;\n      return points;\n    }\n    let j1 = 0;\n    let j2 = n * 4 + (dx ? 2 : 0) + 2;\n    let j3 = j2;\n    let j4 = m;\n    let x0 = dx + rx;\n    let y0 = dy;\n    let x1 = x + x0;\n    let x2 = x - x0;\n    let y1 = y + y0;\n    points[j1++] = x1;\n    points[j1++] = y1;\n    points[--j2] = y1;\n    points[--j2] = x2;\n    if (dy) {\n      const y22 = y - y0;\n      points[j3++] = x2;\n      points[j3++] = y22;\n      points[--j4] = y22;\n      points[--j4] = x1;\n    }\n    for (let i = 1; i < n; i++) {\n      const a = Math.PI / 2 * (i / n);\n      const x02 = dx + Math.cos(a) * rx;\n      const y02 = dy + Math.sin(a) * ry;\n      const x12 = x + x02;\n      const x22 = x - x02;\n      const y12 = y + y02;\n      const y22 = y - y02;\n      points[j1++] = x12;\n      points[j1++] = y12;\n      points[--j2] = y12;\n      points[--j2] = x22;\n      points[j3++] = x22;\n      points[j3++] = y22;\n      points[--j4] = y22;\n      points[--j4] = x12;\n    }\n    x0 = dx;\n    y0 = dy + ry;\n    x1 = x + x0;\n    x2 = x - x0;\n    y1 = y + y0;\n    const y2 = y - y0;\n    points[j1++] = x1;\n    points[j1++] = y1;\n    points[--j4] = y2;\n    points[--j4] = x1;\n    if (dx) {\n      points[j1++] = x2;\n      points[j1++] = y1;\n      points[--j4] = y2;\n      points[--j4] = x2;\n    }\n    return points;\n  },\n  triangulate(points, vertices, verticesStride, verticesOffset, indices, indicesOffset) {\n    if (points.length === 0) {\n      return;\n    }\n    let centerX = 0;\n    let centerY = 0;\n    for (let i = 0; i < points.length; i += 2) {\n      centerX += points[i];\n      centerY += points[i + 1];\n    }\n    centerX /= points.length / 2;\n    centerY /= points.length / 2;\n    let count = verticesOffset;\n    vertices[count * verticesStride] = centerX;\n    vertices[count * verticesStride + 1] = centerY;\n    const centerIndex = count++;\n    for (let i = 0; i < points.length; i += 2) {\n      vertices[count * verticesStride] = points[i];\n      vertices[count * verticesStride + 1] = points[i + 1];\n      if (i > 0) {\n        indices[indicesOffset++] = count;\n        indices[indicesOffset++] = centerIndex;\n        indices[indicesOffset++] = count - 1;\n      }\n      count++;\n    }\n    indices[indicesOffset++] = centerIndex + 1;\n    indices[indicesOffset++] = centerIndex;\n    indices[indicesOffset++] = count - 1;\n  }\n};\nconst buildEllipse = { ...buildCircle, extension: { ...buildCircle.extension, name: \"ellipse\" } };\nconst buildRoundedRectangle = { ...buildCircle, extension: { ...buildCircle.extension, name: \"roundedRectangle\" } };\n\nexport { buildCircle, buildEllipse, buildRoundedRectangle };\n//# sourceMappingURL=buildCircle.mjs.map\n","import { Point } from '../../../../maths/point/Point.mjs';\nimport { closePointEps, curveEps } from '../const.mjs';\nimport { getOrientationOfPoints } from '../utils/getOrientationOfPoints.mjs';\n\n\"use strict\";\nfunction square(x, y, nx, ny, innerWeight, outerWeight, clockwise, verts) {\n  const ix = x - nx * innerWeight;\n  const iy = y - ny * innerWeight;\n  const ox = x + nx * outerWeight;\n  const oy = y + ny * outerWeight;\n  let exx;\n  let eyy;\n  if (clockwise) {\n    exx = ny;\n    eyy = -nx;\n  } else {\n    exx = -ny;\n    eyy = nx;\n  }\n  const eix = ix + exx;\n  const eiy = iy + eyy;\n  const eox = ox + exx;\n  const eoy = oy + eyy;\n  verts.push(eix, eiy);\n  verts.push(eox, eoy);\n  return 2;\n}\nfunction round(cx, cy, sx, sy, ex, ey, verts, clockwise) {\n  const cx2p0x = sx - cx;\n  const cy2p0y = sy - cy;\n  let angle0 = Math.atan2(cx2p0x, cy2p0y);\n  let angle1 = Math.atan2(ex - cx, ey - cy);\n  if (clockwise && angle0 < angle1) {\n    angle0 += Math.PI * 2;\n  } else if (!clockwise && angle0 > angle1) {\n    angle1 += Math.PI * 2;\n  }\n  let startAngle = angle0;\n  const angleDiff = angle1 - angle0;\n  const absAngleDiff = Math.abs(angleDiff);\n  const radius = Math.sqrt(cx2p0x * cx2p0x + cy2p0y * cy2p0y);\n  const segCount = (15 * absAngleDiff * Math.sqrt(radius) / Math.PI >> 0) + 1;\n  const angleInc = angleDiff / segCount;\n  startAngle += angleInc;\n  if (clockwise) {\n    verts.push(cx, cy);\n    verts.push(sx, sy);\n    for (let i = 1, angle = startAngle; i < segCount; i++, angle += angleInc) {\n      verts.push(cx, cy);\n      verts.push(\n        cx + Math.sin(angle) * radius,\n        cy + Math.cos(angle) * radius\n      );\n    }\n    verts.push(cx, cy);\n    verts.push(ex, ey);\n  } else {\n    verts.push(sx, sy);\n    verts.push(cx, cy);\n    for (let i = 1, angle = startAngle; i < segCount; i++, angle += angleInc) {\n      verts.push(\n        cx + Math.sin(angle) * radius,\n        cy + Math.cos(angle) * radius\n      );\n      verts.push(cx, cy);\n    }\n    verts.push(ex, ey);\n    verts.push(cx, cy);\n  }\n  return segCount * 2;\n}\nfunction buildLine(points, lineStyle, flipAlignment, closed, vertices, _verticesStride, _verticesOffset, indices, _indicesOffset) {\n  const eps = closePointEps;\n  if (points.length === 0) {\n    return;\n  }\n  const style = lineStyle;\n  let alignment = style.alignment;\n  if (lineStyle.alignment !== 0.5) {\n    let orientation = getOrientationOfPoints(points);\n    if (flipAlignment)\n      orientation *= -1;\n    alignment = (alignment - 0.5) * orientation + 0.5;\n  }\n  const firstPoint = new Point(points[0], points[1]);\n  const lastPoint = new Point(points[points.length - 2], points[points.length - 1]);\n  const closedShape = closed;\n  const closedPath = Math.abs(firstPoint.x - lastPoint.x) < eps && Math.abs(firstPoint.y - lastPoint.y) < eps;\n  if (closedShape) {\n    points = points.slice();\n    if (closedPath) {\n      points.pop();\n      points.pop();\n      lastPoint.set(points[points.length - 2], points[points.length - 1]);\n    }\n    const midPointX = (firstPoint.x + lastPoint.x) * 0.5;\n    const midPointY = (lastPoint.y + firstPoint.y) * 0.5;\n    points.unshift(midPointX, midPointY);\n    points.push(midPointX, midPointY);\n  }\n  const verts = vertices;\n  const length = points.length / 2;\n  let indexCount = points.length;\n  const indexStart = verts.length / 2;\n  const width = style.width / 2;\n  const widthSquared = width * width;\n  const miterLimitSquared = style.miterLimit * style.miterLimit;\n  let x0 = points[0];\n  let y0 = points[1];\n  let x1 = points[2];\n  let y1 = points[3];\n  let x2 = 0;\n  let y2 = 0;\n  let perpX = -(y0 - y1);\n  let perpY = x0 - x1;\n  let perp1x = 0;\n  let perp1y = 0;\n  let dist = Math.sqrt(perpX * perpX + perpY * perpY);\n  perpX /= dist;\n  perpY /= dist;\n  perpX *= width;\n  perpY *= width;\n  const ratio = alignment;\n  const innerWeight = (1 - ratio) * 2;\n  const outerWeight = ratio * 2;\n  if (!closedShape) {\n    if (style.cap === \"round\") {\n      indexCount += round(\n        x0 - perpX * (innerWeight - outerWeight) * 0.5,\n        y0 - perpY * (innerWeight - outerWeight) * 0.5,\n        x0 - perpX * innerWeight,\n        y0 - perpY * innerWeight,\n        x0 + perpX * outerWeight,\n        y0 + perpY * outerWeight,\n        verts,\n        true\n      ) + 2;\n    } else if (style.cap === \"square\") {\n      indexCount += square(x0, y0, perpX, perpY, innerWeight, outerWeight, true, verts);\n    }\n  }\n  verts.push(\n    x0 - perpX * innerWeight,\n    y0 - perpY * innerWeight\n  );\n  verts.push(\n    x0 + perpX * outerWeight,\n    y0 + perpY * outerWeight\n  );\n  for (let i = 1; i < length - 1; ++i) {\n    x0 = points[(i - 1) * 2];\n    y0 = points[(i - 1) * 2 + 1];\n    x1 = points[i * 2];\n    y1 = points[i * 2 + 1];\n    x2 = points[(i + 1) * 2];\n    y2 = points[(i + 1) * 2 + 1];\n    perpX = -(y0 - y1);\n    perpY = x0 - x1;\n    dist = Math.sqrt(perpX * perpX + perpY * perpY);\n    perpX /= dist;\n    perpY /= dist;\n    perpX *= width;\n    perpY *= width;\n    perp1x = -(y1 - y2);\n    perp1y = x1 - x2;\n    dist = Math.sqrt(perp1x * perp1x + perp1y * perp1y);\n    perp1x /= dist;\n    perp1y /= dist;\n    perp1x *= width;\n    perp1y *= width;\n    const dx0 = x1 - x0;\n    const dy0 = y0 - y1;\n    const dx1 = x1 - x2;\n    const dy1 = y2 - y1;\n    const dot = dx0 * dx1 + dy0 * dy1;\n    const cross = dy0 * dx1 - dy1 * dx0;\n    const clockwise = cross < 0;\n    if (Math.abs(cross) < 1e-3 * Math.abs(dot)) {\n      verts.push(\n        x1 - perpX * innerWeight,\n        y1 - perpY * innerWeight\n      );\n      verts.push(\n        x1 + perpX * outerWeight,\n        y1 + perpY * outerWeight\n      );\n      if (dot >= 0) {\n        if (style.join === \"round\") {\n          indexCount += round(\n            x1,\n            y1,\n            x1 - perpX * innerWeight,\n            y1 - perpY * innerWeight,\n            x1 - perp1x * innerWeight,\n            y1 - perp1y * innerWeight,\n            verts,\n            false\n          ) + 4;\n        } else {\n          indexCount += 2;\n        }\n        verts.push(\n          x1 - perp1x * outerWeight,\n          y1 - perp1y * outerWeight\n        );\n        verts.push(\n          x1 + perp1x * innerWeight,\n          y1 + perp1y * innerWeight\n        );\n      }\n      continue;\n    }\n    const c1 = (-perpX + x0) * (-perpY + y1) - (-perpX + x1) * (-perpY + y0);\n    const c2 = (-perp1x + x2) * (-perp1y + y1) - (-perp1x + x1) * (-perp1y + y2);\n    const px = (dx0 * c2 - dx1 * c1) / cross;\n    const py = (dy1 * c1 - dy0 * c2) / cross;\n    const pDist = (px - x1) * (px - x1) + (py - y1) * (py - y1);\n    const imx = x1 + (px - x1) * innerWeight;\n    const imy = y1 + (py - y1) * innerWeight;\n    const omx = x1 - (px - x1) * outerWeight;\n    const omy = y1 - (py - y1) * outerWeight;\n    const smallerInsideSegmentSq = Math.min(dx0 * dx0 + dy0 * dy0, dx1 * dx1 + dy1 * dy1);\n    const insideWeight = clockwise ? innerWeight : outerWeight;\n    const smallerInsideDiagonalSq = smallerInsideSegmentSq + insideWeight * insideWeight * widthSquared;\n    const insideMiterOk = pDist <= smallerInsideDiagonalSq;\n    if (insideMiterOk) {\n      if (style.join === \"bevel\" || pDist / widthSquared > miterLimitSquared) {\n        if (clockwise) {\n          verts.push(imx, imy);\n          verts.push(x1 + perpX * outerWeight, y1 + perpY * outerWeight);\n          verts.push(imx, imy);\n          verts.push(x1 + perp1x * outerWeight, y1 + perp1y * outerWeight);\n        } else {\n          verts.push(x1 - perpX * innerWeight, y1 - perpY * innerWeight);\n          verts.push(omx, omy);\n          verts.push(x1 - perp1x * innerWeight, y1 - perp1y * innerWeight);\n          verts.push(omx, omy);\n        }\n        indexCount += 2;\n      } else if (style.join === \"round\") {\n        if (clockwise) {\n          verts.push(imx, imy);\n          verts.push(x1 + perpX * outerWeight, y1 + perpY * outerWeight);\n          indexCount += round(\n            x1,\n            y1,\n            x1 + perpX * outerWeight,\n            y1 + perpY * outerWeight,\n            x1 + perp1x * outerWeight,\n            y1 + perp1y * outerWeight,\n            verts,\n            true\n          ) + 4;\n          verts.push(imx, imy);\n          verts.push(x1 + perp1x * outerWeight, y1 + perp1y * outerWeight);\n        } else {\n          verts.push(x1 - perpX * innerWeight, y1 - perpY * innerWeight);\n          verts.push(omx, omy);\n          indexCount += round(\n            x1,\n            y1,\n            x1 - perpX * innerWeight,\n            y1 - perpY * innerWeight,\n            x1 - perp1x * innerWeight,\n            y1 - perp1y * innerWeight,\n            verts,\n            false\n          ) + 4;\n          verts.push(x1 - perp1x * innerWeight, y1 - perp1y * innerWeight);\n          verts.push(omx, omy);\n        }\n      } else {\n        verts.push(imx, imy);\n        verts.push(omx, omy);\n      }\n    } else {\n      verts.push(x1 - perpX * innerWeight, y1 - perpY * innerWeight);\n      verts.push(x1 + perpX * outerWeight, y1 + perpY * outerWeight);\n      if (style.join === \"round\") {\n        if (clockwise) {\n          indexCount += round(\n            x1,\n            y1,\n            x1 + perpX * outerWeight,\n            y1 + perpY * outerWeight,\n            x1 + perp1x * outerWeight,\n            y1 + perp1y * outerWeight,\n            verts,\n            true\n          ) + 2;\n        } else {\n          indexCount += round(\n            x1,\n            y1,\n            x1 - perpX * innerWeight,\n            y1 - perpY * innerWeight,\n            x1 - perp1x * innerWeight,\n            y1 - perp1y * innerWeight,\n            verts,\n            false\n          ) + 2;\n        }\n      } else if (style.join === \"miter\" && pDist / widthSquared <= miterLimitSquared) {\n        if (clockwise) {\n          verts.push(omx, omy);\n          verts.push(omx, omy);\n        } else {\n          verts.push(imx, imy);\n          verts.push(imx, imy);\n        }\n        indexCount += 2;\n      }\n      verts.push(x1 - perp1x * innerWeight, y1 - perp1y * innerWeight);\n      verts.push(x1 + perp1x * outerWeight, y1 + perp1y * outerWeight);\n      indexCount += 2;\n    }\n  }\n  x0 = points[(length - 2) * 2];\n  y0 = points[(length - 2) * 2 + 1];\n  x1 = points[(length - 1) * 2];\n  y1 = points[(length - 1) * 2 + 1];\n  perpX = -(y0 - y1);\n  perpY = x0 - x1;\n  dist = Math.sqrt(perpX * perpX + perpY * perpY);\n  perpX /= dist;\n  perpY /= dist;\n  perpX *= width;\n  perpY *= width;\n  verts.push(x1 - perpX * innerWeight, y1 - perpY * innerWeight);\n  verts.push(x1 + perpX * outerWeight, y1 + perpY * outerWeight);\n  if (!closedShape) {\n    if (style.cap === \"round\") {\n      indexCount += round(\n        x1 - perpX * (innerWeight - outerWeight) * 0.5,\n        y1 - perpY * (innerWeight - outerWeight) * 0.5,\n        x1 - perpX * innerWeight,\n        y1 - perpY * innerWeight,\n        x1 + perpX * outerWeight,\n        y1 + perpY * outerWeight,\n        verts,\n        false\n      ) + 2;\n    } else if (style.cap === \"square\") {\n      indexCount += square(x1, y1, perpX, perpY, innerWeight, outerWeight, false, verts);\n    }\n  }\n  const eps2 = curveEps * curveEps;\n  for (let i = indexStart; i < indexCount + indexStart - 2; ++i) {\n    x0 = verts[i * 2];\n    y0 = verts[i * 2 + 1];\n    x1 = verts[(i + 1) * 2];\n    y1 = verts[(i + 1) * 2 + 1];\n    x2 = verts[(i + 2) * 2];\n    y2 = verts[(i + 2) * 2 + 1];\n    if (Math.abs(x0 * (y1 - y2) + x1 * (y2 - y0) + x2 * (y0 - y1)) < eps2) {\n      continue;\n    }\n    indices.push(i, i + 1, i + 2);\n  }\n}\n\nexport { buildLine };\n//# sourceMappingURL=buildLine.mjs.map\n","import earcut from 'earcut';\n\n\"use strict\";\nfunction triangulateWithHoles(points, holes, vertices, verticesStride, verticesOffset, indices, indicesOffset) {\n  const triangles = earcut(points, holes, 2);\n  if (!triangles) {\n    return;\n  }\n  for (let i = 0; i < triangles.length; i += 3) {\n    indices[indicesOffset++] = triangles[i] + verticesOffset;\n    indices[indicesOffset++] = triangles[i + 1] + verticesOffset;\n    indices[indicesOffset++] = triangles[i + 2] + verticesOffset;\n  }\n  let index = verticesOffset * verticesStride;\n  for (let i = 0; i < points.length; i += 2) {\n    vertices[index] = points[i];\n    vertices[index + 1] = points[i + 1];\n    index += verticesStride;\n  }\n}\n\nexport { triangulateWithHoles };\n//# sourceMappingURL=triangulateWithHoles.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { triangulateWithHoles } from '../utils/triangulateWithHoles.mjs';\n\n\"use strict\";\nconst emptyArray = [];\nconst buildPolygon = {\n  extension: {\n    type: ExtensionType.ShapeBuilder,\n    name: \"polygon\"\n  },\n  build(shape, points) {\n    for (let i = 0; i < shape.points.length; i++) {\n      points[i] = shape.points[i];\n    }\n    return points;\n  },\n  triangulate(points, vertices, verticesStride, verticesOffset, indices, indicesOffset) {\n    triangulateWithHoles(points, emptyArray, vertices, verticesStride, verticesOffset, indices, indicesOffset);\n  }\n};\n\nexport { buildPolygon };\n//# sourceMappingURL=buildPolygon.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\n\n\"use strict\";\nconst buildRectangle = {\n  extension: {\n    type: ExtensionType.ShapeBuilder,\n    name: \"rectangle\"\n  },\n  build(shape, points) {\n    const rectData = shape;\n    const x = rectData.x;\n    const y = rectData.y;\n    const width = rectData.width;\n    const height = rectData.height;\n    if (!(width >= 0 && height >= 0)) {\n      return points;\n    }\n    points[0] = x;\n    points[1] = y;\n    points[2] = x + width;\n    points[3] = y;\n    points[4] = x + width;\n    points[5] = y + height;\n    points[6] = x;\n    points[7] = y + height;\n    return points;\n  },\n  triangulate(points, vertices, verticesStride, verticesOffset, indices, indicesOffset) {\n    let count = 0;\n    verticesOffset *= verticesStride;\n    vertices[verticesOffset + count] = points[0];\n    vertices[verticesOffset + count + 1] = points[1];\n    count += verticesStride;\n    vertices[verticesOffset + count] = points[2];\n    vertices[verticesOffset + count + 1] = points[3];\n    count += verticesStride;\n    vertices[verticesOffset + count] = points[6];\n    vertices[verticesOffset + count + 1] = points[7];\n    count += verticesStride;\n    vertices[verticesOffset + count] = points[4];\n    vertices[verticesOffset + count + 1] = points[5];\n    count += verticesStride;\n    const verticesIndex = verticesOffset / verticesStride;\n    indices[indicesOffset++] = verticesIndex;\n    indices[indicesOffset++] = verticesIndex + 1;\n    indices[indicesOffset++] = verticesIndex + 2;\n    indices[indicesOffset++] = verticesIndex + 1;\n    indices[indicesOffset++] = verticesIndex + 3;\n    indices[indicesOffset++] = verticesIndex + 2;\n  }\n};\n\nexport { buildRectangle };\n//# sourceMappingURL=buildRectangle.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\n\n\"use strict\";\nconst buildTriangle = {\n  extension: {\n    type: ExtensionType.ShapeBuilder,\n    name: \"triangle\"\n  },\n  build(shape, points) {\n    points[0] = shape.x;\n    points[1] = shape.y;\n    points[2] = shape.x2;\n    points[3] = shape.y2;\n    points[4] = shape.x3;\n    points[5] = shape.y3;\n    return points;\n  },\n  triangulate(points, vertices, verticesStride, verticesOffset, indices, indicesOffset) {\n    let count = 0;\n    verticesOffset *= verticesStride;\n    vertices[verticesOffset + count] = points[0];\n    vertices[verticesOffset + count + 1] = points[1];\n    count += verticesStride;\n    vertices[verticesOffset + count] = points[2];\n    vertices[verticesOffset + count + 1] = points[3];\n    count += verticesStride;\n    vertices[verticesOffset + count] = points[4];\n    vertices[verticesOffset + count + 1] = points[5];\n    const verticesIndex = verticesOffset / verticesStride;\n    indices[indicesOffset++] = verticesIndex;\n    indices[indicesOffset++] = verticesIndex + 1;\n    indices[indicesOffset++] = verticesIndex + 2;\n  }\n};\n\nexport { buildTriangle };\n//# sourceMappingURL=buildTriangle.mjs.map\n","import { extensions, ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { Rectangle } from '../../../../maths/shapes/Rectangle.mjs';\nimport { buildUvs, buildSimpleUvs } from '../../../../rendering/renderers/shared/geometry/utils/buildUvs.mjs';\nimport { transformVertices } from '../../../../rendering/renderers/shared/geometry/utils/transformVertices.mjs';\nimport { Texture } from '../../../../rendering/renderers/shared/texture/Texture.mjs';\nimport { BigPool } from '../../../../utils/pool/PoolGroup.mjs';\nimport { BatchableGraphics } from '../BatchableGraphics.mjs';\nimport { buildCircle, buildEllipse, buildRoundedRectangle } from '../buildCommands/buildCircle.mjs';\nimport { buildLine } from '../buildCommands/buildLine.mjs';\nimport { buildPolygon } from '../buildCommands/buildPolygon.mjs';\nimport { buildRectangle } from '../buildCommands/buildRectangle.mjs';\nimport { buildTriangle } from '../buildCommands/buildTriangle.mjs';\nimport { triangulateWithHoles } from './triangulateWithHoles.mjs';\n\n\"use strict\";\nconst shapeBuilders = {};\nextensions.handleByMap(ExtensionType.ShapeBuilder, shapeBuilders);\nextensions.add(buildRectangle, buildPolygon, buildTriangle, buildCircle, buildEllipse, buildRoundedRectangle);\nconst tempRect = new Rectangle();\nfunction buildContextBatches(context, gpuContext) {\n  const { geometryData, batches } = gpuContext;\n  batches.length = 0;\n  geometryData.indices.length = 0;\n  geometryData.vertices.length = 0;\n  geometryData.uvs.length = 0;\n  for (let i = 0; i < context.instructions.length; i++) {\n    const instruction = context.instructions[i];\n    if (instruction.action === \"texture\") {\n      addTextureToGeometryData(instruction.data, batches, geometryData);\n    } else if (instruction.action === \"fill\" || instruction.action === \"stroke\") {\n      const isStroke = instruction.action === \"stroke\";\n      const shapePath = instruction.data.path.shapePath;\n      const style = instruction.data.style;\n      const hole = instruction.data.hole;\n      if (isStroke && hole) {\n        addShapePathToGeometryData(hole.shapePath, style, null, true, batches, geometryData);\n      }\n      addShapePathToGeometryData(shapePath, style, hole, isStroke, batches, geometryData);\n    }\n  }\n}\nfunction addTextureToGeometryData(data, batches, geometryData) {\n  const { vertices, uvs, indices } = geometryData;\n  const indexOffset = indices.length;\n  const vertOffset = vertices.length / 2;\n  const points = [];\n  const build = shapeBuilders.rectangle;\n  const rect = tempRect;\n  const texture = data.image;\n  rect.x = data.dx;\n  rect.y = data.dy;\n  rect.width = data.dw;\n  rect.height = data.dh;\n  const matrix = data.transform;\n  build.build(rect, points);\n  if (matrix) {\n    transformVertices(points, matrix);\n  }\n  build.triangulate(points, vertices, 2, vertOffset, indices, indexOffset);\n  const textureUvs = texture.uvs;\n  uvs.push(\n    textureUvs.x0,\n    textureUvs.y0,\n    textureUvs.x1,\n    textureUvs.y1,\n    textureUvs.x3,\n    textureUvs.y3,\n    textureUvs.x2,\n    textureUvs.y2\n  );\n  const graphicsBatch = BigPool.get(BatchableGraphics);\n  graphicsBatch.indexOffset = indexOffset;\n  graphicsBatch.indexSize = indices.length - indexOffset;\n  graphicsBatch.vertexOffset = vertOffset;\n  graphicsBatch.vertexSize = vertices.length / 2 - vertOffset;\n  graphicsBatch.color = data.style;\n  graphicsBatch.alpha = data.alpha;\n  graphicsBatch.texture = texture;\n  graphicsBatch.geometryData = geometryData;\n  batches.push(graphicsBatch);\n}\nfunction addShapePathToGeometryData(shapePath, style, hole, isStroke, batches, geometryData) {\n  const { vertices, uvs, indices } = geometryData;\n  const lastIndex = shapePath.shapePrimitives.length - 1;\n  shapePath.shapePrimitives.forEach(({ shape, transform: matrix }, i) => {\n    const indexOffset = indices.length;\n    const vertOffset = vertices.length / 2;\n    const points = [];\n    const build = shapeBuilders[shape.type];\n    build.build(shape, points);\n    if (matrix) {\n      transformVertices(points, matrix);\n    }\n    if (!isStroke) {\n      if (hole && lastIndex === i) {\n        if (lastIndex !== 0) {\n          console.warn(\"[Pixi Graphics] only the last shape have be cut out\");\n        }\n        const holeIndices = [];\n        const otherPoints = points.slice();\n        const holeArrays = getHoleArrays(hole.shapePath);\n        holeArrays.forEach((holePoints) => {\n          holeIndices.push(otherPoints.length / 2);\n          otherPoints.push(...holePoints);\n        });\n        triangulateWithHoles(otherPoints, holeIndices, vertices, 2, vertOffset, indices, indexOffset);\n      } else {\n        build.triangulate(points, vertices, 2, vertOffset, indices, indexOffset);\n      }\n    } else {\n      const close = shape.closePath ?? true;\n      const lineStyle = style;\n      buildLine(points, lineStyle, false, close, vertices, 2, vertOffset, indices, indexOffset);\n    }\n    const uvsOffset = uvs.length / 2;\n    const texture = style.texture;\n    if (texture !== Texture.WHITE) {\n      const textureMatrix = style.matrix;\n      if (textureMatrix) {\n        if (matrix) {\n          textureMatrix.append(matrix.clone().invert());\n        }\n        buildUvs(vertices, 2, vertOffset, uvs, uvsOffset, 2, vertices.length / 2 - vertOffset, textureMatrix);\n      }\n    } else {\n      buildSimpleUvs(uvs, uvsOffset, 2, vertices.length / 2 - vertOffset);\n    }\n    const graphicsBatch = BigPool.get(BatchableGraphics);\n    graphicsBatch.indexOffset = indexOffset;\n    graphicsBatch.indexSize = indices.length - indexOffset;\n    graphicsBatch.vertexOffset = vertOffset;\n    graphicsBatch.vertexSize = vertices.length / 2 - vertOffset;\n    graphicsBatch.color = style.color;\n    graphicsBatch.alpha = style.alpha;\n    graphicsBatch.texture = texture;\n    graphicsBatch.geometryData = geometryData;\n    batches.push(graphicsBatch);\n  });\n}\nfunction getHoleArrays(shape) {\n  if (!shape)\n    return [];\n  const holePrimitives = shape.shapePrimitives;\n  const holeArrays = [];\n  for (let k = 0; k < holePrimitives.length; k++) {\n    const holePrimitive = holePrimitives[k].shape;\n    const holePoints = [];\n    const holeBuilder = shapeBuilders[holePrimitive.type];\n    holeBuilder.build(holePrimitive, holePoints);\n    holeArrays.push(holePoints);\n  }\n  return holeArrays;\n}\n\nexport { buildContextBatches, shapeBuilders };\n//# sourceMappingURL=buildContextBatches.mjs.map\n","\"use strict\";\nconst closePointEps = 1e-4;\nconst curveEps = 1e-4;\n\nexport { closePointEps, curveEps };\n//# sourceMappingURL=const.mjs.map\n","\"use strict\";\nfunction getOrientationOfPoints(points) {\n  const m = points.length;\n  if (m < 6) {\n    return 1;\n  }\n  let area = 0;\n  for (let i = 0, x1 = points[m - 2], y1 = points[m - 1]; i < m; i += 2) {\n    const x2 = points[i];\n    const y2 = points[i + 1];\n    area += (x2 - x1) * (y2 + y1);\n    x1 = x2;\n    y1 = y2;\n  }\n  if (area < 0) {\n    return -1;\n  }\n  return 1;\n}\n\nexport { getOrientationOfPoints };\n//# sourceMappingURL=getOrientationOfPoints.mjs.map\n","\"use strict\";\nfunction buildUvs(vertices, verticesStride, verticesOffset, uvs, uvsOffset, uvsStride, size, matrix = null) {\n  let index = 0;\n  verticesOffset *= verticesStride;\n  uvsOffset *= uvsStride;\n  const a = matrix.a;\n  const b = matrix.b;\n  const c = matrix.c;\n  const d = matrix.d;\n  const tx = matrix.tx;\n  const ty = matrix.ty;\n  while (index < size) {\n    const x = vertices[verticesOffset];\n    const y = vertices[verticesOffset + 1];\n    uvs[uvsOffset] = a * x + c * y + tx;\n    uvs[uvsOffset + 1] = b * x + d * y + ty;\n    uvsOffset += uvsStride;\n    verticesOffset += verticesStride;\n    index++;\n  }\n}\nfunction buildSimpleUvs(uvs, uvsOffset, uvsStride, size) {\n  let index = 0;\n  uvsOffset *= uvsStride;\n  while (index < size) {\n    uvs[uvsOffset] = 0;\n    uvs[uvsOffset + 1] = 0;\n    uvsOffset += uvsStride;\n    index++;\n  }\n}\n\nexport { buildSimpleUvs, buildUvs };\n//# sourceMappingURL=buildUvs.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { getTextureBatchBindGroup } from '../../../rendering/batcher/gpu/getTextureBatchBindGroup.mjs';\nimport { Batcher } from '../../../rendering/batcher/shared/Batcher.mjs';\nimport { BatchGeometry } from '../../../rendering/batcher/shared/BatchGeometry.mjs';\nimport { InstructionSet } from '../../../rendering/renderers/shared/instructions/InstructionSet.mjs';\nimport { BigPool } from '../../../utils/pool/PoolGroup.mjs';\nimport { buildContextBatches } from './utils/buildContextBatches.mjs';\n\n\"use strict\";\nclass GpuGraphicsContext {\n  constructor() {\n    this.batches = [];\n    this.geometryData = {\n      vertices: [],\n      uvs: [],\n      indices: []\n    };\n  }\n}\nclass GraphicsContextRenderData {\n  constructor() {\n    this.geometry = new BatchGeometry();\n    this.instructions = new InstructionSet();\n  }\n  init() {\n    this.instructions.reset();\n  }\n}\nconst _GraphicsContextSystem = class _GraphicsContextSystem {\n  constructor() {\n    // the root context batches, used to either make a batch or geometry\n    // all graphics use this as a base\n    this._activeBatchers = [];\n    this._gpuContextHash = {};\n    // used for non-batchable graphics\n    this._graphicsDataContextHash = /* @__PURE__ */ Object.create(null);\n  }\n  /**\n   * Runner init called, update the default options\n   * @ignore\n   */\n  init(options) {\n    _GraphicsContextSystem.defaultOptions.bezierSmoothness = options?.bezierSmoothness ?? _GraphicsContextSystem.defaultOptions.bezierSmoothness;\n  }\n  prerender() {\n    this._returnActiveBatchers();\n  }\n  getContextRenderData(context) {\n    return this._graphicsDataContextHash[context.uid] || this._initContextRenderData(context);\n  }\n  // Context management functions\n  updateGpuContext(context) {\n    let gpuContext = this._gpuContextHash[context.uid] || this._initContext(context);\n    if (context.dirty) {\n      if (gpuContext) {\n        this._cleanGraphicsContextData(context);\n      } else {\n        gpuContext = this._initContext(context);\n      }\n      buildContextBatches(context, gpuContext);\n      const batchMode = context.batchMode;\n      if (context.customShader || batchMode === \"no-batch\") {\n        gpuContext.isBatchable = false;\n      } else if (batchMode === \"auto\") {\n        gpuContext.isBatchable = gpuContext.geometryData.vertices.length < 400;\n      }\n      context.dirty = false;\n    }\n    return gpuContext;\n  }\n  getGpuContext(context) {\n    return this._gpuContextHash[context.uid] || this._initContext(context);\n  }\n  _returnActiveBatchers() {\n    for (let i = 0; i < this._activeBatchers.length; i++) {\n      BigPool.return(this._activeBatchers[i]);\n    }\n    this._activeBatchers.length = 0;\n  }\n  _initContextRenderData(context) {\n    const graphicsData = BigPool.get(GraphicsContextRenderData);\n    const { batches, geometryData } = this._gpuContextHash[context.uid];\n    const vertexSize = geometryData.vertices.length;\n    const indexSize = geometryData.indices.length;\n    for (let i = 0; i < batches.length; i++) {\n      batches[i].applyTransform = false;\n    }\n    const batcher = BigPool.get(Batcher);\n    this._activeBatchers.push(batcher);\n    batcher.ensureAttributeBuffer(vertexSize);\n    batcher.ensureIndexBuffer(indexSize);\n    batcher.begin();\n    for (let i = 0; i < batches.length; i++) {\n      const batch = batches[i];\n      batcher.add(batch);\n    }\n    batcher.finish(graphicsData.instructions);\n    const geometry = graphicsData.geometry;\n    geometry.indexBuffer.setDataWithSize(batcher.indexBuffer, batcher.indexSize, true);\n    geometry.buffers[0].setDataWithSize(batcher.attributeBuffer.float32View, batcher.attributeSize, true);\n    const drawBatches = batcher.batches;\n    for (let i = 0; i < drawBatches.length; i++) {\n      const batch = drawBatches[i];\n      batch.bindGroup = getTextureBatchBindGroup(batch.textures.textures, batch.textures.count);\n    }\n    this._graphicsDataContextHash[context.uid] = graphicsData;\n    return graphicsData;\n  }\n  _initContext(context) {\n    const gpuContext = new GpuGraphicsContext();\n    gpuContext.context = context;\n    this._gpuContextHash[context.uid] = gpuContext;\n    context.on(\"destroy\", this.onGraphicsContextDestroy, this);\n    return this._gpuContextHash[context.uid];\n  }\n  onGraphicsContextDestroy(context) {\n    this._cleanGraphicsContextData(context);\n    context.off(\"destroy\", this.onGraphicsContextDestroy, this);\n    this._gpuContextHash[context.uid] = null;\n  }\n  _cleanGraphicsContextData(context) {\n    const gpuContext = this._gpuContextHash[context.uid];\n    if (!gpuContext.isBatchable) {\n      if (this._graphicsDataContextHash[context.uid]) {\n        BigPool.return(this.getContextRenderData(context));\n        this._graphicsDataContextHash[context.uid] = null;\n      }\n    }\n    if (gpuContext.batches) {\n      gpuContext.batches.forEach((batch) => {\n        BigPool.return(batch);\n      });\n    }\n  }\n  destroy() {\n    for (const i in this._gpuContextHash) {\n      if (this._gpuContextHash[i]) {\n        this.onGraphicsContextDestroy(this._gpuContextHash[i].context);\n      }\n    }\n  }\n};\n/** @ignore */\n_GraphicsContextSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem,\n    ExtensionType.WebGPUSystem,\n    ExtensionType.CanvasSystem\n  ],\n  name: \"graphicsContext\"\n};\n/** The default options for the GraphicsContextSystem. */\n_GraphicsContextSystem.defaultOptions = {\n  /**\n   * A value from 0 to 1 that controls the smoothness of bezier curves (the higher the smoother)\n   * @default 0.5\n   */\n  bezierSmoothness: 0.5\n};\nlet GraphicsContextSystem = _GraphicsContextSystem;\n\nexport { GpuGraphicsContext, GraphicsContextRenderData, GraphicsContextSystem };\n//# sourceMappingURL=GraphicsContextSystem.mjs.map\n","import { Color } from '../../../../color/Color.mjs';\nimport { DOMAdapter } from '../../../../environment/adapter.mjs';\nimport { Matrix } from '../../../../maths/matrix/Matrix.mjs';\nimport { ImageSource } from '../../../../rendering/renderers/shared/texture/sources/ImageSource.mjs';\nimport { Texture } from '../../../../rendering/renderers/shared/texture/Texture.mjs';\nimport { uid } from '../../../../utils/data/uid.mjs';\n\n\"use strict\";\nconst _FillGradient = class _FillGradient {\n  constructor(x0, y0, x1, y1) {\n    this.uid = uid(\"fillGradient\");\n    this.type = \"linear\";\n    this.gradientStops = [];\n    this._styleKey = null;\n    this.x0 = x0;\n    this.y0 = y0;\n    this.x1 = x1;\n    this.y1 = y1;\n  }\n  addColorStop(offset, color) {\n    this.gradientStops.push({ offset, color: Color.shared.setValue(color).toHexa() });\n    this._styleKey = null;\n    return this;\n  }\n  // TODO move to the system!\n  buildLinearGradient() {\n    const defaultSize = _FillGradient.defaultTextureSize;\n    const { gradientStops } = this;\n    const canvas = DOMAdapter.get().createCanvas();\n    canvas.width = defaultSize;\n    canvas.height = defaultSize;\n    const ctx = canvas.getContext(\"2d\");\n    const gradient = ctx.createLinearGradient(0, 0, _FillGradient.defaultTextureSize, 1);\n    for (let i = 0; i < gradientStops.length; i++) {\n      const stop = gradientStops[i];\n      gradient.addColorStop(stop.offset, stop.color);\n    }\n    ctx.fillStyle = gradient;\n    ctx.fillRect(0, 0, defaultSize, defaultSize);\n    this.texture = new Texture({\n      source: new ImageSource({\n        resource: canvas,\n        addressModeU: \"clamp-to-edge\",\n        addressModeV: \"repeat\"\n      })\n    });\n    const { x0, y0, x1, y1 } = this;\n    const m = new Matrix();\n    const dx = x1 - x0;\n    const dy = y1 - y0;\n    const dist = Math.sqrt(dx * dx + dy * dy);\n    const angle = Math.atan2(dy, dx);\n    m.translate(-x0, -y0);\n    m.scale(1 / defaultSize, 1 / defaultSize);\n    m.rotate(-angle);\n    m.scale(256 / dist, 1);\n    this.transform = m;\n    this._styleKey = null;\n  }\n  get styleKey() {\n    if (this._styleKey) {\n      return this._styleKey;\n    }\n    const stops = this.gradientStops.map((stop) => `${stop.offset}-${stop.color}`).join(\"-\");\n    const texture = this.texture.uid;\n    const transform = this.transform.toArray().join(\"-\");\n    return `fill-gradient-${this.uid}-${stops}-${texture}-${transform}-${this.x0}-${this.y0}-${this.x1}-${this.y1}`;\n  }\n};\n_FillGradient.defaultTextureSize = 256;\nlet FillGradient = _FillGradient;\n\nexport { FillGradient };\n//# sourceMappingURL=FillGradient.mjs.map\n","import { Matrix } from '../../../../maths/matrix/Matrix.mjs';\nimport { uid } from '../../../../utils/data/uid.mjs';\n\n\"use strict\";\nconst repetitionMap = {\n  repeat: {\n    addressModeU: \"repeat\",\n    addressModeV: \"repeat\"\n  },\n  \"repeat-x\": {\n    addressModeU: \"repeat\",\n    addressModeV: \"clamp-to-edge\"\n  },\n  \"repeat-y\": {\n    addressModeU: \"clamp-to-edge\",\n    addressModeV: \"repeat\"\n  },\n  \"no-repeat\": {\n    addressModeU: \"clamp-to-edge\",\n    addressModeV: \"clamp-to-edge\"\n  }\n};\nclass FillPattern {\n  constructor(texture, repetition) {\n    this.uid = uid(\"fillPattern\");\n    this.transform = new Matrix();\n    this._styleKey = null;\n    this.texture = texture;\n    this.transform.scale(\n      1 / texture.frame.width,\n      1 / texture.frame.height\n    );\n    if (repetition) {\n      texture.source.style.addressModeU = repetitionMap[repetition].addressModeU;\n      texture.source.style.addressModeV = repetitionMap[repetition].addressModeV;\n    }\n  }\n  setTransform(transform) {\n    const texture = this.texture;\n    this.transform.copyFrom(transform);\n    this.transform.invert();\n    this.transform.scale(\n      1 / texture.frame.width,\n      1 / texture.frame.height\n    );\n    this._styleKey = null;\n  }\n  get styleKey() {\n    if (this._styleKey)\n      return this._styleKey;\n    this._styleKey = `fill-pattern-${this.uid}-${this.texture.uid}-${this.transform.toArray().join(\"-\")}`;\n    return this._styleKey;\n  }\n}\n\nexport { FillPattern };\n//# sourceMappingURL=FillPattern.mjs.map\n","import { Color } from '../../../../color/Color.mjs';\nimport { Matrix } from '../../../../maths/matrix/Matrix.mjs';\nimport { Texture } from '../../../../rendering/renderers/shared/texture/Texture.mjs';\nimport { FillGradient } from '../fill/FillGradient.mjs';\nimport { FillPattern } from '../fill/FillPattern.mjs';\n\n\"use strict\";\nfunction isColorLike(value) {\n  return Color.isColorLike(value);\n}\nfunction isFillPattern(value) {\n  return value instanceof FillPattern;\n}\nfunction isFillGradient(value) {\n  return value instanceof FillGradient;\n}\nfunction handleColorLike(fill, value, defaultStyle) {\n  const temp = Color.shared.setValue(value ?? 0);\n  fill.color = temp.toNumber();\n  fill.alpha = temp.alpha === 1 ? defaultStyle.alpha : temp.alpha;\n  fill.texture = Texture.WHITE;\n  return { ...defaultStyle, ...fill };\n}\nfunction handleFillPattern(fill, value, defaultStyle) {\n  fill.fill = value;\n  fill.color = 16777215;\n  fill.texture = value.texture;\n  fill.matrix = value.transform;\n  return { ...defaultStyle, ...fill };\n}\nfunction handleFillGradient(fill, value, defaultStyle) {\n  value.buildLinearGradient();\n  fill.fill = value;\n  fill.color = 16777215;\n  fill.texture = value.texture;\n  fill.matrix = value.transform;\n  return { ...defaultStyle, ...fill };\n}\nfunction handleFillObject(value, defaultStyle) {\n  const style = { ...defaultStyle, ...value };\n  if (style.texture) {\n    if (style.texture !== Texture.WHITE) {\n      const m = style.matrix?.invert() || new Matrix();\n      m.translate(style.texture.frame.x, style.texture.frame.y);\n      m.scale(1 / style.texture.source.width, 1 / style.texture.source.height);\n      style.matrix = m;\n    }\n    const sourceStyle = style.texture.source.style;\n    if (sourceStyle.addressMode === \"clamp-to-edge\") {\n      sourceStyle.addressMode = \"repeat\";\n      sourceStyle.update();\n    }\n  }\n  const color = Color.shared.setValue(style.color);\n  style.alpha *= color.alpha;\n  style.color = color.toNumber();\n  style.matrix = style.matrix ? style.matrix.clone() : null;\n  return style;\n}\nfunction toFillStyle(value, defaultStyle) {\n  if (value === void 0 || value === null) {\n    return null;\n  }\n  const fill = {};\n  const objectStyle = value;\n  if (isColorLike(value)) {\n    return handleColorLike(fill, value, defaultStyle);\n  } else if (isFillPattern(value)) {\n    return handleFillPattern(fill, value, defaultStyle);\n  } else if (isFillGradient(value)) {\n    return handleFillGradient(fill, value, defaultStyle);\n  } else if (objectStyle.fill && isFillPattern(objectStyle.fill)) {\n    return handleFillPattern(objectStyle, objectStyle.fill, defaultStyle);\n  } else if (objectStyle.fill && isFillGradient(objectStyle.fill)) {\n    return handleFillGradient(objectStyle, objectStyle.fill, defaultStyle);\n  }\n  return handleFillObject(objectStyle, defaultStyle);\n}\nfunction toStrokeStyle(value, defaultStyle) {\n  const { width, alignment, miterLimit, cap, join, ...rest } = defaultStyle;\n  const fill = toFillStyle(value, rest);\n  if (!fill) {\n    return null;\n  }\n  return {\n    width,\n    alignment,\n    miterLimit,\n    cap,\n    join,\n    ...fill\n  };\n}\n\nexport { toFillStyle, toStrokeStyle };\n//# sourceMappingURL=convertFillInputToFillStyle.mjs.map\n","import { ObservablePoint } from '../../maths/point/ObservablePoint.mjs';\nimport { Texture } from '../../rendering/renderers/shared/texture/Texture.mjs';\nimport { updateQuadBounds } from '../../utils/data/updateQuadBounds.mjs';\nimport { Container } from '../container/Container.mjs';\n\n\"use strict\";\nclass Sprite extends Container {\n  /**\n   * @param options - The options for creating the sprite.\n   */\n  constructor(options = Texture.EMPTY) {\n    if (options instanceof Texture) {\n      options = { texture: options };\n    }\n    const { texture = Texture.EMPTY, anchor, roundPixels, width, height, ...rest } = options;\n    super({\n      label: \"Sprite\",\n      ...rest\n    });\n    this.renderPipeId = \"sprite\";\n    this.batched = true;\n    this._didSpriteUpdate = false;\n    this._bounds = { minX: 0, maxX: 1, minY: 0, maxY: 0 };\n    this._sourceBounds = { minX: 0, maxX: 1, minY: 0, maxY: 0 };\n    this._boundsDirty = true;\n    this._sourceBoundsDirty = true;\n    this._roundPixels = 0;\n    this._anchor = new ObservablePoint(\n      {\n        _onUpdate: () => {\n          this.onViewUpdate();\n        }\n      }\n    );\n    if (anchor) {\n      this.anchor = anchor;\n    } else if (texture.defaultAnchor) {\n      this.anchor = texture.defaultAnchor;\n    }\n    this.texture = texture;\n    this.allowChildren = false;\n    this.roundPixels = roundPixels ?? false;\n    if (width !== void 0)\n      this.width = width;\n    if (height !== void 0)\n      this.height = height;\n  }\n  /**\n   * Helper function that creates a new sprite based on the source you provide.\n   * The source can be - frame id, image, video, canvas element, video element, texture\n   * @param source - Source to create texture from\n   * @param [skipCache] - Whether to skip the cache or not\n   * @returns The newly created sprite\n   */\n  static from(source, skipCache = false) {\n    if (source instanceof Texture) {\n      return new Sprite(source);\n    }\n    return new Sprite(Texture.from(source, skipCache));\n  }\n  set texture(value) {\n    value || (value = Texture.EMPTY);\n    const currentTexture = this._texture;\n    if (currentTexture === value)\n      return;\n    if (currentTexture && currentTexture.dynamic)\n      currentTexture.off(\"update\", this.onViewUpdate, this);\n    if (value.dynamic)\n      value.on(\"update\", this.onViewUpdate, this);\n    this._texture = value;\n    if (this._width) {\n      this._setWidth(this._width, this._texture.orig.width);\n    }\n    if (this._height) {\n      this._setHeight(this._height, this._texture.orig.height);\n    }\n    this.onViewUpdate();\n  }\n  /** The texture that the sprite is using. */\n  get texture() {\n    return this._texture;\n  }\n  /**\n   * The local bounds of the sprite.\n   * @type {rendering.Bounds}\n   */\n  get bounds() {\n    if (this._boundsDirty) {\n      this._updateBounds();\n      this._boundsDirty = false;\n    }\n    return this._bounds;\n  }\n  /**\n   * The bounds of the sprite, taking the texture's trim into account.\n   * @type {rendering.Bounds}\n   */\n  get sourceBounds() {\n    if (this._sourceBoundsDirty) {\n      this._updateSourceBounds();\n      this._sourceBoundsDirty = false;\n    }\n    return this._sourceBounds;\n  }\n  /**\n   * Checks if the object contains the given point.\n   * @param point - The point to check\n   */\n  containsPoint(point) {\n    const bounds = this.sourceBounds;\n    if (point.x >= bounds.maxX && point.x <= bounds.minX) {\n      if (point.y >= bounds.maxY && point.y <= bounds.minY) {\n        return true;\n      }\n    }\n    return false;\n  }\n  /**\n   * Adds the bounds of this object to the bounds object.\n   * @param bounds - The output bounds object.\n   */\n  addBounds(bounds) {\n    const _bounds = this._texture.trim ? this.sourceBounds : this.bounds;\n    bounds.addFrame(_bounds.minX, _bounds.minY, _bounds.maxX, _bounds.maxY);\n  }\n  onViewUpdate() {\n    this._didChangeId += 1 << 12;\n    this._didSpriteUpdate = true;\n    this._sourceBoundsDirty = this._boundsDirty = true;\n    if (this.didViewUpdate)\n      return;\n    this.didViewUpdate = true;\n    const renderGroup = this.renderGroup || this.parentRenderGroup;\n    if (renderGroup) {\n      renderGroup.onChildViewUpdate(this);\n    }\n  }\n  _updateBounds() {\n    updateQuadBounds(this._bounds, this._anchor, this._texture, 0);\n  }\n  _updateSourceBounds() {\n    const anchor = this._anchor;\n    const texture = this._texture;\n    const sourceBounds = this._sourceBounds;\n    const { width, height } = texture.orig;\n    sourceBounds.maxX = -anchor._x * width;\n    sourceBounds.minX = sourceBounds.maxX + width;\n    sourceBounds.maxY = -anchor._y * height;\n    sourceBounds.minY = sourceBounds.maxY + height;\n  }\n  /**\n   * Destroys this sprite renderable and optionally its texture.\n   * @param options - Options parameter. A boolean will act as if all options\n   *  have been set to that value\n   * @param {boolean} [options.texture=false] - Should it destroy the current texture of the renderable as well\n   * @param {boolean} [options.textureSource=false] - Should it destroy the textureSource of the renderable as well\n   */\n  destroy(options = false) {\n    super.destroy(options);\n    const destroyTexture = typeof options === \"boolean\" ? options : options?.texture;\n    if (destroyTexture) {\n      const destroyTextureSource = typeof options === \"boolean\" ? options : options?.textureSource;\n      this._texture.destroy(destroyTextureSource);\n    }\n    this._texture = null;\n    this._bounds = null;\n    this._sourceBounds = null;\n    this._anchor = null;\n  }\n  /**\n   * The anchor sets the origin point of the sprite. The default value is taken from the {@link Texture}\n   * and passed to the constructor.\n   *\n   * The default is `(0,0)`, this means the sprite's origin is the top left.\n   *\n   * Setting the anchor to `(0.5,0.5)` means the sprite's origin is centered.\n   *\n   * Setting the anchor to `(1,1)` would mean the sprite's origin point will be the bottom right corner.\n   *\n   * If you pass only single parameter, it will set both x and y to the same value as shown in the example below.\n   * @example\n   * import { Sprite } from 'pixi.js';\n   *\n   * const sprite = new Sprite({texture: Texture.WHITE});\n   * sprite.anchor.set(0.5); // This will set the origin to center. (0.5) is same as (0.5, 0.5).\n   */\n  get anchor() {\n    return this._anchor;\n  }\n  set anchor(value) {\n    typeof value === \"number\" ? this._anchor.set(value) : this._anchor.copyFrom(value);\n  }\n  /**\n   *  Whether or not to round the x/y position of the sprite.\n   * @type {boolean}\n   */\n  get roundPixels() {\n    return !!this._roundPixels;\n  }\n  set roundPixels(value) {\n    this._roundPixels = value ? 1 : 0;\n  }\n  /** The width of the sprite, setting this will actually modify the scale to achieve the value set. */\n  get width() {\n    return Math.abs(this.scale.x) * this._texture.orig.width;\n  }\n  set width(value) {\n    this._setWidth(value, this._texture.orig.width);\n    this._width = value;\n  }\n  /** The height of the sprite, setting this will actually modify the scale to achieve the value set. */\n  get height() {\n    return Math.abs(this.scale.y) * this._texture.orig.height;\n  }\n  set height(value) {\n    this._setHeight(value, this._texture.orig.height);\n    this._height = value;\n  }\n  /**\n   * Retrieves the size of the Sprite as a [Size]{@link Size} object.\n   * This is faster than get the width and height separately.\n   * @param out - Optional object to store the size in.\n   * @returns - The size of the Sprite.\n   */\n  getSize(out) {\n    if (!out) {\n      out = {};\n    }\n    out.width = Math.abs(this.scale.x) * this._texture.orig.width;\n    out.height = Math.abs(this.scale.y) * this._texture.orig.height;\n    return out;\n  }\n  /**\n   * Sets the size of the Sprite to the specified width and height.\n   * This is faster than setting the width and height separately.\n   * @param value - This can be either a number or a [Size]{@link Size} object.\n   * @param height - The height to set. Defaults to the value of `width` if not provided.\n   */\n  setSize(value, height) {\n    let convertedWidth;\n    let convertedHeight;\n    if (typeof value !== \"object\") {\n      convertedWidth = value;\n      convertedHeight = height ?? value;\n    } else {\n      convertedWidth = value.width;\n      convertedHeight = value.height ?? value.width;\n    }\n    if (convertedWidth !== void 0) {\n      this._setWidth(convertedWidth, this._texture.orig.width);\n    }\n    if (convertedHeight !== void 0) {\n      this._setHeight(convertedHeight, this._texture.orig.height);\n    }\n  }\n}\n\nexport { Sprite };\n//# sourceMappingURL=Sprite.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { deprecation, v8_0_0 } from '../../utils/logging/deprecation.mjs';\n\n\"use strict\";\nclass AbstractBitmapFont extends EventEmitter {\n  constructor() {\n    super(...arguments);\n    /** The map of characters by character code. */\n    this.chars = /* @__PURE__ */ Object.create(null);\n    /**\n     * The line-height of the font face in pixels.\n     * @type {number}\n     */\n    this.lineHeight = 0;\n    /**\n     * The name of the font face\n     * @type {string}\n     */\n    this.fontFamily = \"\";\n    /** The metrics of the font face. */\n    this.fontMetrics = { fontSize: 0, ascent: 0, descent: 0 };\n    /**\n     * The offset of the font face from the baseline.\n     * @type {number}\n     */\n    this.baseLineOffset = 0;\n    /** The range and type of the distance field for this font. */\n    this.distanceField = { type: \"none\", range: 0 };\n    /** The map of base page textures (i.e., sheets of glyphs). */\n    this.pages = [];\n    /** should the fill for this font be applied as a tint to the text. */\n    this.applyFillAsTint = true;\n    /** The size of the font face in pixels. */\n    this.baseMeasurementFontSize = 100;\n    this.baseRenderedFontSize = 100;\n  }\n  /**\n   * The name of the font face.\n   * @deprecated since 8.0.0 Use `fontFamily` instead.\n   */\n  get font() {\n    deprecation(v8_0_0, \"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead.\");\n    return this.fontFamily;\n  }\n  /**\n   * The map of base page textures (i.e., sheets of glyphs).\n   * @deprecated since 8.0.0 Use `pages` instead.\n   */\n  get pageTextures() {\n    deprecation(v8_0_0, \"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead.\");\n    return this.pages;\n  }\n  /**\n   * The size of the font face in pixels.\n   * @deprecated since 8.0.0 Use `fontMetrics.fontSize` instead.\n   */\n  get size() {\n    deprecation(v8_0_0, \"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead.\");\n    return this.fontMetrics.fontSize;\n  }\n  /**\n   * The kind of distance field for this font or \"none\".\n   * @deprecated since 8.0.0 Use `distanceField.type` instead.\n   */\n  get distanceFieldRange() {\n    deprecation(v8_0_0, \"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead.\");\n    return this.distanceField.range;\n  }\n  /**\n   * The range of the distance field in pixels.\n   * @deprecated since 8.0.0 Use `distanceField.range` instead.\n   */\n  get distanceFieldType() {\n    deprecation(v8_0_0, \"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead.\");\n    return this.distanceField.type;\n  }\n  destroy(destroyTextures = false) {\n    this.emit(\"destroy\", this);\n    this.removeAllListeners();\n    for (const i in this.chars) {\n      this.chars[i].texture?.destroy();\n    }\n    this.chars = null;\n    if (destroyTextures) {\n      this.pages.forEach((page) => page.texture.destroy(true));\n      this.pages = null;\n    }\n  }\n}\n\nexport { AbstractBitmapFont };\n//# sourceMappingURL=AbstractBitmapFont.mjs.map\n","\"use strict\";\nfunction resolveCharacters(chars) {\n  if (chars === \"\") {\n    return [];\n  }\n  if (typeof chars === \"string\") {\n    chars = [chars];\n  }\n  const result = [];\n  for (let i = 0, j = chars.length; i < j; i++) {\n    const item = chars[i];\n    if (Array.isArray(item)) {\n      if (item.length !== 2) {\n        throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${item.length}.`);\n      }\n      if (item[0].length === 0 || item[1].length === 0) {\n        throw new Error(\"[BitmapFont]: Invalid character delimiter.\");\n      }\n      const startCode = item[0].charCodeAt(0);\n      const endCode = item[1].charCodeAt(0);\n      if (endCode < startCode) {\n        throw new Error(\"[BitmapFont]: Invalid character range.\");\n      }\n      for (let i2 = startCode, j2 = endCode; i2 <= j2; i2++) {\n        result.push(String.fromCharCode(i2));\n      }\n    } else {\n      result.push(...Array.from(item));\n    }\n  }\n  if (result.length === 0) {\n    throw new Error(\"[BitmapFont]: Empty set when resolving characters.\");\n  }\n  return result;\n}\n\nexport { resolveCharacters };\n//# sourceMappingURL=resolveCharacters.mjs.map\n","import { Color } from '../../color/Color.mjs';\nimport { Rectangle } from '../../maths/shapes/Rectangle.mjs';\nimport { CanvasPool } from '../../rendering/renderers/shared/texture/CanvasPool.mjs';\nimport { ImageSource } from '../../rendering/renderers/shared/texture/sources/ImageSource.mjs';\nimport { Texture } from '../../rendering/renderers/shared/texture/Texture.mjs';\nimport { deprecation, v8_0_0 } from '../../utils/logging/deprecation.mjs';\nimport { CanvasTextMetrics } from '../text/canvas/CanvasTextMetrics.mjs';\nimport { fontStringFromTextStyle } from '../text/canvas/utils/fontStringFromTextStyle.mjs';\nimport { getCanvasFillStyle } from '../text/canvas/utils/getCanvasFillStyle.mjs';\nimport { TextStyle } from '../text/TextStyle.mjs';\nimport { AbstractBitmapFont } from './AbstractBitmapFont.mjs';\nimport { resolveCharacters } from './utils/resolveCharacters.mjs';\n\n\"use strict\";\nconst _DynamicBitmapFont = class _DynamicBitmapFont extends AbstractBitmapFont {\n  /**\n   * @param options - The options for the dynamic bitmap font.\n   */\n  constructor(options) {\n    super();\n    /**\n     * this is a resolution modifier for the font size..\n     * texture resolution will also be used to scale texture according to its font size also\n     */\n    this.resolution = 1;\n    /** The pages of the font. */\n    this.pages = [];\n    this._padding = 0;\n    this._measureCache = /* @__PURE__ */ Object.create(null);\n    this._currentChars = [];\n    this._currentX = 0;\n    this._currentY = 0;\n    this._currentPageIndex = -1;\n    this._skipKerning = false;\n    const dynamicOptions = { ..._DynamicBitmapFont.defaultOptions, ...options };\n    this._textureSize = dynamicOptions.textureSize;\n    this._mipmap = dynamicOptions.mipmap;\n    const style = dynamicOptions.style.clone();\n    if (dynamicOptions.overrideFill) {\n      style._fill.color = 16777215;\n      style._fill.alpha = 1;\n      style._fill.texture = Texture.WHITE;\n      style._fill.fill = null;\n    }\n    this.applyFillAsTint = dynamicOptions.overrideFill;\n    const requestedFontSize = style.fontSize;\n    style.fontSize = this.baseMeasurementFontSize;\n    const font = fontStringFromTextStyle(style);\n    if (dynamicOptions.overrideSize) {\n      if (style._stroke) {\n        style._stroke.width *= this.baseRenderedFontSize / requestedFontSize;\n      }\n    } else {\n      style.fontSize = this.baseRenderedFontSize = requestedFontSize;\n    }\n    this._style = style;\n    this._skipKerning = dynamicOptions.skipKerning ?? false;\n    this.resolution = dynamicOptions.resolution ?? 1;\n    this._padding = dynamicOptions.padding ?? 4;\n    this.fontMetrics = CanvasTextMetrics.measureFont(font);\n    this.lineHeight = style.lineHeight || this.fontMetrics.fontSize || style.fontSize;\n  }\n  ensureCharacters(chars) {\n    const charList = resolveCharacters(chars).filter((char) => !this._currentChars.includes(char)).filter((char, index, self) => self.indexOf(char) === index);\n    if (!charList.length)\n      return;\n    this._currentChars = [...this._currentChars, ...charList];\n    let pageData;\n    if (this._currentPageIndex === -1) {\n      pageData = this._nextPage();\n    } else {\n      pageData = this.pages[this._currentPageIndex];\n    }\n    let { canvas, context } = pageData.canvasAndContext;\n    let textureSource = pageData.texture.source;\n    const style = this._style;\n    let currentX = this._currentX;\n    let currentY = this._currentY;\n    const fontScale = this.baseRenderedFontSize / this.baseMeasurementFontSize;\n    const padding = this._padding * fontScale;\n    const widthScale = style.fontStyle === \"italic\" ? 2 : 1;\n    let maxCharHeight = 0;\n    let skipTexture = false;\n    for (let i = 0; i < charList.length; i++) {\n      const char = charList[i];\n      const metrics = CanvasTextMetrics.measureText(char, style, canvas, false);\n      metrics.lineHeight = metrics.height;\n      const width = widthScale * metrics.width * fontScale;\n      const height = metrics.height * fontScale;\n      const paddedWidth = width + padding * 2;\n      const paddedHeight = height + padding * 2;\n      skipTexture = false;\n      if (char !== \"\\n\" && char !== \"\\r\" && char !== \"\t\" && char !== \" \") {\n        skipTexture = true;\n        maxCharHeight = Math.ceil(Math.max(paddedHeight, maxCharHeight));\n      }\n      if (currentX + paddedWidth > this._textureSize) {\n        currentY += maxCharHeight;\n        maxCharHeight = paddedHeight;\n        currentX = 0;\n        if (currentY + maxCharHeight > this._textureSize) {\n          textureSource.update();\n          const pageData2 = this._nextPage();\n          canvas = pageData2.canvasAndContext.canvas;\n          context = pageData2.canvasAndContext.context;\n          textureSource = pageData2.texture.source;\n          currentY = 0;\n        }\n      }\n      const xAdvance = width / fontScale - (style.dropShadow?.distance ?? 0) - (style._stroke?.width ?? 0);\n      this.chars[char] = {\n        id: char.codePointAt(0),\n        xOffset: -this._padding,\n        yOffset: -this._padding,\n        xAdvance,\n        kerning: {}\n      };\n      if (skipTexture) {\n        this._drawGlyph(\n          context,\n          metrics,\n          currentX + padding,\n          currentY + padding,\n          fontScale,\n          style\n        );\n        const px = textureSource.width * fontScale;\n        const py = textureSource.height * fontScale;\n        const frame = new Rectangle(\n          currentX / px * textureSource.width,\n          currentY / py * textureSource.height,\n          paddedWidth / px * textureSource.width,\n          paddedHeight / py * textureSource.height\n        );\n        this.chars[char].texture = new Texture({\n          source: textureSource,\n          frame\n        });\n        currentX += Math.ceil(paddedWidth);\n      }\n    }\n    textureSource.update();\n    this._currentX = currentX;\n    this._currentY = currentY;\n    this._skipKerning && this._applyKerning(charList, context);\n  }\n  /**\n   * @deprecated since 8.0.0\n   * The map of base page textures (i.e., sheets of glyphs).\n   */\n  get pageTextures() {\n    deprecation(v8_0_0, \"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead.\");\n    return this.pages;\n  }\n  _applyKerning(newChars, context) {\n    const measureCache = this._measureCache;\n    for (let i = 0; i < newChars.length; i++) {\n      const first = newChars[i];\n      for (let j = 0; j < this._currentChars.length; j++) {\n        const second = this._currentChars[j];\n        let c1 = measureCache[first];\n        if (!c1)\n          c1 = measureCache[first] = context.measureText(first).width;\n        let c2 = measureCache[second];\n        if (!c2)\n          c2 = measureCache[second] = context.measureText(second).width;\n        let total = context.measureText(first + second).width;\n        let amount = total - (c1 + c2);\n        if (amount) {\n          this.chars[first].kerning[second] = amount;\n        }\n        total = context.measureText(first + second).width;\n        amount = total - (c1 + c2);\n        if (amount) {\n          this.chars[second].kerning[first] = amount;\n        }\n      }\n    }\n  }\n  _nextPage() {\n    this._currentPageIndex++;\n    const textureResolution = this.resolution;\n    const canvasAndContext = CanvasPool.getOptimalCanvasAndContext(\n      this._textureSize,\n      this._textureSize,\n      textureResolution\n    );\n    this._setupContext(canvasAndContext.context, this._style, textureResolution);\n    const resolution = textureResolution * (this.baseRenderedFontSize / this.baseMeasurementFontSize);\n    const texture = new Texture({\n      source: new ImageSource({\n        resource: canvasAndContext.canvas,\n        resolution,\n        alphaMode: \"premultiply-alpha-on-upload\",\n        autoGenerateMipmaps: this._mipmap\n      })\n    });\n    const pageData = {\n      canvasAndContext,\n      texture\n    };\n    this.pages[this._currentPageIndex] = pageData;\n    return pageData;\n  }\n  // canvas style!\n  _setupContext(context, style, resolution) {\n    style.fontSize = this.baseRenderedFontSize;\n    context.scale(resolution, resolution);\n    context.font = fontStringFromTextStyle(style);\n    style.fontSize = this.baseMeasurementFontSize;\n    context.textBaseline = style.textBaseline;\n    const stroke = style._stroke;\n    const strokeThickness = stroke?.width ?? 0;\n    if (stroke) {\n      context.lineWidth = strokeThickness;\n      context.lineJoin = stroke.join;\n      context.miterLimit = stroke.miterLimit;\n      context.strokeStyle = getCanvasFillStyle(stroke, context);\n    }\n    if (style._fill) {\n      context.fillStyle = getCanvasFillStyle(style._fill, context);\n    }\n    if (style.dropShadow) {\n      const shadowOptions = style.dropShadow;\n      const rgb = Color.shared.setValue(shadowOptions.color).toArray();\n      const dropShadowBlur = shadowOptions.blur * resolution;\n      const dropShadowDistance = shadowOptions.distance * resolution;\n      context.shadowColor = `rgba(${rgb[0] * 255},${rgb[1] * 255},${rgb[2] * 255},${shadowOptions.alpha})`;\n      context.shadowBlur = dropShadowBlur;\n      context.shadowOffsetX = Math.cos(shadowOptions.angle) * dropShadowDistance;\n      context.shadowOffsetY = Math.sin(shadowOptions.angle) * dropShadowDistance;\n    } else {\n      context.shadowColor = \"black\";\n      context.shadowBlur = 0;\n      context.shadowOffsetX = 0;\n      context.shadowOffsetY = 0;\n    }\n  }\n  _drawGlyph(context, metrics, x, y, fontScale, style) {\n    const char = metrics.text;\n    const fontProperties = metrics.fontProperties;\n    const stroke = style._stroke;\n    const strokeThickness = (stroke?.width ?? 0) * fontScale;\n    const tx = x + strokeThickness / 2;\n    const ty = y - strokeThickness / 2;\n    const descent = fontProperties.descent * fontScale;\n    const lineHeight = metrics.lineHeight * fontScale;\n    if (style.stroke && strokeThickness) {\n      context.strokeText(char, tx, ty + lineHeight - descent);\n    }\n    if (style._fill) {\n      context.fillText(char, tx, ty + lineHeight - descent);\n    }\n  }\n  destroy() {\n    super.destroy();\n    for (let i = 0; i < this.pages.length; i++) {\n      const { canvasAndContext, texture } = this.pages[i];\n      canvasAndContext.canvas.width = canvasAndContext.canvas.width;\n      CanvasPool.returnCanvasAndContext(canvasAndContext);\n      texture.destroy(true);\n    }\n    this.pages = null;\n  }\n};\n_DynamicBitmapFont.defaultOptions = {\n  textureSize: 512,\n  style: new TextStyle(),\n  mipmap: true\n};\nlet DynamicBitmapFont = _DynamicBitmapFont;\n\nexport { DynamicBitmapFont };\n//# sourceMappingURL=DynamicBitmapFont.mjs.map\n","import { Cache } from '../../assets/cache/Cache.mjs';\nimport { deprecation, v8_0_0 } from '../../utils/logging/deprecation.mjs';\nimport { warn } from '../../utils/logging/warn.mjs';\nimport { TextStyle } from '../text/TextStyle.mjs';\nimport { DynamicBitmapFont } from './DynamicBitmapFont.mjs';\nimport { getBitmapTextLayout } from './utils/getBitmapTextLayout.mjs';\nimport { resolveCharacters } from './utils/resolveCharacters.mjs';\n\n\"use strict\";\nlet fontCount = 0;\nclass BitmapFontManagerClass {\n  constructor() {\n    /**\n     * This character set includes all the letters in the alphabet (both lower- and upper- case).\n     * @type {string[][]}\n     * @example\n     * BitmapFont.from('ExampleFont', style, { chars: BitmapFont.ALPHA })\n     */\n    this.ALPHA = [[\"a\", \"z\"], [\"A\", \"Z\"], \" \"];\n    /**\n     * This character set includes all decimal digits (from 0 to 9).\n     * @type {string[][]}\n     * @example\n     * BitmapFont.from('ExampleFont', style, { chars: BitmapFont.NUMERIC })\n     */\n    this.NUMERIC = [[\"0\", \"9\"]];\n    /**\n     * This character set is the union of `BitmapFont.ALPHA` and `BitmapFont.NUMERIC`.\n     * @type {string[][]}\n     */\n    this.ALPHANUMERIC = [[\"a\", \"z\"], [\"A\", \"Z\"], [\"0\", \"9\"], \" \"];\n    /**\n     * This character set consists of all the ASCII table.\n     * @member {string[][]}\n     * @see http://www.asciitable.com/\n     */\n    this.ASCII = [[\" \", \"~\"]];\n    /** Default options for installing a new BitmapFont. */\n    this.defaultOptions = {\n      chars: this.ALPHANUMERIC,\n      resolution: 1,\n      padding: 4,\n      skipKerning: false\n    };\n  }\n  /**\n   * Get a font for the specified text and style.\n   * @param text - The text to get the font for\n   * @param style - The style to use\n   */\n  getFont(text, style) {\n    let fontFamilyKey = `${style.fontFamily}-bitmap`;\n    let overrideFill = true;\n    if (style._fill.fill && !style._stroke) {\n      fontFamilyKey += style._fill.fill.styleKey;\n      overrideFill = false;\n    } else if (style._stroke || style.dropShadow) {\n      let key = style.styleKey;\n      key = key.substring(0, key.lastIndexOf(\"-\"));\n      fontFamilyKey = `${key}-bitmap`;\n      overrideFill = false;\n    }\n    if (!Cache.has(fontFamilyKey)) {\n      const fnt = new DynamicBitmapFont({\n        style,\n        overrideFill,\n        overrideSize: true,\n        ...this.defaultOptions\n      });\n      fontCount++;\n      if (fontCount > 50) {\n        warn(\"BitmapText\", `You have dynamically created ${fontCount} bitmap fonts, this can be inefficient. Try pre installing your font styles using \\`BitmapFont.install({name:\"style1\", style})\\``);\n      }\n      fnt.once(\"destroy\", () => {\n        fontCount--;\n        Cache.remove(fontFamilyKey);\n      });\n      Cache.set(\n        fontFamilyKey,\n        fnt\n      );\n    }\n    const dynamicFont = Cache.get(fontFamilyKey);\n    dynamicFont.ensureCharacters?.(text);\n    return dynamicFont;\n  }\n  /**\n   * Get the layout of a text for the specified style.\n   * @param text - The text to get the layout for\n   * @param style - The style to use\n   */\n  getLayout(text, style) {\n    const bitmapFont = this.getFont(text, style);\n    return getBitmapTextLayout([...text], style, bitmapFont);\n  }\n  /**\n   * Measure the text using the specified style.\n   * @param text - The text to measure\n   * @param style - The style to use\n   */\n  measureText(text, style) {\n    return this.getLayout(text, style);\n  }\n  // eslint-disable-next-line max-len\n  install(...args) {\n    let options = args[0];\n    if (typeof options === \"string\") {\n      options = {\n        name: options,\n        style: args[1],\n        chars: args[2]?.chars,\n        resolution: args[2]?.resolution,\n        padding: args[2]?.padding,\n        skipKerning: args[2]?.skipKerning\n      };\n      deprecation(v8_0_0, \"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})\");\n    }\n    const name = options?.name;\n    if (!name) {\n      throw new Error(\"[BitmapFontManager] Property `name` is required.\");\n    }\n    options = { ...this.defaultOptions, ...options };\n    const textStyle = options.style;\n    const style = textStyle instanceof TextStyle ? textStyle : new TextStyle(textStyle);\n    const overrideFill = style._fill.fill !== null && style._fill.fill !== void 0;\n    const font = new DynamicBitmapFont({\n      style,\n      overrideFill,\n      skipKerning: options.skipKerning,\n      padding: options.padding,\n      resolution: options.resolution,\n      overrideSize: false\n    });\n    const flatChars = resolveCharacters(options.chars);\n    font.ensureCharacters(flatChars.join(\"\"));\n    Cache.set(`${name}-bitmap`, font);\n    font.once(\"destroy\", () => Cache.remove(`${name}-bitmap`));\n    return font;\n  }\n  /**\n   * Uninstalls a bitmap font from the cache.\n   * @param {string} name - The name of the bitmap font to uninstall.\n   */\n  uninstall(name) {\n    const cacheKey = `${name}-bitmap`;\n    const font = Cache.get(cacheKey);\n    if (font) {\n      Cache.remove(cacheKey);\n      font.destroy();\n    }\n  }\n}\nconst BitmapFontManager = new BitmapFontManagerClass();\n\nexport { BitmapFontManager };\n//# sourceMappingURL=BitmapFontManager.mjs.map\n","\"use strict\";\nfunction getBitmapTextLayout(chars, style, font) {\n  const layoutData = {\n    width: 0,\n    height: 0,\n    offsetY: 0,\n    scale: style.fontSize / font.baseMeasurementFontSize,\n    lines: [{\n      width: 0,\n      charPositions: [],\n      spaceWidth: 0,\n      spacesIndex: [],\n      chars: []\n    }]\n  };\n  layoutData.offsetY = font.baseLineOffset;\n  let currentLine = layoutData.lines[0];\n  let previousChar = null;\n  let firstWord = true;\n  const currentWord = {\n    spaceWord: false,\n    width: 0,\n    start: 0,\n    index: 0,\n    // use index to not modify the array as we use it a lot!\n    positions: [],\n    chars: []\n  };\n  const nextWord = (word) => {\n    const start = currentLine.width;\n    for (let j = 0; j < currentWord.index; j++) {\n      const position = word.positions[j];\n      currentLine.chars.push(word.chars[j]);\n      currentLine.charPositions.push(position + start);\n    }\n    currentLine.width += word.width;\n    firstWord = false;\n    currentWord.width = 0;\n    currentWord.index = 0;\n    currentWord.chars.length = 0;\n  };\n  const nextLine = () => {\n    let index = currentLine.chars.length - 1;\n    let lastChar = currentLine.chars[index];\n    while (lastChar === \" \") {\n      currentLine.width -= font.chars[lastChar].xAdvance;\n      lastChar = currentLine.chars[--index];\n    }\n    layoutData.width = Math.max(layoutData.width, currentLine.width);\n    currentLine = {\n      width: 0,\n      charPositions: [],\n      chars: [],\n      spaceWidth: 0,\n      spacesIndex: []\n    };\n    firstWord = true;\n    layoutData.lines.push(currentLine);\n    layoutData.height += font.lineHeight;\n  };\n  const scale = font.baseMeasurementFontSize / style.fontSize;\n  const adjustedLetterSpacing = style.letterSpacing * scale;\n  const adjustedWordWrapWidth = style.wordWrapWidth * scale;\n  for (let i = 0; i < chars.length + 1; i++) {\n    let char;\n    const isEnd = i === chars.length;\n    if (!isEnd) {\n      char = chars[i];\n    }\n    const charData = font.chars[char] || font.chars[\" \"];\n    const isSpace = /(?:\\s)/.test(char);\n    const isWordBreak = isSpace || char === \"\\r\" || char === \"\\n\" || isEnd;\n    if (isWordBreak) {\n      const addWordToNextLine = !firstWord && style.wordWrap && currentLine.width + currentWord.width - adjustedLetterSpacing > adjustedWordWrapWidth;\n      if (addWordToNextLine) {\n        nextLine();\n        nextWord(currentWord);\n        if (!isEnd) {\n          currentLine.charPositions.push(0);\n        }\n      } else {\n        currentWord.start = currentLine.width;\n        nextWord(currentWord);\n        if (!isEnd) {\n          currentLine.charPositions.push(0);\n        }\n      }\n      if (char === \"\\r\" || char === \"\\n\") {\n        if (currentLine.width !== 0) {\n          nextLine();\n        }\n      } else if (!isEnd) {\n        const spaceWidth = charData.xAdvance + (charData.kerning[previousChar] || 0) + adjustedLetterSpacing;\n        currentLine.width += spaceWidth;\n        currentLine.spaceWidth = spaceWidth;\n        currentLine.spacesIndex.push(currentLine.charPositions.length);\n        currentLine.chars.push(char);\n      }\n    } else {\n      const kerning = charData.kerning[previousChar] || 0;\n      const nextCharWidth = charData.xAdvance + kerning + adjustedLetterSpacing;\n      currentWord.positions[currentWord.index++] = currentWord.width + kerning;\n      currentWord.chars.push(char);\n      currentWord.width += nextCharWidth;\n    }\n    previousChar = char;\n  }\n  nextLine();\n  if (style.align === \"center\") {\n    alignCenter(layoutData);\n  } else if (style.align === \"right\") {\n    alignRight(layoutData);\n  } else if (style.align === \"justify\") {\n    alignJustify(layoutData);\n  }\n  return layoutData;\n}\nfunction alignCenter(measurementData) {\n  for (let i = 0; i < measurementData.lines.length; i++) {\n    const line = measurementData.lines[i];\n    const offset = measurementData.width / 2 - line.width / 2;\n    for (let j = 0; j < line.charPositions.length; j++) {\n      line.charPositions[j] += offset;\n    }\n  }\n}\nfunction alignRight(measurementData) {\n  for (let i = 0; i < measurementData.lines.length; i++) {\n    const line = measurementData.lines[i];\n    const offset = measurementData.width - line.width;\n    for (let j = 0; j < line.charPositions.length; j++) {\n      line.charPositions[j] += offset;\n    }\n  }\n}\nfunction alignJustify(measurementData) {\n  const width = measurementData.width;\n  for (let i = 0; i < measurementData.lines.length; i++) {\n    const line = measurementData.lines[i];\n    let indy = 0;\n    let spaceIndex = line.spacesIndex[indy++];\n    let offset = 0;\n    const totalSpaces = line.spacesIndex.length;\n    const newSpaceWidth = (width - line.width) / totalSpaces;\n    const spaceWidth = newSpaceWidth;\n    for (let j = 0; j < line.charPositions.length; j++) {\n      if (j === spaceIndex) {\n        spaceIndex = line.spacesIndex[indy++];\n        offset += spaceWidth;\n      }\n      line.charPositions[j] += offset;\n    }\n  }\n}\n\nexport { getBitmapTextLayout };\n//# sourceMappingURL=getBitmapTextLayout.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { Color } from '../../color/Color.mjs';\nimport { deprecation, v8_0_0 } from '../../utils/logging/deprecation.mjs';\nimport { FillGradient } from '../graphics/shared/fill/FillGradient.mjs';\nimport { FillPattern } from '../graphics/shared/fill/FillPattern.mjs';\nimport { GraphicsContext } from '../graphics/shared/GraphicsContext.mjs';\nimport { toFillStyle, toStrokeStyle } from '../graphics/shared/utils/convertFillInputToFillStyle.mjs';\nimport { generateTextStyleKey } from './utils/generateTextStyleKey.mjs';\n\n\"use strict\";\nconst _TextStyle = class _TextStyle extends EventEmitter {\n  constructor(style = {}) {\n    super();\n    convertV7Tov8Style(style);\n    const fullStyle = { ..._TextStyle.defaultTextStyle, ...style };\n    for (const key in fullStyle) {\n      const thisKey = key;\n      this[thisKey] = fullStyle[key];\n    }\n    this.update();\n  }\n  /**\n   * Alignment for multiline text, does not affect single line text.\n   * @member {'left'|'center'|'right'|'justify'}\n   */\n  get align() {\n    return this._align;\n  }\n  set align(value) {\n    this._align = value;\n    this.update();\n  }\n  /** Indicates if lines can be wrapped within words, it needs wordWrap to be set to true. */\n  get breakWords() {\n    return this._breakWords;\n  }\n  set breakWords(value) {\n    this._breakWords = value;\n    this.update();\n  }\n  /** Set a drop shadow for the text. */\n  get dropShadow() {\n    return this._dropShadow;\n  }\n  set dropShadow(value) {\n    if (value !== null && typeof value === \"object\") {\n      this._dropShadow = this._createProxy({ ..._TextStyle.defaultDropShadow, ...value });\n    } else {\n      this._dropShadow = value ? this._createProxy({ ..._TextStyle.defaultDropShadow }) : null;\n    }\n    this.update();\n  }\n  /** The font family, can be a single font name, or a list of names where the first is the preferred font. */\n  get fontFamily() {\n    return this._fontFamily;\n  }\n  set fontFamily(value) {\n    this._fontFamily = value;\n    this.update();\n  }\n  /** The font size (as a number it converts to px, but as a string, equivalents are '26px','20pt','160%' or '1.6em') */\n  get fontSize() {\n    return this._fontSize;\n  }\n  set fontSize(value) {\n    if (typeof value === \"string\") {\n      this._fontSize = parseInt(value, 10);\n    } else {\n      this._fontSize = value;\n    }\n    this.update();\n  }\n  /**\n   * The font style.\n   * @member {'normal'|'italic'|'oblique'}\n   */\n  get fontStyle() {\n    return this._fontStyle;\n  }\n  set fontStyle(value) {\n    this._fontStyle = value;\n    this.update();\n  }\n  /**\n   * The font variant.\n   * @member {'normal'|'small-caps'}\n   */\n  get fontVariant() {\n    return this._fontVariant;\n  }\n  set fontVariant(value) {\n    this._fontVariant = value;\n    this.update();\n  }\n  /**\n   * The font weight.\n   * @member {'normal'|'bold'|'bolder'|'lighter'|'100'|'200'|'300'|'400'|'500'|'600'|'700'|'800'|'900'}\n   */\n  get fontWeight() {\n    return this._fontWeight;\n  }\n  set fontWeight(value) {\n    this._fontWeight = value;\n    this.update();\n  }\n  /** The space between lines. */\n  get leading() {\n    return this._leading;\n  }\n  set leading(value) {\n    this._leading = value;\n    this.update();\n  }\n  /** The amount of spacing between letters, default is 0. */\n  get letterSpacing() {\n    return this._letterSpacing;\n  }\n  set letterSpacing(value) {\n    this._letterSpacing = value;\n    this.update();\n  }\n  /** The line height, a number that represents the vertical space that a letter uses. */\n  get lineHeight() {\n    return this._lineHeight;\n  }\n  set lineHeight(value) {\n    this._lineHeight = value;\n    this.update();\n  }\n  /**\n   * Occasionally some fonts are cropped. Adding some padding will prevent this from happening\n   * by adding padding to all sides of the text.\n   */\n  get padding() {\n    return this._padding;\n  }\n  set padding(value) {\n    this._padding = value;\n    this.update();\n  }\n  /** Trim transparent borders. This is an expensive operation so only use this if you have to! */\n  get trim() {\n    return this._trim;\n  }\n  set trim(value) {\n    this._trim = value;\n    this.update();\n  }\n  /**\n   * The baseline of the text that is rendered.\n   * @member {'alphabetic'|'top'|'hanging'|'middle'|'ideographic'|'bottom'}\n   */\n  get textBaseline() {\n    return this._textBaseline;\n  }\n  set textBaseline(value) {\n    this._textBaseline = value;\n    this.update();\n  }\n  /**\n   * How newlines and spaces should be handled.\n   * Default is 'pre' (preserve, preserve).\n   *\n   *  value       | New lines     |   Spaces\n   *  ---         | ---           |   ---\n   * 'normal'     | Collapse      |   Collapse\n   * 'pre'        | Preserve      |   Preserve\n   * 'pre-line'   | Preserve      |   Collapse\n   * @member {'normal'|'pre'|'pre-line'}\n   */\n  get whiteSpace() {\n    return this._whiteSpace;\n  }\n  set whiteSpace(value) {\n    this._whiteSpace = value;\n    this.update();\n  }\n  /** Indicates if word wrap should be used. */\n  get wordWrap() {\n    return this._wordWrap;\n  }\n  set wordWrap(value) {\n    this._wordWrap = value;\n    this.update();\n  }\n  /** The width at which text will wrap, it needs wordWrap to be set to true. */\n  get wordWrapWidth() {\n    return this._wordWrapWidth;\n  }\n  set wordWrapWidth(value) {\n    this._wordWrapWidth = value;\n    this.update();\n  }\n  /** A fillstyle that will be used on the text e.g., 'red', '#00FF00'. */\n  get fill() {\n    return this._originalFill;\n  }\n  set fill(value) {\n    if (value === this._originalFill)\n      return;\n    this._originalFill = value;\n    if (this._isFillStyle(value)) {\n      this._originalFill = this._createProxy({ ...GraphicsContext.defaultFillStyle, ...value }, () => {\n        this._fill = toFillStyle(\n          { ...this._originalFill },\n          GraphicsContext.defaultFillStyle\n        );\n      });\n    }\n    this._fill = toFillStyle(\n      value === 0 ? \"black\" : value,\n      GraphicsContext.defaultFillStyle\n    );\n    this.update();\n  }\n  /** A fillstyle that will be used on the text stroke, e.g., 'blue', '#FCFF00'. */\n  get stroke() {\n    return this._originalStroke;\n  }\n  set stroke(value) {\n    if (value === this._originalStroke)\n      return;\n    this._originalStroke = value;\n    if (this._isFillStyle(value)) {\n      this._originalStroke = this._createProxy({ ...GraphicsContext.defaultStrokeStyle, ...value }, () => {\n        this._stroke = toStrokeStyle(\n          { ...this._originalStroke },\n          GraphicsContext.defaultStrokeStyle\n        );\n      });\n    }\n    this._stroke = toStrokeStyle(value, GraphicsContext.defaultStrokeStyle);\n    this.update();\n  }\n  _generateKey() {\n    this._styleKey = generateTextStyleKey(this);\n    return this._styleKey;\n  }\n  update() {\n    this._styleKey = null;\n    this.emit(\"update\", this);\n  }\n  /** Resets all properties to the default values */\n  reset() {\n    const defaultStyle = _TextStyle.defaultTextStyle;\n    for (const key in defaultStyle) {\n      this[key] = defaultStyle[key];\n    }\n  }\n  get styleKey() {\n    return this._styleKey || this._generateKey();\n  }\n  /**\n   * Creates a new TextStyle object with the same values as this one.\n   * @returns New cloned TextStyle object\n   */\n  clone() {\n    return new _TextStyle({\n      align: this.align,\n      breakWords: this.breakWords,\n      dropShadow: this._dropShadow ? { ...this._dropShadow } : null,\n      fill: this._fill,\n      fontFamily: this.fontFamily,\n      fontSize: this.fontSize,\n      fontStyle: this.fontStyle,\n      fontVariant: this.fontVariant,\n      fontWeight: this.fontWeight,\n      leading: this.leading,\n      letterSpacing: this.letterSpacing,\n      lineHeight: this.lineHeight,\n      padding: this.padding,\n      stroke: this._stroke,\n      textBaseline: this.textBaseline,\n      whiteSpace: this.whiteSpace,\n      wordWrap: this.wordWrap,\n      wordWrapWidth: this.wordWrapWidth\n    });\n  }\n  /**\n   * Destroys this text style.\n   * @param options - Options parameter. A boolean will act as if all options\n   *  have been set to that value\n   * @param {boolean} [options.texture=false] - Should it destroy the texture of the this style\n   * @param {boolean} [options.textureSource=false] - Should it destroy the textureSource of the this style\n   */\n  destroy(options = false) {\n    this.removeAllListeners();\n    const destroyTexture = typeof options === \"boolean\" ? options : options?.texture;\n    if (destroyTexture) {\n      const destroyTextureSource = typeof options === \"boolean\" ? options : options?.textureSource;\n      if (this._fill?.texture) {\n        this._fill.texture.destroy(destroyTextureSource);\n      }\n      if (this._originalFill?.texture) {\n        this._originalFill.texture.destroy(destroyTextureSource);\n      }\n      if (this._stroke?.texture) {\n        this._stroke.texture.destroy(destroyTextureSource);\n      }\n      if (this._originalStroke?.texture) {\n        this._originalStroke.texture.destroy(destroyTextureSource);\n      }\n    }\n    this._fill = null;\n    this._stroke = null;\n    this.dropShadow = null;\n    this._originalStroke = null;\n    this._originalFill = null;\n  }\n  _createProxy(value, cb) {\n    return new Proxy(value, {\n      set: (target, property, newValue) => {\n        target[property] = newValue;\n        cb?.(property, newValue);\n        this.update();\n        return true;\n      }\n    });\n  }\n  _isFillStyle(value) {\n    return (value ?? null) !== null && !(Color.isColorLike(value) || value instanceof FillGradient || value instanceof FillPattern);\n  }\n};\n/** The default drop shadow settings */\n_TextStyle.defaultDropShadow = {\n  /** Set alpha for the drop shadow */\n  alpha: 1,\n  /** Set a angle of the drop shadow */\n  angle: Math.PI / 6,\n  /** Set a shadow blur radius */\n  blur: 0,\n  /** A fill style to be used on the  e.g., 'red', '#00FF00' */\n  color: \"black\",\n  /** Set a distance of the drop shadow */\n  distance: 5\n};\n/** The default text style settings */\n_TextStyle.defaultTextStyle = {\n  /**\n   * See {@link TextStyle.align}\n   * @type {'left'|'center'|'right'|'justify'}\n   */\n  align: \"left\",\n  /** See {@link TextStyle.breakWords} */\n  breakWords: false,\n  /** See {@link TextStyle.dropShadow} */\n  dropShadow: null,\n  /**\n   * See {@link TextStyle.fill}\n   * @type {string|string[]|number|number[]|CanvasGradient|CanvasPattern}\n   */\n  fill: \"black\",\n  /**\n   * See {@link TextStyle.fontFamily}\n   * @type {string|string[]}\n   */\n  fontFamily: \"Arial\",\n  /**\n   * See {@link TextStyle.fontSize}\n   * @type {number|string}\n   */\n  fontSize: 26,\n  /**\n   * See {@link TextStyle.fontStyle}\n   * @type {'normal'|'italic'|'oblique'}\n   */\n  fontStyle: \"normal\",\n  /**\n   * See {@link TextStyle.fontVariant}\n   * @type {'normal'|'small-caps'}\n   */\n  fontVariant: \"normal\",\n  /**\n   * See {@link TextStyle.fontWeight}\n   * @type {'normal'|'bold'|'bolder'|'lighter'|'100'|'200'|'300'|'400'|'500'|'600'|'700'|'800'|'900'}\n   */\n  fontWeight: \"normal\",\n  /** See {@link TextStyle.leading} */\n  leading: 0,\n  /** See {@link TextStyle.letterSpacing} */\n  letterSpacing: 0,\n  /** See {@link TextStyle.lineHeight} */\n  lineHeight: 0,\n  /** See {@link TextStyle.padding} */\n  padding: 0,\n  /**\n   * See {@link TextStyle.stroke}\n   * @type {string|number}\n   */\n  stroke: null,\n  /**\n   * See {@link TextStyle.textBaseline}\n   * @type {'alphabetic'|'top'|'hanging'|'middle'|'ideographic'|'bottom'}\n   */\n  textBaseline: \"alphabetic\",\n  /** See {@link TextStyle.trim} */\n  trim: false,\n  /**\n   * See {@link TextStyle.whiteSpace}\n   * @type {'normal'|'pre'|'pre-line'}\n   */\n  whiteSpace: \"pre\",\n  /** See {@link TextStyle.wordWrap} */\n  wordWrap: false,\n  /** See {@link TextStyle.wordWrapWidth} */\n  wordWrapWidth: 100\n};\nlet TextStyle = _TextStyle;\nfunction convertV7Tov8Style(style) {\n  const oldStyle = style;\n  if (typeof oldStyle.dropShadow === \"boolean\" && oldStyle.dropShadow) {\n    const defaults = TextStyle.defaultDropShadow;\n    style.dropShadow = {\n      alpha: oldStyle.dropShadowAlpha ?? defaults.alpha,\n      angle: oldStyle.dropShadowAngle ?? defaults.angle,\n      blur: oldStyle.dropShadowBlur ?? defaults.blur,\n      color: oldStyle.dropShadowColor ?? defaults.color,\n      distance: oldStyle.dropShadowDistance ?? defaults.distance\n    };\n  }\n  if (oldStyle.strokeThickness !== void 0) {\n    deprecation(v8_0_0, \"strokeThickness is now a part of stroke\");\n    const color = oldStyle.stroke;\n    let obj = {};\n    if (Color.isColorLike(color)) {\n      obj.color = color;\n    } else if (color instanceof FillGradient || color instanceof FillPattern) {\n      obj.fill = color;\n    } else if (Object.hasOwnProperty.call(color, \"color\") || Object.hasOwnProperty.call(color, \"fill\")) {\n      obj = color;\n    } else {\n      throw new Error(\"Invalid stroke value.\");\n    }\n    style.stroke = {\n      ...obj,\n      width: oldStyle.strokeThickness\n    };\n  }\n  if (Array.isArray(oldStyle.fillGradientStops)) {\n    deprecation(v8_0_0, \"gradient fill is now a fill pattern: `new FillGradient(...)`\");\n    let fontSize;\n    if (style.fontSize == null) {\n      style.fontSize = TextStyle.defaultTextStyle.fontSize;\n    } else if (typeof style.fontSize === \"string\") {\n      fontSize = parseInt(style.fontSize, 10);\n    } else {\n      fontSize = style.fontSize;\n    }\n    const gradientFill = new FillGradient(0, 0, 0, fontSize * 1.7);\n    const fills = oldStyle.fillGradientStops.map((color) => Color.shared.setValue(color).toNumber());\n    fills.forEach((number, index) => {\n      const ratio = index / (fills.length - 1);\n      gradientFill.addColorStop(ratio, number);\n    });\n    style.fill = {\n      fill: gradientFill\n    };\n  }\n}\n\nexport { TextStyle };\n//# sourceMappingURL=TextStyle.mjs.map\n","import { DOMAdapter } from '../../../environment/adapter.mjs';\nimport { fontStringFromTextStyle } from './utils/fontStringFromTextStyle.mjs';\n\n\"use strict\";\nconst contextSettings = {\n  // TextMetrics requires getImageData readback for measuring fonts.\n  willReadFrequently: true\n};\nconst _CanvasTextMetrics = class _CanvasTextMetrics {\n  /**\n   * Checking that we can use modern canvas 2D API.\n   *\n   * Note: This is an unstable API, Chrome < 94 use `textLetterSpacing`, later versions use `letterSpacing`.\n   * @see TextMetrics.experimentalLetterSpacing\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/ICanvasRenderingContext2D/letterSpacing\n   * @see https://developer.chrome.com/origintrials/#/view_trial/3585991203293757441\n   */\n  static get experimentalLetterSpacingSupported() {\n    let result = _CanvasTextMetrics._experimentalLetterSpacingSupported;\n    if (result !== void 0) {\n      const proto = DOMAdapter.get().getCanvasRenderingContext2D().prototype;\n      result = _CanvasTextMetrics._experimentalLetterSpacingSupported = \"letterSpacing\" in proto || \"textLetterSpacing\" in proto;\n    }\n    return result;\n  }\n  /**\n   * @param text - the text that was measured\n   * @param style - the style that was measured\n   * @param width - the measured width of the text\n   * @param height - the measured height of the text\n   * @param lines - an array of the lines of text broken by new lines and wrapping if specified in style\n   * @param lineWidths - an array of the line widths for each line matched to `lines`\n   * @param lineHeight - the measured line height for this style\n   * @param maxLineWidth - the maximum line width for all measured lines\n   * @param {FontMetrics} fontProperties - the font properties object from TextMetrics.measureFont\n   */\n  constructor(text, style, width, height, lines, lineWidths, lineHeight, maxLineWidth, fontProperties) {\n    this.text = text;\n    this.style = style;\n    this.width = width;\n    this.height = height;\n    this.lines = lines;\n    this.lineWidths = lineWidths;\n    this.lineHeight = lineHeight;\n    this.maxLineWidth = maxLineWidth;\n    this.fontProperties = fontProperties;\n  }\n  /**\n   * Measures the supplied string of text and returns a Rectangle.\n   * @param text - The text to measure.\n   * @param style - The text style to use for measuring\n   * @param canvas - optional specification of the canvas to use for measuring.\n   * @param wordWrap\n   * @returns Measured width and height of the text.\n   */\n  static measureText(text = \" \", style, canvas = _CanvasTextMetrics._canvas, wordWrap = style.wordWrap) {\n    const textKey = `${text}:${style.styleKey}`;\n    if (_CanvasTextMetrics._measurementCache[textKey])\n      return _CanvasTextMetrics._measurementCache[textKey];\n    const font = fontStringFromTextStyle(style);\n    const fontProperties = _CanvasTextMetrics.measureFont(font);\n    if (fontProperties.fontSize === 0) {\n      fontProperties.fontSize = style.fontSize;\n      fontProperties.ascent = style.fontSize;\n    }\n    const context = _CanvasTextMetrics.__context;\n    context.font = font;\n    const outputText = wordWrap ? _CanvasTextMetrics._wordWrap(text, style, canvas) : text;\n    const lines = outputText.split(/(?:\\r\\n|\\r|\\n)/);\n    const lineWidths = new Array(lines.length);\n    let maxLineWidth = 0;\n    for (let i = 0; i < lines.length; i++) {\n      const lineWidth = _CanvasTextMetrics._measureText(lines[i], style.letterSpacing, context);\n      lineWidths[i] = lineWidth;\n      maxLineWidth = Math.max(maxLineWidth, lineWidth);\n    }\n    const strokeWidth = style._stroke?.width || 0;\n    let width = maxLineWidth + strokeWidth;\n    if (style.dropShadow) {\n      width += style.dropShadow.distance;\n    }\n    const lineHeight = style.lineHeight || fontProperties.fontSize;\n    let height = Math.max(lineHeight, fontProperties.fontSize + strokeWidth) + (lines.length - 1) * (lineHeight + style.leading);\n    if (style.dropShadow) {\n      height += style.dropShadow.distance;\n    }\n    const measurements = new _CanvasTextMetrics(\n      text,\n      style,\n      width,\n      height,\n      lines,\n      lineWidths,\n      lineHeight + style.leading,\n      maxLineWidth,\n      fontProperties\n    );\n    return measurements;\n  }\n  static _measureText(text, letterSpacing, context) {\n    let useExperimentalLetterSpacing = false;\n    if (_CanvasTextMetrics.experimentalLetterSpacingSupported) {\n      if (_CanvasTextMetrics.experimentalLetterSpacing) {\n        context.letterSpacing = `${letterSpacing}px`;\n        context.textLetterSpacing = `${letterSpacing}px`;\n        useExperimentalLetterSpacing = true;\n      } else {\n        context.letterSpacing = \"0px\";\n        context.textLetterSpacing = \"0px\";\n      }\n    }\n    let width = context.measureText(text).width;\n    if (width > 0) {\n      if (useExperimentalLetterSpacing) {\n        width -= letterSpacing;\n      } else {\n        width += (_CanvasTextMetrics.graphemeSegmenter(text).length - 1) * letterSpacing;\n      }\n    }\n    return width;\n  }\n  /**\n   * Applies newlines to a string to have it optimally fit into the horizontal\n   * bounds set by the Text object's wordWrapWidth property.\n   * @param text - String to apply word wrapping to\n   * @param style - the style to use when wrapping\n   * @param canvas - optional specification of the canvas to use for measuring.\n   * @returns New string with new lines applied where required\n   */\n  static _wordWrap(text, style, canvas = _CanvasTextMetrics._canvas) {\n    const context = canvas.getContext(\"2d\", contextSettings);\n    let width = 0;\n    let line = \"\";\n    let lines = \"\";\n    const cache = /* @__PURE__ */ Object.create(null);\n    const { letterSpacing, whiteSpace } = style;\n    const collapseSpaces = _CanvasTextMetrics._collapseSpaces(whiteSpace);\n    const collapseNewlines = _CanvasTextMetrics._collapseNewlines(whiteSpace);\n    let canPrependSpaces = !collapseSpaces;\n    const wordWrapWidth = style.wordWrapWidth + letterSpacing;\n    const tokens = _CanvasTextMetrics._tokenize(text);\n    for (let i = 0; i < tokens.length; i++) {\n      let token = tokens[i];\n      if (_CanvasTextMetrics._isNewline(token)) {\n        if (!collapseNewlines) {\n          lines += _CanvasTextMetrics._addLine(line);\n          canPrependSpaces = !collapseSpaces;\n          line = \"\";\n          width = 0;\n          continue;\n        }\n        token = \" \";\n      }\n      if (collapseSpaces) {\n        const currIsBreakingSpace = _CanvasTextMetrics.isBreakingSpace(token);\n        const lastIsBreakingSpace = _CanvasTextMetrics.isBreakingSpace(line[line.length - 1]);\n        if (currIsBreakingSpace && lastIsBreakingSpace) {\n          continue;\n        }\n      }\n      const tokenWidth = _CanvasTextMetrics._getFromCache(token, letterSpacing, cache, context);\n      if (tokenWidth > wordWrapWidth) {\n        if (line !== \"\") {\n          lines += _CanvasTextMetrics._addLine(line);\n          line = \"\";\n          width = 0;\n        }\n        if (_CanvasTextMetrics.canBreakWords(token, style.breakWords)) {\n          const characters = _CanvasTextMetrics.wordWrapSplit(token);\n          for (let j = 0; j < characters.length; j++) {\n            let char = characters[j];\n            let lastChar = char;\n            let k = 1;\n            while (characters[j + k]) {\n              const nextChar = characters[j + k];\n              if (!_CanvasTextMetrics.canBreakChars(lastChar, nextChar, token, j, style.breakWords)) {\n                char += nextChar;\n              } else {\n                break;\n              }\n              lastChar = nextChar;\n              k++;\n            }\n            j += k - 1;\n            const characterWidth = _CanvasTextMetrics._getFromCache(char, letterSpacing, cache, context);\n            if (characterWidth + width > wordWrapWidth) {\n              lines += _CanvasTextMetrics._addLine(line);\n              canPrependSpaces = false;\n              line = \"\";\n              width = 0;\n            }\n            line += char;\n            width += characterWidth;\n          }\n        } else {\n          if (line.length > 0) {\n            lines += _CanvasTextMetrics._addLine(line);\n            line = \"\";\n            width = 0;\n          }\n          const isLastToken = i === tokens.length - 1;\n          lines += _CanvasTextMetrics._addLine(token, !isLastToken);\n          canPrependSpaces = false;\n          line = \"\";\n          width = 0;\n        }\n      } else {\n        if (tokenWidth + width > wordWrapWidth) {\n          canPrependSpaces = false;\n          lines += _CanvasTextMetrics._addLine(line);\n          line = \"\";\n          width = 0;\n        }\n        if (line.length > 0 || !_CanvasTextMetrics.isBreakingSpace(token) || canPrependSpaces) {\n          line += token;\n          width += tokenWidth;\n        }\n      }\n    }\n    lines += _CanvasTextMetrics._addLine(line, false);\n    return lines;\n  }\n  /**\n   * Convenience function for logging each line added during the wordWrap method.\n   * @param line    - The line of text to add\n   * @param newLine - Add new line character to end\n   * @returns A formatted line\n   */\n  static _addLine(line, newLine = true) {\n    line = _CanvasTextMetrics._trimRight(line);\n    line = newLine ? `${line}\n` : line;\n    return line;\n  }\n  /**\n   * Gets & sets the widths of calculated characters in a cache object\n   * @param key            - The key\n   * @param letterSpacing  - The letter spacing\n   * @param cache          - The cache\n   * @param context        - The canvas context\n   * @returns The from cache.\n   */\n  static _getFromCache(key, letterSpacing, cache, context) {\n    let width = cache[key];\n    if (typeof width !== \"number\") {\n      width = _CanvasTextMetrics._measureText(key, letterSpacing, context) + letterSpacing;\n      cache[key] = width;\n    }\n    return width;\n  }\n  /**\n   * Determines whether we should collapse breaking spaces.\n   * @param whiteSpace - The TextStyle property whiteSpace\n   * @returns Should collapse\n   */\n  static _collapseSpaces(whiteSpace) {\n    return whiteSpace === \"normal\" || whiteSpace === \"pre-line\";\n  }\n  /**\n   * Determines whether we should collapse newLine chars.\n   * @param whiteSpace - The white space\n   * @returns should collapse\n   */\n  static _collapseNewlines(whiteSpace) {\n    return whiteSpace === \"normal\";\n  }\n  /**\n   * Trims breaking whitespaces from string.\n   * @param text - The text\n   * @returns Trimmed string\n   */\n  static _trimRight(text) {\n    if (typeof text !== \"string\") {\n      return \"\";\n    }\n    for (let i = text.length - 1; i >= 0; i--) {\n      const char = text[i];\n      if (!_CanvasTextMetrics.isBreakingSpace(char)) {\n        break;\n      }\n      text = text.slice(0, -1);\n    }\n    return text;\n  }\n  /**\n   * Determines if char is a newline.\n   * @param char - The character\n   * @returns True if newline, False otherwise.\n   */\n  static _isNewline(char) {\n    if (typeof char !== \"string\") {\n      return false;\n    }\n    return _CanvasTextMetrics._newlines.includes(char.charCodeAt(0));\n  }\n  /**\n   * Determines if char is a breaking whitespace.\n   *\n   * It allows one to determine whether char should be a breaking whitespace\n   * For example certain characters in CJK langs or numbers.\n   * It must return a boolean.\n   * @param char - The character\n   * @param [_nextChar] - The next character\n   * @returns True if whitespace, False otherwise.\n   */\n  static isBreakingSpace(char, _nextChar) {\n    if (typeof char !== \"string\") {\n      return false;\n    }\n    return _CanvasTextMetrics._breakingSpaces.includes(char.charCodeAt(0));\n  }\n  /**\n   * Splits a string into words, breaking-spaces and newLine characters\n   * @param text - The text\n   * @returns A tokenized array\n   */\n  static _tokenize(text) {\n    const tokens = [];\n    let token = \"\";\n    if (typeof text !== \"string\") {\n      return tokens;\n    }\n    for (let i = 0; i < text.length; i++) {\n      const char = text[i];\n      const nextChar = text[i + 1];\n      if (_CanvasTextMetrics.isBreakingSpace(char, nextChar) || _CanvasTextMetrics._isNewline(char)) {\n        if (token !== \"\") {\n          tokens.push(token);\n          token = \"\";\n        }\n        tokens.push(char);\n        continue;\n      }\n      token += char;\n    }\n    if (token !== \"\") {\n      tokens.push(token);\n    }\n    return tokens;\n  }\n  /**\n   * Overridable helper method used internally by TextMetrics, exposed to allow customizing the class's behavior.\n   *\n   * It allows one to customise which words should break\n   * Examples are if the token is CJK or numbers.\n   * It must return a boolean.\n   * @param _token - The token\n   * @param breakWords - The style attr break words\n   * @returns Whether to break word or not\n   */\n  static canBreakWords(_token, breakWords) {\n    return breakWords;\n  }\n  /**\n   * Overridable helper method used internally by TextMetrics, exposed to allow customizing the class's behavior.\n   *\n   * It allows one to determine whether a pair of characters\n   * should be broken by newlines\n   * For example certain characters in CJK langs or numbers.\n   * It must return a boolean.\n   * @param _char - The character\n   * @param _nextChar - The next character\n   * @param _token - The token/word the characters are from\n   * @param _index - The index in the token of the char\n   * @param _breakWords - The style attr break words\n   * @returns whether to break word or not\n   */\n  static canBreakChars(_char, _nextChar, _token, _index, _breakWords) {\n    return true;\n  }\n  /**\n   * Overridable helper method used internally by TextMetrics, exposed to allow customizing the class's behavior.\n   *\n   * It is called when a token (usually a word) has to be split into separate pieces\n   * in order to determine the point to break a word.\n   * It must return an array of characters.\n   * @param token - The token to split\n   * @returns The characters of the token\n   * @see CanvasTextMetrics.graphemeSegmenter\n   */\n  static wordWrapSplit(token) {\n    return _CanvasTextMetrics.graphemeSegmenter(token);\n  }\n  /**\n   * Calculates the ascent, descent and fontSize of a given font-style\n   * @param font - String representing the style of the font\n   * @returns Font properties object\n   */\n  static measureFont(font) {\n    if (_CanvasTextMetrics._fonts[font]) {\n      return _CanvasTextMetrics._fonts[font];\n    }\n    const context = _CanvasTextMetrics._context;\n    context.font = font;\n    const metrics = context.measureText(_CanvasTextMetrics.METRICS_STRING + _CanvasTextMetrics.BASELINE_SYMBOL);\n    const properties = {\n      ascent: metrics.actualBoundingBoxAscent,\n      descent: metrics.actualBoundingBoxDescent,\n      fontSize: metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent\n    };\n    _CanvasTextMetrics._fonts[font] = properties;\n    return properties;\n  }\n  /**\n   * Clear font metrics in metrics cache.\n   * @param {string} [font] - font name. If font name not set then clear cache for all fonts.\n   */\n  static clearMetrics(font = \"\") {\n    if (font) {\n      delete _CanvasTextMetrics._fonts[font];\n    } else {\n      _CanvasTextMetrics._fonts = {};\n    }\n  }\n  /**\n   * Cached canvas element for measuring text\n   * TODO: this should be private, but isn't because of backward compat, will fix later.\n   * @ignore\n   */\n  static get _canvas() {\n    if (!_CanvasTextMetrics.__canvas) {\n      let canvas;\n      try {\n        const c = new OffscreenCanvas(0, 0);\n        const context = c.getContext(\"2d\", contextSettings);\n        if (context?.measureText) {\n          _CanvasTextMetrics.__canvas = c;\n          return c;\n        }\n        canvas = DOMAdapter.get().createCanvas();\n      } catch (ex) {\n        canvas = DOMAdapter.get().createCanvas();\n      }\n      canvas.width = canvas.height = 10;\n      _CanvasTextMetrics.__canvas = canvas;\n    }\n    return _CanvasTextMetrics.__canvas;\n  }\n  /**\n   * TODO: this should be private, but isn't because of backward compat, will fix later.\n   * @ignore\n   */\n  static get _context() {\n    if (!_CanvasTextMetrics.__context) {\n      _CanvasTextMetrics.__context = _CanvasTextMetrics._canvas.getContext(\"2d\", contextSettings);\n    }\n    return _CanvasTextMetrics.__context;\n  }\n};\n/**\n * String used for calculate font metrics.\n * These characters are all tall to help calculate the height required for text.\n */\n_CanvasTextMetrics.METRICS_STRING = \"|\\xC9q\\xC5\";\n/** Baseline symbol for calculate font metrics. */\n_CanvasTextMetrics.BASELINE_SYMBOL = \"M\";\n/** Baseline multiplier for calculate font metrics. */\n_CanvasTextMetrics.BASELINE_MULTIPLIER = 1.4;\n/** Height multiplier for setting height of canvas to calculate font metrics. */\n_CanvasTextMetrics.HEIGHT_MULTIPLIER = 2;\n/**\n * A Unicode \"character\", or \"grapheme cluster\", can be composed of multiple Unicode code points,\n * such as letters with diacritical marks (e.g. `'\\u0065\\u0301'`, letter e with acute)\n * or emojis with modifiers (e.g. `'\\uD83E\\uDDD1\\u200D\\uD83D\\uDCBB'`, technologist).\n * The new `Intl.Segmenter` API in ES2022 can split the string into grapheme clusters correctly. If it is not available,\n * PixiJS will fallback to use the iterator of String, which can only spilt the string into code points.\n * If you want to get full functionality in environments that don't support `Intl.Segmenter` (such as Firefox),\n * you can use other libraries such as [grapheme-splitter]{@link https://www.npmjs.com/package/grapheme-splitter}\n * or [graphemer]{@link https://www.npmjs.com/package/graphemer} to create a polyfill. Since these libraries can be\n * relatively large in size to handle various Unicode grapheme clusters properly, PixiJS won't use them directly.\n */\n_CanvasTextMetrics.graphemeSegmenter = (() => {\n  if (typeof Intl?.Segmenter === \"function\") {\n    const segmenter = new Intl.Segmenter();\n    return (s) => [...segmenter.segment(s)].map((x) => x.segment);\n  }\n  return (s) => [...s];\n})();\n/**\n * New rendering behavior for letter-spacing which uses Chrome's new native API. This will\n * lead to more accurate letter-spacing results because it does not try to manually draw\n * each character. However, this Chrome API is experimental and may not serve all cases yet.\n * @see TextMetrics.experimentalLetterSpacingSupported\n */\n_CanvasTextMetrics.experimentalLetterSpacing = false;\n/** Cache of {@see TextMetrics.FontMetrics} objects. */\n_CanvasTextMetrics._fonts = {};\n/** Cache of new line chars. */\n_CanvasTextMetrics._newlines = [\n  10,\n  // line feed\n  13\n  // carriage return\n];\n/** Cache of breaking spaces. */\n_CanvasTextMetrics._breakingSpaces = [\n  9,\n  // character tabulation\n  32,\n  // space\n  8192,\n  // en quad\n  8193,\n  // em quad\n  8194,\n  // en space\n  8195,\n  // em space\n  8196,\n  // three-per-em space\n  8197,\n  // four-per-em space\n  8198,\n  // six-per-em space\n  8200,\n  // punctuation space\n  8201,\n  // thin space\n  8202,\n  // hair space\n  8287,\n  // medium mathematical space\n  12288\n  // ideographic space\n];\n_CanvasTextMetrics._measurementCache = {};\nlet CanvasTextMetrics = _CanvasTextMetrics;\n\nexport { CanvasTextMetrics };\n//# sourceMappingURL=CanvasTextMetrics.mjs.map\n","\"use strict\";\nconst genericFontFamilies = [\n  \"serif\",\n  \"sans-serif\",\n  \"monospace\",\n  \"cursive\",\n  \"fantasy\",\n  \"system-ui\"\n];\nfunction fontStringFromTextStyle(style) {\n  const fontSizeString = typeof style.fontSize === \"number\" ? `${style.fontSize}px` : style.fontSize;\n  let fontFamilies = style.fontFamily;\n  if (!Array.isArray(style.fontFamily)) {\n    fontFamilies = style.fontFamily.split(\",\");\n  }\n  for (let i = fontFamilies.length - 1; i >= 0; i--) {\n    let fontFamily = fontFamilies[i].trim();\n    if (!/([\\\"\\'])[^\\'\\\"]+\\1/.test(fontFamily) && !genericFontFamilies.includes(fontFamily)) {\n      fontFamily = `\"${fontFamily}\"`;\n    }\n    fontFamilies[i] = fontFamily;\n  }\n  return `${style.fontStyle} ${style.fontVariant} ${style.fontWeight} ${fontSizeString} ${fontFamilies.join(\",\")}`;\n}\n\nexport { fontStringFromTextStyle };\n//# sourceMappingURL=fontStringFromTextStyle.mjs.map\n","import { Color } from '../../../../color/Color.mjs';\nimport { Matrix } from '../../../../maths/matrix/Matrix.mjs';\nimport { Texture } from '../../../../rendering/renderers/shared/texture/Texture.mjs';\nimport { warn } from '../../../../utils/logging/warn.mjs';\nimport { FillGradient } from '../../../graphics/shared/fill/FillGradient.mjs';\nimport { FillPattern } from '../../../graphics/shared/fill/FillPattern.mjs';\n\n\"use strict\";\nfunction getCanvasFillStyle(fillStyle, context) {\n  if (fillStyle.texture === Texture.WHITE && !fillStyle.fill) {\n    return Color.shared.setValue(fillStyle.color).toHex();\n  } else if (!fillStyle.fill) {\n    const pattern = context.createPattern(fillStyle.texture.source.resource, \"repeat\");\n    const tempMatrix = fillStyle.matrix.copyTo(Matrix.shared);\n    tempMatrix.scale(fillStyle.texture.frame.width, fillStyle.texture.frame.height);\n    pattern.setTransform(tempMatrix);\n    return pattern;\n  } else if (fillStyle.fill instanceof FillPattern) {\n    const fillPattern = fillStyle.fill;\n    const pattern = context.createPattern(fillPattern.texture.source.resource, \"repeat\");\n    const tempMatrix = fillPattern.transform.copyTo(Matrix.shared);\n    tempMatrix.scale(\n      fillPattern.texture.frame.width,\n      fillPattern.texture.frame.height\n    );\n    pattern.setTransform(tempMatrix);\n    return pattern;\n  } else if (fillStyle.fill instanceof FillGradient) {\n    const fillGradient = fillStyle.fill;\n    if (fillGradient.type === \"linear\") {\n      const gradient = context.createLinearGradient(\n        fillGradient.x0,\n        fillGradient.y0,\n        fillGradient.x1,\n        fillGradient.y1\n      );\n      fillGradient.gradientStops.forEach((stop) => {\n        gradient.addColorStop(stop.offset, Color.shared.setValue(stop.color).toHex());\n      });\n      return gradient;\n    }\n  }\n  warn(\"FillStyle not recognised\", fillStyle);\n  return \"red\";\n}\n\nexport { getCanvasFillStyle };\n//# sourceMappingURL=getCanvasFillStyle.mjs.map\n","import { Color } from '../../../color/Color.mjs';\n\n\"use strict\";\nconst valuesToIterateForKeys = [\n  \"align\",\n  \"breakWords\",\n  \"cssOverrides\",\n  \"fontVariant\",\n  \"fontWeight\",\n  \"leading\",\n  \"letterSpacing\",\n  \"lineHeight\",\n  \"padding\",\n  \"textBaseline\",\n  \"trim\",\n  \"whiteSpace\",\n  \"wordWrap\",\n  \"wordWrapWidth\",\n  \"fontFamily\",\n  \"fontStyle\",\n  \"fontSize\"\n];\nfunction generateTextStyleKey(style) {\n  const key = [];\n  let index = 0;\n  for (let i = 0; i < valuesToIterateForKeys.length; i++) {\n    const prop = `_${valuesToIterateForKeys[i]}`;\n    key[index++] = style[prop];\n  }\n  index = addFillStyleKey(style._fill, key, index);\n  index = addStokeStyleKey(style._stroke, key, index);\n  index = addDropShadowKey(style.dropShadow, key, index);\n  return key.join(\"-\");\n}\nfunction addFillStyleKey(fillStyle, key, index) {\n  if (!fillStyle)\n    return index;\n  key[index++] = fillStyle.color;\n  key[index++] = fillStyle.alpha;\n  key[index++] = fillStyle.fill?.styleKey;\n  return index;\n}\nfunction addStokeStyleKey(strokeStyle, key, index) {\n  if (!strokeStyle)\n    return index;\n  index = addFillStyleKey(strokeStyle, key, index);\n  key[index++] = strokeStyle.width;\n  key[index++] = strokeStyle.alignment;\n  key[index++] = strokeStyle.cap;\n  key[index++] = strokeStyle.join;\n  key[index++] = strokeStyle.miterLimit;\n  return index;\n}\nfunction addDropShadowKey(dropShadow, key, index) {\n  if (!dropShadow)\n    return index;\n  key[index++] = dropShadow.alpha;\n  key[index++] = dropShadow.angle;\n  key[index++] = dropShadow.blur;\n  key[index++] = dropShadow.distance;\n  key[index++] = Color.shared.setValue(dropShadow.color).toNumber();\n  return index;\n}\n\nexport { generateTextStyleKey };\n//# sourceMappingURL=generateTextStyleKey.mjs.map\n","import { Rectangle } from '../maths/shapes/Rectangle.mjs';\nimport { Texture } from '../rendering/renderers/shared/texture/Texture.mjs';\n\n\"use strict\";\nconst _Spritesheet = class _Spritesheet {\n  /**\n   * @param texture - Reference to the source BaseTexture object.\n   * @param {object} data - Spritesheet image data.\n   */\n  constructor(texture, data) {\n    /** For multi-packed spritesheets, this contains a reference to all the other spritesheets it depends on. */\n    this.linkedSheets = [];\n    this._texture = texture instanceof Texture ? texture : null;\n    this.textureSource = texture.source;\n    this.textures = {};\n    this.animations = {};\n    this.data = data;\n    const metaResolution = parseFloat(data.meta.scale);\n    if (metaResolution) {\n      this.resolution = metaResolution;\n      texture.source.resolution = this.resolution;\n    } else {\n      this.resolution = texture.source._resolution;\n    }\n    this._frames = this.data.frames;\n    this._frameKeys = Object.keys(this._frames);\n    this._batchIndex = 0;\n    this._callback = null;\n  }\n  /**\n   * Parser spritesheet from loaded data. This is done asynchronously\n   * to prevent creating too many Texture within a single process.\n   */\n  parse() {\n    return new Promise((resolve) => {\n      this._callback = resolve;\n      this._batchIndex = 0;\n      if (this._frameKeys.length <= _Spritesheet.BATCH_SIZE) {\n        this._processFrames(0);\n        this._processAnimations();\n        this._parseComplete();\n      } else {\n        this._nextBatch();\n      }\n    });\n  }\n  /**\n   * Process a batch of frames\n   * @param initialFrameIndex - The index of frame to start.\n   */\n  _processFrames(initialFrameIndex) {\n    let frameIndex = initialFrameIndex;\n    const maxFrames = _Spritesheet.BATCH_SIZE;\n    while (frameIndex - initialFrameIndex < maxFrames && frameIndex < this._frameKeys.length) {\n      const i = this._frameKeys[frameIndex];\n      const data = this._frames[i];\n      const rect = data.frame;\n      if (rect) {\n        let frame = null;\n        let trim = null;\n        const sourceSize = data.trimmed !== false && data.sourceSize ? data.sourceSize : data.frame;\n        const orig = new Rectangle(\n          0,\n          0,\n          Math.floor(sourceSize.w) / this.resolution,\n          Math.floor(sourceSize.h) / this.resolution\n        );\n        if (data.rotated) {\n          frame = new Rectangle(\n            Math.floor(rect.x) / this.resolution,\n            Math.floor(rect.y) / this.resolution,\n            Math.floor(rect.h) / this.resolution,\n            Math.floor(rect.w) / this.resolution\n          );\n        } else {\n          frame = new Rectangle(\n            Math.floor(rect.x) / this.resolution,\n            Math.floor(rect.y) / this.resolution,\n            Math.floor(rect.w) / this.resolution,\n            Math.floor(rect.h) / this.resolution\n          );\n        }\n        if (data.trimmed !== false && data.spriteSourceSize) {\n          trim = new Rectangle(\n            Math.floor(data.spriteSourceSize.x) / this.resolution,\n            Math.floor(data.spriteSourceSize.y) / this.resolution,\n            Math.floor(rect.w) / this.resolution,\n            Math.floor(rect.h) / this.resolution\n          );\n        }\n        this.textures[i] = new Texture({\n          source: this.textureSource,\n          frame,\n          orig,\n          trim,\n          rotate: data.rotated ? 2 : 0,\n          defaultAnchor: data.anchor,\n          defaultBorders: data.borders,\n          label: i.toString()\n        });\n      }\n      frameIndex++;\n    }\n  }\n  /** Parse animations config. */\n  _processAnimations() {\n    const animations = this.data.animations || {};\n    for (const animName in animations) {\n      this.animations[animName] = [];\n      for (let i = 0; i < animations[animName].length; i++) {\n        const frameName = animations[animName][i];\n        this.animations[animName].push(this.textures[frameName]);\n      }\n    }\n  }\n  /** The parse has completed. */\n  _parseComplete() {\n    const callback = this._callback;\n    this._callback = null;\n    this._batchIndex = 0;\n    callback.call(this, this.textures);\n  }\n  /** Begin the next batch of textures. */\n  _nextBatch() {\n    this._processFrames(this._batchIndex * _Spritesheet.BATCH_SIZE);\n    this._batchIndex++;\n    setTimeout(() => {\n      if (this._batchIndex * _Spritesheet.BATCH_SIZE < this._frameKeys.length) {\n        this._nextBatch();\n      } else {\n        this._processAnimations();\n        this._parseComplete();\n      }\n    }, 0);\n  }\n  /**\n   * Destroy Spritesheet and don't use after this.\n   * @param {boolean} [destroyBase=false] - Whether to destroy the base texture as well\n   */\n  destroy(destroyBase = false) {\n    for (const i in this.textures) {\n      this.textures[i].destroy();\n    }\n    this._frames = null;\n    this._frameKeys = null;\n    this.data = null;\n    this.textures = null;\n    if (destroyBase) {\n      this._texture?.destroy();\n      this.textureSource.destroy();\n    }\n    this._texture = null;\n    this.textureSource = null;\n    this.linkedSheets = [];\n  }\n};\n/** The maximum number of Textures to build per process. */\n_Spritesheet.BATCH_SIZE = 1e3;\nlet Spritesheet = _Spritesheet;\n\nexport { Spritesheet };\n//# sourceMappingURL=Spritesheet.mjs.map\n","import { LoaderParserPriority } from '../assets/loader/parsers/LoaderParser.mjs';\nimport { Resolver } from '../assets/resolver/Resolver.mjs';\nimport { copySearchParams } from '../assets/utils/copySearchParams.mjs';\nimport { ExtensionType } from '../extensions/Extensions.mjs';\nimport { Texture } from '../rendering/renderers/shared/texture/Texture.mjs';\nimport { path } from '../utils/path.mjs';\nimport { Spritesheet } from './Spritesheet.mjs';\n\n\"use strict\";\nconst validImages = [\n  \"jpg\",\n  \"png\",\n  \"jpeg\",\n  \"avif\",\n  \"webp\",\n  \"basis\",\n  \"etc2\",\n  \"bc7\",\n  \"bc6h\",\n  \"bc5\",\n  \"bc4\",\n  \"bc3\",\n  \"bc2\",\n  \"bc1\",\n  \"eac\",\n  \"astc\"\n];\nfunction getCacheableAssets(keys, asset, ignoreMultiPack) {\n  const out = {};\n  keys.forEach((key) => {\n    out[key] = asset;\n  });\n  Object.keys(asset.textures).forEach((key) => {\n    out[key] = asset.textures[key];\n  });\n  if (!ignoreMultiPack) {\n    const basePath = path.dirname(keys[0]);\n    asset.linkedSheets.forEach((item, i) => {\n      const out2 = getCacheableAssets([`${basePath}/${asset.data.meta.related_multi_packs[i]}`], item, true);\n      Object.assign(out, out2);\n    });\n  }\n  return out;\n}\nconst spritesheetAsset = {\n  extension: ExtensionType.Asset,\n  /** Handle the caching of the related Spritesheet Textures */\n  cache: {\n    test: (asset) => asset instanceof Spritesheet,\n    getCacheableAssets: (keys, asset) => getCacheableAssets(keys, asset, false)\n  },\n  /** Resolve the resolution of the asset. */\n  resolver: {\n    extension: {\n      type: ExtensionType.ResolveParser,\n      name: \"resolveSpritesheet\"\n    },\n    test: (value) => {\n      const tempURL = value.split(\"?\")[0];\n      const split = tempURL.split(\".\");\n      const extension = split.pop();\n      const format = split.pop();\n      return extension === \"json\" && validImages.includes(format);\n    },\n    parse: (value) => {\n      const split = value.split(\".\");\n      return {\n        resolution: parseFloat(Resolver.RETINA_PREFIX.exec(value)?.[1] ?? \"1\"),\n        format: split[split.length - 2],\n        src: value\n      };\n    }\n  },\n  /**\n   * Loader plugin that parses sprite sheets!\n   * once the JSON has been loaded this checks to see if the JSON is spritesheet data.\n   * If it is, we load the spritesheets image and parse the data into Spritesheet\n   * All textures in the sprite sheet are then added to the cache\n   */\n  loader: {\n    name: \"spritesheetLoader\",\n    extension: {\n      type: ExtensionType.LoadParser,\n      priority: LoaderParserPriority.Normal,\n      name: \"spritesheetLoader\"\n    },\n    async testParse(asset, options) {\n      return path.extname(options.src).toLowerCase() === \".json\" && !!asset.frames;\n    },\n    async parse(asset, options, loader) {\n      const {\n        texture: imageTexture,\n        // if user need to use preloaded texture\n        imageFilename\n        // if user need to use custom filename (not from jsonFile.meta.image)\n      } = options?.data ?? {};\n      let basePath = path.dirname(options.src);\n      if (basePath && basePath.lastIndexOf(\"/\") !== basePath.length - 1) {\n        basePath += \"/\";\n      }\n      let texture;\n      if (imageTexture instanceof Texture) {\n        texture = imageTexture;\n      } else {\n        const imagePath = copySearchParams(basePath + (imageFilename ?? asset.meta.image), options.src);\n        const assets = await loader.load([imagePath]);\n        texture = assets[imagePath];\n      }\n      const spritesheet = new Spritesheet(\n        texture.source,\n        asset\n      );\n      await spritesheet.parse();\n      const multiPacks = asset?.meta?.related_multi_packs;\n      if (Array.isArray(multiPacks)) {\n        const promises = [];\n        for (const item of multiPacks) {\n          if (typeof item !== \"string\") {\n            continue;\n          }\n          let itemUrl = basePath + item;\n          if (options.data?.ignoreMultiPack) {\n            continue;\n          }\n          itemUrl = copySearchParams(itemUrl, options.src);\n          promises.push(loader.load({\n            src: itemUrl,\n            data: {\n              ignoreMultiPack: true\n            }\n          }));\n        }\n        const res = await Promise.all(promises);\n        spritesheet.linkedSheets = res;\n        res.forEach((item) => {\n          item.linkedSheets = [spritesheet].concat(spritesheet.linkedSheets.filter((sp) => sp !== item));\n        });\n      }\n      return spritesheet;\n    },\n    async unload(spritesheet, _resolvedAsset, loader) {\n      await loader.unload(spritesheet.textureSource._sourceOrigin);\n      spritesheet.destroy(false);\n    }\n  }\n};\n\nexport { spritesheetAsset };\n//# sourceMappingURL=spritesheetAsset.mjs.map\n","import { extensions } from '../extensions/Extensions.mjs';\nimport { spritesheetAsset } from './spritesheetAsset.mjs';\n\n\"use strict\";\nextensions.add(spritesheetAsset);\n//# sourceMappingURL=init.mjs.map\n","\"use strict\";\nclass TickerListener {\n  /**\n   * Constructor\n   * @private\n   * @param fn - The listener function to be added for one update\n   * @param context - The listener context\n   * @param priority - The priority for emitting\n   * @param once - If the handler should fire once\n   */\n  constructor(fn, context = null, priority = 0, once = false) {\n    /** The next item in chain. */\n    this.next = null;\n    /** The previous item in chain. */\n    this.previous = null;\n    /** `true` if this listener has been destroyed already. */\n    this._destroyed = false;\n    this._fn = fn;\n    this._context = context;\n    this.priority = priority;\n    this._once = once;\n  }\n  /**\n   * Simple compare function to figure out if a function and context match.\n   * @param fn - The listener function to be added for one update\n   * @param context - The listener context\n   * @returns `true` if the listener match the arguments\n   */\n  match(fn, context = null) {\n    return this._fn === fn && this._context === context;\n  }\n  /**\n   * Emit by calling the current function.\n   * @param ticker - The ticker emitting.\n   * @returns Next ticker\n   */\n  emit(ticker) {\n    if (this._fn) {\n      if (this._context) {\n        this._fn.call(this._context, ticker);\n      } else {\n        this._fn(ticker);\n      }\n    }\n    const redirect = this.next;\n    if (this._once) {\n      this.destroy(true);\n    }\n    if (this._destroyed) {\n      this.next = null;\n    }\n    return redirect;\n  }\n  /**\n   * Connect to the list.\n   * @param previous - Input node, previous listener\n   */\n  connect(previous) {\n    this.previous = previous;\n    if (previous.next) {\n      previous.next.previous = this;\n    }\n    this.next = previous.next;\n    previous.next = this;\n  }\n  /**\n   * Destroy and don't use after this.\n   * @param hard - `true` to remove the `next` reference, this\n   *        is considered a hard destroy. Soft destroy maintains the next reference.\n   * @returns The listener to redirect while emitting or removing.\n   */\n  destroy(hard = false) {\n    this._destroyed = true;\n    this._fn = null;\n    this._context = null;\n    if (this.previous) {\n      this.previous.next = this.next;\n    }\n    if (this.next) {\n      this.next.previous = this.previous;\n    }\n    const redirect = this.next;\n    this.next = hard ? null : redirect;\n    this.previous = null;\n    return redirect;\n  }\n}\n\nexport { TickerListener };\n//# sourceMappingURL=TickerListener.mjs.map\n","import { UPDATE_PRIORITY } from './const.mjs';\nimport { TickerListener } from './TickerListener.mjs';\n\n\"use strict\";\nconst _Ticker = class _Ticker {\n  constructor() {\n    /**\n     * Whether or not this ticker should invoke the method\n     * {@link ticker.Ticker#start|start} automatically when a listener is added.\n     */\n    this.autoStart = false;\n    /**\n     * Scalar time value from last frame to this frame.\n     * This value is capped by setting {@link ticker.Ticker#minFPS|minFPS}\n     * and is scaled with {@link ticker.Ticker#speed|speed}.\n     * **Note:** The cap may be exceeded by scaling.\n     */\n    this.deltaTime = 1;\n    /**\n     * The last time {@link ticker.Ticker#update|update} was invoked.\n     * This value is also reset internally outside of invoking\n     * update, but only when a new animation frame is requested.\n     * If the platform supports DOMHighResTimeStamp,\n     * this value will have a precision of 1 µs.\n     */\n    this.lastTime = -1;\n    /**\n     * Factor of current {@link ticker.Ticker#deltaTime|deltaTime}.\n     * @example\n     * // Scales ticker.deltaTime to what would be\n     * // the equivalent of approximately 120 FPS\n     * ticker.speed = 2;\n     */\n    this.speed = 1;\n    /**\n     * Whether or not this ticker has been started.\n     * `true` if {@link ticker.Ticker#start|start} has been called.\n     * `false` if {@link ticker.Ticker#stop|Stop} has been called.\n     * While `false`, this value may change to `true` in the\n     * event of {@link ticker.Ticker#autoStart|autoStart} being `true`\n     * and a listener is added.\n     */\n    this.started = false;\n    /** Internal current frame request ID */\n    this._requestId = null;\n    /**\n     * Internal value managed by minFPS property setter and getter.\n     * This is the maximum allowed milliseconds between updates.\n     */\n    this._maxElapsedMS = 100;\n    /**\n     * Internal value managed by minFPS property setter and getter.\n     * This is the minimum allowed milliseconds between updates.\n     */\n    this._minElapsedMS = 0;\n    /** If enabled, deleting is disabled.*/\n    this._protected = false;\n    /** The last time keyframe was executed. Maintains a relatively fixed interval with the previous value. */\n    this._lastFrame = -1;\n    this._head = new TickerListener(null, null, Infinity);\n    this.deltaMS = 1 / _Ticker.targetFPMS;\n    this.elapsedMS = 1 / _Ticker.targetFPMS;\n    this._tick = (time) => {\n      this._requestId = null;\n      if (this.started) {\n        this.update(time);\n        if (this.started && this._requestId === null && this._head.next) {\n          this._requestId = requestAnimationFrame(this._tick);\n        }\n      }\n    };\n  }\n  /**\n   * Conditionally requests a new animation frame.\n   * If a frame has not already been requested, and if the internal\n   * emitter has listeners, a new frame is requested.\n   * @private\n   */\n  _requestIfNeeded() {\n    if (this._requestId === null && this._head.next) {\n      this.lastTime = performance.now();\n      this._lastFrame = this.lastTime;\n      this._requestId = requestAnimationFrame(this._tick);\n    }\n  }\n  /**\n   * Conditionally cancels a pending animation frame.\n   * @private\n   */\n  _cancelIfNeeded() {\n    if (this._requestId !== null) {\n      cancelAnimationFrame(this._requestId);\n      this._requestId = null;\n    }\n  }\n  /**\n   * Conditionally requests a new animation frame.\n   * If the ticker has been started it checks if a frame has not already\n   * been requested, and if the internal emitter has listeners. If these\n   * conditions are met, a new frame is requested. If the ticker has not\n   * been started, but autoStart is `true`, then the ticker starts now,\n   * and continues with the previous conditions to request a new frame.\n   * @private\n   */\n  _startIfPossible() {\n    if (this.started) {\n      this._requestIfNeeded();\n    } else if (this.autoStart) {\n      this.start();\n    }\n  }\n  /**\n   * Register a handler for tick events. Calls continuously unless\n   * it is removed or the ticker is stopped.\n   * @param fn - The listener function to be added for updates\n   * @param context - The listener context\n   * @param {number} [priority=UPDATE_PRIORITY.NORMAL] - The priority for emitting\n   * @returns This instance of a ticker\n   */\n  add(fn, context, priority = UPDATE_PRIORITY.NORMAL) {\n    return this._addListener(new TickerListener(fn, context, priority));\n  }\n  /**\n   * Add a handler for the tick event which is only execute once.\n   * @param fn - The listener function to be added for one update\n   * @param context - The listener context\n   * @param {number} [priority=UPDATE_PRIORITY.NORMAL] - The priority for emitting\n   * @returns This instance of a ticker\n   */\n  addOnce(fn, context, priority = UPDATE_PRIORITY.NORMAL) {\n    return this._addListener(new TickerListener(fn, context, priority, true));\n  }\n  /**\n   * Internally adds the event handler so that it can be sorted by priority.\n   * Priority allows certain handler (user, AnimatedSprite, Interaction) to be run\n   * before the rendering.\n   * @private\n   * @param listener - Current listener being added.\n   * @returns This instance of a ticker\n   */\n  _addListener(listener) {\n    let current = this._head.next;\n    let previous = this._head;\n    if (!current) {\n      listener.connect(previous);\n    } else {\n      while (current) {\n        if (listener.priority > current.priority) {\n          listener.connect(previous);\n          break;\n        }\n        previous = current;\n        current = current.next;\n      }\n      if (!listener.previous) {\n        listener.connect(previous);\n      }\n    }\n    this._startIfPossible();\n    return this;\n  }\n  /**\n   * Removes any handlers matching the function and context parameters.\n   * If no handlers are left after removing, then it cancels the animation frame.\n   * @param fn - The listener function to be removed\n   * @param context - The listener context to be removed\n   * @returns This instance of a ticker\n   */\n  remove(fn, context) {\n    let listener = this._head.next;\n    while (listener) {\n      if (listener.match(fn, context)) {\n        listener = listener.destroy();\n      } else {\n        listener = listener.next;\n      }\n    }\n    if (!this._head.next) {\n      this._cancelIfNeeded();\n    }\n    return this;\n  }\n  /**\n   * The number of listeners on this ticker, calculated by walking through linked list\n   * @readonly\n   * @member {number}\n   */\n  get count() {\n    if (!this._head) {\n      return 0;\n    }\n    let count = 0;\n    let current = this._head;\n    while (current = current.next) {\n      count++;\n    }\n    return count;\n  }\n  /** Starts the ticker. If the ticker has listeners a new animation frame is requested at this point. */\n  start() {\n    if (!this.started) {\n      this.started = true;\n      this._requestIfNeeded();\n    }\n  }\n  /** Stops the ticker. If the ticker has requested an animation frame it is canceled at this point. */\n  stop() {\n    if (this.started) {\n      this.started = false;\n      this._cancelIfNeeded();\n    }\n  }\n  /** Destroy the ticker and don't use after this. Calling this method removes all references to internal events. */\n  destroy() {\n    if (!this._protected) {\n      this.stop();\n      let listener = this._head.next;\n      while (listener) {\n        listener = listener.destroy(true);\n      }\n      this._head.destroy();\n      this._head = null;\n    }\n  }\n  /**\n   * Triggers an update. An update entails setting the\n   * current {@link ticker.Ticker#elapsedMS|elapsedMS},\n   * the current {@link ticker.Ticker#deltaTime|deltaTime},\n   * invoking all listeners with current deltaTime,\n   * and then finally setting {@link ticker.Ticker#lastTime|lastTime}\n   * with the value of currentTime that was provided.\n   * This method will be called automatically by animation\n   * frame callbacks if the ticker instance has been started\n   * and listeners are added.\n   * @param {number} [currentTime=performance.now()] - the current time of execution\n   */\n  update(currentTime = performance.now()) {\n    let elapsedMS;\n    if (currentTime > this.lastTime) {\n      elapsedMS = this.elapsedMS = currentTime - this.lastTime;\n      if (elapsedMS > this._maxElapsedMS) {\n        elapsedMS = this._maxElapsedMS;\n      }\n      elapsedMS *= this.speed;\n      if (this._minElapsedMS) {\n        const delta = currentTime - this._lastFrame | 0;\n        if (delta < this._minElapsedMS) {\n          return;\n        }\n        this._lastFrame = currentTime - delta % this._minElapsedMS;\n      }\n      this.deltaMS = elapsedMS;\n      this.deltaTime = this.deltaMS * _Ticker.targetFPMS;\n      const head = this._head;\n      let listener = head.next;\n      while (listener) {\n        listener = listener.emit(this);\n      }\n      if (!head.next) {\n        this._cancelIfNeeded();\n      }\n    } else {\n      this.deltaTime = this.deltaMS = this.elapsedMS = 0;\n    }\n    this.lastTime = currentTime;\n  }\n  /**\n   * The frames per second at which this ticker is running.\n   * The default is approximately 60 in most modern browsers.\n   * **Note:** This does not factor in the value of\n   * {@link ticker.Ticker#speed|speed}, which is specific\n   * to scaling {@link ticker.Ticker#deltaTime|deltaTime}.\n   * @member {number}\n   * @readonly\n   */\n  get FPS() {\n    return 1e3 / this.elapsedMS;\n  }\n  /**\n   * Manages the maximum amount of milliseconds allowed to\n   * elapse between invoking {@link ticker.Ticker#update|update}.\n   * This value is used to cap {@link ticker.Ticker#deltaTime|deltaTime},\n   * but does not effect the measured value of {@link ticker.Ticker#FPS|FPS}.\n   * When setting this property it is clamped to a value between\n   * `0` and `Ticker.targetFPMS * 1000`.\n   * @member {number}\n   * @default 10\n   */\n  get minFPS() {\n    return 1e3 / this._maxElapsedMS;\n  }\n  set minFPS(fps) {\n    const minFPS = Math.min(this.maxFPS, fps);\n    const minFPMS = Math.min(Math.max(0, minFPS) / 1e3, _Ticker.targetFPMS);\n    this._maxElapsedMS = 1 / minFPMS;\n  }\n  /**\n   * Manages the minimum amount of milliseconds required to\n   * elapse between invoking {@link ticker.Ticker#update|update}.\n   * This will effect the measured value of {@link ticker.Ticker#FPS|FPS}.\n   * If it is set to `0`, then there is no limit; PixiJS will render as many frames as it can.\n   * Otherwise it will be at least `minFPS`\n   * @member {number}\n   * @default 0\n   */\n  get maxFPS() {\n    if (this._minElapsedMS) {\n      return Math.round(1e3 / this._minElapsedMS);\n    }\n    return 0;\n  }\n  set maxFPS(fps) {\n    if (fps === 0) {\n      this._minElapsedMS = 0;\n    } else {\n      const maxFPS = Math.max(this.minFPS, fps);\n      this._minElapsedMS = 1 / (maxFPS / 1e3);\n    }\n  }\n  /**\n   * The shared ticker instance used by {@link AnimatedSprite} and by\n   * {@link VideoResource} to update animation frames / video textures.\n   *\n   * It may also be used by {@link Application} if created with the `sharedTicker` option property set to true.\n   *\n   * The property {@link ticker.Ticker#autoStart|autoStart} is set to `true` for this instance.\n   * Please follow the examples for usage, including how to opt-out of auto-starting the shared ticker.\n   * @example\n   * import { Ticker } from 'pixi.js';\n   *\n   * const ticker = Ticker.shared;\n   * // Set this to prevent starting this ticker when listeners are added.\n   * // By default this is true only for the Ticker.shared instance.\n   * ticker.autoStart = false;\n   *\n   * // FYI, call this to ensure the ticker is stopped. It should be stopped\n   * // if you have not attempted to render anything yet.\n   * ticker.stop();\n   *\n   * // Call this when you are ready for a running shared ticker.\n   * ticker.start();\n   * @example\n   * import { autoDetectRenderer, Container } from 'pixi.js';\n   *\n   * // You may use the shared ticker to render...\n   * const renderer = autoDetectRenderer();\n   * const stage = new Container();\n   * document.body.appendChild(renderer.view);\n   * ticker.add((time) => renderer.render(stage));\n   *\n   * // Or you can just update it manually.\n   * ticker.autoStart = false;\n   * ticker.stop();\n   * const animate = (time) => {\n   *     ticker.update(time);\n   *     renderer.render(stage);\n   *     requestAnimationFrame(animate);\n   * };\n   * animate(performance.now());\n   * @member {ticker.Ticker}\n   * @readonly\n   * @static\n   */\n  static get shared() {\n    if (!_Ticker._shared) {\n      const shared = _Ticker._shared = new _Ticker();\n      shared.autoStart = true;\n      shared._protected = true;\n    }\n    return _Ticker._shared;\n  }\n  /**\n   * The system ticker instance used by {@link BasePrepare} for core timing\n   * functionality that shouldn't usually need to be paused, unlike the `shared`\n   * ticker which drives visual animations and rendering which may want to be paused.\n   *\n   * The property {@link ticker.Ticker#autoStart|autoStart} is set to `true` for this instance.\n   * @member {ticker.Ticker}\n   * @readonly\n   * @static\n   */\n  static get system() {\n    if (!_Ticker._system) {\n      const system = _Ticker._system = new _Ticker();\n      system.autoStart = true;\n      system._protected = true;\n    }\n    return _Ticker._system;\n  }\n};\n/**\n * Target frames per millisecond.\n * @static\n */\n_Ticker.targetFPMS = 0.06;\nlet Ticker = _Ticker;\n\nexport { Ticker };\n//# sourceMappingURL=Ticker.mjs.map\n","\"use strict\";\nvar UPDATE_PRIORITY = /* @__PURE__ */ ((UPDATE_PRIORITY2) => {\n  UPDATE_PRIORITY2[UPDATE_PRIORITY2[\"INTERACTION\"] = 50] = \"INTERACTION\";\n  UPDATE_PRIORITY2[UPDATE_PRIORITY2[\"HIGH\"] = 25] = \"HIGH\";\n  UPDATE_PRIORITY2[UPDATE_PRIORITY2[\"NORMAL\"] = 0] = \"NORMAL\";\n  UPDATE_PRIORITY2[UPDATE_PRIORITY2[\"LOW\"] = -25] = \"LOW\";\n  UPDATE_PRIORITY2[UPDATE_PRIORITY2[\"UTILITY\"] = -50] = \"UTILITY\";\n  return UPDATE_PRIORITY2;\n})(UPDATE_PRIORITY || {});\n\nexport { UPDATE_PRIORITY };\n//# sourceMappingURL=const.mjs.map\n","\"use strict\";\nlet promise;\nasync function detectVideoAlphaMode() {\n  promise ?? (promise = (async () => {\n    const canvas = document.createElement(\"canvas\");\n    const gl = canvas.getContext(\"webgl\");\n    if (!gl) {\n      return \"premultiply-alpha-on-upload\";\n    }\n    const video = await new Promise((resolve) => {\n      const video2 = document.createElement(\"video\");\n      video2.onloadeddata = () => resolve(video2);\n      video2.onerror = () => resolve(null);\n      video2.autoplay = false;\n      video2.crossOrigin = \"anonymous\";\n      video2.preload = \"auto\";\n      video2.src = \"data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=\";\n      video2.load();\n    });\n    if (!video) {\n      return \"premultiply-alpha-on-upload\";\n    }\n    const texture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    const framebuffer = gl.createFramebuffer();\n    gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n    gl.framebufferTexture2D(\n      gl.FRAMEBUFFER,\n      gl.COLOR_ATTACHMENT0,\n      gl.TEXTURE_2D,\n      texture,\n      0\n    );\n    gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, false);\n    gl.pixelStorei(gl.UNPACK_COLORSPACE_CONVERSION_WEBGL, gl.NONE);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, video);\n    const pixel = new Uint8Array(4);\n    gl.readPixels(0, 0, 1, 1, gl.RGBA, gl.UNSIGNED_BYTE, pixel);\n    gl.deleteFramebuffer(framebuffer);\n    gl.deleteTexture(texture);\n    gl.getExtension(\"WEBGL_lose_context\")?.loseContext();\n    return pixel[0] <= pixel[3] ? \"premultiplied-alpha\" : \"premultiply-alpha-on-upload\";\n  })());\n  return promise;\n}\n\nexport { detectVideoAlphaMode };\n//# sourceMappingURL=detectVideoAlphaMode.mjs.map\n","\"use strict\";\nlet unsafeEval;\nfunction unsafeEvalSupported() {\n  if (typeof unsafeEval === \"boolean\") {\n    return unsafeEval;\n  }\n  try {\n    const func = new Function(\"param1\", \"param2\", \"param3\", \"return param1[param2] === param3;\");\n    unsafeEval = func({ a: \"b\" }, \"a\", \"b\") === true;\n  } catch (e) {\n    unsafeEval = false;\n  }\n  return unsafeEval;\n}\n\nexport { unsafeEvalSupported };\n//# sourceMappingURL=unsafeEvalSupported.mjs.map\n","\"use strict\";\nfunction removeItems(arr, startIdx, removeCount) {\n  const length = arr.length;\n  let i;\n  if (startIdx >= length || removeCount === 0) {\n    return;\n  }\n  removeCount = startIdx + removeCount > length ? length - startIdx : removeCount;\n  const len = length - removeCount;\n  for (i = startIdx; i < len; ++i) {\n    arr[i] = arr[i + removeCount];\n  }\n  arr.length = len;\n}\n\nexport { removeItems };\n//# sourceMappingURL=removeItems.mjs.map\n","\"use strict\";\nconst uidCache = {\n  default: -1\n};\nfunction uid(name = \"default\") {\n  if (uidCache[name] === void 0) {\n    uidCache[name] = -1;\n  }\n  return ++uidCache[name];\n}\nfunction resetUids() {\n  for (const key in uidCache) {\n    delete uidCache[key];\n  }\n}\n\nexport { resetUids, uid };\n//# sourceMappingURL=uid.mjs.map\n","\"use strict\";\nfunction updateQuadBounds(bounds, anchor, texture, padding) {\n  const { width, height } = texture.orig;\n  const trim = texture.trim;\n  if (trim) {\n    const sourceWidth = trim.width;\n    const sourceHeight = trim.height;\n    bounds.minX = trim.x - anchor._x * width - padding;\n    bounds.maxX = bounds.minX + sourceWidth;\n    bounds.minY = trim.y - anchor._y * height - padding;\n    bounds.maxY = bounds.minY + sourceHeight;\n  } else {\n    bounds.minX = -anchor._x * width - padding;\n    bounds.maxX = bounds.minX + width;\n    bounds.minY = -anchor._y * height - padding;\n    bounds.maxY = bounds.minY + height;\n  }\n  return;\n}\n\nexport { updateQuadBounds };\n//# sourceMappingURL=updateQuadBounds.mjs.map\n","import { ExtensionType } from '../../extensions/Extensions.mjs';\n\n\"use strict\";\nclass ApplicationInitHook {\n  static init() {\n    globalThis.__PIXI_APP_INIT__?.(this);\n  }\n  static destroy() {\n  }\n}\n/** @ignore */\nApplicationInitHook.extension = ExtensionType.Application;\nclass RendererInitHook {\n  constructor(renderer) {\n    this._renderer = renderer;\n  }\n  init() {\n    globalThis.__PIXI_RENDERER_INIT__?.(this._renderer);\n  }\n  destroy() {\n    this._renderer = null;\n  }\n}\n/** @ignore */\nRendererInitHook.extension = {\n  type: [\n    ExtensionType.WebGLSystem,\n    ExtensionType.WebGPUSystem\n  ],\n  name: \"initHook\",\n  priority: -10\n};\n\nexport { ApplicationInitHook, RendererInitHook };\n//# sourceMappingURL=globalHooks.mjs.map\n","\"use strict\";\nconst warnings = {};\nconst v8_0_0 = \"8.0.0\";\nfunction deprecation(version, message, ignoreDepth = 3) {\n  if (warnings[message]) {\n    return;\n  }\n  let stack = new Error().stack;\n  if (typeof stack === \"undefined\") {\n    console.warn(\"PixiJS Deprecation Warning: \", `${message}\nDeprecated since v${version}`);\n  } else {\n    stack = stack.split(\"\\n\").splice(ignoreDepth).join(\"\\n\");\n    if (console.groupCollapsed) {\n      console.groupCollapsed(\n        \"%cPixiJS Deprecation Warning: %c%s\",\n        \"color:#614108;background:#fffbe6\",\n        \"font-weight:normal;color:#614108;background:#fffbe6\",\n        `${message}\nDeprecated since v${version}`\n      );\n      console.warn(stack);\n      console.groupEnd();\n    } else {\n      console.warn(\"PixiJS Deprecation Warning: \", `${message}\nDeprecated since v${version}`);\n      console.warn(stack);\n    }\n  }\n  warnings[message] = true;\n}\n\nexport { deprecation, v8_0_0 };\n//# sourceMappingURL=deprecation.mjs.map\n","\"use strict\";\nlet warnCount = 0;\nconst maxWarnings = 500;\nfunction warn(...args) {\n  if (warnCount === maxWarnings)\n    return;\n  warnCount++;\n  if (warnCount === maxWarnings) {\n    console.warn(\"PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS.\");\n  } else {\n    console.warn(\"PixiJS Warning: \", ...args);\n  }\n}\n\nexport { warn };\n//# sourceMappingURL=warn.mjs.map\n","import { DOMAdapter } from '../environment/adapter.mjs';\n\n\"use strict\";\nfunction assertPath(path2) {\n  if (typeof path2 !== \"string\") {\n    throw new TypeError(`Path must be a string. Received ${JSON.stringify(path2)}`);\n  }\n}\nfunction removeUrlParams(url) {\n  const re = url.split(\"?\")[0];\n  return re.split(\"#\")[0];\n}\nfunction escapeRegExp(string) {\n  return string.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n}\nfunction replaceAll(str, find, replace) {\n  return str.replace(new RegExp(escapeRegExp(find), \"g\"), replace);\n}\nfunction normalizeStringPosix(path2, allowAboveRoot) {\n  let res = \"\";\n  let lastSegmentLength = 0;\n  let lastSlash = -1;\n  let dots = 0;\n  let code = -1;\n  for (let i = 0; i <= path2.length; ++i) {\n    if (i < path2.length) {\n      code = path2.charCodeAt(i);\n    } else if (code === 47) {\n      break;\n    } else {\n      code = 47;\n    }\n    if (code === 47) {\n      if (lastSlash === i - 1 || dots === 1) {\n      } else if (lastSlash !== i - 1 && dots === 2) {\n        if (res.length < 2 || lastSegmentLength !== 2 || res.charCodeAt(res.length - 1) !== 46 || res.charCodeAt(res.length - 2) !== 46) {\n          if (res.length > 2) {\n            const lastSlashIndex = res.lastIndexOf(\"/\");\n            if (lastSlashIndex !== res.length - 1) {\n              if (lastSlashIndex === -1) {\n                res = \"\";\n                lastSegmentLength = 0;\n              } else {\n                res = res.slice(0, lastSlashIndex);\n                lastSegmentLength = res.length - 1 - res.lastIndexOf(\"/\");\n              }\n              lastSlash = i;\n              dots = 0;\n              continue;\n            }\n          } else if (res.length === 2 || res.length === 1) {\n            res = \"\";\n            lastSegmentLength = 0;\n            lastSlash = i;\n            dots = 0;\n            continue;\n          }\n        }\n        if (allowAboveRoot) {\n          if (res.length > 0) {\n            res += \"/..\";\n          } else {\n            res = \"..\";\n          }\n          lastSegmentLength = 2;\n        }\n      } else {\n        if (res.length > 0) {\n          res += `/${path2.slice(lastSlash + 1, i)}`;\n        } else {\n          res = path2.slice(lastSlash + 1, i);\n        }\n        lastSegmentLength = i - lastSlash - 1;\n      }\n      lastSlash = i;\n      dots = 0;\n    } else if (code === 46 && dots !== -1) {\n      ++dots;\n    } else {\n      dots = -1;\n    }\n  }\n  return res;\n}\nconst path = {\n  /**\n   * Converts a path to posix format.\n   * @param path - The path to convert to posix\n   */\n  toPosix(path2) {\n    return replaceAll(path2, \"\\\\\", \"/\");\n  },\n  /**\n   * Checks if the path is a URL e.g. http://, https://\n   * @param path - The path to check\n   */\n  isUrl(path2) {\n    return /^https?:/.test(this.toPosix(path2));\n  },\n  /**\n   * Checks if the path is a data URL\n   * @param path - The path to check\n   */\n  isDataUrl(path2) {\n    return /^data:([a-z]+\\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\\-._~:@\\/?%\\s<>]*?)$/i.test(path2);\n  },\n  /**\n   * Checks if the path is a blob URL\n   * @param path - The path to check\n   */\n  isBlobUrl(path2) {\n    return path2.startsWith(\"blob:\");\n  },\n  /**\n   * Checks if the path has a protocol e.g. http://, https://, file:///, data:, blob:, C:/\n   * This will return true for windows file paths\n   * @param path - The path to check\n   */\n  hasProtocol(path2) {\n    return /^[^/:]+:/.test(this.toPosix(path2));\n  },\n  /**\n   * Returns the protocol of the path e.g. http://, https://, file:///, data:, blob:, C:/\n   * @param path - The path to get the protocol from\n   */\n  getProtocol(path2) {\n    assertPath(path2);\n    path2 = this.toPosix(path2);\n    const matchFile = /^file:\\/\\/\\//.exec(path2);\n    if (matchFile) {\n      return matchFile[0];\n    }\n    const matchProtocol = /^[^/:]+:\\/{0,2}/.exec(path2);\n    if (matchProtocol) {\n      return matchProtocol[0];\n    }\n    return \"\";\n  },\n  /**\n   * Converts URL to an absolute path.\n   * When loading from a Web Worker, we must use absolute paths.\n   * If the URL is already absolute we return it as is\n   * If it's not, we convert it\n   * @param url - The URL to test\n   * @param customBaseUrl - The base URL to use\n   * @param customRootUrl - The root URL to use\n   */\n  toAbsolute(url, customBaseUrl, customRootUrl) {\n    assertPath(url);\n    if (this.isDataUrl(url) || this.isBlobUrl(url))\n      return url;\n    const baseUrl = removeUrlParams(this.toPosix(customBaseUrl ?? DOMAdapter.get().getBaseUrl()));\n    const rootUrl = removeUrlParams(this.toPosix(customRootUrl ?? this.rootname(baseUrl)));\n    url = this.toPosix(url);\n    if (url.startsWith(\"/\")) {\n      return path.join(rootUrl, url.slice(1));\n    }\n    const absolutePath = this.isAbsolute(url) ? url : this.join(baseUrl, url);\n    return absolutePath;\n  },\n  /**\n   * Normalizes the given path, resolving '..' and '.' segments\n   * @param path - The path to normalize\n   */\n  normalize(path2) {\n    assertPath(path2);\n    if (path2.length === 0)\n      return \".\";\n    if (this.isDataUrl(path2) || this.isBlobUrl(path2))\n      return path2;\n    path2 = this.toPosix(path2);\n    let protocol = \"\";\n    const isAbsolute = path2.startsWith(\"/\");\n    if (this.hasProtocol(path2)) {\n      protocol = this.rootname(path2);\n      path2 = path2.slice(protocol.length);\n    }\n    const trailingSeparator = path2.endsWith(\"/\");\n    path2 = normalizeStringPosix(path2, false);\n    if (path2.length > 0 && trailingSeparator)\n      path2 += \"/\";\n    if (isAbsolute)\n      return `/${path2}`;\n    return protocol + path2;\n  },\n  /**\n   * Determines if path is an absolute path.\n   * Absolute paths can be urls, data urls, or paths on disk\n   * @param path - The path to test\n   */\n  isAbsolute(path2) {\n    assertPath(path2);\n    path2 = this.toPosix(path2);\n    if (this.hasProtocol(path2))\n      return true;\n    return path2.startsWith(\"/\");\n  },\n  /**\n   * Joins all given path segments together using the platform-specific separator as a delimiter,\n   * then normalizes the resulting path\n   * @param segments - The segments of the path to join\n   */\n  join(...segments) {\n    if (segments.length === 0) {\n      return \".\";\n    }\n    let joined;\n    for (let i = 0; i < segments.length; ++i) {\n      const arg = segments[i];\n      assertPath(arg);\n      if (arg.length > 0) {\n        if (joined === void 0)\n          joined = arg;\n        else {\n          const prevArg = segments[i - 1] ?? \"\";\n          if (this.joinExtensions.includes(this.extname(prevArg).toLowerCase())) {\n            joined += `/../${arg}`;\n          } else {\n            joined += `/${arg}`;\n          }\n        }\n      }\n    }\n    if (joined === void 0) {\n      return \".\";\n    }\n    return this.normalize(joined);\n  },\n  /**\n   * Returns the directory name of a path\n   * @param path - The path to parse\n   */\n  dirname(path2) {\n    assertPath(path2);\n    if (path2.length === 0)\n      return \".\";\n    path2 = this.toPosix(path2);\n    let code = path2.charCodeAt(0);\n    const hasRoot = code === 47;\n    let end = -1;\n    let matchedSlash = true;\n    const proto = this.getProtocol(path2);\n    const origpath = path2;\n    path2 = path2.slice(proto.length);\n    for (let i = path2.length - 1; i >= 1; --i) {\n      code = path2.charCodeAt(i);\n      if (code === 47) {\n        if (!matchedSlash) {\n          end = i;\n          break;\n        }\n      } else {\n        matchedSlash = false;\n      }\n    }\n    if (end === -1)\n      return hasRoot ? \"/\" : this.isUrl(origpath) ? proto + path2 : proto;\n    if (hasRoot && end === 1)\n      return \"//\";\n    return proto + path2.slice(0, end);\n  },\n  /**\n   * Returns the root of the path e.g. /, C:/, file:///, http://domain.com/\n   * @param path - The path to parse\n   */\n  rootname(path2) {\n    assertPath(path2);\n    path2 = this.toPosix(path2);\n    let root = \"\";\n    if (path2.startsWith(\"/\"))\n      root = \"/\";\n    else {\n      root = this.getProtocol(path2);\n    }\n    if (this.isUrl(path2)) {\n      const index = path2.indexOf(\"/\", root.length);\n      if (index !== -1) {\n        root = path2.slice(0, index);\n      } else\n        root = path2;\n      if (!root.endsWith(\"/\"))\n        root += \"/\";\n    }\n    return root;\n  },\n  /**\n   * Returns the last portion of a path\n   * @param path - The path to test\n   * @param ext - Optional extension to remove\n   */\n  basename(path2, ext) {\n    assertPath(path2);\n    if (ext)\n      assertPath(ext);\n    path2 = removeUrlParams(this.toPosix(path2));\n    let start = 0;\n    let end = -1;\n    let matchedSlash = true;\n    let i;\n    if (ext !== void 0 && ext.length > 0 && ext.length <= path2.length) {\n      if (ext.length === path2.length && ext === path2)\n        return \"\";\n      let extIdx = ext.length - 1;\n      let firstNonSlashEnd = -1;\n      for (i = path2.length - 1; i >= 0; --i) {\n        const code = path2.charCodeAt(i);\n        if (code === 47) {\n          if (!matchedSlash) {\n            start = i + 1;\n            break;\n          }\n        } else {\n          if (firstNonSlashEnd === -1) {\n            matchedSlash = false;\n            firstNonSlashEnd = i + 1;\n          }\n          if (extIdx >= 0) {\n            if (code === ext.charCodeAt(extIdx)) {\n              if (--extIdx === -1) {\n                end = i;\n              }\n            } else {\n              extIdx = -1;\n              end = firstNonSlashEnd;\n            }\n          }\n        }\n      }\n      if (start === end)\n        end = firstNonSlashEnd;\n      else if (end === -1)\n        end = path2.length;\n      return path2.slice(start, end);\n    }\n    for (i = path2.length - 1; i >= 0; --i) {\n      if (path2.charCodeAt(i) === 47) {\n        if (!matchedSlash) {\n          start = i + 1;\n          break;\n        }\n      } else if (end === -1) {\n        matchedSlash = false;\n        end = i + 1;\n      }\n    }\n    if (end === -1)\n      return \"\";\n    return path2.slice(start, end);\n  },\n  /**\n   * Returns the extension of the path, from the last occurrence of the . (period) character to end of string in the last\n   * portion of the path. If there is no . in the last portion of the path, or if there are no . characters other than\n   * the first character of the basename of path, an empty string is returned.\n   * @param path - The path to parse\n   */\n  extname(path2) {\n    assertPath(path2);\n    path2 = removeUrlParams(this.toPosix(path2));\n    let startDot = -1;\n    let startPart = 0;\n    let end = -1;\n    let matchedSlash = true;\n    let preDotState = 0;\n    for (let i = path2.length - 1; i >= 0; --i) {\n      const code = path2.charCodeAt(i);\n      if (code === 47) {\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n        continue;\n      }\n      if (end === -1) {\n        matchedSlash = false;\n        end = i + 1;\n      }\n      if (code === 46) {\n        if (startDot === -1)\n          startDot = i;\n        else if (preDotState !== 1)\n          preDotState = 1;\n      } else if (startDot !== -1) {\n        preDotState = -1;\n      }\n    }\n    if (startDot === -1 || end === -1 || preDotState === 0 || preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n      return \"\";\n    }\n    return path2.slice(startDot, end);\n  },\n  /**\n   * Parses a path into an object containing the 'root', `dir`, `base`, `ext`, and `name` properties.\n   * @param path - The path to parse\n   */\n  parse(path2) {\n    assertPath(path2);\n    const ret = { root: \"\", dir: \"\", base: \"\", ext: \"\", name: \"\" };\n    if (path2.length === 0)\n      return ret;\n    path2 = removeUrlParams(this.toPosix(path2));\n    let code = path2.charCodeAt(0);\n    const isAbsolute = this.isAbsolute(path2);\n    let start;\n    const protocol = \"\";\n    ret.root = this.rootname(path2);\n    if (isAbsolute || this.hasProtocol(path2)) {\n      start = 1;\n    } else {\n      start = 0;\n    }\n    let startDot = -1;\n    let startPart = 0;\n    let end = -1;\n    let matchedSlash = true;\n    let i = path2.length - 1;\n    let preDotState = 0;\n    for (; i >= start; --i) {\n      code = path2.charCodeAt(i);\n      if (code === 47) {\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n        continue;\n      }\n      if (end === -1) {\n        matchedSlash = false;\n        end = i + 1;\n      }\n      if (code === 46) {\n        if (startDot === -1)\n          startDot = i;\n        else if (preDotState !== 1)\n          preDotState = 1;\n      } else if (startDot !== -1) {\n        preDotState = -1;\n      }\n    }\n    if (startDot === -1 || end === -1 || preDotState === 0 || preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n      if (end !== -1) {\n        if (startPart === 0 && isAbsolute)\n          ret.base = ret.name = path2.slice(1, end);\n        else\n          ret.base = ret.name = path2.slice(startPart, end);\n      }\n    } else {\n      if (startPart === 0 && isAbsolute) {\n        ret.name = path2.slice(1, startDot);\n        ret.base = path2.slice(1, end);\n      } else {\n        ret.name = path2.slice(startPart, startDot);\n        ret.base = path2.slice(startPart, end);\n      }\n      ret.ext = path2.slice(startDot, end);\n    }\n    ret.dir = this.dirname(path2);\n    if (protocol)\n      ret.dir = protocol + ret.dir;\n    return ret;\n  },\n  sep: \"/\",\n  delimiter: \":\",\n  joinExtensions: [\".html\"]\n};\n\nexport { path };\n//# sourceMappingURL=path.mjs.map\n","\"use strict\";\nclass Pool {\n  /**\n   * Constructs a new Pool.\n   * @param ClassType - The constructor of the items in the pool.\n   * @param {number} [initialSize] - The initial size of the pool.\n   */\n  constructor(ClassType, initialSize) {\n    this._pool = [];\n    this._count = 0;\n    this._index = 0;\n    this._classType = ClassType;\n    if (initialSize) {\n      this.prepopulate(initialSize);\n    }\n  }\n  /**\n   * Prepopulates the pool with a given number of items.\n   * @param total - The number of items to add to the pool.\n   */\n  prepopulate(total) {\n    for (let i = 0; i < total; i++) {\n      this._pool[this._index++] = new this._classType();\n    }\n    this._count += total;\n  }\n  /**\n   * Gets an item from the pool. Calls the item's `init` method if it exists.\n   * If there are no items left in the pool, a new one will be created.\n   * @param {unknown} [data] - Optional data to pass to the item's constructor.\n   * @returns {T} The item from the pool.\n   */\n  get(data) {\n    let item;\n    if (this._index > 0) {\n      item = this._pool[--this._index];\n    } else {\n      item = new this._classType();\n    }\n    item.init?.(data);\n    return item;\n  }\n  /**\n   * Returns an item to the pool. Calls the item's `reset` method if it exists.\n   * @param {T} item - The item to return to the pool.\n   */\n  return(item) {\n    item.reset?.();\n    this._pool[this._index++] = item;\n  }\n  /**\n   * Gets the number of items in the pool.\n   * @readonly\n   * @member {number}\n   */\n  get totalSize() {\n    return this._count;\n  }\n  /**\n   * Gets the number of items in the pool that are free to use without needing to create more.\n   * @readonly\n   * @member {number}\n   */\n  get totalFree() {\n    return this._index;\n  }\n  /**\n   * Gets the number of items in the pool that are currently in use.\n   * @readonly\n   * @member {number}\n   */\n  get totalUsed() {\n    return this._count - this._index;\n  }\n}\n\nexport { Pool };\n//# sourceMappingURL=Pool.mjs.map\n","import { Pool } from './Pool.mjs';\n\n\"use strict\";\nclass PoolGroupClass {\n  constructor() {\n    /**\n     * A map to store the pools by their class type.\n     * @private\n     */\n    this._poolsByClass = /* @__PURE__ */ new Map();\n  }\n  /**\n   * Prepopulates a specific pool with a given number of items.\n   * @template T The type of items in the pool. Must extend PoolItem.\n   * @param {PoolItemConstructor<T>} Class - The constructor of the items in the pool.\n   * @param {number} total - The number of items to add to the pool.\n   */\n  prepopulate(Class, total) {\n    const classPool = this.getPool(Class);\n    classPool.prepopulate(total);\n  }\n  /**\n   * Gets an item from a specific pool.\n   * @template T The type of items in the pool. Must extend PoolItem.\n   * @param {PoolItemConstructor<T>} Class - The constructor of the items in the pool.\n   * @param {unknown} [data] - Optional data to pass to the item's constructor.\n   * @returns {T} The item from the pool.\n   */\n  get(Class, data) {\n    const pool = this.getPool(Class);\n    return pool.get(data);\n  }\n  /**\n   * Returns an item to its respective pool.\n   * @param {PoolItem} item - The item to return to the pool.\n   */\n  return(item) {\n    const pool = this.getPool(item.constructor);\n    pool.return(item);\n  }\n  /**\n   * Gets a specific pool based on the class type.\n   * @template T The type of items in the pool. Must extend PoolItem.\n   * @param {PoolItemConstructor<T>} ClassType - The constructor of the items in the pool.\n   * @returns {Pool<T>} The pool of the given class type.\n   */\n  getPool(ClassType) {\n    if (!this._poolsByClass.has(ClassType)) {\n      this._poolsByClass.set(ClassType, new Pool(ClassType));\n    }\n    return this._poolsByClass.get(ClassType);\n  }\n  /** gets the usage stats of each pool in the system */\n  stats() {\n    const stats = {};\n    this._poolsByClass.forEach((pool) => {\n      const name = stats[pool._classType.name] ? pool._classType.name + pool._classType.ID : pool._classType.name;\n      stats[name] = {\n        free: pool.totalFree,\n        used: pool.totalUsed,\n        size: pool.totalSize\n      };\n    });\n    return stats;\n  }\n}\nconst BigPool = new PoolGroupClass();\n\nexport { BigPool, PoolGroupClass };\n//# sourceMappingURL=PoolGroup.mjs.map\n","import { DOMAdapter } from '../environment/adapter.mjs';\n\n\"use strict\";\nlet saidHello = false;\nconst VERSION = \"8.2.4\";\nfunction sayHello(type) {\n  if (saidHello) {\n    return;\n  }\n  if (DOMAdapter.get().getNavigator().userAgent.toLowerCase().indexOf(\"chrome\") > -1) {\n    const args = [\n      `%c  %c  %c  %c  %c PixiJS %c v${VERSION} (${type}) http://www.pixijs.com/\n\n`,\n      \"background: #E72264; padding:5px 0;\",\n      \"background: #6CA2EA; padding:5px 0;\",\n      \"background: #B5D33D; padding:5px 0;\",\n      \"background: #FED23F; padding:5px 0;\",\n      \"color: #FFFFFF; background: #E72264; padding:5px 0;\",\n      \"color: #E72264; background: #FFFFFF; padding:5px 0;\"\n    ];\n    globalThis.console.log(...args);\n  } else if (globalThis.console) {\n    globalThis.console.log(`PixiJS ${VERSION} - ${type} - http://www.pixijs.com/`);\n  }\n  saidHello = true;\n}\n\nexport { VERSION, sayHello };\n//# sourceMappingURL=sayHello.mjs.map\n"],"names":["earcut","data","holeIndices","dim","minX","minY","maxX","maxY","x","y","invSize","hasHoles","length","outerLen","outerNode","linkedList","triangles","next","prev","i","len","list","queue","steiner","push","getLeftmost","sort","compareX","eliminateHole","eliminateHoles","Math","max","earcutLinked","start","end","clockwise","last","signedArea","insertNode","equals","removeNode","filterPoints","again","p","area","ear","pass","z","zOrder","prevZ","nextZ","q","e","tail","numMerges","pSize","qSize","inSize","sortLinked","indexCurve","stop","isEarHashed","isEar","cureLocalIntersections","splitEarcut","a","b","c","ax","bx","cx","ay","by","cy","x0","y0","x1","y1","pointInTriangle","minZ","maxZ","n","intersects","locallyInside","isValidDiagonal","splitPolygon","hole","bridge","m","hx","hy","qx","tan","mx","my","tanMin","Infinity","abs","sectorContainsSector","findHoleBridge","bridgeReverse","leftmost","px","py","intersectsPolygon","inside","middleInside","r","p1","p2","q1","q2","o1","sign","o2","o3","o4","onSegment","min","num","a2","Node","b2","an","bp","this","sum","j","module","exports","deviation","polygonArea","trianglesArea","flatten","result","vertices","holes","dimensions","holeIndex","d","has","Object","prototype","hasOwnProperty","prefix","Events","EE","fn","context","once","addListener","emitter","event","TypeError","listener","evt","_events","_eventsCount","clearEvent","EventEmitter","create","__proto__","eventNames","events","name","names","call","slice","getOwnPropertySymbols","concat","listeners","handlers","l","ee","Array","listenerCount","emit","a1","a3","a4","a5","args","arguments","removeListener","undefined","apply","on","removeAllListeners","off","prefixed","ReflectOwnKeys","R","Reflect","ReflectApply","target","receiver","Function","ownKeys","getOwnPropertyNames","NumberIsNaN","Number","isNaN","value","init","Promise","resolve","reject","errorListener","err","resolver","eventTargetAgnosticAddListener","handler","flags","addErrorHandlerIfEventEmitter","_maxListeners","defaultMaxListeners","checkListener","_getMaxListeners","that","_addListener","type","prepend","existing","warning","newListener","unshift","warned","w","Error","String","count","console","warn","onceWrapper","fired","wrapFn","_onceWrap","state","wrapped","bind","_listeners","unwrap","evlistener","arr","ret","unwrapListeners","arrayClone","copy","addEventListener","wrapListener","arg","removeEventListener","defineProperty","enumerable","get","set","RangeError","getPrototypeOf","setMaxListeners","getMaxListeners","doError","error","er","message","prependListener","prependOnceListener","position","originalListener","shift","index","pop","spliceOne","key","keys","rawListeners","path","replace","segment","_","command","toLowerCase","numbers","match","number","map","parseValues","splice","h","s","t","v","Action","constructor","done","queued","after","play","pause","reset","TargetedAction","seconds","super","time","timeDistance","Interpolations","linear","smooth","smooth2","smoother","fade","pow2out","pow","MoveTo","interpolation","tick","delta","startX","startY","factor","ScaleTo","scale","RotateTo","rotation","startRotation","Sequence","actions","Parallel","allDone","action","Repeat","times","FadeTo","alpha","startAlpha","Delay","RunFunc","TintTo","tint","tintableTarget","currentTint","startTint","setValue","red","green","blue","Actions","moveTo","fadeTo","fadeOut","fadeOutAndRemove","sequence","remove","fadeIn","runFunc","parent","removeChild","delay","scaleTo","rotateTo","tintTo","parallel","repeat","indexOf","clear","f","appendChild","dom","u","children","style","display","document","createElement","cssText","preventDefault","k","performance","Date","now","g","Panel","self","memory","REVISION","addPanel","showPanel","begin","update","usedJSHeapSize","jsHeapSizeLimit","domElement","setMode","round","window","devicePixelRatio","width","height","getContext","font","textBaseline","fillStyle","fillRect","fillText","globalAlpha","drawImage","instance","getInstance","Filter","destination","source","connect","disconnect","destroy","WebAudioUtils","setParamValue","param","setValueAtTime","audioContext","currentTime","_EqualizerFilter","f32","f64","f125","f250","f500","f1k","f2k","f4k","f8k","f16k","bands","equalizerBands","F32","gain","F64","F125","F250","F500","F1K","F2K","F4K","F8K","F16K","useLegacy","band","node","createBiquadFilter","Q","frequency","bandsMap","setGain","getGain","forEach","EqualizerFilter","HTMLAudioContext","speed","muted","volume","paused","refresh","refreshPaused","filters","_filters","toggleMute","togglePause","id","_HTMLAudioInstance","loop","progress","_source","_duration","_paused","_onPlay","_playing","_onPause","media","duration","cloneNode","src","url","onplay","onpause","_media","_internalStop","onended","_speed","_volume","_loop","_muted","global","sound","globalVolume","soundVolume","instanceVolume","playbackRate","pausedReal","_pausedReal","_end","options","assert","_start","PADDING","onloadedmetadata","shared","add","_onUpdate","_onComplete","toString","HTMLAudioInstance","HTMLAudioMedia","Audio","isPlayable","readyState","load","callback","isLoaded","autoPlayStart","setTimeout","onLoad","removeListeners","onAbort","onError","code","SoundSprite","assign","complete","extensions","mimes","supported","typeOverrides","overrides","m4a","oga","opus","caf","audio","formats","no","ext","canByExt","canPlayType","canByType","validateFormats","WebAudioInstance","_elapsed","_update","filter","_gain","applyFilters","nodes","cloneBufferSource","buffer","_lastUpdate","_now","loopEnd","loopStart","enableTicker","enabled","_updateListener","_progress","force","soundLength","Filterable","input","output","_output","_input","prevFilter","_WebAudioNodes","bufferSource","createBufferSource","createGain","analyser","createAnalyser","script","_script","createScriptProcessor","BUFFER_SIZE","orig","bufferSize","WebAudioNodes","_nodes","_decode","_loadUrl","response","fetch","arrayBuffer","audioBufferReadyFn","AudioBuffer","decode","_Sound","from","ArrayBuffer","HTMLAudioElement","isArray","autoPlay","singleInstance","preload","loaded","freeze","_instances","_sprites","_autoPlayOptions","_preloadQueue","isPlaying","preferUrl","sprites","addSprites","_preload","urls","file","extname","resume","results","alias","sprite","_removeInstances","removeSprites","offset","resolve2","_createInstance","instances","_poolInstance","_pool","WebAudioContext","win","ctx","AudioContext","compressor","createDynamicsCompressor","autoPause","_ctx","_offlineCtx","OfflineAudioContext","sampleRate","_locked","globalThis","_unlock","onFocus","onBlur","_pausedOnBlur","playEmptySound","createBuffer","webkitAudioContext","webkitOfflineAudioContext","close","offlineContext","suspend","handleError","decodeAudioData","catch","getAlias","asset","basename","soundAsset","extension","Asset","detection","test","async","includes","loader","LoadParser","priority","High","some","mime","startsWith","sound2","unload","_sound","setInstance","_webAudioContext","_htmlAudioContext","_sounds","_context","filtersAll","sourceOptions","options2","_getOptions","_useLegacy","legacy","disableAutoPause","exists","volumeAll","speedAll","togglePauseAll","pauseAll","resumeAll","toggleMuteAll","muteAll","unmuteAll","removeAll","stopAll","find","vertex","wgslVertex","__defProp","__publicField","obj","configurable","writable","__defNormalProp","_AdjustmentFilter","DEFAULT_OPTIONS","gpuProgram","entryPoint","fragment","glProgram","resources","adjustmentUniforms","uGamma","gamma","uContrast","contrast","uSaturation","saturation","uBrightness","brightness","uColor","uniforms","_KawaseBlurFilter","strength","quality","clamp","kawaseBlurUniforms","uOffset","Float32Array","pixelSize","kernels","_blur","_clamp","filterManager","clearMode","uvX","pixelSizeX","uvY","pixelSizeY","_quality","_kernels","applyFilter","renderTarget","getSameSizeTexture","tmp","source2","returnTexture","_generateKernels","_pixelSize","_updatePadding","padding","ceil","reduce","acc","blur","step","KawaseBlurFilter","_ExtractBrightnessFilter","extractBrightnessUniforms","uThreshold","threshold","ExtractBrightnessFilter","_AdvancedBloomFilter","advancedBloomUniforms","uBloomScale","bloomScale","uMapTexture","WHITE","_extractFilter","_blurFilter","brightTarget","bloomTarget","_AsciiFilter","size","replaceColor","color","asciiUniforms","uSize","uReplaceColor","_color","toArray","_BevelFilter","bevelUniforms","uLightColor","uLightAlpha","lightAlpha","uShadowColor","uShadowAlpha","shadowAlpha","uTransform","_lightColor","_shadowColor","lightColor","shadowColor","_rotation","_updateTransform","thickness","_thickness","cos","sin","_BloomFilter","resolution","kernelSize","_strength","_blurXFilter","horizontal","strengthX","_blurYFilter","strengthY","blendMode","_updateStrength","blurX","blurY","_BulgePinchFilter","bulgePinchUniforms","uDimensions","uCenter","center","uRadius","radius","uStrength","frame","centerX","centerY","visitor","GradientParser","stringify","visit_gradient","orientation","visit","colorStops","at","visit_color","join","resultColor","elements","element","visit_array","nodeVisitor","root","parse","tokens","linearGradient","repeatingLinearGradient","radialGradient","repeatingRadialGradient","sideOrCorner","extentKeywords","positionKeywords","pixelValue","percentageValue","emValue","angleValue","startCall","endCall","comma","hexColor","literalColor","rgbColor","rgbaColor","msg","matchDefinition","matchGradient","matchLinearOrientation","matchListRadialOrientations","gradientType","pattern","orientationMatcher","matchCall","captures","scan","matchListing","matchColorStop","radialOrientations","lookaheadCache","radialOrientation","matchRadialOrientation","ellipse","circle","radialType","matchLength","matchExtentKeyword","matchDistance","matchAtPosition","extent","positionAt","defaultPosition","matchPositioning","positioning","location","matcher","matchNumber","captureIndex","regexp","blankCaptures","exec","consume","substr","ast","parseCssGradient","cssGradient","cssGradientNodes","value_","trim","trimCssGradient","cssGradientNode","supportedTypes","typeFromCssType","stops","offsets","cssStop","stopOffset","parseFloat","findNextFixedStop","fromIndex","indexDelta","prevFixedOffset","nextFixed","stepSize","fixFloatRounding","offsetsFromCssColorStops","colorString","colorAsStringFromCssStop","stopsFromCssStops","angle","supportedValues","left","top","bottom","right","angleFromDirectionalValue","angleFromCssOrientation","substring","_ColorGradientFilter","css","defaults","maxColors","baseUniforms","uOptions","uCounts","stopsUniforms","uColors","maxStops","uStops","_stops","sortedStops","sortColorStops","indexStart","LINEAR","_ColorMapFilter","colorMap","nearest","mix","colorMapUniforms","uMix","uSliceSize","uSlicePixelSize","uSliceInnerSize","uMapSampler","colorSize","_size","_colorMap","scaleMode","_scaleMode","autoGenerateMipmaps","_sliceSize","_slicePixelSize","_sliceInnerSize","_nearest","texture","updateColorMap","_ColorOverlayFilter","colorOverlayUniforms","uAlpha","_ColorReplaceFilter","originalColor","targetColor","tolerance","colorReplaceUniforms","uOriginalColor","uTargetColor","uTolerance","_originalColor","_targetColor","newColor","epsilon","_ConvolutionFilter","matrix","convolutionUniforms","uMatrix","uTexelSize","_CRTFilter","crtUniforms","uLine","uNoise","uVignette","uSeed","seed","uTime","curvature","lineWidth","lineContrast","verticalLine","noise","noiseSize","vignetting","vignettingAlpha","vignettingBlur","_DotFilter","grayscale","dotUniforms","uScale","uAngle","uGrayScale","_DropShadowFilter","dropShadowUniforms","_basePass","shadowOnly","offsetX","offsetY","offsetPadding","DropShadowFilter","_GlitchFilter","canvas","sampleSize","resource","glitchUniforms","uAspect","uFillMode","fillMode","uDirection","direction","uRed","uGreen","uBlue","uDisplacementMap","uDisplacementSampler","_canvas","_randomizeSizes","_sizes","_slices","minSize","average","rest","averageWidth","random","ratio","sqrt","shuffle","rand","temp","_randomizeOffsets","_offsets","redraw","clearRect","floor","sizes","slices","_GlowFilter","distance","toFixed","glowUniforms","uDistance","innerStrength","outerStrength","uQuality","uKnockout","knockout","_GodrayFilter","godrayUniforms","uLight","uParallel","uRay","_angleLight","_center","_angle","radians","lacunarity","_HslAdjustmentFilter","hslUniforms","uHsl","uColorize","colorize","hue","_hue","PI","lightness","_MotionBlurFilter","velocity","motionBlurUniforms","uVelocity","uKernelSize","trunc","_updateDirty","velocityX","velocityY","_kernelSize","_MultiColorReplaceFilter","replacements","multiColorReplaceUniforms","uOriginalColors","uTargetColors","_maxColors","originals","targets","colorCount","pair","_replacements","_OldFilmFilter","oldFilmUniforms","uSepia","sepia","uScratch","uVignetting","scratch","scratchDensity","scratchWidth","_OutlineFilter","getAngleStep","outlineUniforms","uThickness","uAngleStep","MAX_SAMPLES","MIN_SAMPLES","_RadialBlurFilter","radialBlurUniforms","uRadian","_updateKernelSize","_ReflectionFilter","reflectionUniforms","uMirror","mirror","uBoundary","boundary","uAmplitude","amplitude","uWavelength","waveLength","amplitudeStart","amplitudeEnd","wavelengthStart","wavelengthEnd","alphaStart","alphaEnd","_RGBSplitFilter","rgbSplitUniforms","redX","redY","greenX","greenY","blueX","blueY","_ShockwaveFilter","shockwaveUniforms","uSpeed","uWave","wavelength","_SimpleLightmapFilter","lightMap","simpleLightmapUniforms","_lightMap","_TiltShiftAxisFilter","tiltShiftUniforms","uBlur","gradientBlur","uStart","uEnd","uDelta","uTexSize","innerWidth","innerHeight","_tiltAxis","axis","updateDelta","dx","dy","isVert","_TwistFilter","twistUniforms","uTwist","_ZoomBlurFilter","maxKernelSize","zoomBlurUniforms","uRadii","innerRadius","down","move","up","wheel","resize","S","M","__esModule","default","W","o","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","easeOutSine","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","easeOutCirc","easeInOutCirc","easeInElastic","asin","easeOutElastic","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInBounce","easeOutBounce","easeInOutBounce","P","removeOnInterrupt","ease","C","startWidth","startHeight","deltaWidth","deltaHeight","setupPosition","setupZoom","deltaX","deltaY","keepCenter","screenWidth","scaleX","scaleY","screenHeight","screenWidthInWorldPixels","screenHeightInWorldPixels","plugins","fitWidth","fitHeight","moveCenter","callbackOnComplete","viewport","original","I","sides","friction","underflow","bounceBox","underflowX","underflowY","isActive","toX","toY","bounce","calcUnderflowX","screenWorldWidth","calcUnderflowY","screenWorldHeight","oob","worldWidth","worldHeight","topLeft","bottomRight","percentChangeX","percentChangeY","active","Y","X","parseUnderflow","noUnderflow","decelerate","minWidth","minHeight","maxWidth","maxHeight","minScale","maxScale","A","worldScreenWidth","worldScreenHeight","minSpeed","T","saved","timeSinceRelease","handleMoved","activate","log","E","pressDrag","wheelScroll","reverse","clampWheel","mouseButtons","keyToPress","ignoreKeyToPressOnTouch","lineHeight","wheelSwapAxes","D","windowEventHandlers","moved","xDirection","yDirection","keyIsPressed","handleKeyPresses","addWindowEventHandler","mouse","checkButtons","pointerType","button","checkKeyPress","current","pointerId","checkThreshold","screen","world","toWorld","touches","wheelZoom","ctrlKey","deltaMode","passiveWheel","stopPropagation","L","acceleration","U","atan2","F","noDecelerate","allowButtons","B","radiusSquared","vertical","buttons","toScreen","decelerateHorizontal","decelerateVertical","V","noDrag","percent","N","pinching","isAxisX","isAxisY","toLocal","toGlobal","lastCenter","Z","interrupt","removeOnComplete","forceStart","snapStart","snapping","corner","moveCorner","noMove","K","xIndependent","yIndependent","xScale","yScale","container","createSnapping","trackpadPinch","G","smoothing","smoothingCenter","smoothingCount","pinch","getPointerPosition","addListeners","eventMode","forceHitArea","hitArea","allowPreserveDragOutside","wheelFunction","handleWheel","passive","isMouseDown","visible","clone","clickedAvailable","mapPositionToPoint","clientX","clientY","J","$","noTicker","disableOnContextMenu","ticker","et","_disableOnContextMenu","_worldWidth","_worldHeight","tickerFunction","elapsedMS","lastViewport","moving","zooming","_hitAreaDefault","_dirty","dirty","getVisibleBounds","findFitWidth","findFitHeight","findFit","findCover","fitWorld","fit","setZoom","zoomPercent","zoom","scaled","snapZoom","OOB","cornerPoint","_forceHitArea","drag","snap","follow","animate","clampZoom","mouseEdges","_pause","ensureVisible","Cache","_parsers","_cache","Map","_cacheMap","cacheableAssets","parsers","parser","getCacheableAssets","cacheableMap","entries","key2","cacheKeys","cachedAssets","val","cacheMap","delete","LoaderParserPriority","LoaderParserPriority2","processX","base","ids","depth","tags","createStringVariations","string","vars","split","Resolver","_defaultBundleIdentifierOptions","connector","createBundleAssetId","bundleId","assetId","_bundleIdConnector","extractAssetIdFromBundle","assetBundleId","_createBundleAssetId","_extractAssetIdFromBundle","_assetMap","_preferredOrder","_resolverHash","_bundles","setBundleIdentifier","bundleIdentifier","prefer","preferOrders","params","basePath","_basePath","rootPath","_rootPath","_manifest","_defaultSearchParams","setDefaultSearchParams","searchParams","queryValues","encodeURIComponent","convertToList","addManifest","manifest","bundles","bundle","addBundle","assets","assetNames","convertedAssets","srcs","aliases","bundleAssetId","bundleIds","keyCheck","hasKey","format","loadParser","srcsToUse","src2","aliasesToUse","resolvedAssets","formattedAsset","_buildResolvedAsset","resolveBundle","singleAsset","isSingleItem","out","resolveUrl","preferredOrder","_getPreferredOrder","priorityKey","filteredAssets","hasBundle","preferred","preference","_appendDefaultSearchParams","assetData","toAbsolute","RETINA_PREFIX","transform","forceTransform","item","copySearchParams","targetUrl","sourceUrl","grad","turn","rad","isFinite","parseInt","object","H","parsed","rgba","isValid","isDark","isLight","toHex","toRgb","toRgbString","toHsl","toHslString","toHsv","invert","saturate","desaturate","lighten","darken","rotate","isEqual","white","bisque","cadetblue","chartreuse","chocolate","coral","antiquewhite","aqua","azure","whitesmoke","papayawhip","plum","blanchedalmond","black","gold","goldenrod","gainsboro","cornsilk","cornflowerblue","burlywood","aquamarine","beige","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkkhaki","darkgray","darkgreen","darkgrey","peachpuff","darkmagenta","darkred","darkorchid","darkorange","darkslateblue","gray","darkslategray","darkslategrey","deeppink","deepskyblue","wheat","firebrick","floralwhite","ghostwhite","darkviolet","magenta","dodgerblue","grey","honeydew","hotpink","blueviolet","forestgreen","lawngreen","indianred","indigo","fuchsia","brown","maroon","mediumblue","lightcoral","darkturquoise","lightcyan","ivory","lightyellow","lightsalmon","lightseagreen","linen","mediumaquamarine","lemonchiffon","lime","khaki","mediumseagreen","limegreen","mediumspringgreen","lightskyblue","lightblue","midnightblue","lightpink","mistyrose","moccasin","mintcream","lightslategray","lightslategrey","navajowhite","navy","mediumvioletred","powderblue","palegoldenrod","oldlace","paleturquoise","mediumturquoise","mediumorchid","rebeccapurple","lightsteelblue","mediumslateblue","thistle","orchid","mediumpurple","purple","pink","skyblue","springgreen","palegreen","yellow","slateblue","lavenderblush","peru","palevioletred","violet","teal","slategray","slategrey","aliceblue","darkseagreen","darkolivegreen","greenyellow","seagreen","seashell","tomato","silver","sienna","lavender","lightgreen","orange","orangered","steelblue","royalblue","turquoise","yellowgreen","salmon","saddlebrown","sandybrown","rosybrown","darksalmon","lightgoldenrodyellow","snow","lightgrey","lightgray","dimgray","dimgrey","olivedrab","olive","toName","closest","_Color","_value","_components","fill","_int","_cloneSource","_isSourceEqual","_normalize","isView","value1","value2","type1","every","keys1","keys2","toRgba","toRgbaString","toUint8RgbArray","_arrayRgb","_arrayRgba","toRgbArray","toNumber","toBgrNumber","toLittleEndianNumber","multiply","_temp","_refreshInt","premultiply","applyToRGB","toPremultiplied","hexString","toHexa","alphaString","setAlpha","Uint8Array","Uint8ClampedArray","HEX_PATTERN","isColorLike","Color","currentAdapter","createCanvas","getCanvasRenderingContext2D","CanvasRenderingContext2D","getWebGLRenderingContext","WebGLRenderingContext","getNavigator","navigator","getBaseUrl","baseURI","href","getFontFaceSet","fonts","parseXML","xml","DOMParser","parseFromString","DOMAdapter","adapter","ExtensionType","ExtensionType2","normalizeExtension","ref","normalizeExtensionPriority","defaultPriority","_addHandlers","_removeHandlers","_queue","extensions2","handle","onAdd","onRemove","addHandlers","removeHandlers","handleByMap","handleByNamedList","findIndex","handleByList","_Filter","defaultOptions","_state","for2d","antialias","blendRequired","addResource","gpu","gl","FilterEffect","pipe","filterArea","browserExt","Environment","webworkerExt","WorkerGlobalScope","_isWebGLSupported","_isWebGPUSupported","isWebGPUSupported","requestAdapter","requestDevice","renderPriority","_Application","stage","Container","deprecation","renderer","RendererClass","finalOptions","rendererType","WebGPURenderer","webgpu","failIfMajorPerformanceCaveat","AbstractRenderer","contextOptions","stencil","success","getContextAttributes","loseContext","getExtension","WebGLRenderer","webgl","autoDetectRenderer","_plugins","plugin","render","view","rendererDestroyOptions","Application","BitmapFont","AbstractBitmapFont","textures","pages","pageData","chars","charData","textureFrame","textureSource","page","frameReal","Rectangle","Texture","codePointAt","xOffset","yOffset","xAdvance","kerning","baseRenderedFontSize","fontSize","baseMeasurementFontSize","fontMetrics","ascent","descent","baseLineOffset","fontFamily","distanceField","range","install","BitmapFontManager","uninstall","bitmapFontTextParser","txt","items","rawData","info","common","char","kernings","attributeList","itemData","i2","strValue","floatValue","distanceRange","fieldType","face","charNode","letter","fromCharCode","xoffset","yoffset","xadvance","first","second","amount","bitmapFontXMLParser","getElementsByTagName","getAttribute","bitmapFontXMLStringParser","validExtensions","bitmapFontCachePlugin","CacheParser","loadBitmapFont","LoaderParser","Normal","bitmapFontData","textureUrls","textureOptions","alphaMode","pageFile","imagePath","dirname","loadedTextures","_options","text","bitmapFont","_resolvedAsset","all","_sourceOrigin","BackgroundLoader","verbose","_loader","_assetList","_isLoading","_maxConcurrent","assetUrls","_isActive","_next","toLoad","toLoadAmount","cacheTextureArray","testImageFormat","imageData","image","Image","onload","onerror","blob","createImageBitmap","detectAvif","DetectionParser","imageFormats","detectDefaults","inWorker","testVideoFormat","mimeType","detectMp4","detectOgv","detectWebm","detectWebp","Loader","_parsersValidated","Proxy","promiseCache","_getLoadPromiseAndParser","promise","_parserHash","parserX","parser2","testParse","assetsToLoadIn","onProgress","_validateParsers","assetsToLoad","total","promises","assetsToUnloadIn","loadPromise","loadedAsset","hash","checkDataUrl","checkExtension","tempURL","loadJson","Low","json","loadTxt","validWeights","validFontExtensions","validFontMIMEs","CSS_IDENT_TOKEN_REGEX","validURICharactersRegex","loadWebFont","fontFaces","family","nameTokens","word","charAt","toUpperCase","valid","token","fontFamilyName","getFontFamilyName","weights","weight","FontFace","uri","encodeURI","getResolutionOfUrl","defaultValue","createTexture","label","destroyed","loadSvg","config","crossOrigin","parseAsGraphicsContext","svgSource","GraphicsContext","svg","loadAsGraphics","blobUrl","URL","createObjectURL","revokeObjectURL","_p","ImageSource","loadAsTexture","WORKER_URL","WorkerInstance","Blob","worker","Worker","MAX_WORKERS","UUID","WorkerManager","_initialized","_createdWorkers","_workerPool","_resolveHash","isImageBitmapSupported","_isImageBitmapSupported","terminate","loadImageBitmap","_run","_initWorkers","_getWorker","hardwareConcurrency","_complete","_returnWorker","uuid","toDo","postMessage","validImageExtensions","validImageMIMEs","loadTextures","preferWorkers","preferCreateImageBitmap","ok","status","statusText","imageBlob","validVideoExtensions","validVideoMIMEs","loadVideoTextures","isValidDataUrl","isValidExtension","VideoSource","detectVideoAlphaMode","videoElement","attributeMap","autoLoad","playsinline","autoplay","setAttribute","crossorigin","loc","parsedUrl","hostname","port","protocol","determineCrossOrigin","sourceElement","lastIndexOf","MIME_TYPES","onCanPlay","cleanup","resolveTextureUrl","ResolveParser","resolveJsonUrl","endsWith","Assets","_detections","cache","_backgroundLoader","defaultSearchParams","resolutionPref","texturePreference","_detectFormats","preferredFormats","skipDetections","detections","preferences","setPreferences","urlArray","resolveResults","_mapLoadToResolve","loadBundle","_onProgress","resolveResult","then","resolveResult2","backgroundLoad","values","backgroundLoadBundle","resolveArray","Set","loadedAssets","_unloadFromResolved","unloadBundle","assetKeyMap","_AlphaFilter","GpuProgram","GlProgram","alphaUniforms","UniformGroup","AlphaFilter","GAUSSIAN_VALUES","fragTemplate","generateBlurGlProgram","halfLength","template","vertSource","blurLoop","generateBlurVertSource","kernel","fragSource","generateBlurFragSource","_BlurFilterPass","blurStructSource","blurOutSource","blurSamplingSource","kernelValue","blurStruct","blurOut","blurSampling","finalSource","generateBlurProgram","blurUniforms","_uniforms","passes","tempTexture","TexturePool","flip","flop","blend","WEBGPU","BlurFilterPass","BlurFilter","compatibleRenderers","BOTH","_repeatEdgePixels","blurXFilter","blurYFilter","repeatEdgePixels","xStrength","yStrength","updatePadding","AnimatedSprite","Sprite","autoUpdate","_textures","_durations","_autoUpdate","_isConnectedToTicker","animationSpeed","updateAnchor","onComplete","onFrameChange","onLoop","_currentTime","_previousFrame","Ticker","HIGH","gotoAndStop","frameNumber","currentFrame","gotoAndPlay","deltaTime","elapsed","previousFrame","lag","_updateTexture","anchor","copyFrom","defaultAnchor","fromFrames","frames","fromImages","images","totalFrames","playing","AbstractText","styleClass","roundPixels","batched","_resolution","_autoResolution","_didTextUpdate","_roundPixels","_bounds","Bounds","_boundsDirty","_styleClass","allowChildren","_anchor","ObservablePoint","onViewUpdate","_text","_style","bounds","_updateBounds","_setWidth","_setHeight","getSize","setSize","convertedWidth","convertedHeight","addBounds","addFrame","containsPoint","point","_didChangeId","didViewUpdate","renderGroup","parentRenderGroup","onChildViewUpdate","_getKey","styleKey","owner","Text","ensureOptions","TextStyle","renderPipeId","canvasMeasurement","CanvasTextMetrics","measureText","_x","_y","Matrix","tx","ty","array","fromArray","transpose","pos","newPos","applyInverse","translate","c1","tx1","append","b1","d1","appendFrom","c2","d2","setTransform","pivotX","pivotY","skewX","skewY","decompose","pivot","skew","isIdentity","identity","copyTo","IDENTITY","identityMatrix","tempMatrix","PI_2","RAD_TO_DEG","DEG_TO_RAD","nextPow2","isPow2","observer","_observer","Point","tempPoint","tempPoints","isEmpty","EMPTY","copyFromBounds","rectangle","contains","strokeContains","strokeWidth","other","x02","y02","lt","lb","rt","rb","nx","ny","n00","n10","n01","n11","m00","m10","m01","m11","pad","paddingX","paddingY","x2","y2","eps","enlarge","getBounds","generateIfTestSrc","maxIfs","maxTexturesPerBatchCache","getMaxTexturesPerBatch","getTestContext","getParameter","MAX_TEXTURE_IMAGE_UNITS","shader","createShader","FRAGMENT_SHADER","fragmentSrc","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","checkMaxIfStatementsInShader","cachedGroups","getTextureBatchBindGroup","uid","bindGroupResources","bindIndex","maxTextures","bindGroup","generateTextureBatchBindGroup","placeHolderBufferData","placeHolderIndexData","Uint32Array","BatchGeometry","attributeBuffer","usage","VERTEX","COPY_DST","shrinkToFit","attributes","aPosition","stride","vertexSize","aUV","aColor","aTextureIdAndRound","indexBuffer","INDEX","ViewableBuffer","sizeOrBuffer","rawBinaryData","uint32View","float32View","byteLength","int8View","_int8View","Int8Array","uint8View","_uint8View","int16View","_int16View","Int16Array","int32View","_int32View","Int32Array","float64View","_float64Array","Float64Array","bigUint64View","_bigUint64Array","BigUint64Array","uint16View","sizeOf","BatchTextureArray","Batch","canBundle","gpuBindGroup","batcher","BATCH_TICK","_Batcher","batchIndex","batches","_vertexSize","_elements","_batchPool","_batchPoolIndex","_textureBatchPool","_textureBatchPoolIndex","indexSize","Uint16Array","_maxTextures","elementSize","elementStart","attributeSize","_batchIndexStart","_batchIndexSize","batchableObject","checkAndUpdateTexture","textureId","batch","updateElement","packAttributes","instructionSet","_a","_b","_c","_d","_e","_f","_g","_h","textureBatch","firstElement","getAdjustedBlendModeBlend","_resizeAttributeBuffer","_resizeIndexBuffer","u32","iBuffer","adjustedBlendMode","blendModeChange","_batchTick","_finishBatch","_textureBindLocation","packIndex","finish","break","ensureAttributeBuffer","ensureIndexBuffer","newSize","newArrayBuffer","fastCopy","newIndexBuffer","BYTES_PER_ELEMENT","Batcher","tempBounds","addMaskBounds","mask","skipUpdateTransform","boundsToMask","measurable","getGlobalBounds","addBoundsMask","addMaskLocalBounds","localRoot","relativeMask","getMatrixRelativeToParent","getLocalBounds","return","updateLocalTransform","localTransform","AlphaMask","renderMaskToTexture","renderable","includeInBuild","addLocalBounds","hitTestFn","MaskEffect","ColorMask","StencilMask","CanvasSource","BufferImageSource","CLEAR","CLEAR2","maxFragmentPrecision","getMaxFragmentPrecision","getShaderPrecisionFormat","shaderFragment","HIGH_FLOAT","precision","fragmentNameCache","VertexNameCache","processes","stripVersion","isES300","ensurePrecision","isFragment","maxSupportedPrecision","maxSupportedFragmentPrecision","maxSupportedVertexPrecision","requestedFragmentPrecision","requestedVertexPrecision","addProgramDefines","setProgramName","nameCache","insertVersion","programCache","_GlProgram","preprocessorOptions","preferredFragmentPrecision","preferredVertexPrecision","processKey","processOptions","_key","createIdFromString","_attributeData","_uniformData","_uniformBlockData","transformFeedbackVaryings","isContextLost","BindGroup","setResource","_updateKey","keyParts","_resourceId","currentResource","onResourceChange","getResource","_touch","_touched","WGSL_TO_VERTEX_TYPES","vec2f","vec3f","vec4f","i32","bool","extractStructAndGroups","wgsl","groupPattern","bindingPattern","namePattern","typePattern","structMemberPattern","structName","groups","group","binding","isUniform","structs","struct","members","member","name2","ShaderStage","ShaderStage2","_layoutKey","layout","gpuLayout","structsAndGroups","vertexStructsAndGroups","fragmentStructsAndGroups","structNameSet","dupeGroupKeySet","removeStructAndGroupDuplicates","generateLayoutHash","visibility","FRAGMENT","sampler","sampleType","viewDimension","multisampled","generateGpuLayoutGroups","autoAssignGlobalUniforms","globalUniforms","autoAssignLocalUniforms","localUniforms","_generateProgramKey","bigKey","attributeData","mainVertStart","arrowFunctionStart","functionArgsSubstring","inputsRegex","getAttributeInfoFromFormat","extractAttributesFromGpuProgram","Buffer","_resourceType","_updateID","_data","mappedAtCreation","descriptor","setDataWithSize","static","STATIC","syncGPU","_updateSize","oldData","sizeInBytes","BufferUsage","BufferUsage2","sourceBuffer","destinationBuffer","lengthDouble","sourceFloat64View","remainingBytes","sourceUint8View","ensureIsBuffer","ensureIsAttribute","attribute","Geometry","topology","instanceCount","buffers","onBufferUpdate","getIndex","getBuffer","geometry","attributeId","byteSize","getGeometryBounds","destroyBuffers","attributeFormatData","uint8x2","normalised","uint8x4","sint8x2","sint8x4","unorm8x2","unorm8x4","snorm8x2","snorm8x4","uint16x2","uint16x4","sint16x2","sint16x4","unorm16x2","unorm16x4","snorm16x2","snorm16x4","float16x2","float16x4","float32","float32x2","float32x3","float32x4","uint32","uint32x2","uint32x3","uint32x4","sint32","sint32x2","sint32x3","sint32x4","InstructionSet","instructions","instructionSize","instruction","table","Shader","_uniformBindMap","_ownedBindGroups","groupMap","WEBGL","nameHash","uniformName","groupData","bindTick","_buildResourceAccessor","groupIndex","uniformsOut","destroyPrograms","UNIFORM_TYPES_VALUES","UNIFORM_TYPES_MAP","getDefaultUniformValue","_UniformGroup","uniformStructures","isUniformGroup","_dirtyId","uniformData","ubo","isStatic","_signature","blendModeIds","normal","overlay","erase","_State","polygonOffset","depthMask","cullMode","culling","clockwiseFrontFace","depthTest","_blendMode","_blendModeId","_polygonOffset","default2d","State","BLEND_TO_NPM","STENCIL_MODES","STENCIL_MODES2","environments","defaultRunners","_AbstractRenderer","runners","renderPipes","_initOptions","_systemsHash","combinedRunners","_addRunners","_unsafeEvalCheck","skip","skipExtensionImports","manageImports","env","loadEnvironmentExtensions","_addSystems","systems","_addPipes","renderPipeAdaptors","systemName","deprecated","renderTexture","_lastObjectRendered","clearColor","background","colorRgba","isRGBAArray","prerender","renderStart","renderEnd","postrender","desiredScreenWidth","desiredScreenHeight","ALL","resolutionChange","lastObjectRendered","renderingToScreen","runnerIds","runnerId","SystemRunner","_addSystem","ClassRef","system","pipes","pipeAdaptors","adaptors","adaptor","PipeClass","Adaptor","runner","generateTexture","textureGenerator","unsafeEvalSupported","_name","a0","a6","a7","empty","CanvasPool","canvasOptions","_canvasPool","enableFullScreen","_createCanvasAndContext","pixelWidth","pixelHeight","getOptimalCanvasAndContext","canvasAndContext","returnCanvasAndContext","ux","uy","vx","vy","rotationCayley","rotationMatrices","signum","row","_ux","_uy","_vx","_vy","mat","groupD8","SE","SW","NW","NE","MIRROR_VERTICAL","MAIN_DIAGONAL","MIRROR_HORIZONTAL","REVERSE_DIAGONAL","uX","ind","uY","vX","vY","inv","rotationSecond","rotationFirst","sub","rotate180","isVertical","byDirection","matrixAppendRotationInv","NOOP","defaultBorders","dynamic","uvs","x3","y3","noFrame","isTexture","TextureSource","updateUvs","textureMatrix","_textureMatrix","TextureMatrix","nX","nY","nW","nH","w2","h2","cX","cY","destroySource","baseTexture","tempMat","clampMargin","mapCoord","uClampFrame","uClampOffset","_textureID","clampOffset","isSimple","_texture","multiplyUvs","tex","texBase","margin","_poolKeyHash","_texturePool","autoGarbageCollect","getOptimalTexture","frameWidth","frameHeight","po2Width","po2Height","destroyTextures","uploadMethodId","autoDensity","resizeCanvas","transparent","didResize","HTMLCanvasElement","OffscreenCanvas","HTMLImageElement","ImageBitmap","idHash","_TextureStyle","_maxAnisotropy","addressMode","addressModeU","addressModeV","addressModeW","magFilter","minFilter","mipmapFilter","lodMinClamp","lodMaxClamp","compare","maxAnisotropy","wrapMode","_sharedResourceId","_generateResourceId","createResourceIdFromString","TextureStyle","_TextureSource","sampleCount","mipLevelCount","dimension","resourceWidth","resourceHeight","definedProps","_refreshPOT","_onStyleChange","repeatMode","naturalWidth","videoWidth","displayWidth","naturalHeight","videoHeight","displayHeight","newPixelWidth","newPixelHeight","updateMipmaps","isPowerOfTwo","_resource","_VideoSource","isReady","_updateFPS","updateFPS","_msToNextUpdate","_videoFrameRequestCallback","_videoFrameRequestCallbackHandle","_load","_resolve","_reject","_onCanPlay","_onCanPlayThrough","_onError","_onPlayStart","_onPlayStop","_onSeeked","updateFrame","requestVideoFrameCallback","HAVE_ENOUGH_DATA","HAVE_FUTURE_DATA","_isSourceReady","_mediaReady","preloadTimeoutMs","_preloadTimeout","ErrorEvent","_isSourcePlaying","ended","_configureAutoUpdate","clearTimeout","cancelVideoFrameCallback","HTMLVideoElement","VideoFrame","ogv","mov","m4v","sources","textureSourceFrom","hasResource","res","opts","Source","skipCache","resourceToTexture","idCounts","groupId","RendererType","RendererType2","childrenHelperMixin","removeChildren","beginIndex","endIndex","removed","child","removeItems","removeChildAt","getChildAt","setChildIndex","getChildIndex","addChildAt","currentIndex","didChange","_updateFlags","addChild","sortableChildren","sortDirty","swapChildren","child2","index1","index2","structureDidChange","removeFromParent","reparentChild","reparentChildAt","childMat","worldTransform","newMatrix","setFromMatrix","MaskEffectManager","_effectClasses","_tests","maskClass","getMaskEffect","returnMaskEffect","effect","effectsMixin","_maskEffect","_filterEffect","effects","addEffect","_updateIsSimple","removeEffect","hasFilters","findMixin","getChildByName","deep","getChildByLabel","RegExp","found","getChildrenByLabel","checkChildrenDidChange","previousData","changeId","measureMixin","_localBoundsCacheId","_localBoundsCacheData","localWidth","localHeight","localBounds","localBoundsCacheData","skipUpdate","onRenderMixin","_onRender","onRender","func","removeOnRender","addOnRender","sortMixin","_zIndex","zIndex","depthOfChildModified","sortChildren","toLocalGlobalMixin","getGlobalPosition","_position","globalMatrix","RenderGroup","renderGroupParent","renderGroupChildren","worldColorAlpha","worldColor","worldAlpha","childrenToUpdate","updateTick","childrenRenderablesToUpdate","_onRenderContainers","childrenAtDepth","addRenderGroupChild","renderGroupChild","_removeRenderGroupChild","relativeRenderGroupDepth","onChildUpdate","updateRenderable","globalDisplayStatus","isRenderable","localDisplayStatus","runOnRender","getChildren","_getChildren","defaultSkew","defaultPivot","defaultScale","UPDATE_COLOR","UPDATE_BLEND","UPDATE_VISIBLE","parentRenderGroupIndex","relativeGroupTransform","groupTransform","_scale","_pivot","_skew","_cx","_sx","_cy","_sy","localColor","localAlpha","groupAlpha","groupColor","groupColorAlpha","localBlendMode","groupBlendMode","_didLocalTransformChangeId","ignore","assignWithIgnore","mixin","defineProperties","getOwnPropertyDescriptors","_updateSkew","isRenderGroup","enableRenderGroup","disableRenderGroup","_worldTransform","updateTransform","localTransformChangeId","sx","sy","bgr","valueNumber","culled","oldChildren","cullArea","cullable","cullableChildren","defaultMatrix","_rectangle","addRect","rect","applyMatrix","fitBounds","isPositive","addVertexData","vertexData","beginOffset","endOffset","localX","localY","parentTransform","pooledMatrix","updateTransformBackwards","_getGlobalBounds","parentBounds","preserveBounds","boundsArea","relativeMatrix","_getLocalBounds","rootContainer","isRoot","relativeTransform","matrixPool","boundsPool","BatchableGraphics","applyTransform","indicesOffset","indices","geometryData","indexOffset","vertexOffset","graphics","positions","vertSize","rgb","argb","color1","color2","wt","textureIdAndRound","gpuBuffer","Graphics","_ownedContext","_didGraphicsUpdate","_callContextMethod","method","setFillStyle","setStrokeStyle","stroke","beginPath","cut","arc","arcTo","arcToSvg","bezierCurveTo","closePath","lineTo","quadraticCurveTo","roundRect","poly","regularPoly","roundPoly","roundShape","filletRect","chamferRect","star","restore","save","getTransform","resetTransform","rotateTransform","scaleTransform","translateTransform","strokeStyle","lineStyle","beginFill","endFill","defaultStrokeStyle","drawCircle","drawEllipse","drawPolygon","drawRect","drawRoundedRect","drawStar","Circle","r2","Ellipse","halfWidth","halfHeight","normx","normy","halfStrokeWidth","innerA","innerB","outerA","outerB","normalizedX","normalizedY","squaredDistanceToLineSegment","lenSq","xx","yy","Polygon","points","flat","il","polygon","xi","yi","xj","yj","halfStrokeWidthSqrd","iterationLength","pointsDesc","currentPoint","lastX","lastY","isCornerWithinStroke","pX","pY","cornerX","cornerY","RoundedRectangle","radius2","innerX","innerY","rightBound","bottomBound","RECURSION_LIMIT","FLT_EPSILON","PATH_DISTANCE_EPSILON","curveAngleToleranceEpsilon","mAngleTolerance","mCuspLimit","buildAdaptiveBezier","sX","sY","cp1x","cp1y","cp2x","cp2y","eX","eY","smoothness","GraphicsContextSystem","bezierSmoothness","distanceTolerance","recursive","x4","y4","level","pi","x12","y12","x23","y23","x34","y34","x123","y123","x234","y234","x1234","y1234","d3","da1","da2","a23","buildAdaptiveQuadratic","da","buildArc","steps","dist","TAU","ang1","ang2","mapToEllipse","rx","ry","cosPhi","sinPhi","out2","xp","yp","approxUnitArc","vectorAngle","dot","acos","tempRectangle","ShapePath","graphicsPath2D","shapePrimitives","_currentPoly","_graphicsPath2D","startPoly","_ensurePoly","fromX","fromY","startAngle","endAngle","counterclockwise","mm","dd","cc","tt","k1","k2","j1","j2","qy","buildArcTo","xAxisRotation","largeArcFlag","sweepFlag","pxp","pyp","lambda","rxSq","rySq","pxpSq","pypSq","radicant","centerXp","centerYp","vx1","vy1","vx2","vy2","getArcCenter","segments","outCurvePoint","curve","buildArcToSvg","currentPoly","endPoly","addPath","drawShape","sideLength","internalAngle","useQuadratic","pointLerp","numPoints","thisPoint","pRadius","lastPoint","nextPoint","lastEdgeLength","nextEdgeLength","roundedShapeQuadraticCurve","vecFrom","pp","sharpCorner","p3","v1","v2","radDirection","drawDirection","halfAngle","cRadius","lenOut","roundedShapeArc","fillet","maxFillet","inset","dir","chamfer","radiusX","radiusY","shape","lastShape","lx","ly","tempX","buildPath","shapePrimitive","boundsRect","GraphicsPath","svgPath","commands","subpaths","currentSubPath","bezierCurveToShort","quadraticCurveToShort","SVGToGraphicsPath","shapePath","_shapePath","getLastPoint","currentX","currentY","cpx1","cpy1","newGraphicsPath2D","cpx2","cpy2","adjustTransform","lastInstruction","currentMatrix","SVGParser","graphicsContext","div","innerHTML","querySelector","renderChildren","session","f1","s1","useFill","useStroke","styleParts","stylePart","parseFloatAttribute","parseStyle","pointsString","graphicsPath","nodeName","tmpPoint","_GraphicsContext","batchMode","_activePath","_transform","_fillStyle","defaultFillStyle","_strokeStyle","_stateStack","_tick","dw","dh","onUpdate","_initNextPathLocation","holePath","transformedX","transformedY","cpx","cpy","hasHit","shapes","transformedPoint","holeShapes","destroyTextureSource","customShader","alignment","miterLimit","cap","transformVertices","buildCircle","ShapeBuilder","build","roundedRect","j3","j4","y22","x22","triangulate","verticesStride","verticesOffset","centerIndex","buildEllipse","buildRoundedRectangle","square","innerWeight","outerWeight","verts","exx","eyy","eix","eiy","eox","eoy","ex","ey","cx2p0x","cy2p0y","angle0","angle1","angleDiff","absAngleDiff","segCount","angleInc","triangulateWithHoles","emptyArray","buildPolygon","buildRectangle","rectData","verticesIndex","buildTriangle","shapeBuilders","tempRect","addTextureToGeometryData","vertOffset","textureUvs","graphicsBatch","addShapePathToGeometryData","isStroke","lastIndex","flipAlignment","closed","_verticesStride","_verticesOffset","_indicesOffset","getOrientationOfPoints","firstPoint","closedShape","closedPath","midPointX","midPointY","indexCount","widthSquared","miterLimitSquared","perpX","perpY","perp1x","perp1y","dx0","dy0","dx1","dy1","cross","pDist","imx","imy","omx","omy","insideWeight","curveEps","buildLine","otherPoints","holeArrays","holePrimitives","holePrimitive","holePoints","getHoleArrays","uvsOffset","uvsStride","buildUvs","buildSimpleUvs","GpuGraphicsContext","GraphicsContextRenderData","_GraphicsContextSystem","_activeBatchers","_gpuContextHash","_graphicsDataContextHash","_returnActiveBatchers","getContextRenderData","_initContextRenderData","updateGpuContext","gpuContext","_initContext","_cleanGraphicsContextData","buildContextBatches","isBatchable","getGpuContext","graphicsData","drawBatches","onGraphicsContextDestroy","WebGLSystem","WebGPUSystem","CanvasSystem","_FillGradient","gradientStops","_styleKey","addColorStop","buildLinearGradient","defaultSize","defaultTextureSize","gradient","createLinearGradient","FillGradient","repetitionMap","FillPattern","repetition","isFillPattern","isFillGradient","handleFillPattern","defaultStyle","handleFillGradient","toFillStyle","objectStyle","handleColorLike","sourceStyle","handleFillObject","toStrokeStyle","_didSpriteUpdate","_sourceBounds","_sourceBoundsDirty","currentTexture","_width","_height","sourceBounds","_updateSourceBounds","applyFillAsTint","pageTextures","distanceFieldRange","distanceFieldType","resolveCharacters","startCode","charCodeAt","endCode","_DynamicBitmapFont","_padding","_measureCache","_currentChars","_currentX","_currentY","_currentPageIndex","_skipKerning","dynamicOptions","_textureSize","textureSize","_mipmap","mipmap","overrideFill","_fill","requestedFontSize","fontStringFromTextStyle","overrideSize","_stroke","skipKerning","measureFont","ensureCharacters","charList","_nextPage","fontScale","widthScale","fontStyle","maxCharHeight","skipTexture","metrics","paddedWidth","paddedHeight","pageData2","dropShadow","_drawGlyph","_applyKerning","newChars","measureCache","textureResolution","_setupContext","strokeThickness","lineJoin","getCanvasFillStyle","shadowOptions","dropShadowBlur","dropShadowDistance","shadowBlur","shadowOffsetX","shadowOffsetY","fontProperties","strokeText","DynamicBitmapFont","fontCount","ALPHA","NUMERIC","ALPHANUMERIC","ASCII","getFont","fontFamilyKey","fnt","dynamicFont","getLayout","getBitmapTextLayout","textStyle","flatChars","cacheKey","layoutData","lines","charPositions","spaceWidth","spacesIndex","currentLine","previousChar","firstWord","currentWord","spaceWord","nextWord","nextLine","lastChar","adjustedLetterSpacing","letterSpacing","adjustedWordWrapWidth","wordWrapWidth","isEnd","wordWrap","nextCharWidth","align","measurementData","line","alignCenter","alignRight","indy","spaceIndex","totalSpaces","alignJustify","_TextStyle","oldStyle","defaultDropShadow","dropShadowAlpha","dropShadowAngle","dropShadowColor","fillGradientStops","defaultTextStyle","gradientFill","fills","convertV7Tov8Style","fullStyle","_align","breakWords","_breakWords","_dropShadow","_createProxy","_fontFamily","_fontSize","_fontStyle","fontVariant","_fontVariant","fontWeight","_fontWeight","leading","_leading","_letterSpacing","_lineHeight","_trim","_textBaseline","whiteSpace","_whiteSpace","_wordWrap","_wordWrapWidth","_originalFill","_isFillStyle","_originalStroke","_generateKey","cb","property","newValue","contextSettings","willReadFrequently","_CanvasTextMetrics","experimentalLetterSpacingSupported","_experimentalLetterSpacingSupported","proto","lineWidths","maxLineWidth","textKey","_measurementCache","__context","_measureText","useExperimentalLetterSpacing","experimentalLetterSpacing","textLetterSpacing","graphemeSegmenter","collapseSpaces","_collapseSpaces","collapseNewlines","_collapseNewlines","canPrependSpaces","_tokenize","_isNewline","_addLine","currIsBreakingSpace","isBreakingSpace","lastIsBreakingSpace","tokenWidth","_getFromCache","canBreakWords","characters","wordWrapSplit","nextChar","canBreakChars","characterWidth","isLastToken","newLine","_trimRight","_newlines","_nextChar","_breakingSpaces","_token","_char","_index","_fonts","METRICS_STRING","BASELINE_SYMBOL","properties","actualBoundingBoxAscent","actualBoundingBoxDescent","clearMetrics","__canvas","BASELINE_MULTIPLIER","HEIGHT_MULTIPLIER","Intl","Segmenter","segmenter","genericFontFamilies","fontSizeString","fontFamilies","createPattern","fillPattern","fillGradient","valuesToIterateForKeys","generateTextStyleKey","prop","addFillStyleKey","addStokeStyleKey","addDropShadowKey","_Spritesheet","linkedSheets","animations","metaResolution","meta","_frames","_frameKeys","_batchIndex","_callback","BATCH_SIZE","_processFrames","_processAnimations","_parseComplete","_nextBatch","initialFrameIndex","frameIndex","maxFrames","sourceSize","trimmed","rotated","spriteSourceSize","borders","animName","frameName","destroyBase","Spritesheet","validImages","ignoreMultiPack","related_multi_packs","spritesheetAsset","imageTexture","imageFilename","spritesheet","multiPacks","itemUrl","sp","TickerListener","previous","_destroyed","_fn","_once","redirect","hard","_Ticker","autoStart","lastTime","started","_requestId","_maxElapsedMS","_minElapsedMS","_protected","_lastFrame","_head","deltaMS","targetFPMS","requestAnimationFrame","_requestIfNeeded","_cancelIfNeeded","cancelAnimationFrame","_startIfPossible","NORMAL","addOnce","head","FPS","minFPS","fps","maxFPS","minFPMS","_shared","_system","UPDATE_PRIORITY","UPDATE_PRIORITY2","video","video2","onloadeddata","bindTexture","TEXTURE_2D","framebuffer","createFramebuffer","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","COLOR_ATTACHMENT0","pixelStorei","UNPACK_PREMULTIPLY_ALPHA_WEBGL","UNPACK_COLORSPACE_CONVERSION_WEBGL","NONE","texImage2D","RGBA","UNSIGNED_BYTE","pixel","readPixels","deleteFramebuffer","deleteTexture","unsafeEval","startIdx","removeCount","uidCache","updateQuadBounds","sourceWidth","sourceHeight","ApplicationInitHook","__PIXI_APP_INIT__","RendererInitHook","_renderer","__PIXI_RENDERER_INIT__","warnings","v8_0_0","version","ignoreDepth","stack","groupCollapsed","groupEnd","warnCount","maxWarnings","assertPath","path2","JSON","removeUrlParams","toPosix","isUrl","isDataUrl","isBlobUrl","hasProtocol","getProtocol","matchFile","matchProtocol","customBaseUrl","customRootUrl","baseUrl","rootUrl","rootname","isAbsolute","normalize","trailingSeparator","allowAboveRoot","lastSegmentLength","lastSlash","dots","lastSlashIndex","normalizeStringPosix","joined","prevArg","joinExtensions","hasRoot","matchedSlash","origpath","extIdx","firstNonSlashEnd","startDot","startPart","preDotState","sep","delimiter","Pool","ClassType","initialSize","_count","_classType","prepopulate","totalSize","totalFree","totalUsed","BigPool","_poolsByClass","Class","getPool","stats","pool","ID","free","used","saidHello","VERSION","sayHello","userAgent"],"sourceRoot":""}